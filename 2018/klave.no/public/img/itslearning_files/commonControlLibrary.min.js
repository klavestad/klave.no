/*

 jPlayer Plugin for jQuery JavaScript Library
 http://www.jplayer.org

 Copyright (c) 2009 - 2014 Happyworm Ltd
 Licensed under the MIT license.
 http://opensource.org/licenses/MIT

 Author: Mark J Panaghiston
 Version: 2.9.2
 Date: 14th December 2014

// jQuery Alert Dialogs Plugin
//
// Version 1.1
//
// Cory S.N. LaViska
// A Beautiful Site (http://abeautifulsite.net/)
// 14 May 2009
//
// Visit http://abeautifulsite.net/notebook/87 for more information
//
// Usage:
//      jAlert( message, [title, callback] )
//      jConfirm( message, [title, callback] )
//      jPrompt( message, [value, title, callback] )
// 
// History:
//
//      1.00 - Released (29 December 2008)
//
//      1.01 - Fixed bug where unbinding would destroy all resize events
//
// License:
// 
// This plugin is dual-licensed under the GNU General Public License and the MIT License and
// is copyright 2008 A Beautiful Site, LLC. 
// https://github.com/aurels/jquery.alerts
//

 Auto-growing textareas; technique ripped from Facebook
 https://github.com/jaz303/jquery-grab-bag/blob/f1a3cc1e86cbb248bcb41391d6eff115b1be6d89/javascripts/jquery.autogrow-textarea.js

 jQuery Hotkeys Plugin
 Copyright 2010, John Resig
 Dual licensed under the MIT or GPL Version 2 licenses.

 Based upon the plugin by Tzury Bar Yochay:
 http://github.com/tzuryby/hotkeys

 Original idea by:
 Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
 iCheck v1.0.2, http://git.io/arlzeA
 ===================================
 Powerful jQuery and Zepto plugin for checkboxes and radio buttons customization

 (c) 2013 Damir Sultanov, http://fronteed.com
 MIT Licensed
 jQuery-ajaxTransport-XDomainRequest - v1.0.2 - 2014-05-02
 https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 Copyright (c) 2014 Jason Moon (@JSONMOON)
 Licensed MIT (/blob/master/LICENSE.txt)
 File: OkOrCancel.js

 A client part of the OkOrCancel control

 Dependencies :
   - jQuery 1.7.1 or higher (http://jquery.com/)
   - CommonFunctions.js

 FullCalendar v1.6.4
 Docs & License: http://arshaw.com/fullcalendar/
 (c) 2013 Adam Shaw
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,e,f){c instanceof String&&(c=String(c));for(var b=c.length,a=0;a<b;a++){var d=c[a];if(e.call(f,d,a,c))return{i:a,v:d}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,f){c!=Array.prototype&&c!=Object.prototype&&(c[e]=f.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,e,f,b){if(e){f=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var a=c[b];a in f||(f[a]={});f=f[a]}c=c[c.length-1];b=f[c];e=e(b);e!=b&&null!=e&&$jscomp.defineProperty(f,c,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,f){return $jscomp.findInternal(this,c,f).v}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var e=0;return $jscomp.iteratorPrototype(function(){return e<c.length?{done:!1,value:c[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,e){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var f=0,b={next:function(){if(f<c.length){var a=f++;return{value:e(a,c[a]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.checkStringArgs=function(c,e,f){if(null==c)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.repeat",function(c){return c?c:function(c){var e=$jscomp.checkStringArgs(this,null,"repeat");if(0>c||1342177279<c)throw new RangeError("Invalid count value");c|=0;for(var b="";c;)if(c&1&&(b+=e),c>>>=1)e+=e;return b}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c,f){return f})}},"es8","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var c={},e=Object.create(new $jscomp.global.Proxy(c,{get:function(f,b,a){return f==c&&"q"==b&&a==e}}));return!0===e.q}catch(f){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var e=c[Symbol.iterator];return e?e.call(c):$jscomp.arrayIterator(c)};
$jscomp.owns=function(c,e){return Object.prototype.hasOwnProperty.call(c,e)};
$jscomp.polyfill("WeakMap",function(c){function e(){if(!c||!Object.seal)return!1;try{var a=Object.seal({}),d=Object.seal({}),b=new c([[a,2],[d,3]]);if(2!=b.get(a)||3!=b.get(d))return!1;b.delete(a);b.set(d,4);return!b.has(a)&&4==b.get(d)}catch(m){return!1}}function f(d){$jscomp.owns(d,a)||$jscomp.defineProperty(d,a,{value:{}})}function b(a){var d=Object[a];d&&(Object[a]=function(a){f(a);return d(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(e())return c;
var a="$jscomp_hidden_"+Math.random();b("freeze");b("preventExtensions");b("seal");var d=0,g=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};g.prototype.set=function(d,b){f(d);if(!$jscomp.owns(d,a))throw Error("WeakMap key fail: "+d);d[a][this.id_]=b;return this};g.prototype.get=function(d){return $jscomp.owns(d,a)?d[a][this.id_]:void 0};g.prototype.has=
function(d){return $jscomp.owns(d,a)&&$jscomp.owns(d[a],this.id_)};g.prototype.delete=function(d){return $jscomp.owns(d,a)&&$jscomp.owns(d[a],this.id_)?delete d[a][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(c){function e(){if($jscomp.ASSUME_NO_NATIVE_MAP||!c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),d=new c($jscomp.makeIterator([[a,"s"]]));if("s"!=d.get(a)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var b=d.entries(),g=b.next();if(g.done||g.value[0]!=a||"s"!=g.value[1])return!1;g=b.next();return g.done||4!=g.value[0].x||"t"!=g.value[1]||!b.next().done?!1:!0}catch(p){return!1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&
$jscomp.ES6_CONFORMANCE)return c}else if(e())return c;$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=new WeakMap,b=function(a){this.data_={};this.head_=g();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var d;!(d=a.next()).done;)d=d.value,this.set(d[0],d[1])}};b.prototype.set=function(d,b){var g=a(this,d);g.list||(g.list=this.data_[g.id]=[]);g.entry?g.entry.value=b:(g.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:d,value:b},g.list.push(g.entry),this.head_.previous.next=
g.entry,this.head_.previous=g.entry,this.size++);return this};b.prototype.delete=function(d){d=a(this,d);return d.entry&&d.list?(d.list.splice(d.index,1),d.list.length||delete this.data_[d.id],d.entry.previous.next=d.entry.next,d.entry.next.previous=d.entry.previous,d.entry.head=null,this.size--,!0):!1};b.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};b.prototype.has=function(d){return!!a(this,d).entry};b.prototype.get=function(d){return(d=a(this,d).entry)&&
d.value};b.prototype.entries=function(){return d(this,function(a){return[a.key,a.value]})};b.prototype.keys=function(){return d(this,function(a){return a.key})};b.prototype.values=function(){return d(this,function(a){return a.value})};b.prototype.forEach=function(a,d){for(var b=this.entries(),g;!(g=b.next()).done;)g=g.value,a.call(d,g[1],g[0],this)};b.prototype[Symbol.iterator]=b.prototype.entries;var a=function(a,d){var b=d&&typeof d;"object"==b||"function"==b?f.has(d)?b=f.get(d):(b=""+ ++h,f.set(d,
b)):b="p_"+d;var g=a.data_[b];if(g&&$jscomp.owns(a.data_,b))for(a=0;a<g.length;a++){var c=g[a];if(d!==d&&c.key!==c.key||d===c.key)return{id:b,list:g,index:a,entry:c}}return{id:b,list:g,index:-1,entry:void 0}},d=function(a,d){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:d(b)};b=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=a.next=a.head=a},h=0;return b},"es6","es3");
(function(c){"function"===typeof define&&define.amd?define(["jquery","jquery.ui.widget"],c):c(window.jQuery)})(function(c){c.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader);c.support.xhrFormDataFileUpload=!!window.FormData;c.propHooks.elements={get:function(e){return c.nodeName(e,"form")?c.grep(e.elements,function(e){return!c.nodeName(e,"input")||"file"!==e.type}):null}};c.widget("blueimp.fileupload",{options:{dropZone:c(document),pasteZone:c(document),fileInput:void 0,replaceFileInput:!0,
paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(c){return c.serializeArray()},add:function(c,f){f.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart",
"forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date;this.bitrate=this.loaded=0;this.getBitrate=function(c,f,b){var a=c-this.timestamp;if(!this.bitrate||!b||a>b)this.bitrate=1E3/a*(f-this.loaded)*8,this.loaded=f,this.timestamp=c;return this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&c.support.xhrFileUpload||c.support.xhrFormDataFileUpload)},_getFormData:function(e){if("function"===typeof e.formData)return e.formData(e.form);if(c.isArray(e.formData))return e.formData;
if(e.formData){var f=[];c.each(e.formData,function(b,a){f.push({name:b,value:a})});return f}return[]},_getTotal:function(e){var f=0;c.each(e,function(b,a){f+=a.size||1});return f},_onProgress:function(c,f){if(c.lengthComputable){var b=+new Date;if(!(f._time&&f.progressInterval&&b-f._time<f.progressInterval&&c.loaded!==c.total)){f._time=b;var a=f.total||this._getTotal(f.files);var d=parseInt(c.loaded/c.total*(f.chunkSize||a),10)+(f.uploadedBytes||0);this._loaded+=d-(f.loaded||f.uploadedBytes||0);f.lengthComputable=
!0;f.loaded=d;f.total=a;f.bitrate=f._bitrateTimer.getBitrate(b,d,f.bitrateInterval);this._trigger("progress",c,f);this._trigger("progressall",c,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(b,this._loaded,f.bitrateInterval)})}}},_initProgressListener:function(e){var f=this,b=e.xhr?e.xhr():c.ajaxSettings.xhr();b.upload&&(c(b.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable;a.loaded=d.loaded;a.total=d.total;
f._onProgress(a,e)}),e.xhr=function(){return b})},_initXHRData:function(e){var f=e.files[0],b=e.multipart||!c.support.xhrFileUpload,a=e.paramName[0];e.headers=e.headers||{};e.contentRange&&(e.headers["Content-Range"]=e.contentRange);if(!b)e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(f.name)+'"',e.contentType=f.type,e.data=e.blob||f;else if(c.support.xhrFormDataFileUpload){if(e.postMessage){var d=this._getFormData(e);e.blob?d.push({name:a,value:e.blob}):c.each(e.files,function(b,
c){d.push({name:e.paramName[b]||a,value:c})})}else e.formData instanceof FormData?d=e.formData:(d=new FormData,c.each(this._getFormData(e),function(a,b){d.append(b.name,b.value)})),e.blob?(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(f.name)+'"',d.append(a,e.blob,f.name)):c.each(e.files,function(b,c){(window.Blob&&c instanceof Blob||window.File&&c instanceof File)&&d.append(e.paramName[b]||a,c,c.name)});e.data=d}e.blob=null},_initIframeSettings:function(e){e.dataType="iframe "+
(e.dataType||"");e.formData=this._getFormData(e);e.redirect&&c("<a></a>").prop("href",e.url).prop("host")!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(c){this._isXHRUpload(c)?(this._chunkedUpload(c,!0)||(c.data||this._initXHRData(c),this._initProgressListener(c)),c.postMessage&&(c.dataType="postmessage "+(c.dataType||""))):this._initIframeSettings(c,"iframe")},_getParamName:function(e){var f=c(e.fileInput),b=e.paramName;b?c.isArray(b)||
(b=[b]):(b=[],f.each(function(){var a=c(this),d=a.prop("name")||"files[]";for(a=(a.prop("files")||[1]).length;a;)b.push(d),--a}),b.length||(b=[f.prop("name")||"files[]"]));return b},_initFormSettings:function(e){e.form&&e.form.length||(e.form=c(e.fileInput.prop("form")),e.form.length||(e.form=c(this.options.fileInput.prop("form"))));e.paramName=this._getParamName(e);e.url||(e.url=e.form.prop("action")||location.href);e.type=(e.type||e.form.prop("method")||"").toUpperCase();"POST"!==e.type&&"PUT"!==
e.type&&"PATCH"!==e.type&&(e.type="POST");e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){e=c.extend({},this.options,e);this._initFormSettings(e);this._initDataSettings(e);return e},_enhancePromise:function(c){c.success=c.done;c.error=c.fail;c.complete=c.always;return c},_getXHRPromise:function(e,f,b){var a=c.Deferred(),d=a.promise();f=f||this.options.context||d;!0===e?a.resolveWith(f,b):!1===e&&a.rejectWith(f,b);d.abort=a.promise;return this._enhancePromise(d)},
_getUploadedBytes:function(c){return(c=(c=(c=c.getResponseHeader("Range"))&&c.split("-"))&&1<c.length&&parseInt(c[1],10))&&c+1},_chunkedUpload:function(e,f){var b=this,a=e.files[0],d=a.size,g=e.uploadedBytes=e.uploadedBytes||0,h=e.maxChunkSize||d,k=a.slice||a.webkitSlice||a.mozSlice,l=c.Deferred(),m=l.promise(),n;if(!(this._isXHRUpload(e)&&k&&(g||h<d))||e.data)return!1;if(f)return!0;if(g>=d)return a.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,e.context,[null,"error",a.error]);var p=
function(){var f=c.extend({},e);f.blob=k.call(a,g,g+h,a.type);f.chunkSize=f.blob.size;f.contentRange="bytes "+g+"-"+(g+f.chunkSize-1)+"/"+d;b._initXHRData(f);b._initProgressListener(f);n=(!1!==b._trigger("chunksend",null,f)&&c.ajax(f)||b._getXHRPromise(!1,f.context)).done(function(a,h,k){g=b._getUploadedBytes(k)||g+f.chunkSize;(!f.loaded||f.loaded<f.total)&&b._onProgress(c.Event("progress",{lengthComputable:!0,loaded:g-f.uploadedBytes,total:g-f.uploadedBytes}),f);e.uploadedBytes=f.uploadedBytes=g;
f.result=a;f.textStatus=h;f.jqXHR=k;b._trigger("chunkdone",null,f);b._trigger("chunkalways",null,f);g<d?p():l.resolveWith(f.context,[a,h,k])}).fail(function(a,d,g){f.jqXHR=a;f.textStatus=d;f.errorThrown=g;b._trigger("chunkfail",null,f);b._trigger("chunkalways",null,f);l.rejectWith(f.context,[a,d,g])})};this._enhancePromise(m);m.abort=function(){return n.abort()};p();return m},_beforeSend:function(c,f){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer);this._active+=
1;this._loaded+=f.uploadedBytes||0;this._total+=this._getTotal(f.files)},_onDone:function(e,f,b,a){if(!this._isXHRUpload(a)||!a.loaded||a.loaded<a.total){var d=this._getTotal(a.files)||1;this._onProgress(c.Event("progress",{lengthComputable:!0,loaded:d,total:d}),a)}a.result=e;a.textStatus=f;a.jqXHR=b;this._trigger("done",null,a)},_onFail:function(c,f,b,a){a.jqXHR=c;a.textStatus=f;a.errorThrown=b;this._trigger("fail",null,a);a.recalculateProgress&&(this._loaded-=a.loaded||a.uploadedBytes||0,this._total-=
a.total||this._getTotal(a.files))},_onAlways:function(c,f,b,a){--this._active;this._trigger("always",null,a);0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(e,f){var b=this,a,d,g=b._getAJAXSettings(f),h=function(){b._sending+=1;g._bitrateTimer=new b._BitrateTimer;return a=a||((d||!1===b._trigger("send",e,g))&&b._getXHRPromise(!1,g.context,d)||b._chunkedUpload(g)||c.ajax(g)).done(function(a,d,c){b._isXHRUpload(g)||"undefined"!==typeof a?
b._onDone(a,d,c,g):b._onFail(c,"error","Unknown",g)}).fail(function(a,d,c){b._onFail(a,d,c,g)}).always(function(a,d,c){--b._sending;b._onAlways(a,d,c,g);if(g.limitConcurrentUploads&&g.limitConcurrentUploads>b._sending)for(a=b._slots.shift();a;){if(d=a.state?"pending"===a.state():!a.isRejected()){a.resolve();break}a=b._slots.shift()}})};this._beforeSend(e,g);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(1<this.options.limitConcurrentUploads){var k=
c.Deferred();this._slots.push(k);f=k.pipe(h)}else f=this._sequence=this._sequence.pipe(h,h);f.abort=function(){d=[void 0,"abort","abort"];return a?a.abort():(k&&k.rejectWith(g.context,d),h())};return this._enhancePromise(f)}return h()},_onAdd:function(e,f){var b=this,a=!0,d=c.extend({},this.options,f),g=d.limitMultiFileUploads,h=this._getParamName(d),k;if((d.singleFileUploads||g)&&this._isXHRUpload(d))if(!d.singleFileUploads&&g){var l=[];var m=[];for(k=0;k<f.files.length;k+=g)l.push(f.files.slice(k,
k+g)),d=h.slice(k,k+g),d.length||(d=h),m.push(d)}else m=h;else l=[f.files],m=[h];f.originalFiles=f.files;c.each(l||f.files,function(d,g){var h=c.extend({},f);h.files=l?g:[g];h.paramName=m[d];h.submit=function(){return h.jqXHR=this.jqXHR=!1!==b._trigger("submit",e,this)&&b._onSend(e,this)};return a=b._trigger("add",e,h)});return a},_replaceFileInput:function(e){var f=e.clone(!0);c("<form></form>").append(f)[0].reset();e.after(f).detach();c.cleanData(e.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(b,
a){return a===e[0]?f[0]:a});e[0]===this.element[0]&&(this.element=f)},_handleFileTreeEntry:function(e,f){var b=this,a=c.Deferred(),d=function(d){d&&!d.entry&&(d.entry=e);a.resolve([d])};f=f||"";if(e.isFile)e._file?(e._file.relativePath=f,a.resolve(e._file)):e.file(function(d){d.relativePath=f;a.resolve(d)},d);else if(e.isDirectory){var g=e.createReader();g.readEntries(function(g){b._handleFileTreeEntries(g,f+e.name+"/").done(function(d){a.resolve(d)}).fail(d)},d)}else a.resolve([]);return a.promise()},
_handleFileTreeEntries:function(e,f){var b=this;return c.when.apply(c,c.map(e,function(a){return b._handleFileTreeEntry(a,f)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var f=e.items;return f&&f.length&&(f[0].webkitGetAsEntry||f[0].getAsEntry)?this._handleFileTreeEntries(c.map(f,function(b){var a;if(b.webkitGetAsEntry){if(a=b.webkitGetAsEntry())a._file=b.getAsFile();return a}return b.getAsEntry()})):c.Deferred().resolve(c.makeArray(e.files)).promise()},
_getSingleFileInputFiles:function(e){e=c(e);var f=e.prop("webkitEntries")||e.prop("entries");if(f&&f.length)return this._handleFileTreeEntries(f);f=c.makeArray(e.prop("files"));if(f.length)void 0===f[0].name&&f[0].fileName&&c.each(f,function(b,a){a.name=a.fileName;a.size=a.fileSize});else{e=e.prop("value");if(!e)return c.Deferred().resolve([]).promise();f=[{name:e.replace(/^.*\\/,"")}]}return c.Deferred().resolve(f).promise()},_getFileInputFiles:function(e){return e instanceof c&&1!==e.length?c.when.apply(c,
c.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var f=this,b={fileInput:c(e.target),form:c(e.target.form)};this._getFileInputFiles(b.fileInput).always(function(a){b.files=a;f.options.replaceFileInput&&f._replaceFileInput(b.fileInput);!1!==f._trigger("change",e,b)&&f._onAdd(e,b)})},_onPaste:function(e){var f=e.originalEvent.clipboardData,b={files:[]};c.each(f&&f.items||[],function(a,
d){(a=d.getAsFile&&d.getAsFile())&&b.files.push(a)});if(!1===this._trigger("paste",e,b)||!1===this._onAdd(e,b))return!1},_onDrop:function(c){var e=this,b=c.dataTransfer=c.originalEvent.dataTransfer,a={};b&&b.files&&b.files.length&&c.preventDefault();this._getDroppedFiles(b).always(function(d){a.files=d;!1!==e._trigger("drop",c,a)&&e._onAdd(c,a)})},_onDragOver:function(e){var f=e.dataTransfer=e.originalEvent.dataTransfer;if(!1===this._trigger("dragover",e))return!1;f&&-1!==c.inArray("Files",f.types)&&
(f.dropEffect="copy",e.preventDefault())},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste}));this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(e,f){var b=-1!==
c.inArray(e,this._refreshOptionsList);b&&this._destroyEventHandlers();this._super(e,f);b&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof c||(e.fileInput=c(e.fileInput));e.dropZone instanceof c||(e.dropZone=c(e.dropZone));e.pasteZone instanceof c||(e.pasteZone=c(e.pasteZone))},_create:function(){var e=
this.options;c.extend(e,c(this.element[0].cloneNode(!1)).data());e.blueimpFileupload=null;e.fileupload=null;this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=this._loaded=this._total=0;this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(e){var f=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(b){e.files=b;f._onAdd(null,e)}):(e.files=c.makeArray(e.files),
this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var f=this,b=c.Deferred(),a=b.promise(),d,g;a.abort=function(){g=!0;if(d)return d.abort();b.reject(null,"abort","abort");return a};this._getFileInputFiles(e.fileInput).always(function(a){g||(e.files=a,d=f._onSend(null,e).then(function(a,d,g){b.resolve(a,d,g)},function(a,d,g){b.reject(a,d,g)}))});return this._enhancePromise(a)}e.files=c.makeArray(e.files);if(e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,
e&&e.context)}})});
(function(c){var e=c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype,f;if(f=c.Blob)try{f=!!new Blob}catch(h){f=!1}var b=f;if(f=b&&c.Uint8Array)try{f=100===(new Blob([new Uint8Array(100)])).size}catch(h){f=!1}var a=f,d=c.BlobBuilder||c.WebKitBlobBuilder||c.MozBlobBuilder||c.MSBlobBuilder,g=(b||d)&&c.atob&&c.ArrayBuffer&&c.Uint8Array&&function(g){var c,e,f,h;0<=g.split(",")[0].indexOf("base64")?c=atob(g.split(",")[1]):c=decodeURIComponent(g.split(",")[1]);var p=new ArrayBuffer(c.length);var r=new Uint8Array(p);
for(e=0;e<c.length;e+=1)r[e]=c.charCodeAt(e);return f=g.split(",")[0].split(":")[1].split(";")[0],b?new Blob([a?r:p],{type:f}):(h=new d,h.append(p),h.getBlob(f))};c.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(a,d,b){b&&e.toDataURL&&g?a(g(this.toDataURL(d,b))):a(this.mozGetAsFile("blob",d))}:e.toDataURL&&g&&(e.toBlob=function(a,d,b){a(g(this.toDataURL(d,b)))}));"function"==typeof define&&define.amd?define(function(){return g}):c.dataURLtoBlob=g})(this);
(function(c){"function"===typeof define&&define.amd?define(["jquery","load-image","canvas-to-blob","./jquery.fileupload"],c):c(window.jQuery,window.loadImage)})(function(c,e){c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{process:[],add:function(e,b){c(this).fileupload("process",b).done(function(){b.submit()})}},processActions:{load:function(f,b){var a=this,d=f.files[f.index],g=c.Deferred();window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&("number"!==c.type(b.maxFileSize)||
d.size<b.maxFileSize)&&(!b.fileTypes||b.fileTypes.test(d.type))?e(d,function(d){if(!d.src)return g.rejectWith(a,[f]);f.img=d;g.resolveWith(a,[f])}):g.rejectWith(a,[f]);return g.promise()},resize:function(f,b){var a=f.img;b=c.extend({canvas:!0},b);a&&(b=e.scale(a,b),b.width!==a.width||b.height!==a.height)&&(f.canvas=b);return f},save:function(e,b){if(!e.canvas)return e;var a=this,d=e.files[e.index];b=d.name;var g=c.Deferred(),f=function(b){b.name||(d.type===b.type?b.name=d.name:d.name&&(b.name=d.name.replace(/\..+$/,
"."+b.type.substr(6))));e.files[e.index]=b;g.resolveWith(a,[e])};e.canvas.mozGetAsFile?f(e.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(d.type)&&b||(b&&b.replace(/\..+$/,"")||"blob")+".png",d.type)):e.canvas.toBlob(f,d.type);return g.promise()}},_processFile:function(e,b,a){var d=this,g=c.Deferred().resolveWith(d,[{files:e,index:b}]).promise();d._processing+=1;c.each(a.process,function(a,b){g=g.pipe(function(a){return d.processActions[b.action].call(this,a,b)})});g.always(function(){--d._processing;
0===d._processing&&d.element.removeClass("fileupload-processing")});1===d._processing&&d.element.addClass("fileupload-processing");return g},process:function(e){var b=this,a=c.extend({},this.options,e);a.process&&a.process.length&&this._isXHRUpload(a)&&c.each(e.files,function(d,g){b._processingQueue=b._processingQueue.pipe(function(){var g=c.Deferred();b._processFile(e.files,d,a).always(function(){g.resolveWith(b)});return g.promise()})});return this._processingQueue},_create:function(){this._super();
this._processing=0;this._processingQueue=c.Deferred().resolveWith(this).promise()}})});
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(window.jQuery)})(function(c){var e=0;c.ajaxTransport("iframe",function(f){if(f.async){var b=f.initialIframeSrc||"javascript:false;",a,d,g;return{send:function(h,k){a=c('<form style="display:none;"></form>');a.attr("accept-charset",f.formAcceptCharset);g=/\?/.test(f.url)?"&":"?";"DELETE"===f.type?(f.url=f.url+g+"_method=DELETE",f.type="POST"):"PUT"===f.type?(f.url=f.url+g+"_method=PUT",f.type="POST"):"PATCH"===f.type&&(f.url=
f.url+g+"_method=PATCH",f.type="POST");e+=1;d=c('<iframe src="'+b+'" name="iframe-transport-'+e+'"></iframe>').bind("load",function(){var g=c.isArray(f.paramName)?f.paramName:[f.paramName];d.unbind("load").bind("load",function(){try{var g=d.contents();if(!g.length||!g[0].firstChild)throw Error();}catch(p){g=void 0}k(200,"success",{iframe:g});c('<iframe src="'+b+'"></iframe>').appendTo(a);window.setTimeout(function(){a.remove()},0)});a.prop("target",d.prop("name")).prop("action",f.url).prop("method",
f.type);f.formData&&c.each(f.formData,function(d,b){c('<input type="hidden"/>').prop("name",b.name).val(b.value).appendTo(a)});if(f.fileInput&&f.fileInput.length&&"POST"===f.type){var e=f.fileInput.clone();f.fileInput.after(function(a){return e[a]});f.paramName&&f.fileInput.each(function(a){c(this).prop("name",g[a]||f.paramName)});a.append(f.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");f.fileInput.removeAttr("form")}a.submit();e&&e.length&&f.fileInput.each(function(a,
d){a=c(e[a]);c(d).prop("name",a.prop("name")).attr("form",a.attr("form"));a.replaceWith(d)})});a.append(d).appendTo(document.body)},abort:function(){d&&d.unbind("load").prop("src",b);a&&a.remove()}}}});c.ajaxSetup({converters:{"iframe text":function(e){return e&&c(e[0].body).text()},"iframe json":function(e){return e&&c.parseJSON(c(e[0].body).text())},"iframe html":function(e){return e&&c(e[0].body).html()},"iframe xml":function(e){return(e=e&&e[0])&&c.isXMLDoc(e)?e:c.parseXML(e.XMLDocument&&e.XMLDocument.xml||
c(e.body).html())},"iframe script":function(e){return e&&c.globalEval(c(e[0].body).text())}}})});
(function(c){var e=function(b,a,d){var g=document.createElement("img"),c,f;return g.onerror=a,g.onload=function(){!f||d&&d.noRevoke||e.revokeObjectURL(f);a(e.scale(g,d))},window.Blob&&b instanceof Blob||window.File&&b instanceof File?(c=f=e.createObjectURL(b),g._type=b.type):c=b,c?(g.src=c,g):e.readFile(b,function(d){var b=d.target;b&&b.result?g.src=b.result:a(d)})},f=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;e.detectSubsampling=function(b){var a=
b.width,d,g;return 1048576<a*b.height?(d=document.createElement("canvas"),d.width=d.height=1,g=d.getContext("2d"),g.drawImage(b,-a+1,0),0===g.getImageData(0,0,1,1).data[3]):!1};e.detectVerticalSquash=function(b,a){var d=document.createElement("canvas"),g=d.getContext("2d"),c;d.width=1;d.height=a;g.drawImage(b,0,0);b=g.getImageData(0,0,1,a).data;d=0;for(c=g=a;c>d;){var e=b[4*(c-1)+3];0===e?g=c:d=c;c=g+d>>1}return c/a};e.renderImageToCanvas=function(b,a,d,g){var c=b.width,f=b.height;a=a.getContext("2d");
var l=document.createElement("canvas"),m,n;a.save();e.detectSubsampling(b)&&(c/=2,f/=2);var p=e.detectVerticalSquash(b,f);l.width=l.height=1024;var r=l.getContext("2d");for(m=0;m<f;){var w=m+1024>f?f-m:1024;for(n=0;n<c;){var t=n+1024>c?c-n:1024;r.clearRect(0,0,1024,1024);r.drawImage(b,-n,-m);a.drawImage(l,0,0,t,w,Math.floor(n*d/c),Math.floor(m*g/f/p),Math.ceil(t*d/c),Math.ceil(w*g/f/p));n+=1024}m+=1024}a.restore()};e.scale=function(b,a){a=a||{};var d=document.createElement("canvas"),g=b.width,c=b.height,
f=Math.max((a.minWidth||g)/g,(a.minHeight||c)/c);return 1<f&&(g=parseInt(g*f,10),c=parseInt(c*f,10)),f=Math.min((a.maxWidth||g)/g,(a.maxHeight||c)/c),1>f&&(g=parseInt(g*f,10),c=parseInt(c*f,10)),b.getContext||a.canvas&&d.getContext?(d.width=g,d.height=c,"image/jpeg"===b._type?e.renderImageToCanvas(b,d,g,c):d.getContext("2d").drawImage(b,0,0,g,c),d):(b.width=g,b.height=c,b)};e.createObjectURL=function(b){return f?f.createObjectURL(b):!1};e.revokeObjectURL=function(b){return f?f.revokeObjectURL(b):
!1};e.readFile=function(b,a){if(window.FileReader&&FileReader.prototype.readAsDataURL){var d=new FileReader;return d.onload=d.onerror=a,d.readAsDataURL(b),d}return!1};"function"==typeof define&&define.amd?define(function(){return e}):c.loadImage=e})(this);
(function(c){var e=function(c,b){var a=/[^\w\-\.:]/.test(c)?new Function(e.arg+",tmpl","var _e=tmpl.encode"+e.helper+",_s='"+c.replace(e.regexp,e.func)+"';return _s;"):e.cache[c]=e.cache[c]||e(e.load(c));return b?a(b,e):function(d){return a(d,e)}};e.cache={};e.load=function(c){return document.getElementById(c).innerHTML};e.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;e.func=function(c,b,a,d,g,e){if(b)return{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[c]||"\\"+c;if(a)return"="===
a?"'+_e("+d+")+'":"'+("+d+"||'')+'";if(g)return"';";if(e)return"_s+='"};e.encReg=/[<>&"'\x00]/g;e.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};e.encode=function(c){return String(c||"").replace(e.encReg,function(b){return e.encMap[b]||""})};e.arg="o";e.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}";"function"===typeof define&&define.amd?define(function(){return e}):c.tmpl=e})(this);
(function(c,e){"function"===typeof define&&define.amd?define(["jquery"],e):"object"===typeof exports?e(require("jquery")):c.jQuery?e(c.jQuery):e(c.Zepto)})(this,function(c,e){c.fn.jPlayer=function(a){var d="string"===typeof a,b=Array.prototype.slice.call(arguments,1),g=this;a=!d&&b.length?c.extend.apply(null,[!0,a].concat(b)):a;if(d&&"_"===a.charAt(0))return g;d?this.each(function(){var d=c(this).data("jPlayer"),f=d&&c.isFunction(d[a])?d[a].apply(d,b):d;if(f!==d&&f!==e)return g=f,!1}):this.each(function(){var d=
c(this).data("jPlayer");d?d.option(a||{}):c(this).data("jPlayer",new c.jPlayer(a,this))});return g};c.jPlayer=function(a,d){if(arguments.length){this.element=c(d);this.options=c.extend(!0,{},this.options,a);var b=this;this.element.bind("remove.jPlayer",function(){b.destroy()});this._init()}};"function"!==typeof c.fn.stop&&(c.fn.stop=function(){});c.jPlayer.emulateMethods="load play pause";c.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";c.jPlayer.emulateOptions=
"muted volume";c.jPlayer.reservedEvent="ready flashreset resize repeat error warning";c.jPlayer.event={};c.each("ready setmedia flashreset resize repeat click error warning loadstart progress suspend abort emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange".split(" "),function(){c.jPlayer.event[this]="jPlayer_"+this});c.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata canplay canplaythrough".split(" ");
c.jPlayer.pause=function(){c.jPlayer.prototype.destroyRemoved();c.each(c.jPlayer.prototype.instances,function(a,d){d.data("jPlayer").status.srcSet&&d.jPlayer("pause")})};c.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var f=function(){this.init()};f.prototype={init:function(){this.options={timeFormat:c.jPlayer.timeFormat}},time:function(a){var d=new Date(1E3*(a&&"number"===typeof a?a:0)),b=d.getUTCHours();a=this.options.timeFormat.showHour?
d.getUTCMinutes():d.getUTCMinutes()+60*b;d=this.options.timeFormat.showMin?d.getUTCSeconds():d.getUTCSeconds()+60*a;b=this.options.timeFormat.padHour&&10>b?"0"+b:b;a=this.options.timeFormat.padMin&&10>a?"0"+a:a;d=this.options.timeFormat.padSec&&10>d?"0"+d:d;b=""+(this.options.timeFormat.showHour?b+this.options.timeFormat.sepHour:"");b+=this.options.timeFormat.showMin?a+this.options.timeFormat.sepMin:"";return b+=this.options.timeFormat.showSec?d+this.options.timeFormat.sepSec:""}};var b=new f;c.jPlayer.convertTime=
function(a){return b.time(a)};c.jPlayer.uaBrowser=function(a){a=a.toLowerCase();var d=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,g=/(mozilla)(?:.*? rv:([\w.]+))?/;a=/(webkit)[ \/]([\w.]+)/.exec(a)||d.exec(a)||b.exec(a)||0>a.indexOf("compatible")&&g.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};c.jPlayer.uaPlatform=function(a){var d=a.toLowerCase(),b=/(android)/,g=/(mobile)/;a=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(d)||[];d=/(ipad|playbook)/.exec(d)||
!g.exec(d)&&b.exec(d)||[];a[1]&&(a[1]=a[1].replace(/\s/g,"_"));return{platform:a[1]||"",tablet:d[1]||""}};c.jPlayer.browser={};c.jPlayer.platform={};var a=c.jPlayer.uaBrowser(navigator.userAgent);a.browser&&(c.jPlayer.browser[a.browser]=!0,c.jPlayer.browser.version=a.version);a=c.jPlayer.uaPlatform(navigator.userAgent);a.platform&&(c.jPlayer.platform[a.platform]=!0,c.jPlayer.platform.mobile=!a.tablet,c.jPlayer.platform.tablet=!!a.tablet);c.jPlayer.getDocMode=function(){if(c.jPlayer.browser.msie)if(document.documentMode)var a=
document.documentMode;else a=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(a=7);return a};c.jPlayer.browser.documentMode=c.jPlayer.getDocMode();c.jPlayer.nativeFeatures={init:function(){var a=document,d=a.createElement("video"),b={w3c:"fullscreenEnabled fullscreenElement requestFullscreen exitFullscreen fullscreenchange fullscreenerror".split(" "),moz:"mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),
webkit:" webkitCurrentFullScreenElement webkitRequestFullScreen webkitCancelFullScreen webkitfullscreenchange ".split(" "),webkitVideo:"webkitSupportsFullscreen webkitDisplayingFullscreen webkitEnterFullscreen webkitExitFullscreen  ".split(" "),ms:" msFullscreenElement msRequestFullscreen msExitFullscreen MSFullscreenChange MSFullscreenError".split(" ")},c=["w3c","moz","webkit","webkitVideo","ms"],e;this.fullscreen=d={support:{w3c:!!a[b.w3c[0]],moz:!!a[b.moz[0]],webkit:"function"===typeof a[b.webkit[3]],
webkitVideo:"function"===typeof d[b.webkitVideo[2]],ms:"function"===typeof d[b.ms[2]]},used:{}};var f=0;for(e=c.length;f<e;f++){var p=c[f];if(d.support[p]){d.spec=p;d.used[p]=!0;break}}if(d.spec){var r=b[d.spec];d.api={fullscreenEnabled:!0,fullscreenElement:function(d){d=d?d:a;return d[r[1]]},requestFullscreen:function(a){return a[r[2]]()},exitFullscreen:function(d){d=d?d:a;return d[r[3]]()}};d.event={fullscreenchange:r[4],fullscreenerror:r[5]}}else d.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},
requestFullscreen:function(){},exitFullscreen:function(){}},d.event={}}};c.jPlayer.nativeFeatures.init();c.jPlayer.focus=null;c.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var d=function(a){var d=c.jPlayer.focus,b;d&&(c.each(c.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(d,g){if(a.target.nodeName.toUpperCase()===g.toUpperCase())return b=!0,!1}),b||c.each(d.options.keyBindings,function(b,g){if(g&&c.isFunction(g.fn)&&("number"===typeof g.key&&a.which===g.key||"string"===typeof g.key&&
a.key===g.key))return a.preventDefault(),g.fn(d),!1}))};c.jPlayer.keys=function(a){c(document.documentElement).unbind("keydown.jPlayer");a&&c(document.documentElement).bind("keydown.jPlayer",d)};c.jPlayer.keys(!0);c.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,
minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",
duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,
hold:1E3},loop:!1,repeat:function(a){a.jPlayer.options.loop?c(this).unbind(".jPlayerRepeat").bind(c.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){c(this).jPlayer("play")}):c(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},
noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(a){a.status.paused?a.play():a.pause()}},fullScreen:{key:70,fn:function(a){(a.status.video||a.options.audioFullScreen)&&a._setOption("fullScreen",!a.options.fullScreen)}},muted:{key:77,fn:function(a){a._muted(!a.options.muted)}},
volumeUp:{key:190,fn:function(a){a.volume(a.options.volume+.1)}},volumeDown:{key:188,fn:function(a){a.volume(a.options.volume-.1)}},loop:{key:76,fn:function(a){a._loop(!a.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",
cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},
m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},
fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',
flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var a=this;this.element.empty();this.status=c.extend({},this.status);this.internal=c.extend({},this.internal);this.options.timeFormat=c.extend({},c.jPlayer.timeFormat,this.options.timeFormat);this.internal.cmdsIgnored=c.jPlayer.platform.ipad||c.jPlayer.platform.iphone||c.jPlayer.platform.ipod;this.internal.domNode=this.element.get(0);
this.options.keyEnabled&&!c.jPlayer.focus&&(c.jPlayer.focus=this);this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN};c.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto");this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.aurora={};this.aurora.formats=[];this.aurora.properties=[];this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=
this._limitValue(this.options.volume,0,1);c.each(this.options.supplied.toLowerCase().split(","),function(d,b){var g=b.replace(/^\s+|\s+$/g,"");if(a.format[g]){var e=!1;c.each(a.formats,function(a,d){if(g===d)return e=!0,!1});e||a.formats.push(g)}});c.each(this.options.solution.toLowerCase().split(","),function(d,b){var g=b.replace(/^\s+|\s+$/g,"");if(a.solution[g]){var e=!1;c.each(a.solutions,function(a,d){if(g===d)return e=!0,!1});e||a.solutions.push(g)}});c.each(this.options.auroraFormats.toLowerCase().split(","),
function(d,b){var g=b.replace(/^\s+|\s+$/g,"");if(a.format[g]){var e=!1;c.each(a.aurora.formats,function(a,d){if(g===d)return e=!0,!1});e||a.aurora.formats.push(g)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=c.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=c.extend({},{id:this.options.idPrefix+"_audio_"+this.count,
jq:e});this.internal.video=c.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:e});this.internal.flash=c.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:e,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")});this.internal.poster=c.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:e});c.each(c.jPlayer.event,function(d,b){a.options[d]!==e&&(a.element.bind(b+
".jPlayer",a.options[d]),a.options[d]=e)});this.require.audio=!1;this.require.video=!1;c.each(this.formats,function(d,b){a.require[a.format[b].media]=!0});this.options=this.require.video?c.extend(!0,{},this.optionsVideo,this.options):c.extend(!0,{},this.optionsAudio,this.options);this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this.status.noVolume=this._uaBlocklist(this.options.noVolume);
c.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners();this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){a.status.video&&!a.status.waitForPlay||a.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=c("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});
this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(d){d.stopPropagation();a._trigger(c.jPlayer.event.click)});this.html.audio.available=!1;this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio));this.html.video.available=!1;this.require.video&&(this.htmlElement.video=document.createElement("video"),
this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video));this.flash.available=this._checkForFlash(10.1);this.html.canPlay={};this.aurora.canPlay={};this.flash.canPlay={};c.each(this.formats,function(d,b){a.html.canPlay[b]=a.html[a.format[b].media].available&&""!==a.htmlElement[a.format[b].media].canPlayType(a.format[b].codec);a.aurora.canPlay[b]=-1<c.inArray(b,a.aurora.formats);a.flash.canPlay[b]=
a.format[b].flashCanPlay&&a.flash.available});this.html.desired=!1;this.aurora.desired=!1;this.flash.desired=!1;c.each(this.solutions,function(d,b){if(0===d)a[b].desired=!0;else{var g=!1,e=!1;c.each(a.formats,function(d,b){a[a.solutions[0]].canPlay[b]&&("video"===a.format[b].media?e=!0:g=!0)});a[b].desired=a.require.audio&&!g||a.require.video&&!e}});this.html.support={};this.aurora.support={};this.flash.support={};c.each(this.formats,function(d,b){a.html.support[b]=a.html.canPlay[b]&&a.html.desired;
a.aurora.support[b]=a.aurora.canPlay[b]&&a.aurora.desired;a.flash.support[b]=a.flash.canPlay[b]&&a.flash.desired});this.html.used=!1;this.aurora.used=!1;this.flash.used=!1;c.each(this.solutions,function(d,b){c.each(a.formats,function(d,g){if(a[b].support[g])return a[b].used=!0,!1})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:c.jPlayer.error.NO_SOLUTION,
context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:c.jPlayer.errorMsg.NO_SOLUTION,hint:c.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show());if(this.flash.used){var d="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(c.jPlayer.browser.msie&&(9>Number(c.jPlayer.browser.version)||9>c.jPlayer.browser.documentMode)){d=['<param name="movie" value="'+
this.internal.flash.swf+'" />','<param name="FlashVars" value="'+d+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];var b=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');for(var f=0;f<d.length;f++)b.appendChild(document.createElement(d[f]))}else f=function(a,
d,b){var g=document.createElement("param");g.setAttribute("name",d);g.setAttribute("value",b);a.appendChild(g)},b=document.createElement("object"),b.setAttribute("id",this.internal.flash.id),b.setAttribute("name",this.internal.flash.id),b.setAttribute("data",this.internal.flash.swf),b.setAttribute("type","application/x-shockwave-flash"),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("tabindex","-1"),f(b,"flashvars",d),f(b,"allowscriptaccess","always"),f(b,"bgcolor",this.options.backgroundColor),
f(b,"wmode",this.options.wmode);this.element.append(b);this.internal.flash.jq=c(b)}this.status.playbackRateEnabled=this.html.used&&!this.flash.used?this._testPlaybackRate("audio"):!1;this._updatePlaybackRate();this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=c("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),
this.element.append(this.htmlElement.video),this.internal.video.jq=c("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(d){d.stopPropagation();a._trigger(c.jPlayer.event.click)})));this.options.emulateHtml&&this._emulateHtmlBridge();!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){a.internal.ready=
!0;a.version.flash="n/a";a._trigger(c.jPlayer.event.repeat);a._trigger(c.jPlayer.event.ready)},100);this._updateNativeVideoControls();this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();c.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");c.each(this.css.jq,function(a,d){d.length&&d.unbind(".jPlayer")});this.internal.poster.jq.unbind(".jPlayer");
this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");this._fullscreenRemoveEventListeners();this===c.jPlayer.focus&&(c.jPlayer.focus=null);this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},destroyRemoved:function(){var a=this;c.each(this.instances,function(d,b){a.element===b||b.data("jPlayer")||(b.jPlayer("destroy"),delete a.instances[d])})},enable:function(){},
disable:function(){},_testCanPlayType:function(a){try{return a.canPlayType(this.format.mp3.codec),!0}catch(h){return!1}},_testPlaybackRate:function(a){a=document.createElement("string"===typeof a?a:"audio");try{return"playbackRate"in a?(a.playbackRate=.5,.5===a.playbackRate):!1}catch(h){return!1}},_uaBlocklist:function(a){var d=navigator.userAgent.toLowerCase(),b=!1;c.each(a,function(a,g){if(g&&g.test(d))return b=!0,!1});return b},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&
(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",
height:"0px"})))},_addHtmlEventListeners:function(a,d){var b=this;a.preload=this.options.preload;a.muted=this.options.muted;a.volume=this.options.volume;this.status.playbackRateEnabled&&(a.defaultPlaybackRate=this.options.defaultPlaybackRate,a.playbackRate=this.options.playbackRate);a.addEventListener("progress",function(){d.gate&&(b.internal.cmdsIgnored&&0<this.readyState&&(b.internal.cmdsIgnored=!1),b._getHtmlStatus(a),b._updateInterface(),b._trigger(c.jPlayer.event.progress))},!1);a.addEventListener("loadeddata",
function(){d.gate&&(b.androidFix.setMedia=!1,b.androidFix.play&&(b.androidFix.play=!1,b.play(b.androidFix.time)),b.androidFix.pause&&(b.androidFix.pause=!1,b.pause(b.androidFix.time)),b._trigger(c.jPlayer.event.loadeddata))},!1);a.addEventListener("timeupdate",function(){d.gate&&(b._getHtmlStatus(a),b._updateInterface(),b._trigger(c.jPlayer.event.timeupdate))},!1);a.addEventListener("durationchange",function(){d.gate&&(b._getHtmlStatus(a),b._updateInterface(),b._trigger(c.jPlayer.event.durationchange))},
!1);a.addEventListener("play",function(){d.gate&&(b._updateButtons(!0),b._html_checkWaitForPlay(),b._trigger(c.jPlayer.event.play))},!1);a.addEventListener("playing",function(){d.gate&&(b._updateButtons(!0),b._seeked(),b._trigger(c.jPlayer.event.playing))},!1);a.addEventListener("pause",function(){d.gate&&(b._updateButtons(!1),b._trigger(c.jPlayer.event.pause))},!1);a.addEventListener("waiting",function(){d.gate&&(b._seeking(),b._trigger(c.jPlayer.event.waiting))},!1);a.addEventListener("seeking",
function(){d.gate&&(b._seeking(),b._trigger(c.jPlayer.event.seeking))},!1);a.addEventListener("seeked",function(){d.gate&&(b._seeked(),b._trigger(c.jPlayer.event.seeked))},!1);a.addEventListener("volumechange",function(){d.gate&&(b.options.volume=a.volume,b.options.muted=a.muted,b._updateMute(),b._updateVolume(),b._trigger(c.jPlayer.event.volumechange))},!1);a.addEventListener("ratechange",function(){d.gate&&(b.options.defaultPlaybackRate=a.defaultPlaybackRate,b.options.playbackRate=a.playbackRate,
b._updatePlaybackRate(),b._trigger(c.jPlayer.event.ratechange))},!1);a.addEventListener("suspend",function(){d.gate&&(b._seeked(),b._trigger(c.jPlayer.event.suspend))},!1);a.addEventListener("ended",function(){d.gate&&(c.jPlayer.browser.webkit||(b.htmlElement.media.currentTime=0),b.htmlElement.media.pause(),b._updateButtons(!1),b._getHtmlStatus(a,!0),b._updateInterface(),b._trigger(c.jPlayer.event.ended))},!1);a.addEventListener("error",function(){d.gate&&(b._updateButtons(!1),b._seeked(),b.status.srcSet&&
(clearTimeout(b.internal.htmlDlyCmdId),b.status.waitForLoad=!0,b.status.waitForPlay=!0,b.status.video&&!b.status.nativeVideoControls&&b.internal.video.jq.css({width:"0px",height:"0px"}),b._validString(b.status.media.poster)&&!b.status.nativeVideoControls&&b.internal.poster.jq.show(),b.css.jq.videoPlay.length&&b.css.jq.videoPlay.show(),b._error({type:c.jPlayer.error.URL,context:b.status.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL})))},!1);c.each(c.jPlayer.htmlEvent,function(g,e){a.addEventListener(this,
function(){d.gate&&b._trigger(c.jPlayer.event[e])},!1)})},_addAuroraEventListeners:function(a,d){var b=this;a.volume=100*this.options.volume;a.on("progress",function(){d.gate&&(b.internal.cmdsIgnored&&0<this.readyState&&(b.internal.cmdsIgnored=!1),b._getAuroraStatus(a),b._updateInterface(),b._trigger(c.jPlayer.event.progress),0<a.duration&&b._trigger(c.jPlayer.event.timeupdate))},!1);a.on("ready",function(){d.gate&&b._trigger(c.jPlayer.event.loadeddata)},!1);a.on("duration",function(){d.gate&&(b._getAuroraStatus(a),
b._updateInterface(),b._trigger(c.jPlayer.event.durationchange))},!1);a.on("end",function(){d.gate&&(b._updateButtons(!1),b._getAuroraStatus(a,!0),b._updateInterface(),b._trigger(c.jPlayer.event.ended))},!1);a.on("error",function(){d.gate&&(b._updateButtons(!1),b._seeked(),b.status.srcSet&&(b.status.waitForLoad=!0,b.status.waitForPlay=!0,b.status.video&&!b.status.nativeVideoControls&&b.internal.video.jq.css({width:"0px",height:"0px"}),b._validString(b.status.media.poster)&&!b.status.nativeVideoControls&&
b.internal.poster.jq.show(),b.css.jq.videoPlay.length&&b.css.jq.videoPlay.show(),b._error({type:c.jPlayer.error.URL,context:b.status.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(a,d){isFinite(a.duration)&&(this.status.duration=a.duration);var b=a.currentTime;var c=0<this.status.duration?100*b/this.status.duration:0;if("object"===typeof a.seekable&&0<a.seekable.length){var g=0<this.status.duration?100*a.seekable.end(a.seekable.length-1)/this.status.duration:
100;var e=0<this.status.duration?100*a.currentTime/a.seekable.end(a.seekable.length-1):0}else g=100,e=c;d&&(c=e=b=0);this.status.seekPercent=g;this.status.currentPercentRelative=e;this.status.currentPercentAbsolute=c;this.status.currentTime=b;this.status.remaining=this.status.duration-this.status.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=a.readyState;this.status.networkState=a.networkState;this.status.playbackRate=a.playbackRate;this.status.ended=
a.ended},_getAuroraStatus:function(a,d){this.status.duration=a.duration/1E3;var b=a.currentTime/1E3;var c=0<this.status.duration?100*b/this.status.duration:0;if(0<a.buffered){var g=0<this.status.duration?a.buffered*this.status.duration/this.status.duration:100;a=0<this.status.duration?b/(a.buffered*this.status.duration):0}else g=100,a=c;d&&(c=a=b=0);this.status.seekPercent=g;this.status.currentPercentRelative=a;this.status.currentPercentAbsolute=c;this.status.currentTime=b;this.status.remaining=this.status.duration-
this.status.currentTime;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=!1},_resetStatus:function(){this.status=c.extend({},this.status,c.jPlayer.prototype.status)},_trigger:function(a,d,b){a=c.Event(a);a.jPlayer={};a.jPlayer.version=c.extend({},this.version);a.jPlayer.options=c.extend(!0,{},this.options);a.jPlayer.status=c.extend(!0,{},this.status);a.jPlayer.html=c.extend(!0,{},this.html);a.jPlayer.aurora=c.extend(!0,{},this.aurora);a.jPlayer.flash=
c.extend(!0,{},this.flash);d&&(a.jPlayer.error=c.extend({},d));b&&(a.jPlayer.warning=c.extend({},b));this.element.trigger(a)},jPlayerFlashEvent:function(a,d){if(a===c.jPlayer.event.ready)if(!this.internal.ready)this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=d.version,this.version.needFlash!==this.version.flash&&this._error({type:c.jPlayer.error.VERSION,context:this.version.flash,message:c.jPlayer.errorMsg.VERSION+this.version.flash,hint:c.jPlayer.errorHint.VERSION}),
this._trigger(c.jPlayer.event.repeat),this._trigger(a);else if(this.flash.gate){if(this.status.srcSet){var b=this.status.currentTime,g=this.status.paused;this.setMedia(this.status.media);this.volumeWorker(this.options.volume);0<b&&(g?this.pause(b):this.play(b))}this._trigger(c.jPlayer.event.flashreset)}if(this.flash.gate)switch(a){case c.jPlayer.event.progress:this._getFlashStatus(d);this._updateInterface();this._trigger(a);break;case c.jPlayer.event.timeupdate:this._getFlashStatus(d);this._updateInterface();
this._trigger(a);break;case c.jPlayer.event.play:this._seeked();this._updateButtons(!0);this._trigger(a);break;case c.jPlayer.event.pause:this._updateButtons(!1);this._trigger(a);break;case c.jPlayer.event.ended:this._updateButtons(!1);this._trigger(a);break;case c.jPlayer.event.click:this._trigger(a);break;case c.jPlayer.event.error:this.status.waitForLoad=!0;this.status.waitForPlay=!0;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&
this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._updateButtons(!1);this._error({type:c.jPlayer.error.URL,context:d.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL});break;case c.jPlayer.event.seeking:this._seeking();this._trigger(a);break;case c.jPlayer.event.seeked:this._seeked();this._trigger(a);break;case c.jPlayer.event.ready:break;
default:this._trigger(a)}return!1},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent;this.status.currentPercentRelative=a.currentPercentRelative;this.status.currentPercentAbsolute=a.currentPercentAbsolute;this.status.currentTime=a.currentTime;this.status.duration=a.duration;this.status.remaining=a.duration-a.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=
!1},_updateButtons:function(a){a===e?a=!this.status.paused:this.status.paused=!a;a?this.addStateClass("playing"):this.removeStateClass("playing");!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen");this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped");this.css.jq.play.length&&this.css.jq.pause.length&&(a?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()));
this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide()));this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},
_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));if(this.css.jq.currentTime.length){var a=this._convertTime(this.status.currentTime);a!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime))}a=
this.status.duration;var d=this.status.remaining;this.css.jq.duration.length&&("string"===typeof this.status.media.duration?a=this.status.media.duration:("number"===typeof this.status.media.duration&&(a=this.status.media.duration,d=a-this.status.currentTime),a=this.options.remainingDuration&&0<a?(0<d?"-":"")+this._convertTime(d):this._convertTime(a)),a!==this.css.jq.duration.text()&&this.css.jq.duration.text(a))},_convertTime:f.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg");
this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg");this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1;this.html.video.gate=!1;this.aurora.gate=!1;this.flash.gate=!1},_resetActive:function(){this.html.active=!1;this.aurora.active=!1;this.flash.active=!1},_escapeHtml:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(a){var d=
document.createElement("div");d.innerHTML='<a href="'+this._escapeHtml(a)+'">x</a>';return d.firstChild.href},_absoluteMediaUrls:function(a){var d=this;c.each(a,function(b,c){c&&d.format[b]&&"data:"!==c.substr(0,5)&&(a[b]=d._qualifyURL(c))});return a},addStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[a])},removeStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[a])},setMedia:function(a){var d=this,b=!1,
g=this.status.media.poster!==a.poster;this._resetMedia();this._resetGate();this._resetActive();this.androidFix.setMedia=!1;this.androidFix.play=!1;this.androidFix.pause=!1;a=this._absoluteMediaUrls(a);c.each(this.formats,function(g,e){var f="video"===d.format[e].media;c.each(d.solutions,function(g,h){if(d[h].support[e]&&d._validString(a[e]))return g="html"===h,h="aurora"===h,f?(g?(d.html.video.gate=!0,d._html_setVideo(a),d.html.active=!0):(d.flash.gate=!0,d._flash_setVideo(a),d.flash.active=!0),d.css.jq.videoPlay.length&&
d.css.jq.videoPlay.show(),d.status.video=!0):(g?(d.html.audio.gate=!0,d._html_setAudio(a),d.html.active=!0,c.jPlayer.platform.android&&(d.androidFix.setMedia=!0)):h?(d.aurora.gate=!0,d._aurora_setAudio(a),d.aurora.active=!0):(d.flash.gate=!0,d._flash_setAudio(a),d.flash.active=!0),d.css.jq.videoPlay.length&&d.css.jq.videoPlay.hide(),d.status.video=!1),b=!0,!1});if(b)return!1});b?(this.status.nativeVideoControls&&this.html.video.gate||!this._validString(a.poster)||(g?this.htmlElement.poster.src=a.poster:
this.internal.poster.jq.show()),"string"===typeof a.title&&(this.css.jq.title.length&&this.css.jq.title.html(a.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",a.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",a.title)),this.status.srcSet=!0,this.status.media=c.extend({},a),this._updateButtons(!1),this._updateInterface(),this._trigger(c.jPlayer.event.setmedia)):this._error({type:c.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+
"'}",message:c.jPlayer.errorMsg.NO_SUPPORT,hint:c.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus();this._updateButtons(!1);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():
this.flash.active&&this._flash_clearMedia();this._resetGate();this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(c.jPlayer.focus=this)},play:function(a){"object"===typeof a&&this.options.useStateClassSkin&&!this.status.paused?this.pause(a):(a="number"===typeof a?a:NaN,this.status.srcSet?(this.focus(),this.html.active?
this._html_play(a):this.aurora.active?this._aurora_play(a):this.flash.active&&this._flash_play(a)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(a){a="number"===typeof a?a:NaN;this.status.srcSet?this.html.active?this._html_pause(a):this.aurora.active?this._aurora_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},tellOthers:function(a,d){var b=this,g="function"===typeof d,e=Array.prototype.slice.call(arguments);"string"===typeof a&&(g&&
e.splice(1,1),c.jPlayer.prototype.destroyRemoved(),c.each(this.instances,function(){b.element===this||g&&!d.call(this.data("jPlayer"),b)||this.jPlayer.apply(this,e)}))},pauseOthers:function(a){this.tellOthers("pause",function(){return this.status.srcSet},a)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100);this.status.srcSet?
this.html.active?this._html_playHead(a):this.aurora.active?this._aurora_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(a){this.mutedWorker(a);this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},a)},mutedWorker:function(a){this.options.muted=a;this.html.used&&this._html_setProperty("muted",a);this.aurora.used&&this._aurora_mute(a);this.flash.used&&this._flash_mute(a);this.html.video.gate||this.html.audio.gate||
(this._updateMute(a),this._updateVolume(this.options.volume),this._trigger(c.jPlayer.event.volumechange))},mute:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(a=a===e?!0:!!a,this._muted(a))},unmute:function(a){a=a===e?!0:!!a;this._muted(!a)},_updateMute:function(a){a===e&&(a=this.options.muted);a?this.addStateClass("muted"):this.removeStateClass("muted");this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),
this.css.jq.unmute.hide()):a?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(a){this.volumeWorker(a);this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},a)},volumeWorker:function(a){a=this._limitValue(a,0,1);this.options.volume=a;this.html.used&&this._html_setProperty("volume",a);this.aurora.used&&this._aurora_volume(a);this.flash.used&&this._flash_volume(a);this.html.video.gate||
this.html.audio.gate||(this._updateVolume(a),this._trigger(c.jPlayer.event.volumechange))},volumeBar:function(a){if(this.css.jq.volumeBar.length){var d=c(a.currentTarget),b=d.offset(),g=a.pageX-b.left,e=d.width();a=d.height()-a.pageY+b.top;d=d.height();this.options.verticalVolume?this.volume(a/d):this.volume(g/e)}this.options.muted&&this._muted(!1)},_updateVolume:function(a){a===e&&(a=this.options.volume);a=this.options.muted?0:a;this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&
this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*a+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1);
this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(a){var d=this;this.options.cssSelectorAncestor=a;this._removeUiClass();this.ancestorJq=a?c(a):[];a&&1!==this.ancestorJq.length&&this._warning({type:c.jPlayer.warning.CSS_SELECTOR_COUNT,context:a,message:c.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:c.jPlayer.warningHint.CSS_SELECTOR_COUNT});this._addUiClass();c.each(this.options.cssSelector,function(a,b){d._cssSelector(a,b)});
this._updateInterface();this._updateButtons();this._updateAutohide();this._updateVolume();this._updateMute()},_cssSelector:function(a,d){var b=this;"string"===typeof d?c.jPlayer.prototype.options.cssSelector[a]?(this.css.jq[a]&&this.css.jq[a].length&&this.css.jq[a].unbind(".jPlayer"),this.options.cssSelector[a]=d,this.css.cs[a]=this.options.cssSelectorAncestor+" "+d,this.css.jq[a]=d?c(this.css.cs[a]):[],this.css.jq[a].length&&this[a]&&this.css.jq[a].bind("click.jPlayer",function(d){d.preventDefault();
b[a](d);b.options.autoBlur?c(this).blur():c(this).focus()}),d&&1!==this.css.jq[a].length&&this._warning({type:c.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[a],message:c.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[a].length+" found for "+a+" method.",hint:c.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:c.jPlayer.warning.CSS_SELECTOR_METHOD,context:a,message:c.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:c.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:c.jPlayer.warning.CSS_SELECTOR_STRING,
context:d,message:c.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:c.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(a){this.options.toggleDuration&&(this.options.captureDuration&&a.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(a){if(this.css.jq.seekBar.length){var d=c(a.currentTarget),b=d.offset();a=a.pageX-b.left;d=d.width();this.playHead(100*a/d)}},playbackRate:function(a){this._setOption("playbackRate",a)},playbackRateBar:function(a){if(this.css.jq.playbackRateBar.length){var d=
c(a.currentTarget),b=d.offset(),g=a.pageX-b.left,e=d.width();a=d.height()-a.pageY+b.top;d=d.height();this.playbackRate((this.options.verticalPlaybackRate?a/d:g/e)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate)}},_updatePlaybackRate:function(){var a=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),
this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*a+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.loop?this._loop(!1):this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(a){this.options.loop!==
a&&(this.options.loop=a,this._updateButtons(),this._trigger(c.jPlayer.event.repeat))},option:function(a,d){var b=a;if(0===arguments.length)return c.extend(!0,{},this.options);if("string"===typeof a){var g=a.split(".");if(d===e){b=c.extend(!0,{},this.options);for(var f=0;f<g.length;f++)if(b[g[f]]!==e)b=b[g[f]];else return this._warning({type:c.jPlayer.warning.OPTION_KEY,context:a,message:c.jPlayer.warningMsg.OPTION_KEY,hint:c.jPlayer.warningHint.OPTION_KEY}),e;return b}f=b={};for(var h=0;h<g.length;h++)h<
g.length-1?(f[g[h]]={},f=f[g[h]]):f[g[h]]=d}this._setOptions(b);return this},_setOptions:function(a){var d=this;c.each(a,function(a,b){d._setOption(a,b)});return this},_setOption:function(a,d){var b=this;switch(a){case "volume":this.volume(d);break;case "muted":this._muted(d);break;case "globalVolume":this.options[a]=d;break;case "cssSelectorAncestor":this._cssSelectorAncestor(d);break;case "cssSelector":c.each(d,function(a,d){b._cssSelector(a,d)});break;case "playbackRate":this.options[a]=d=this._limitValue(d,
this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("playbackRate",d);this._updatePlaybackRate();break;case "defaultPlaybackRate":this.options[a]=d=this._limitValue(d,this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("defaultPlaybackRate",d);this._updatePlaybackRate();break;case "minPlaybackRate":this.options[a]=d=this._limitValue(d,.1,this.options.maxPlaybackRate-.1);this._updatePlaybackRate();break;case "maxPlaybackRate":this.options[a]=
d=this._limitValue(d,this.options.minPlaybackRate+.1,16);this._updatePlaybackRate();break;case "fullScreen":if(this.options[a]!==d){var g=c.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;if(!g||g&&!this.status.waitForPlay)g||(this.options[a]=d),d?this._requestFullscreen():this._exitFullscreen(),g||this._setOption("fullWindow",d)}break;case "fullWindow":this.options[a]!==d&&(this._removeUiClass(),this.options[a]=d,this._refreshSize());break;case "size":this.options.fullWindow||this.options[a].cssClass===
d.cssClass||this._removeUiClass();this.options[a]=c.extend({},this.options[a],d);this._refreshSize();break;case "sizeFull":this.options.fullWindow&&this.options[a].cssClass!==d.cssClass&&this._removeUiClass();this.options[a]=c.extend({},this.options[a],d);this._refreshSize();break;case "autohide":this.options[a]=c.extend({},this.options[a],d);this._updateAutohide();break;case "loop":this._loop(d);break;case "remainingDuration":this.options[a]=d;this._updateInterface();break;case "toggleDuration":this.options[a]=
d;break;case "nativeVideoControls":this.options[a]=c.extend({},this.options[a],d);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case "noFullWindow":this.options[a]=c.extend({},this.options[a],d);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this._restrictNativeVideoControls();this._updateButtons();
break;case "noVolume":this.options[a]=c.extend({},this.options[a],d);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case "emulateHtml":this.options[a]!==d&&((this.options[a]=d)?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case "timeFormat":this.options[a]=c.extend({},this.options[a],d);break;case "keyEnabled":this.options[a]=d;d||this!==c.jPlayer.focus||(c.jPlayer.focus=null);break;case "keyBindings":this.options[a]=c.extend(!0,
{},this.options[a],d);break;case "audioFullScreen":this.options[a]=d;break;case "autoBlur":this.options[a]=d}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(c.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,
this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass);this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});!this.status.waitForPlay&&this.html.active&&
this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var a=this,d=function(d){var b=!1;if("undefined"!==typeof a.internal.mouse){b=a.internal.mouse.x-d.pageX;var c=a.internal.mouse.y-d.pageY;b=0<Math.floor(b)||
0<Math.floor(c)}else b=!0;a.internal.mouse={x:d.pageX,y:d.pageY};b&&a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId);a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?
this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",d),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",d),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",
!1)},_fullscreenAddEventListeners:function(){var a=this,d=c.jPlayer.nativeFeatures.fullscreen;d.api.fullscreenEnabled&&d.event.fullscreenchange&&("function"!==typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){a._fullscreenchange()}),document.addEventListener(d.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var a=c.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(a.event.fullscreenchange,
this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!c.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var a=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],d=c.jPlayer.nativeFeatures.fullscreen;d.used.webkitVideo&&(a=this.htmlElement.video);d.api.fullscreenEnabled&&d.api.requestFullscreen(a)},_exitFullscreen:function(){var a=c.jPlayer.nativeFeatures.fullscreen;if(a.used.webkitVideo)var d=
this.htmlElement.video;a.api.fullscreenEnabled&&a.api.exitFullscreen(d)},_html_initMedia:function(a){var d=c(this.htmlElement.media).empty();c.each(a.track||[],function(a,b){a=document.createElement("track");a.setAttribute("kind",b.kind?b.kind:"");a.setAttribute("src",b.src?b.src:"");a.setAttribute("srclang",b.srclang?b.srclang:"");a.setAttribute("label",b.label?b.label:"");b.def&&a.setAttribute("default",b.def);d.append(a)});this.htmlElement.media.src=this.status.src;"none"!==this.options.preload&&
this._html_load();this._trigger(c.jPlayer.event.timeupdate)},_html_setFormat:function(a){var d=this;c.each(this.formats,function(b,c){if(d.html.support[c]&&a[c])return d.status.src=a[c],d.status.format[c]=!0,d.status.formatType=c,!1})},_html_setAudio:function(a){this._html_setFormat(a);this.htmlElement.media=this.htmlElement.audio;this._html_initMedia(a)},_html_setVideo:function(a){this._html_setFormat(a);this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(a.poster)?
a.poster:"");this.htmlElement.media=this.htmlElement.video;this._html_initMedia(a)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=
!1,this.htmlElement.media.load());clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var d=this,b=this.htmlElement.media;this.androidFix.pause=!1;this._html_load();if(this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=a;else if(isNaN(a))b.play();else{this.internal.cmdsIgnored&&b.play();try{if(!b.seekable||"object"===typeof b.seekable&&0<b.seekable.length)b.currentTime=a,b.play();else throw 1;}catch(l){this.internal.htmlDlyCmdId=setTimeout(function(){d.play(a)},250);
return}}this._html_checkWaitForPlay()},_html_pause:function(a){var d=this,b=this.htmlElement.media;this.androidFix.play=!1;0<a?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);b.pause();if(this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=a;else if(!isNaN(a))try{if(!b.seekable||"object"===typeof b.seekable&&0<b.seekable.length)b.currentTime=a;else throw 1;}catch(l){this.internal.htmlDlyCmdId=setTimeout(function(){d.pause(a)},250);return}0<a&&this._html_checkWaitForPlay()},
_html_playHead:function(a){var d=this,b=this.htmlElement.media;this._html_load();try{if("object"===typeof b.seekable&&0<b.seekable.length)b.currentTime=a*b.seekable.end(b.seekable.length-1)/100;else if(0<b.duration&&!isNaN(b.duration))b.currentTime=a*b.duration/100;else throw"e";}catch(l){this.internal.htmlDlyCmdId=setTimeout(function(){d.playHead(a)},250);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=
!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(a,d){this.html.audio.available&&(this.htmlElement.audio[a]=d);this.html.video.available&&(this.htmlElement.video[a]=d)},_aurora_setAudio:function(a){var d=this;c.each(this.formats,function(b,c){if(d.aurora.support[c]&&a[c])return d.status.src=a[c],d.status.format[c]=!0,d.status.formatType=
c,!1});this.aurora.player=new AV.Player.fromURL(this.status.src);this._addAuroraEventListeners(this.aurora.player,this.aurora);"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(a){this.status.waitForLoad||isNaN(a)||this.aurora.player.seek(a);
this.aurora.player.playing||this.aurora.player.play();this.status.waitForLoad=!1;this._aurora_checkWaitForPlay();this._updateButtons(!0);this._trigger(c.jPlayer.event.play)},_aurora_pause:function(a){isNaN(a)||this.aurora.player.seek(1E3*a);this.aurora.player.pause();0<a&&this._aurora_checkWaitForPlay();this._updateButtons(!1);this._trigger(c.jPlayer.event.pause)},_aurora_playHead:function(a){0<this.aurora.player.duration&&this.aurora.player.seek(a*this.aurora.player.duration/100);this.status.waitForLoad||
this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(a){this.aurora.player.volume=100*a},_aurora_mute:function(a){a?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume;this.aurora.properties.muted=a},_flash_setAudio:function(a){var d=this;try{c.each(this.formats,function(b,c){if(d.flash.support[c]&&a[c]){switch(c){case "m4a":case "fla":d._getMovie().fl_setAudio_m4a(a[c]);
break;case "mp3":d._getMovie().fl_setAudio_mp3(a[c]);break;case "rtmpa":d._getMovie().fl_setAudio_rtmp(a[c])}d.status.src=a[c];d.status.format[c]=!0;d.status.formatType=c;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(k){this._flashError(k)}},_flash_setVideo:function(a){var d=this;try{c.each(this.formats,function(b,c){if(d.flash.support[c]&&a[c]){switch(c){case "m4v":case "flv":d._getMovie().fl_setVideo_m4v(a[c]);break;case "rtmpv":d._getMovie().fl_setVideo_rtmp(a[c])}d.status.src=
a[c];d.status.format[c]=!0;d.status.formatType=c;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(k){this._flashError(k)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(g){this._flashError(g)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(g){this._flashError(g)}this.status.waitForLoad=!1},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(h){this._flashError(h)}this.status.waitForLoad=
!1;this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(h){this._flashError(h)}0<a&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(h){this._flashError(h)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&
(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(h){this._flashError(h)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(h){this._flashError(h)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var a=0;if(window.ActiveXObject)try{var d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");var b=d.GetVariable("$version");
b&&(b=b.split(" ")[1].split(","),a=parseInt(b[0],10)+"."+parseInt(b[1],10))}catch(l){}else navigator.plugins&&0<navigator.mimeTypes.length&&(d=navigator.plugins["Shockwave Flash"])&&(a=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*a},_checkForFlash:function(a){var d=!1;this._getFlashPluginVersion()>=a&&(d=!0);return d},_validString:function(a){return a&&"string"===typeof a},_limitValue:function(a,d,b){return a<d?d:a>b?b:a},_urlNotSetError:function(a){this._error({type:c.jPlayer.error.URL_NOT_SET,
context:a,message:c.jPlayer.errorMsg.URL_NOT_SET,hint:c.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(a){var d=this.internal.ready?"FLASH_DISABLED":"FLASH";this._error({type:c.jPlayer.error[d],context:this.internal.flash.swf,message:c.jPlayer.errorMsg[d]+a.message,hint:c.jPlayer.errorHint[d]});this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(a){this._trigger(c.jPlayer.event.error,a);this.options.errorAlerts&&this._alert("Error!"+(a.message?"\n"+a.message:"")+(a.hint?
"\n"+a.hint:"")+"\nContext: "+a.context)},_warning:function(a){this._trigger(c.jPlayer.event.warning,e,a);this.options.warningAlerts&&this._alert("Warning!"+(a.message?"\n"+a.message:"")+(a.hint?"\n"+a.hint:"")+"\nContext: "+a.context)},_alert:function(a){a="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(a):alert(a)},_emulateHtmlBridge:function(){var a=this;c.each(c.jPlayer.emulateMethods.split(/\s+/g),
function(d,b){a.internal.domNode[b]=function(d){a[b](d)}});c.each(c.jPlayer.event,function(d,b){var e=!0;c.each(c.jPlayer.reservedEvent.split(/\s+/g),function(a,b){if(b===d)return e=!1});e&&a.element.bind(b+".jPlayer.jPlayerHtml",function(){a._emulateHtmlUpdate();var b=document.createEvent("Event");b.initEvent(d,!1,!0);a.internal.domNode.dispatchEvent(b)})})},_emulateHtmlUpdate:function(){var a=this;c.each(c.jPlayer.emulateStatus.split(/\s+/g),function(d,b){a.internal.domNode[b]=a.status[b]});c.each(c.jPlayer.emulateOptions.split(/\s+/g),
function(d,b){a.internal.domNode[b]=a.options[b]})},_destroyHtmlBridge:function(){var a=this;this.element.unbind(".jPlayerHtml");c.each((c.jPlayer.emulateMethods+" "+c.jPlayer.emulateStatus+" "+c.jPlayer.emulateOptions).split(/\s+/g),function(d,b){delete a.internal.domNode[b]})}};c.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};c.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",
FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+c.jPlayer.prototype.version.script+
" needs Jplayer.swf version "+c.jPlayer.prototype.version.needFlash+" but found "};c.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};
c.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};c.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};
c.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}});
function Accordion(c){window[c]=this;var e=this,f,b,a,d,g;e.initialize=function(){f=e.settings.cssClasses.expandedSectionHeader;b=e.settings.cssClasses.sectionHeader;a=e.settings.onSectionSlideDown;d=e.settings.onSectionSlideUp;g=e.settings.onInitComplete;$.each(e.foldableSections(),function(a,d){$("#"+d.headerLink+", #"+d.header).click(function(){e.handleSectionClick(d)})});null!=g&&$(document).trigger(g,e)};e.foldableSections=function(){return $(e.sections).filter(function(a,d){return d.isFoldable})};
e.handleSectionClick=function(a){a.isExpanded?e.collapseSection(a):e.expandSection(a)};e.expandSection=function(d){$("#"+d.header).removeClass(b).addClass(f);$("#"+d.content).slideDown(e.settings.animationDuration,function(){null!=a&&$(document).trigger(a,d.content)});d.isExpanded=!d.isExpanded};e.collapseSection=function(a){$("#"+a.header).removeClass(f).addClass(b);$("#"+a.content).slideUp(e.settings.animationDuration,function(){null!=d&&$(document).trigger(d,a.content)});a.isExpanded=!a.isExpanded};
return e}
function AccordionGrid(c){window[c]=this;var e=this;this.expandedRowCssClass=this.hiddenGridCssClass=null;this.subGridClientIds=[];e.toggleAccordionGrid=function(c,b){var a=$("."+c).parent("li");a.hasClass(e.hiddenGridCssClass)||void 0==b?("UL"!=$("."+c).get(0).tagName&&$(e.subGridClientIds).each(function(){this.cssClass==c&&1>this.totalCount&&this.refresh()}),$(b).addClass(e.expandedRowCssClass),a.removeClass(e.hiddenGridCssClass)):($(b).removeClass(e.expandedRowCssClass),a.addClass(e.hiddenGridCssClass))};e.reOpenOnPostBack=
function(c,b){""!=c&&void 0!=c&&e.toggleAccordionGrid(c);""!=b&&void 0!=b&&e.toggleAccordionGrid(b)};e.getSelectedValues=function(){var c=!1;$(e.subGridClientIds).each(function(){0<this.getSelectedValues().length&&(c=!0)});return c?!0:""}}
function AsyncDependenciesResolver(){var c={},e={deferredObjects:{},getOrCreateDeferredObject:function(c){if(e.deferredObjects[c])return e.deferredObjects[c];e.deferredObjects[c]=$.Deferred();return e.deferredObjects[c]}};c.dependencyLoaded=function(c){e.getOrCreateDeferredObject(c).resolve()};c.subscribeToDependencyLoadEvent=function(c,b){e.getOrCreateDeferredObject(c).done(b)};c.loadScriptDynamically=function(c,b){var a=document.createElement("script");a.type="text/javascript";a.onload=b;a.onreadystatechange=
function(){"complete"===a.readyState&&b()};a.src=c;$(window).load(function(){document.getElementsByTagName("head")[0].appendChild(a)})};c.loadScriptAsync=function(c){var b=$.Deferred(),a=function(){b.resolve()},d=function(){b.reject()},e=function(){b.notify()},f=document.createElement("script");f.type="text/javascript";f.onload=a;f.onreadystatechange=function(){"complete"===f.readyState&&a()};f.onerror=d;if(c.attributes)for(var k in c.attributes)c.attributes.hasOwnProperty(k)&&f.setAttribute(k,c.attributes[k]);
f.src=c.url;document.getElementsByTagName("head")[0].appendChild(f);c.timeoutInMilliseconds&&setTimeout(d,c.timeoutInMilliseconds);c.notifyLongLoading&&setTimeout(e,3E3);return b.promise()};return c}var asyncDependencies={signalRHubScript:0},asyncDependenciesResolver=AsyncDependenciesResolver();
function BrowserSniffer(){var c={isDirectoryUploadSupported:function(){var c=document.createElement("input");return"webkitdirectory"in c||"directory"in c},isDragAndDropSupported:function(){return"draggable"in document.createElement("span")},isInternetExplorer9:function(){return $("body").hasClass("h-ie9")},isInternetExplorer10OrOlder:function(){return 0<window.navigator.userAgent.indexOf("MSIE ")?!0:!1},isInternetExplorer11:function(){return 0<window.navigator.userAgent.indexOf("Trident/")?!0:!1},
isInternetExplorerAnyVersion:function(){return c.isInternetExplorer9()||c.isInternetExplorer10OrOlder()||c.isInternetExplorer11()?!0:!1},isFirefox:function(){return 0<navigator.userAgent.indexOf("Firefox")?!0:!1},isEdge:function(){return 0<window.navigator.userAgent.indexOf("Edge/")?!0:!1},isMobileIos:function(){return window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1},isAnyMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?
!0:!1}};return c}var browserSniffer=BrowserSniffer();
function Calendar(c){window[c]=this;var e=this,f,b,a,d;e.initialize=function(){b=e.settings;a=e.customSettings;d=e.customScripts;f=e.calendar;$.extend(b,{select:d.onSelect,eventRender:d.eventRender,dayRender:d.dayRender,eventDrop:d.eventDrop,eventResize:d.eventResize,eventClick:d.eventClick,loading:d.loading,weekNumberCalculation:function(a){var d=f.fullCalendar("getView");return d&&d.name==window.fullCalendarViews.agendaDay?"":Calendar.getWeekNumber(a,b.firstDay)},viewChange:d.onChangeView,viewRender:function(a){f.fullCalendar("option",
"contentHeight",a.name==window.fullCalendarViews.month?NaN:2500);d.viewRender(a)},updateTodayButton:d.updateTodayButton,eventAfterAllRender:d.eventAfterAllRender,showMoreMousedown:d.showMoreMousedown});f.fullCalendar(b)};e.refetchEvents=function(d,b){var c=[];$.each(d,function(a,d){c.push(d.id)});$.isFunction(b)&&b(!0);$.ajax({type:"POST",url:a.refetchEventsSource,data:{ids:c.join()},datatype:"json",success:function(a){$.each(d,function(a,d){e.removeEvent(d.id)});$.each(a,function(a,b){a=$.grep(d,
function(a){return a.id==b.id})[0];a.source?e.addEventForSource(b,a.source):e.addEvent(b)});$.isFunction(b)&&b(!1)},error:function(){$.isFunction(b)&&b(!1)}})};e.refetchAll=function(){f.fullCalendar("refetchEvents")};e.removeEvent=function(a){f.fullCalendar("removeEvents",a)};e.addEvent=function(a){f.fullCalendar("renderEvent",a)};e.refetchSource=function(a){f.fullCalendar("refetchSource",a)};e.refetchSourceByName=function(a){a in e.eventSources&&e.refetchSource(e.eventSources[a])};e.addEventForSource=
function(a,d){f.fullCalendar("renderEventForSource",a,d)};e.addEventForSourceByName=function(a,d){d in e.eventSources&&e.addEventForSource(a,e.eventSources[d])}}
Calendar.getWeekNumber=function(c,e){e="number"==typeof e?e:1;e=0==e?7:e;var f=Calendar.calculateWeekNumber(c,e);if(11==c.getMonth()){var b=new Date(c.getFullYear()+1,0,1);if(7==e)b=new Date(c.getFullYear(),c.getMonth(),c.getDate()-c.getDay()),(new Date(b.getFullYear(),b.getMonth(),b.getDate()+6)).getFullYear()>b.getFullYear()&&(f=1);else{b=b.getIsoDay();var a=new Date(c.getFullYear(),c.getMonth(),c.getDate()-(c.getIsoDay()-1));(new Date(a.getFullYear(),a.getMonth(),a.getDate()+6)).getFullYear()>
a.getFullYear()&&5>b&&(f=1)}}0==f&&(c=new Date(c.getFullYear(),c.getMonth(),c.getDate()-7),f=Calendar.calculateWeekNumber(c,e));return f};
Calendar.calculateWeekNumber=function(c,e){var f=[0,31,59,90,120,151,181,212,243,273,304,334],b=[0,31,60,91,121,152,182,213,244,274,305,335];f=1==(new Date(c.getFullYear(),1,29)).getMonth()?c.getDate()+b[c.getMonth()]:c.getDate()+f[c.getMonth()];c=c.getIsoDay();c=Calendar.getShiftBetweenNumbers(e,c);c=Calendar.shiftNumber(1,c);return Math.floor((f-c+(7==e?13:10))/7)};Calendar.getShiftBetweenNumbers=function(c,e){for(var f=0;7>f;f++){if(c==e)return f;c++;8==c&&(c=1)}return 0};
Calendar.shiftNumber=function(c,e){if(0==e)return c;for(var f=0;f<e;f++)c++,8==c&&(c=1);return c};Date.prototype.getIsoDay=function(){var c=this.getDay();return 0==c?7:c};
function ClientInlineEditor(c,e,f,b,a,d,g){if(c){var h=this;h.isWatermarkMode=!1;h.isGetInitialTextFromHidden=!!f;h.hiddenField=f;h.viewField=$(c);h.editModeActivator=e?$(e):h.viewField;h.editField=void 0;h.editHidden=void 0;h.editLink=$();h.onEditFunction=a;h.onChangeModeFunction=d;h.userData=g;h.options=$.extend({multiline:!1,watermark:"",autoResize:!1,clickToEditToolTip:"",clickToSaveToolTip:"",submitOnEnter:!1,ignoreViewModeText:!1,editFieldCssClass:"",watermarkCssClass:"",editFieldAutoWidth:!0,
editFieldDisplayInline:!1,viewFieldRemoveDisplay:!1,highlightOnSave:!1,highlightOnFocus:!1,maxLength:0,renderRightLinkWithIcon:!1,rightLinkCssClass:"",rightLinkViewModeCssClass:"",rightLinkEditModeCssClass:"",supressOriginalBehaviour:!1,blockedCharacters:[],forceContainerSize:!1},b);h.options.useWatermark=!!h.options.watermark;h.options.useClickToEditToolTip=!!h.options.clickToEditToolTip;h.options.useEditFieldCssClass=!!h.options.editFieldCssClass;h.options.useWatermarkCssClass=!!h.options.watermarkCssClass;
h.options.renderRightLinkWithIcon&&(h.editLink=$("<a href='#'></a>").addClass(h.options.rightLinkCssClass).append($("<img alt='' />").attr("src",CommonConstants.onePixelTransparentImageSource)).insertAfter(h.viewField).click({self:h},h.rightLinkClick).keydown({self:h},h.rightLinkKeyDown),h.initDeviceChecks(),h.toggleRightLinkMode(!0,!0));h.options.supressOriginalBehaviour||h.editModeActivator.click($.proxy(h.switchToEditMode,h)).filter("a").keydown({self:h},h.editModeActivatorKeyDown);h.toggleActivatorTooltip(!0);
h.fixSize();return{switchToEditMode:function(){h.switchToEditMode();return h.editField},setNewText:function(a){h.setNewText(a)},getEditFieldText:function(){return h.getEditFieldText()},setToolTip:function(a){h.options.clickToEditToolTip=a;h.editModeActivator.attr("title",a)}}}}
ClientInlineEditor.prototype={isIos:void 0,hiddenCssClass:"h-hidden",createEditor:function(c){this.options.renderRightLinkWithIcon||this.initDeviceChecks();this.editField=$(c.multiline?"<textarea/>":'<input type="text"/>').css("resize","none").addClass(this.hiddenCssClass);this.setEditFieldWidth();c.useEditFieldCssClass&&this.editField.addClass(c.editFieldCssClass);!c.multiline&&c.maxLength&&this.editField.attr("maxlength",c.maxLength);c.multiline&&c.maxLength&&this.editField.maxlength({max:c.maxLength});
this.editHidden=this.isGetInitialTextFromHidden?$(this.hiddenField):$('<input type="hidden"/>').val(this.viewField.text());this.setNewText(c.ignoreViewModeText?"":$.trim(this.editHidden.val()));this.viewField.after(this.editField);this.isGetInitialTextFromHidden||this.viewField.after(this.editHidden);c.multiline&&c.autoResize&&this.editField.autogrow();this.switchToViewMode(!1);this.editField.removeClass(this.hiddenCssClass).keyup({self:this},this.editFieldKeyUp).keypress({self:this},this.editFieldKeyPress).on("paste",
$.proxy(this.hideWatermark,this)).focus({self:this},this.editFieldFocus).blur({self:this},this.editFieldBlur)},setNewText:function(c){this.options.ignoreViewModeText||this.options.supressOriginalBehaviour||(c?this.options.multiline?this.viewField.html(CommonFunctions.replaceLineBreaksWithBrTags(c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;"))):this.viewField.text(c):this.viewField.html(""));this.editField||this.createEditor(this.options);this.editField.val(c);
this.editHidden.val(c)},fixSize:function(){if(this.options.forceContainerSize){var c=this.viewField.parent();c.css("width","0px");setTimeout(function(){c.css("width","auto")},10)}},switchToViewMode:function(c,e){this.editField.hide();c&&this.options.highlightOnSave?this.viewField.fadeIn("slow"):this.viewField.show();this.options.viewFieldRemoveDisplay&&this.viewField.css("display","");this.toggleActivatorTooltip(!0);this.fireChangeMode(!1,c,e);this.toggleRightLinkMode(!0)},switchToEditMode:function(){this.editField?
this.setEditFieldWidth():this.createEditor(this.options);this.isViewMode()&&(this.viewField.hide(),this.editField.show(),this.options.editFieldDisplayInline&&this.editField.css("display","inline"),this.toggleActivatorTooltip(!1),this.fireChangeMode(!0,!1),this.editField.focus(),this.toggleRightLinkMode(!1))},fireChangeMode:function(c,e,f){if(this.onChangeModeFunction){var b=this;setTimeout(function(){b.onChangeModeFunction({isEditMode:c,isNewTextSaved:e,actualText:f,source:b.viewField,currentOptions:b.options,
userData:b.userData})})}this.fixSize()},isViewMode:function(){return this.editField.is(":hidden")},updateText:function(){var c=this;c.updateValue();var e={isUpdateSuccess:!0,stopOnEdit:!1,actualText:c.isWatermarkMode?"":c.editField.val(),source:c.viewField,currentOptions:c.options,userData:c.userData};if(e.actualText===c.editHidden.val())setTimeout(function(){c.switchToViewMode(!1)},c.options.renderRightLinkWithIcon?100:0);else if(c.toggleEditField(!1),c.onEditFunction)c.onEditFunction(e,$.proxy(c.onUpdateComplete,
c));else setTimeout(function(){c.onUpdateComplete(e)})},onUpdateComplete:function(c){this.toggleEditField(!0);c.isUpdateSuccess?(this.setNewText(c.actualText),this.switchToViewMode(!0,c.actualText)):c.stopOnEdit||this.rollbackText()},rollbackText:function(){this.editField.val(this.editHidden.val());this.switchToViewMode(!1)},toggleEditField:function(c){this.editField.prop("disabled",!c)},toggleActivatorTooltip:function(c){this.editModeActivator.css("cursor",c?"pointer":"default");this.options.useClickToEditToolTip&&
this.editModeActivator.attr("title",c?this.options.clickToEditToolTip:null)},isEnterKey:function(c){return c.which===CommonConstants.keyCodes.enter&&!c.shiftKey},isEnterKeyAndNeedToSubmit:function(c){return this.options.submitOnEnter&&c.which===CommonConstants.keyCodes.enter&&!c.shiftKey},showWatermark:function(){!this.options.useWatermark||this.isWatermarkMode||this.editField.val()||(this.options.useWatermarkCssClass&&this.editField.addClass(this.options.watermarkCssClass),this.editField.val(this.options.watermark),
this.isWatermarkMode=!0)},hideWatermark:function(){this.options.useWatermark&&this.isWatermarkMode&&(this.options.useWatermarkCssClass&&this.editField.removeClass(this.options.watermarkCssClass),this.editField.val(""),this.isWatermarkMode=!1)},editModeActivatorKeyDown:function(c){var e=c.data.self;e.fireClickByKeyDown(c,e.editModeActivator)},rightLinkKeyDown:function(c){var e=c.data.self;e.fireClickByKeyDown(c,e.editLink)},fireClickByKeyDown:function(c,e){c.which===CommonConstants.keyCodes.enter&&
(c.preventDefault(),setTimeout(function(){e.click()},400))},editFieldFocus:function(c){c=c.data.self;var e=c.editField.get(0);c.showWatermark();CommonFunctions.setFocusTo(e,!c.isWatermarkMode);c.options.highlightOnFocus&&(c.isIos?e.setSelectionRange(0,e.value.length):c.editField.select());c.options.multiline&&c.options.autoResize&&c.editField.change()},editFieldBlur:function(c){c.data.self.updateTextOnBlur();c.stopPropagation()},updateTextOnBlur:function(){this.editField.prop("disabled")||(this.hideWatermark(),
this.updateText())},editFieldKeyUp:function(c){var e=c.data.self;if(!e.isViewMode()){if(e.editField.prop("disabled"))return!0;if(c.which===CommonConstants.keyCodes.escape)e.rollbackText();else if(e.isEnterKey(c)){if(e.options.multiline&&!e.isEnterKeyAndNeedToSubmit(c))return!0;e.updateText();if(e.isEnterKeyAndNeedToSubmit(c))return c.stopPropagation(),!1}else e.isIos||e.isAndroidDevice||e.updateValue()}return!0},updateValue:function(){if(null!=this.options.blockedCharacters&&0<this.options.blockedCharacters.length){for(var c=
this.editField.val(),e=c,f=this.options.blockedCharacters.length,b=0;b<f;b++)if(this.options.blockedCharacters[b])for(;-1<c.indexOf(this.options.blockedCharacters[b]);)c=c.replace(this.options.blockedCharacters[b],"");c!==e&&this.editField.val(c)}},editFieldKeyPress:function(c){var e=c.data.self;e.hideWatermark();e.options.multiline||!e.isEnterKey(c)||e.isEnterKeyAndNeedToSubmit(c)||c.preventDefault();return!e.isEnterKeyAndNeedToSubmit(c)},initDeviceChecks:function(){this.isAndroidDevice=(this.isIos=
CommonFunctions.isIos())?!1:CommonFunctions.isAndroidDevice()},rightLinkClick:function(c){var e=c.data.self;!e.editField||e.isViewMode()?e.switchToEditMode():e.isIos&&e.updateTextOnBlur();c.preventDefault()},toggleRightLinkMode:function(c,e){this.editLink.toggleClass(this.options.rightLinkEditModeCssClass,!c).prop("title",c?this.options.clickToEditToolTip:this.options.clickToSaveToolTip);this.isIos||this.isAndroidDevice||this.editLink.toggleClass(this.options.rightLinkViewModeCssClass,c);c&&!e&&this.editLink.focus().blur()},
getEditFieldText:function(){return this.editField.val()},setEditFieldWidth:function(){this.options.editFieldAutoWidth&&this.editField.width(this.viewField.width())}};function CodeContracts(){return{require:function(c,e){if(!objectState.isBoolean(c)||objectState.isNullOrUndefined(e))throw"invalid contract";if(!c)if(objectState.isFunction(e))e();else throw e;}}}var contract=CodeContracts();
function ColorPicker(c){function e(a){a=$(a).find("input:hidden:first").val();b(a)}function f(){var a=h.getSelectedColorKey();b(a)}function b(a){k.trigger(h.settings.clientEvents.colorOver,a)}function a(){if(l.is(":hidden")){var a=k.offset(),b=a.top+k.height()+3+"px";a=h.settings.popupAlignment===h.settings.popupAlignmentType.right?a.left-l.width()+k.width()+3+"px":a.left+"px";l.css({top:b,left:a}).show()}else d()}function d(a){l.hide();a&&k.focus()}function g(){l=$("<div></div>").addClass(h.settings.cssClasses.popup).addClass(h.settings.cssClasses.customPopup).appendTo("form").keydown(function(a){(a||
window.event).which===CommonConstants.keyCodes.escape&&(f(),d());return!0});m=$("<ul></ul>").appendTo(l);for(var a=0;a<h.settings.colorKeys.length;a++){var b=h.settings.colorKeys[a],c=$("<li></li>").append($('<input type="hidden" />').val(b)).append($("<a></a>").attr("href","javascript:void(0);").addClass(h.settings.colors[b].PickerColorCssClass)).appendTo(m);b===h.settings.selectedColorKey&&c.addClass(h.settings.cssClasses.selected)}}window[c]=this;var h=this,k,l,m;h.initialize=function(){k=h.controls.pickerLink;
g();$(document).click(function(a){a=a?a:window.event;var b=a.srcElement||a.target;!l.length||l.is(":hidden")||b===k.get(0)||$(b).parents().filter("#"+k.prop("id")).length||(b=l.offset(),a.clientX>b.left&&a.clientX<b.left+l.width()&&a.clientY>b.top&&a.clientY<b.top+l.height()||d())}).on("closeColorPicker",function(){d(!1)});var c=m.find("li");c.find("a").click(function(){var a=$(this.parentNode),e=a.find("input:hidden:first").val();d();c.removeClass(h.settings.cssClasses.selected);a.addClass(h.settings.cssClasses.selected);
b(e);k.trigger(h.settings.clientEvents.colorChange,e);return!1}).mouseenter(function(){e(this.parentNode)}).mouseleave(function(){f()}).focusin(function(){e(this.parentNode)}).focusout(function(){f()});k.click(function(d){d.preventDefault();$(document).click();a()})};h.getColorByKey=function(a){return h.settings.colors[a].RepaintColorCssClass};h.setColor=function(a){var d=m.find("li > input:hidden:[value='"+a+"']").parent();m.find("li").removeClass(h.settings.cssClasses.selected);d.addClass(h.settings.cssClasses.selected);
k.trigger(h.settings.clientEvents.colorChange,a)};h.setPickerLink=function(a){h.controls.pickerLink!==a&&(f(),d(),h.controls.pickerLink=a,h.initialize())};h.openPopup=function(){a()};h.getSelectedColorKey=function(){return m.find("li."+h.settings.cssClasses.selected+" input:hidden:first").val()};return h}
function ColorPickerMVC(c,e,f,b){function a(b){d(n,v,q);d(w,v,q);t&&t.setAttribute("class",m.preview+" "+q);r.classList.toggle(m.open);r.classList.contains(m.open)?(document.addEventListener("click",a),document.addEventListener("touch",a)):(document.removeEventListener("click",a),document.removeEventListener("touch",a));b&&b.stopPropagation();return!1}function d(a,d,b){a.setAttribute("value",d);a.setAttribute("class",b);try{a.dispatchEvent(new Event("change"))}catch(B){d=document.createEvent("Event"),
d.initEvent("change",!0,!0),a.dispatchEvent(d)}}function g(a,b){a&&b&&(z&&z.removeAttribute("selected"),z=b,v=b.value,q=a.classList?a.classList[0]:"",d(n,v,q),d(w,v,q),t&&t.setAttribute("class",m.preview+" "+q),b.setAttribute("selected","selected"))}function h(d,b){return function(c){g(d,b);a(c);return!1}}function k(a,b){return function(c){d(w,b.value,a.classList[0]);t&&t.setAttribute("class",m.preview+" "+a.classList[0]);c.stopPropagation();return!1}}function l(d,b){return function(d){if(d.keyCode===
CCL.CommonConstants.keyCodes.escape)return a(d),!1}}var m={preview:"ccl-colorpicker-mvc__previewbox",open:"ccl-colorpicker-mvc--open"},n=document.getElementById(c),p=document.getElementById(e),r=n.parentElement,w=r.getElementsByTagName("input")[1],t=r.getElementsByClassName(m.preview)[0];c=r.getElementsByTagName("ul")[0].children;var v,q;r.addEventListener("mouseout",function(){d(n,v,q);d(w,v,q);t&&t.setAttribute("class",m.preview+" "+q)});r.addEventListener("click",function(a){a.stopPropagation();
!1});r.addEventListener("touch",function(a){a.stopPropagation();!1});t&&t.addEventListener("click",a);t&&t.addEventListener("touch",a);p.addEventListener("click",a);p.addEventListener("touch",a);Array.prototype.forEach.call(c,function(a){var d=a.children[0],b=a.children[1];a.addEventListener("click",h(b,d));a.addEventListener("touch",h(b,d));a.addEventListener("mouseover",k(b,d));a.addEventListener("focus",k(b,d));a.addEventListener("keydown",l(b,d))});c[c.length-1].addEventListener("keydown",function(a){a.keyCode===
CCL.CommonConstants.keyCodes.tab&&(p.focus(),a.stopPropagation())});b&&(f=Math.floor(Math.random()*c.length)+1);var z=r.querySelector("ul > li > input[value='"+f+"']");g(z.nextElementSibling,z)}Array.removeElements=function(c,e){for(var f=[].concat(e),b=f.length,a;b&&c.length;)for(e=f[--b];-1!=(a=c.indexOf(e));)c.splice(a,1);return c};String.format||(String.format=function(c){return CCL.CommonFunctions.formatString.apply(this,arguments)});
String.prototype.getQueryStringParameter||(String.prototype.getQueryStringParameter=function(c){c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");c=(new RegExp("[\\?&]"+c+"=([^&#]*)")).exec(this);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))});
String.prototype.setQueryStringParameter||(String.prototype.setQueryStringParameter=function(c,e){return e?-1<this.indexOf(c+"=")?this.replace(new RegExp(c+"=[^&]*(&|$)"),c+"="+encodeURIComponent(e)+"&"):this.slice(0,this.indexOf("?")+1)+c+"="+encodeURIComponent(e)+"&"+this.slice(this.indexOf("?")+1):-1<this.indexOf(c+"=")?this.replace(new RegExp(c+"=[^&]*(&|$)"),""):this.toString()});
String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(c,e){e=e||0;return this.lastIndexOf(c,e)===e}});var CCL;
(function(c){(function(c){})(c.CommonConstants||(c.CommonConstants={}));(function(c){c.setFocusTo=function(c,b){c.setSelectionRange?(c.focus(),b=b?c.value.length:0,c.setSelectionRange(b,b)):c.createTextRange&&(c=c.createTextRange(),b&&c.collapse(!1),c.select())};c.setupDropDownMenu=function(c,b,a,d){var e=c?"touchstart":"click";a.find("a").click(function(){a.hide();d&&d()});b.on(e+" keydown",function(d){d.type!==e&&d.which!==CommonConstants.keyCodes.arrowDown&&d.which!==CommonConstants.keyCodes.enter||
"false"!==$(".c-messages-popup").attr("aria-hidden")||$(".c-messages__overlay").click();a.toggle()});$(document).on(e+" "+CommonTriggers.clickInInnerFrame,function(c){if(a.is(":visible")){var e=c.target,g=$(e);c=e===b.get(0)||1===g.closest(b).length;e=!c&&(e===a.get(0)||1===g.closest(a).length);c||e||(a.hide(),d&&d())}});$(document).keydown(function(b){b.which===CommonConstants.keyCodes.escape&&($(a).hide(),d&&d())})};c.safeExecuteFunction=function(c){if(c)try{return c()}catch(b){}return!0};c.isPlainText=
function(c){var b=/^s*<[a-z]+>[^<]*<\/[a-z]+>(s|\n)*$/ig;c=c.replace(/<br((\s*)|(\s[^>]*))\/?>/gi,"");c=c.replace(/<\/p>\s*<p(\s+[^>]*)?>/gi,"\n");return-1==c.indexOf("<")||null!=c.match(b)};c.isIos=function(){return null!=navigator.userAgent.match(/iPod|iPhone|iPad/i)};c.isAndroidDevice=function(){return null!=navigator.userAgent.match(/Android/i)};c.isAndroidBrowser=function(){return $("body").hasClass("h-android")};c.isIe=function(){return-1!==navigator.userAgent.indexOf("MSIE")||/rv:11.0/i.test(navigator.userAgent)};
c.setEmbeddedObjectsVisibility=function(e,b,a){b&&b.find("applet").toggle(e);a&&(b=a.find("iframe,object"),c.isIe()?b.toggle(e):b.css("visibility",e?"visible":"hidden").toggleClass("h-visibility-hidden",!e))}})(c.CommonFunctions||(c.CommonFunctions={}));(function(c){})(c.CommonWindowMessages||(c.CommonWindowMessages={}));(function(c){})(c.CommonTriggers||(c.CommonTriggers={}))})(CCL||(CCL={}));
var CommonConstants=CCL.CommonConstants,CommonFunctions=CCL.CommonFunctions,CommonWindowMessages=CCL.CommonWindowMessages,CommonTriggers=CCL.CommonTriggers;
(function(c){c.fn.setCursorPosition=function(c){this.each(function(e,b){b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(e=b.createTextRange(),e.collapse(!0),e.moveEnd("character",c),e.moveStart("character",c),e.select())});return this};c.fn.scrollMinimal=function(){var e=this.offset().top,f=this.outerHeight(!0),b=c(window).scrollTop(),a=c(window).height();e<b?c(window).scrollTop(e):e+f>b+a&&c(window).scrollTop(e-a+f)};c.fn.toggleHyperlink=function(c){c?(this.removeAttr("disabled"),
this.removeData("disabled")):(this.attr("disabled","disabled"),this.data("disabled",!0));return this};c.fn.getIfHyperLinkEnabled=function(){return"disabled"!==this.attr("disabled")&&!this.data("disabled")};c.fn.maxlength=function(e){e=c.extend({max:200},e);return this.each(function(){var f=c(this);f.keypress(function(b){var a=e.max,d=c(b.target),g=b.which;(g>=CommonConstants.keyCodes.space||g===CommonConstants.keyCodes.enter)&&d.val().length>=a&&b.preventDefault()});f.change(function(b){var a=e.max;
b=c(b.target);b.val().length>a&&(a=b.val().substr(0,a),b.val(a))})})};c.fn.tclick=function(c){this.on("touchstart",function(e){c.call(this,e);e.stopPropagation();e.preventDefault()});this.on("click",function(e){c.call(this,e)});return this}})(jQuery);
(function(c){c.ContentBlockExpander=function(c,f){function b(a){if(!a)return!1;var d=a.css("max-height");return!d||0>=d.indexOf("px")?!1:parseInt(d.replace("px",""),10)==a.height()}function a(){h||(h=$('<div class="'+css.container+'" data-collapsed="1"><span class="'+css.line+'"></span><span class="'+css.line+'"></span><div class="'+css.clearfix+'"></div><a href="javascript:void(0)" id="'+linkId+'">'+f.lang.showMore+"</a></div>").insertAfter(c),h.find("a").on("click",function(){d(!!h.attr("data-collapsed"))}))}
function d(a){(a=!!a)?h.removeAttr("data-collapsed"):h.attr("data-collapsed",1);$("#"+linkId).text(a?f.lang.showLess:f.lang.showMore);c.css("max-height",a?"":collapseHeight)}if(!c||!f)throw"error invoking ContentBlockExpander";f.clientInstanceName&&(window[f.clientInstanceName]=this);var e=this;css=$.extend({},{overflow:"h-ov-hidden",container:"ccl-textexpander-container",line:"ccl-textexpander-line",clearfix:"h-clf"},f.css);maxHeight=f.maxHeight||0;collapseHeight=f.collapseHeight||maxHeight;linkId=
f.clientInstanceName+"_link";var h;e.renderShowMoreLinkIfNeed=function(e){0<maxHeight&&(b(c)||c.height()>maxHeight)?setTimeout(function(){c.addClass(css.overflow);c.css("max-height",collapseHeight);a();h.show();f.callback&&f.callback();d(e)},0):h&&(c.css("max-height",""),h.hide())};e.reRenderShowMoreLink=function(){h&&e.renderShowMoreLinkIfNeed(!h.attr("data-collapsed"))};e.expandIfCollapsed=function(){h.attr("data-collapsed")&&d(!0)};e.renderShowMoreLinkIfNeed(!1)}})(CCL||(CCL={}));
function ContextDialog(c,e){var f=this,b=$(c),a,d={setFocus:!0,width:300,maxWidth:null,showArrow:!0,arrowOffset:"auto",arrowLeft:void 0,arrowTop:void 0,align:"auto",valign:"auto",marginLeft:10,marginRight:10,marginTop:-40,marginBottom:40,toggleElement:null,customScripts:{beforeCloseDialog:null},zIndex:999,closeWithOutsideClick:!0,scrollToLastWindowOnClose:!0,allowAccessToParentWindow:!0,expandParentFrame:!0,closeLinkTooltip:"",blackThemeActivated:!1,showHeader:!0,showCloseLink:!0,useMobileViewIfNeeded:!0,
closeOnEscape:!0,fadeContentEdgesOnScroll:!1},g=b.wrap("<div class='ccl-context-dialog'></div>").parent(),h=g.parent(),k=$("<header class='ccl-context-dialog-header'></header>").prependTo(g),l=$("<a href='javascript:void(0);'>&#215;</a>").appendTo(g),m=$("<div class='ccl-context-dialog-header-beforetitle'></div>").appendTo(k),n=$("<h2></h2>").appendTo(k),p=$("<div class='ccl-context-dialog-arrow'></div>").prependTo(g),r,w=$("html"),t=$("body"),v=$(window),q,z,C=CommonFunctions.isAndroidBrowser(),
G,u,B,D;f.dispose=function(){b.removeClass("ccl-context-dialog-content");b.insertBefore(g);g.remove();f=null};f.openDialogAt=function(c,e,k){k?c+=h.width():(c||(c=0),e||(e=0));$(document).trigger("contextdialog:show",[b]);r=v.scrollTop();f.isMobileView=!1;d.useMobileViewIfNeeded?(w.addClass("ccl-context-dialog-has-overlay"),f.isMobileView=v.width()<=CommonConstants.mediaScreenSizes.mobile):g.addClass("ccl-disable-mobile-view");g.toggleClass("ccl-context-dialog-black-theme",d.blackThemeActivated);
g.toggleClass("show-arrow",d.showArrow);g.removeClass("top bottom left right");d.width&&g.outerWidth(d.width);d.maxWidth&&g.css("max-width",d.maxWidth+"px");d.showHeader||f.hideHeader();d.showCloseLink||f.toggleCloseLink(!1);var l=h.position().left,m=v.width();if(f.isMobileView&&k)g.addClass("bottom"),g.css({left:d.marginLeft-l,width:m-d.marginLeft-d.marginRight}),p.css({left:l-d.marginLeft+c});else if(f.isMobileView){if(d.expandParentFrame&&(d.scrollToLastWindowOnClose&&v.scrollTop(0),CommonFunctions.makePostMessageCall(window.top,
new CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.expandContentAreaFrame)),IframeResizer.reportSetIframeDefaultHeight()),d.allowAccessToParentWindow&&window.parent&&$(window.parent).width()>CommonConstants.mediaScreenSizes.mobile&&f.adjustDialogPosition(c,e,k,m),window.top!=window)try{var n=$(window.top).width();n<v.width()&&t.outerWidth(n,!0)}catch(S){}}else f.adjustDialogPosition(c,e,k,m);g.show();q=window.parent&&d.allowAccessToParentWindow?window.parent.document.activeElement:
document.activeElement;d.setFocus&&d.focusTarget&&d.focusTarget.focus();d.fadeContentEdgesOnScroll&&u.invokeCallback(void 0,0);a=!0};f.openDialog=function(d){if(!a){var b=0,c=0;d&&("touchend"===d.type&&null!=d.originalEvent&&(b=d.originalEvent.changedTouches[0],d.pageX=b.pageX,d.pageY=b.pageY),b=d.pageX,c=d.pageY,0>=b&&0>=c&&d.target&&(c=$(d.target).offset(),b=c.left+d.target.offsetWidth/2,c=c.top+d.target.offsetHeight/2),d.stopPropagation());B=b;D=c;f.openDialogAt(b,c)}};f.openModal=function(){a||
(G&&G.remove(),G=$("<div id='mask'></div>").appendTo("body").addClass("ccl-dialog-mask").click(f.closeDialog).css({opacity:"0",filter:"alpha(opacity=0)","z-index":d.zIndex-1}),G.fadeTo(400,.5),f.openDialogAt($(window).width()/2,$(window).height()/2))};f.closeDialog=function(c){d.customScripts.beforeCloseDialog&&CommonFunctions.safeExecuteFunction(d.customScripts.beforeCloseDialog(c));f.isMobileView&&d.expandParentFrame&&(CommonFunctions.makePostMessageCall(window.top,new CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.collapseContentAreaFrame)),
IframeResizer.reportSetIframeDefaultHeight(),t.width(""));G&&G.fadeOut(400,0,function(){G.remove();G=null});g.hide();w.removeClass("ccl-context-dialog-has-overlay");d.scrollToLastWindowOnClose&&v.scrollTop(r);$(document).trigger("contextdialog:close",[b]);a=!1;d.scrollToLastWindowOnClose&&q&&q.focus()};f.setCloseFunction=function(a){f.closeDialog=a;l.unbind("click");l.click(a)};f.setTitle=function(a){d.title=a;n.text(d.title)};f.setTitleTooltip=function(a){d.titleTooltip=a;n.attr("title",d.titleTooltip)};
f.setHeader=function(a){m.html(a)};f.setContent=function(a){b.html(a)};f.setCloseLinkFunction=function(a){l.unbind("click");l.click(a)};f.showFooter=function(){z&&z.show()};f.hideFooter=function(){z&&z.hide()};f.showHeader=function(){k.show()};f.hideHeader=function(){k.hide()};f.toggleCloseLink=function(a){l.toggle(a)};f.isOpened=function(){return a};f.setBeforeCloseDialog=function(a){d.customScripts.beforeCloseDialog=a};f.onEscape=function(){l.trigger("click")};f.mainContainer=g;f.arrowContainer=
p;f.closeWithOutsideClick=function(a){d.closeWithOutsideClick=a};f.adjustDialogPosition=function(a,b,c,e){a||(a=B);b||(b=D);e||(e=v.width());var f,k,l=g.outerWidth(),m=g.outerHeight(),n=v.scrollLeft(),r=v.scrollTop(),w=v.width()+n,t=v.height()+r;r=h.position().left;"auto"==d.align?k=w-a>l+d.marginLeft?a+d.marginLeft:a-l-d.marginRight:"center"==d.align?k=a-l/2:"left"==d.align?k=a-l-d.marginRight:"right"==d.align&&(k=a+d.marginLeft);"auto"==d.valign?f=t-d.marginBottom-b>m+d.marginTop?b+d.marginTop:
t-m-d.marginBottom:"top"==d.valign?f=b-m-d.marginBottom:"center"==d.valign?f=b-m/2:"bottom"==d.valign&&(f=b+d.marginTop);c||(k=k<n?n:k);g.css({top:f,left:k});if(f<=b&&f+m>b){var q="top";var z=Math.max(0,Math.min(b-f,m-12));k+l<a?g.addClass("left"):a<k&&g.addClass("right")}else k<=a&&k+l>a&&(q="left",z=Math.max(0,Math.min(a-k,l-12)),f>b?g.addClass("bottom"):f+m<b&&g.addClass("top"));"auto"==d.arrowOffset?"top"==q?p.css({top:z,left:""}):"left"==q&&p.css({top:"",left:z}):"manual"==d.arrowOffset?(b={},
void 0!=d.arrowTop&&(b.top=d.arrowTop),void 0!=d.arrowLeft&&(b.left=d.arrowLeft),p.css(b)):p.css({top:"",left:""});c&&(c=g.outerWidth()/2,0<c-r&&(g.css({left:d.marginLeft-r}),p.css({left:r-d.marginLeft+a})),e=c-(e-r-a-d.marginRight),0<e&&(g.css({left:a-c-e-d.marginRight}),p.css({left:c+e+d.marginRight})),C||(g.css("max-height",""),a=v.height()-f-d.marginBottom,0<a&&g.height()>a&&g.css("max-height",a)))};f.setToggleElement=function(a){d.toggleElement=a};(function(){$.extend(d,e);n.uniqueId();d.noTitle&&
n.remove();g.attr({role:"dialog","aria-labelledby":n.attr("id")});b.addClass("ccl-context-dialog-content");if(d.fadeContentEdgesOnScroll){var a=$("<div class='ccl-context-dialog-content-edge-top'></div>").insertBefore(b),c=$("<div class='ccl-context-dialog-content-edge-bottom'></div>").insertAfter(b),h=b.get(0);u=new CCL.CallbackDebouncer(function(){a.toggleClass("ccl-context-dialog-content-edge-active",0<h.scrollTop);c.toggleClass("ccl-context-dialog-content-edge-active",h.scrollHeight-h.scrollTop!==
h.clientHeight)});b.scroll(function(){u.invokeCallback(void 0,25)});(new MutationObserver(function(a){0<a.length&&u.invokeCallback(void 0,50)})).observe(h,{childList:!0,attributes:!0,attributeFilter:["style","src","height","width","class"],characterData:!0,subtree:!0})}if(d.footerContent){var k=$("#"+d.footerContent);z=$("<footer class='ccl-context-dialog-footer'></footer>");z.appendTo(g);k.appendTo(z)}d.cssClass&&g.addClass(d.cssClass);g.css({"z-index":d.zIndex});f.setTitle(d.title);f.setTitleTooltip(d.titleTooltip);
b.show();d.closeLinkTooltip&&l.attr("title",d.closeLinkTooltip);d&&d.closeCssClass?l.addClass(d.closeCssClass):l.addClass("ccl-context-dialog-close");l.click(f.closeDialog)})();$(function(){function b(b){a&&0===$(b.target).closest(g).length&&!(d.toggleElement&&0<$(b.target).closest(d.toggleElement).length)&&b.pageX<$(window).width()&&d.closeWithOutsideClick&&f.closeDialog(b)}function c(b){if(a&&d.closeOnEscape&&b.which===CommonConstants.keyCodes.escape)f.onEscape()}function e(a){a.each(function(a,
d){d.addEventListener?(d.addEventListener(k,b,!0),d.addEventListener("keydown",c,!0)):($(d).on(k,b),$(d).on("keydown",c))})}var h=$(window);window.parent&&d.allowAccessToParentWindow&&(h=h.add(window.parent));var k=window.CommonFunctions.isIos()?"touchstart":"mousedown";e(h);$("iframe").on("load",function(){try{var a=$(this.contentWindow||this.contentDocument);e(a)}catch(S){}});$(document).on(CommonTriggers.clickInInnerFrame,function(){a&&d.closeWithOutsideClick&&f.closeDialog()})});return f}
function CssModal(c){function e(){return z.closeButton.getIfHyperLinkEnabled()&&(!G||G())}function f(){return window.location.hash.replace("#","")===w}function b(){$(document).off("cssmodal:hide",b);a()}function a(){if(f()&&!v){if(CssModal.IsAnyDialogOpened()){$(document).on("cssmodal:hide",b);return}if(!d())return;v=!0;CommonFunctions.safeExecuteFunction(C.beforeOpenDialog);k();CommonFunctions.safeExecuteFunction(C.afterOpenDialog)}!f()&&v&&(v=!1,CommonFunctions.safeExecuteFunction(C.beforeCloseDialog),
setTimeout(function(){if(q.userInputControlsSelector){var a=$(q.userInputControlsSelector);CommonFunctions.setEmbeddedObjectsVisibility(!0,a,a)}z.contentContainer.removeClass(CssModal.commonSettings.cssClasses.webkitOverflow);I.removeClass(CssModal.commonSettings.cssClasses.overlay);q.isIos&&I.removeClass(CssModal.commonSettings.cssClasses.overlayIos);q.PreventScrollingBeforeCloseDialog||E.scrollTop(D);if(B){if(CssModal.modes.ajaxDynamically===t||CssModal.modes.iframeDynamically===t)z.contentContainer.find("iframe").attr("src",
"about:blank"),setTimeout(m,100);$(B).removeClass(CssModal.commonSettings.cssClasses.isActive);q.addMaskToTopMenu&&(CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.unregisterExtraNavBar)),CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.unmaskNavigationBar)));q.isNestedDialog||(p(CommonWindowMessages.MessageNames.collapseContentAreaFrame),
R.width(""));$(document).trigger(CssModal.commonSettings.events.hide,[B,w]);B=null}r.setCloseConfirmation(null);u&&u.focus();q.isNestedDialog&&CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.nestedCssModalDialogCollapsed});q.addMaskToTopMenu&&IframeResizer.reportSetIframeDefaultHeight();CommonFunctions.safeExecuteFunction(C.afterCloseDialog)},100))}function d(){var a=!0;CCL.FormCheckBeforeUnload.manuallyRunBeforeUnloadHandler();var d=CCL.DialogWhiteList.isDialogAllowed(r.getId());
d.isAllowed||(confirm(d.confirmationMessage)?d.deniedByInstances.forEach(function(a){a.clearStateCallback()}):(CssModal.closeDialog(),a=!1));return a}function g(){X&&clearTimeout(X);X=setTimeout(h,q.resizeTimeoutInMilliseconds)}function h(){if(f()&&v){z.innerContainer.removeAttr("style");q.preventScrollTopOnAdjust||z.contentContainer.removeAttr("style");if(E.width()>CommonConstants.mediaScreenSizes.mobile&&!q.isNestedDialog){if(r._maximized)z.innerContainer.css({width:$(window).width(),height:$(window).height(),
left:"0",top:"0"});else if(q.preferredWidth&&0<q.preferredWidth&&z.innerContainer.width(Math.min(q.preferredWidth,E.width()-40)),q.preferredHeight&&0<q.preferredHeight){var a=z.contentContainer.outerHeight(!0)-z.contentContainer.height();z.contentContainer.outerHeight(q.preferredHeight+a,!0)}z.contentContainer.css({width:q.minContentWidth&&0<q.minContentWidth?q.minContentWidth:void 0,minWidth:q.minContentWidth&&0<q.minContentWidth?q.minContentWidth:void 0,minHeight:q.minContentHeight&&0<q.minContentHeight?
q.minContentHeight:void 0});a=z.innerContainer.height()-z.headerContainer.outerHeight()-z.footerContainer.outerHeight();if(r._maximized)z.contentContainer.outerHeight(a);else{!q.preventScrollTopOnAdjust&&z.contentContainer.outerHeight()-1>a&&z.contentContainer.outerHeight(a);if(q.addMaskToTopMenu){a=0;var d="0"}else a=z.innerContainer.height()/2,d="50%";var b=z.innerContainer.width()/2;z.innerContainer.css({left:"50%","margin-left":-1*b,"margin-top":-1*a,top:d})}}else{var c=0;z.innerContainer.children().not(z.contentContainer).each(function(){q.hideFooterInMobileView&&
$(this).is(z.footerContainer)||(c+=$(this).outerHeight())});z.contentContainer.outerHeight(z.innerContainer.height()-c)}CommonFunctions.safeExecuteFunction(C.adjustWindowSize)}}function k(){if(f()&&v){if(q.userInputControlsSelector){var a=$(q.userInputControlsSelector);CommonFunctions.setEmbeddedObjectsVisibility(!1,a,a)}D=E.scrollTop();I.addClass(CssModal.commonSettings.cssClasses.overlay);q.isIos&&I.addClass(CssModal.commonSettings.cssClasses.overlayIos);q.isNestedDialog||p(CommonWindowMessages.MessageNames.expandContentAreaFrame);
if(window.top!=window)try{var d=$(window.top).width();d<E.width()&&R.outerWidth(d,!0)}catch(M){}$(B).removeClass(CssModal.commonSettings.cssClasses.isActive);z.container.addClass(CssModal.commonSettings.cssClasses.isActive);B=z.container.get(0);q.addMaskToTopMenu&&(CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.registerExtraNavBar)),CCL.CommonFunctions.makePostMessageCall(window.top,new CCL.CommonWindowMessages.GenericMessage(CCL.CommonWindowMessages.MessageNames.maskNavigationBar)));
CssModal.modes.ajaxDynamically===t&&l();CssModal.modes.iframeDynamically===t&&n();B&&(u=document.activeElement,B.focus());$(document).trigger(CssModal.commonSettings.events.show,[B,w]);CssModal.modes.ajaxDynamically!==t&&CssModal.modes.iframeDynamically!==t&&h();z.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow);q.isNestedDialog&&CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.nestedCssModalDialogExpanded});q.addMaskToTopMenu&&
IframeResizer.reportSetIframeDefaultHeight()}}function l(){z.contentContainer.empty();z.contentContainer.html(q.loadingText);if(CssModal.modes.ajaxStatically===t)z.contentContainer.load(q.ajaxUrl,h);else if(CssModal.modes.ajaxDynamically===t){var a=void 0!==da?$.param(da,!0):{};$.ajax({type:"GET",url:q.ajaxUrl,data:a,success:function(a){z.contentContainer.html(a);h();CommonFunctions.safeExecuteFunction(C.afterOpenDialogAjaxDynamicallySuccess)},error:function(a,d,b){CommonScripts.jQueryWebServiceErrorHelper(a,
d,b)}})}}function m(){z.contentContainer.html("")}function n(){z.contentContainer.empty().append($("<iframe/>").attr("src",q.iframeUrl).addClass(CssModal.commonSettings.cssClasses.iframe).attr("seamless","seamless").attr("frameborder","0").attr("title",q.iframeTitle).on("load",function(){h()}))}function p(a){q.expandToAllWindowSize&&(CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(window.parent,{messageName:a}),IframeResizer.reportSetIframeDefaultHeight())}window[c]=this;var r=this,w=
c,t,v=!1,q,z,C,G,u,B,D,E=$(window),I=$("html"),R=$("body"),X,da={};r.initialize=function(d,b,c){C=b;q=c;z=$.extend(d,{closeButton:$("."+q.closeButtonClass)});t=q.mode;$(document).keyup(function(a){r.keyUp(a)});CssModal.modes.ajaxStatically===t&&l();CssModal.modes.iframeStatically===t&&n();E.on("hashchange",a);E.on("resize",g);E.on("load",a);z.closeButton.click(e);CssModal.addOrReplaceInstance(this);if(CssModal.modes.iframeStatically===t||CssModal.modes.iframeDynamically===t)CommonFunctions.attachPostMessageEventListener($(window),
CommonWindowMessages.MessageNames.nestedCssModalDialogExpanded,function(){z.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow,!1);z.innerContainer.toggleClass(q.mobileExpandedNestedContentClass,!0)}),CommonFunctions.attachPostMessageEventListener($(window),CommonWindowMessages.MessageNames.nestedCssModalDialogCollapsed,function(){z.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow,!0);z.innerContainer.toggleClass(q.mobileExpandedNestedContentClass,
!1)})};r.getId=function(){return w};r.openDialog=function(a){r._maximized=a;window.location.hash="#"+w;a?(z.innerContainer.addClass("ccl-cssmodal-modal-maximized"),z.innerContainer.removeClass("ccl-cssmodal-modal-inner")):(z.innerContainer.addClass("ccl-cssmodal-modal-inner"),z.innerContainer.removeClass("ccl-cssmodal-modal-maximized"))};r.keyUp=function(a){f()&&a.which===CommonConstants.keyCodes.escape&&e()&&CssModal.closeDialog()};r.setContentMinSize=function(a,d){q.minContentWidth=a;q.minContentHeight=
d;h()};r.setPreferredSize=function(a,d){0<a&&(q.preferredWidth=a);0<d&&(q.preferredHeight=d);h()};r.setPreventScrollTopOnAdjust=function(a){q.preventScrollTopOnAdjust=a};r.getIframe=function(){return z.contentContainer.find("iframe")};r.clearContent=function(){z.contentContainer.empty()};r.setTitle=function(a){if(a){var d=$("h2",z.headerContainer);d&&d.text(a)}};r.setTitleTooltip=function(a){var d=$("h2",z.headerContainer);d&&d.attr("title",a)};r.setAjaxUrl=function(a,d,b){q.ajaxUrl=a;da=d;b&&l()};
r.setIframeUrl=function(a,d){q.iframeUrl=a;d&&n()};r.setIframeTitle=function(a){q.setIframeTitle=a};r.setCloseConfirmation=function(a){G=a};r.toggleDialogCloseButton=function(a){z.closeButton.toggleHyperlink(a)};r.getHeader=function(){return z.headerContainer};r.getFooter=function(){return z.footerContainer};r.adjustWindowSize=function(){h()};r.setMode=function(a){t=a};r.setCustomScripts=function(a){C=a};r.getIsOpened=function(){return v};return r}CssModal.commonSettings=void 0;CssModal.modes=void 0;
CssModal.closeDialog=function(){window.location.hash="!"};CssModal.instances=[];CssModal.addOrReplaceInstance=function(c){for(var e=c.getId(),f=-1,b=0;b<CssModal.instances.length;b++)e===CssModal.instances[b].getId()&&(f=b);-1!==f?CssModal.instances[f]=c:CssModal.instances.push(c)};CssModal.IsAnyDialogOpened=function(c){for(var e=0;e<CssModal.instances.length;e++)if((!c||c(CssModal.instances[e].getId()))&&CssModal.instances[e].getIsOpened())return!0;return!1};
function DatePicker(c){function e(a){if("date"===$.type(a))return!0;try{if(1E3>$.datepicker.parseDate(k.dateFormat,a,{shortYearCutoff:99}).getFullYear())return!1}catch(C){return!1}return!0}function f(){return!h.controls.dateInput.val()||h.controls.dateInput.val()===k.waterMark}function b(){h.controls.dateInput.val(k.waterMark).removeClass(l.watermark).addClass(l.watermark)}function a(){!w&&t&&(w=window[h.settings.timeSlotPickerClientInstanceName]);return w}function d(a,d){if((m||v)&&h.getAvailableDatesFunction){var b=
12==d?new Date(a,12,6):new Date(a,d,6);a={startDate:JSON.stringify(1==d?new Date(a,-1,25):new Date(a,d-2,25)),endDate:JSON.stringify(b),filterId:q};h.getAvailableDatesFunction(a);n=a.allowedDates}}function g(a,d){if(p&&h.getCssClassesForCalendarDatesFunction){var b=12==d?new Date(a,12,6):new Date(a,d,6);a={startDate:JSON.stringify(1==d?new Date(a,-1,25):new Date(a,d-2,25)),endDate:JSON.stringify(b)};h.getCssClassesForCalendarDatesFunction(a);r=a.customCssClassesForCalendarDates}}window[c]=this;var h=
this,k,l,m,n,p,r,w,t,v,q;h.initialize=function(){k=h.settings;l=k.cssClasses;p=k.useCustomCssClassesForCalendarDates;m=k.useRestrictedDateSelection;t=!!h.settings.timeSlotPickerClientInstanceName;DatePickerPool.add(h.controls.dateInput,h);h.controls.dateInput.datepicker({showOn:k.hideInput?"button":"both",buttonImage:"",buttonImageOnly:!1,showButtonPanel:!0,showOtherMonths:!0,selectOtherMonths:!0,defaultDate:k.defaultDate,dateFormat:k.dateFormat,firstDay:k.firstDayOfWeek,waterMark:k.waterMark,monthNames:k.monthNames,
monthNamesShort:k.abbreviatedMonthNames,dayNames:k.dayNames,dayNamesShort:k.abbreviatedDayNames,dayNamesMin:k.abbreviatedDayNames,closeText:k.closeText,prevText:k.previousMonthText,nextText:k.nextMonthText,currentText:k.todayText,disabled:k.disabled,showWeek:k.showWeek,weekHeader:k.weekHeader,disableWeekSelection:k.DisableWeekSelection,beforeShow:function(a,b){a=$(a);a.val()==$.datepicker._get(b,"waterMark")&&a.val("").removeClass(l.watermark);b=a.datepicker("getDate");null==b&&(b=new Date);(m||v)&&
d(b.getFullYear(),b.getMonth()+1);p&&g(b.getFullYear(),b.getMonth()+1);setTimeout(function(){a.trigger("update")},1)},onChangeMonthYear:function(a,b,c){d(a,b);g(a,b);setTimeout(function(){$(c.input).trigger("update")},1)},beforeShowDay:function(a){if(!m&&!v&&!p||void 0==n&&void 0==r)return[!0];a=[a.getFullYear(),a.getMonth()+1,a.getDate()].join("_");var d=[!0];(m||v)&&void 0!=n&&(d=void 0==n[a]?[!1,l.disabled]:1==n[a]?[!0,l.avalaible]:[!1,l.busy]);p&&void 0!=r&&void 0!=r[a]&&$.each(r[a],function(a,
b){d[1]=a;d[2]=b});return d},onClose:function(d,b){var c=$(this);c.val()||(c.val($.datepicker._get(b,"waterMark")).addClass(l.watermark),t&&a().resetTimes());h.relatedWithDateInput&&h.relatedWithDateInput.fillMissingDateFromRelatedInput&&d&&""===window[h.relatedWithDateInput.id].getDateAsString()&&window[h.relatedWithDateInput.id].setDate(d)}}).on("update",function(){if(h.settings.showWeek)if(h.settings.disableWeekSelection)$("td.ui-datepicker-week-col").addClass(l.disabled).wrapInner("<span></span>");
else $("td.ui-datepicker-week-col").wrapInner('<a href="javascript:void(0);"></a>').on("click",function(){var a;if(h.relatedWithDateInput){if(h.relatedWithDateInput.isLater){$(this).next().click();var d=a=h.controls.dateInput.datepicker("getDate");d.setDate(a.getDate()+6)}else a=$(this).parent().find("td"),a.get(a.length-1).click(),d=a=h.controls.dateInput.datepicker("getDate"),d.setDate(a.getDate()-6);window[h.relatedWithDateInput.id].setDate(d)}else $(this).next().click()});k.hideTodayButton&&$(".ui-datepicker-current").hide()}).trigger("update");
$("#ui-datepicker-div").hide();k.hideInput&&h.controls.dateInput.hide();f()&&b();h.controls.dateInput.change(function(){if(h.onDateSelectedFunction){var a={dateText:h.getDateAsString(),dateFilterId:v?q:0};h.onDateSelectedFunction(a)}}).keypress(function(a){a.which===CommonConstants.keyCodes.enter&&(h.controls.dateInput.change(),a.preventDefault())});m&&h.controls.dateInput.keypress(function(a){a.which!==CommonConstants.keyCodes.del&&a.which!==CommonConstants.keyCodes.backspace&&a.preventDefault()})};
h.getDateAsString=function(){if(f())return"";var a=h.controls.dateInput.val();return e(a)?a:""};h.getTime=function(){var a=$("#"+h.settings.timePickerSelectHourClientId),d=$("#"+h.settings.timePickerSelectMinuteClientId),b={};0<a.length&&0<d.length&&(b.hours=a.val(),b.minutes=d.val());return b};h.getDateTimeAsString=function(){var a=h.getDateAsString();if(""===a)return a;var d=h.getTime();return null==d.hours||null==d.minutes?a:a+" "+d.hours+":"+d.minutes};h.isDateValid=function(){if(f())return!1;
var a=h.controls.dateInput.val();return e(a)};h.getDate=function(){return f()?void 0:h.controls.dateInput.datepicker("getDate")};h.setDate=function(a){a&&e(a)?(h.controls.dateInput.removeClass(l.watermark),h.controls.dateInput.datepicker("setDate",a)):b()};h.setDefaultDate=function(a){var d=h.getDate();h.controls.dateInput.datepicker("option","defaultDate",a);h.setDate(d);f()&&b()};h.clearDateAndTime=function(d){f()||d||h.setDate("");t&&a().resetTimes()};h.setFilteringMode=function(a){v=a};h.setFilterId=
function(a){q=a};return h}
(function(c,e){function f(a,d){d=d?d:0;if(d<a.length)for(var c=b.length-1;0<=c;c--)if(b[c].jQueryInput.get(0)===a.get(d))return b[c].datePickerFunction;return e}var b=[];c.DatePickerPool={add:function(a,d){b.push({jQueryInput:a,datePickerFunction:d})},getDateAsString:function(a){return(a=f(a))?a.getDateAsString():""},isDateValid:function(a){return(a=f(a))?a.isDateValid():!1},getDate:function(a){return f(a)?f(a).getDate():e},setDate:function(a,d){for(var b=a.length-1;0<=b;b--){var c=f(a,b);c&&c.setDate(d)}}}})(window);
function DateTimeActivation(c){function e(){d||(d=window[f.settings.datePickerClientInstanceName]);return d}window[c]=this;var f=this,b,a,d,g,h,k,l;f.initialize=function(){b=f.settings;a=b.cssClasses;g=b.dateFilteringInUse;h=f.controls.selectActivationMode.parent();l=b.modes;k=!!b.timeSlotPickerClientInstanceName;f.controls.selectActivationMode.change(function(){var d=f.getMode();f.controls.dateTimeControlsContainer.toggle(d!=l.empty&&d!=l.infinity);$("."+a.timeControlsContainer,h).toggleClass(a.hiddenTimeControlsContainer,
d!=l.date&&d!=l.dateAndEndOfDayCombined);f.controls.endOfDayLabel.toggle(d==l.endOfDay);var c=g&&d==l.filtering;f.controls.datePickerFilterHolder.toggle(c);e().setFilteringMode(c);g&&e().clearDateAndTime(d!=l.filtering);k&&window[b.timeSlotPickerClientInstanceName].toggle(d==l.filtering);if(f.onChangeActivationModeFunction)f.onChangeActivationModeFunction()});g&&(f.controls.filterDropDown.change(function(){var a=f.controls.filterDropDown.val();f.controls.filterHidden.val(a);e().clearDateAndTime();
e().setFilterId(a)}),e()&&(e().setFilterId(f.controls.filterHidden.val()),e().setFilteringMode(g&&f.getMode()==l.filtering)))};f.getMode=function(){return b.useRadioButtonStyle?$(f.controls.selectActivationMode).find("input:radio:checked").val():f.controls.selectActivationMode.val()};f.isDateSelected=function(){return f.getMode()==(l.empty||l.infinity)?!1:e().isDateValid()};f.getAllowToSubmitAfterDeadline=function(){return 0<f.controls.useEndOfDateCheckBox.length?f.controls.useEndOfDateCheckBox.is(":checked"):
null};f.getSelectedEventId=function(){return k?window[b.timeSlotPickerClientInstanceName].getSelectedTimeSlot():null};f.getSelectedDateTime=function(){return e().getDateTimeAsString()};return f}
function Dialog(c){function e(){v&&(l.show(),b(),CommonFunctions.safeExecuteFunction(g.customScripts.afterOpenDialog),IframeResizer.reportSetIframeDefaultHeight(),v=!1)}function f(){k.scrollLeft(C);k.scrollTop(z);IframeResizer.reportSetIframeDefaultHeight();q=!1}function b(){var a=function(a,d,b,c){b=Math.max((a-b)/2,10);a<c&&(b+=d);return 0>b?0:b},d=$(document);l.offset({left:a(k.width(),k.scrollLeft(),l.width(),d.width()),top:a(k.height(),k.scrollTop(),l.height(),d.height())})}function a(){g.settings.useInProgressFunctionality?
(k.unload(function(){g.close()}),n.attr("title",g.settings.okButtonInProgressTitle),n.addClass(g.settings.inProgressCssClass),g.disableDialog(),setTimeout(function(){CommonFunctions.safeExecuteFunction(g.customScripts.afterOkClick);l.find("input,button").prop("disabled",!0)},100)):CommonFunctions.safeExecuteFunction(g.customScripts.afterOkClick)&&g.close()}function d(){CommonFunctions.safeExecuteFunction(g.customScripts.afterCancelClick)&&g.close()}window[c]=this;var g=this,h=$("#mask"),k=$(window),
l,m,n,p,r,w,t,v=!1,q=!1,z,C,G=!1;g.initialize=function(){l=g.controls.container;m=g.controls.iframe;n=g.controls.okButton;p=g.settings.showBackgroundMask;r=g.settings.useTransparentMask;w=g.settings.expandToAllWindowSize;t=g.settings.ignoreKeyDown;G=!w||window==window.top;l.css("z-index",g.settings.zIndex).keydown(function(a){return g.keyDown(a)}).keypress(function(a){return g.keyPress(a)});g.controls.closeLink.click(function(){d();return!1}).keydown(function(a){return a.which===CommonConstants.keyCodes.enter?
(d(),!1):!0});n.click(function(){a();return!1});g.controls.cancelLink.click(function(){d();return!1});w&&(CommonFunctions.attachPostMessageEventListener(k,CommonWindowMessages.MessageNames.contentAreaFrameHasExpanded,function(){v&&e()}),CommonFunctions.attachPostMessageEventListener(k,CommonWindowMessages.MessageNames.contentAreaFrameHasCollapsed,function(){q&&f()}));g.settings.openDialogAfterLoading&&g.open()};g.openWithTitle=function(a){g.setNewTitle(a);g.open()};g.open=function(){v=!0;C=k.scrollLeft();
z=k.scrollTop();p&&(0==h.length&&(h=$("<div id='mask'></div>").appendTo("body").addClass(g.settings.maskCssClass)),h.css({opacity:r?"0":"1","z-index":g.settings.backgroundMaskZIndex}),h.show());CommonFunctions.safeExecuteFunction(g.customScripts.beforeOpenDialog);G?e():g.toggleContentAreaFrame(!0);setTimeout(e,100)};g.close=function(){q=!0;CommonFunctions.safeExecuteFunction(g.customScripts.beforeCloseDialog);p&&h.hide();l.hide();CommonFunctions.safeExecuteFunction(g.customScripts.afterCloseDialog);
G?f():g.toggleContentAreaFrame(!1)};g.setupIframe=function(a,d,b,c){m.attr("width",d?d:m.attr("width")).attr("height",b?b:m.attr("height")).attr("scrolling",c?c:m.attr("scrolling"));g.setIframeSrc(a)};g.setIframeSrc=function(a){g.settings.frameLoadingText&&m.contents().find("body").empty().text(g.settings.frameLoadingText);document.getElementById(m.prop("id")).contentWindow.location.href=a};g.setNewAfterOkClickFunction=function(a){g.customScripts.afterOkClick=a};g.setNewAfterCancelClickFunction=function(a){g.customScripts.afterCancelClick=
a};g.setNewBeforeCloseDialogFunction=function(a){g.customScripts.beforeCloseDialog=a};g.setNewTitle=function(a){g.controls.titleContainer.text(a)};g.enableOrDisableOkButton=function(a){n.prop("disabled",!a)};g.disableDialog=function(){g.enableOrDisableOkButton(!1);g.controls.cancelLink.unbind("click").attr("disabled",!0);g.controls.closeLink.unbind("click").attr("disabled",!0);g.controls.closeLink.find("img").prop("src",g.settings.closeImageDisabledUrl)};g.getContainerJQueryElement=function(){return l};
g.focusOnCloseLink=function(){g.controls.closeLink.focus()};g.keyDown=function(b){if(b.target&&b.target.className&&0<=b.target.className.indexOf("cke_source")||t)return!0;b.which===CommonConstants.keyCodes.escape?d():b.which!==CommonConstants.keyCodes.enter||b.shiftKey||b.srcElement&&"A"===b.srcElement.tagName||a();return!0};g.keyPress=function(a){return!0};g.scrollWindowToCenter=function(){var a=l.offset().top,d=k.height(),b=l.height();window.scrollTo(0,a-(d/2-b/2))};g.toggleContentAreaFrame=function(a){w&&
(CommonFunctions.makePostMessageCallRecursivelyToTopmostFrame(window.parent,{messageName:a?CommonWindowMessages.MessageNames.expandContentAreaFrame:CommonWindowMessages.MessageNames.collapseContentAreaFrame}),IframeResizer.reportSetIframeDefaultHeight())};g.setWidth=function(a){l.css("width",a);b()};return g}
function DivToggler(c){var e=this;e.settings=c;e.div=e.settings.divControl?$(e.settings.divControl):$("#"+e.settings.divId);void 0==e.settings.changeDivVisibility&&(e.settings.changeDivVisibility=!0);e.initialize=function(){e.settings.isCollapsed?e.collapseDiv():e.expandDiv();return e};e.afterToggle=function(){e.settings.afterToggle&&"function"===typeof e.settings.afterToggle&&e.settings.afterToggle()};e.toggleDiv=function(c){e.settings.isCollapsed?e.expandDiv():e.collapseDiv();c&&"function"===typeof c&&
c()};e.collapseDiv=function(){e.settings.changeDivVisibility&&e.div.hide();e.settings.isCollapsed=!0;e.afterToggle()};e.expandDiv=function(){e.settings.changeDivVisibility&&e.div.show();e.settings.isCollapsed=!1;e.afterToggle()};return e}
function DropDownMenu(c,e){function f(a,b){l&&clearTimeout(l);l=setTimeout(function(){var a=b.relatedTarget||document.activeElement,c=$(a),e=a===g[0]||1===c.closest(g).length;a=a===h[0]||1===c.closest(h).length;e||a||d.hideMenu()},a)}function b(){if(h.getIfHyperLinkEnabled()){m.scroll(a);d.settings.cssClasses&&d.settings.cssClasses.selectedHolder&&h.addClass(d.settings.cssClasses.selectedHolder);var b=d.settings.useTargetPosition?k.position():k.offset();d.settings.setMinWidthByTarget&&g.css("min-width",
k.outerWidth()+"px");var c=b.top+k.outerHeight(!1),e="auto",f="auto";switch(d.settings.horizontalPosition){case DropDownMenuCommonSettings.horizontalPositions.center:e=b.left+(k.outerWidth(!1)-g.outerWidth(!1))/2;break;case DropDownMenuCommonSettings.horizontalPositions.rightEdge:e=b.left+k.outerWidth(!1)-g.outerWidth(!1);0>e&&(e=b.left);break;case DropDownMenuCommonSettings.horizontalPositions.rightEdgeRightOffset:f=m.width()-m.scrollLeft()-b.left-k.outerWidth(!1);0>f&&(f=0);break;case DropDownMenuCommonSettings.horizontalPositions.auto:break;
case DropDownMenuCommonSettings.horizontalPositions.leftEdgeParentRightBorder:e=b.left;b=k.offsetParent();b=b.outerWidth(!1)+(d.settings.useTargetPosition?0:b.offset().left);var l=g.outerWidth(!1);b<e+l&&(e=b-l);break;default:e=b.left}var v={top:d.settings.useFixedPosition?c-m.scrollTop():c,left:e,right:f,"z-index":d.settings.zIndex};d.settings.useFixedPosition&&(v.position="fixed");d.settings.autofitHeight&&(c=m.height()-c-(g.outerHeight(!0)-g.height()),v["max-height"]=0>c?0:c,v["overflow-y"]="auto");
m.scroll(function(){g.css(v)});g.css(v).show();g.trigger("menu:show")}}function a(){var a=d.settings.useTargetPosition?k.position():k.offset();g.css({top:a.top+k.outerHeight(!1)})}window[c]=this;var d=this,g,h,k,l,m=$(window);d.name=c;e&&DropDownMenu.instances.push(this);d.initialize=function(){g||d.initializeControls($("#"+d.controls.menuContainerId),$("#"+d.controls.targetLinkId),$("#"+d.controls.layoutAlignmentControlId))};d.initializeControls=function(a,c,e){if(!g){g=a;h=c;k=e;d.settings.cssClasses&&
d.settings.cssClasses.targetLink&&h.addClass(d.settings.cssClasses.targetLink);if(d.settings.operatesInManagedMode)CCL.DropDownMenuManager.getInstance().containerAddOrReplaceInstance(d.settings.manageModeContainerKey,d);else if(!d.settings.showMenuOnHover||d.settings.isIos)$(document).on((d.settings.isIos?"touchend":"click")+" "+CommonTriggers.clickInInnerFrame,function(a){a.target===h[0]||1===h.find(a.target).length?g.is(":visible")?d.hideMenu():b():g.is(":visible")&&a.target!==g[0]&&1!==g.find(a.target).length&&
d.hideMenu()});else h.on("focusin mouseover",function(){b()}),g.add(h).on("focusout mouseout",function(a){f(250,a)});d.settings.closeMenuWhenClickingOnLink&&g.find("li").click(function(){d.hideMenu()});d.settings.closeMenuWhenClickingInside&&g.click(function(){d.hideMenu()});$(document).ready(function(){d.settings.appendToBody&&g.appendTo("body")})}};d.toggleManagedMenu=function(){g.is(":visible")?d.hideMenu():b()};d.hideMenu=function(){m.unbind("scroll",a);g.hide();d.settings.cssClasses&&d.settings.cssClasses.selectedHolder&&
h.removeClass(d.settings.cssClasses.selectedHolder);g.trigger("menu:hide")};return d}DropDownMenu.instances=[];DropDownMenu.initialize=function(){for(var c=0,e=this.instances.length;c<e;c+=1)this.instances[c].initialize()};ExpandableContainer.defaults={isExpanded:!1,expander:".ccl-expandable-container-header",target:".ccl-expandable-container-content",keepStateInCookie:!1,cookieName:"ExpandableContainerState",accessibleExpander:"a",expandTooltip:void 0,collapseTooltip:void 0};
function ExpandableContainer(c,e){function f(a){g.settings.collapseTooltip&&g.settings.expandTooltip&&m.attr("title",a?g.settings.collapseTooltip:g.settings.expandTooltip)}function b(){var a=d();a?h.addClass("expanded"):l.hide();f(a)}function a(){var a=$.cookie(g.settings.cookieName);return null===a||""===a?{}:JSON.parse(a)}function d(){if(g.settings.isExpanded)return!0;if(!g.settings.keepStateInCookie)return!1;var d=h.attr("Id");return void 0===d?!1:!0===a()[d]||!1}var g=this,h=$(c);g.settings={};
$.extend(g.settings,ExpandableContainer.defaults);$.extend(g.settings,e);var k=$(g.settings.expander,c);e=k.attr("data-expander-target")||g.settings.target;var l=$(e,c),m=$(g.settings.accessibleExpander,k);g.toggle=function(){var d=!g.getIsExpandedState();d?(h.addClass("expanded"),l.slideDown()):(h.removeClass("expanded"),l.slideUp());$(document).trigger("expandablecontainer:toggled",[c,d]);if(g.settings.onToggleCallback)g.settings.onToggleCallback(d,h);f(d);if(g.settings.keepStateInCookie){var b=
h.attr("Id");if(void 0!==b){var e=a();e[b]=d;$.cookie(g.settings.cookieName,JSON.stringify(e),{path:"/"})}}return!1};g.getIsExpandedState=function(){return h.hasClass("expanded")};(function(){if(g.settings.keepStateInCookie&&void 0===$.cookie)throw Error("keepStateInCookie option requires $.cookie to be defined.");k.addClass("ccl-expandable-container-expander");if((0===l.length||0===k.length)&&g.settings.throwOnMissingTarget)throw"Targets not found";b();k.click(function(){g.toggle()})})();return g}
function ExpandableList(c){function e(){try{var a=parent.document.getElementsByTagName("iframe");if(void 0!=a)for(var b=0,c=a.length;b<c;b++){var e=a[b];if((e.contentDocument||e.contentWindow.document)===document)return e}}catch(l){}return null}window[c]=this;var f=this,b,a;f.initialize=function(){b=f.controls;a=f.settings};f.expand=function(d){var c=$(b.showlink).position(),f=c.top,k=$(window).scrollTop(),l=null,m=!1;CommonFunctions.isIos()&&(m=!0,c=e(),null!==c&&(l=c.parentNode,null!==l&&(k=l.scrollTop)));
b.list.children("li").show().removeClass(a.lastVisibleItemCssClass);b.showlink.hide();b.hidelink.show();c=$(b.hidelink).position();k+=c.top-f;m?null!==l&&(l.scrollTop=k):$(window).scrollTop(k);d()};f.collapse=function(d){var c=$(b.hidelink).position(),f=c.top,k=$(window).scrollTop(),l=null,m=!1;CommonFunctions.isIos()&&(m=!0,c=e(),null!==c&&(l=c.parentNode,null!==l&&(k=l.scrollTop)));0<a.maxItemsShown?(c=b.list.children("li").eq(a.maxItemsShown-1),c.addClass(a.lastVisibleItemCssClass),c.nextAll().hide()):
b.list.children("li").hide();b.hidelink.hide();b.showlink.show();c=$(b.showlink).position();k-=f-c.top;m?null!==l&&(l.scrollTop=k):$(window).scrollTop(k);d()};return f}
$.widget("itslccl.extendedTextBox",{options:{watermarkText:"",watermarkCssClass:""},_input:void 0,_isWatermarkMode:!1,_create:function(){var c=this;this._input=this.element;this._input.is(":focus")?this._input.setCursorPosition(this._input.val().length):this._showWatermark();this._input.keypress(function(e){e=e?e:window.event;c._hideWatermark();return e.which!==CommonConstants.keyCodes.enter||e.shiftKey});this._input.blur(function(){c._input.is(":visible")&&c._showWatermark()});this._input.focus(function(){c._hideWatermark()});
this._input.on("paste",function(){c._hideWatermark()})},_showWatermark:function(){this._isWatermarkMode||this._input.val()||(this._input.val(this.options.watermarkText),this._input.addClass(this.options.watermarkCssClass),this._isWatermarkMode=!0)},_hideWatermark:function(){this._isWatermarkMode&&(this._input.val(""),this._input.removeClass(this.options.watermarkCssClass),this._isWatermarkMode=!1)},isEmpty:function(){return this._isWatermarkMode||0==$.trim(this._input.val()).length}});
function ExternalStorageAvailabilityChecker(){return{isDropboxAvailable:function(){return void 0!==window.Dropbox?!0:!1},isGoogleDriveAvailable:function(){return void 0!==window.gapi?!0:!1}}}
function Feedback(c,e,f,b){window[c]=this;var a=this;a.controls=f;a.settings=e;a.functions=b;var d={initialize:function(){a.controls.showMoreLink.click(function(){d.onShowMoreClick()});a.controls.showLessLink.click(function(){d.onShowLessClick()});a.settings.multiline||(a.controls.messageContainer.css("display","block"),a.controls.messageContainer.css("overflow","hidden"),d.setMaxMessageContainerHeight(),$(window).resize(function(){d.handleContainerSizeChange()}),d.handleContainerSizeChange())},onShowMoreClick:function(){a.controls.showMoreLink.hide();
a.controls.showLessLink.show();d.showHideableContent()},showHideableContent:function(){a.settings.multiline?$(".hideable-line").show():a.controls.messageContainer.css("max-height","none")},onShowLessClick:function(){a.controls.showMoreLink.show();a.controls.showLessLink.hide();d.hideHideableContent()},hideHideableContent:function(){a.settings.multiline?$(".hideable-line").hide():d.setMaxMessageContainerHeight()},handleContainerSizeChange:function(){$(a.controls.messageContainer).prop("scrollHeight")>
d.getMaxMessageContainerHeight()?"none"===$(a.controls.showLessLink).css("display")&&a.controls.showMoreLink.show():(a.controls.showMoreLink.hide(),a.controls.showLessLink.hide(),d.setMaxMessageContainerHeight())},setMaxMessageContainerHeight:function(){var d=parseFloat(a.controls.container.css("line-height"));a.controls.messageContainer.css("max-height",d*a.settings.maxLinesToDisplayByDefault+"px")},getMaxMessageContainerHeight:function(){return parseFloat(a.controls.messageContainer.css("line-height"))*
a.settings.maxLinesToDisplayByDefault}};a.showMessage=function(d,b){a.controls.container.removeClass(a.settings.cssClasses.join(" ")).addClass(a.settings.feedbackCssClass).addClass(a.settings.cssClasses[d]).show();b?a.controls.textSpan.html(b).show():a.controls.textSpan.hide();a.hideUndo()};a.hide=function(d){a.controls.container.hide();if((void 0==d||d)&&a.functions.onClose)a.functions.onClose()};a.hideUndo=function(){a.controls.undoLink.hide()};a.show=function(){a.controls.container.show()};a.toggleCloseLink=
function(d){a.controls.closeLink.toggle(d)};a.undo=function(){if(a.functions.onUndo)if(a.settings.undoConfirmationText){if(confirm(a.settings.undoConfirmationText))a.functions.onUndo()}else a.functions.onUndo()};d.initialize();return a}
function FileList(c){window[c]=this;var e={},f=this;e.getTitle=function(b){return f.settings.titleText+" "+b};e.setTitle=function(b){$(f.controls.title).html(b)};e.urlHasQueryParams=function(b){return-1===b.indexOf("?")?!1:!0};e.appendQueryParamsToUrl=function(b,a){return b=e.urlHasQueryParams(b)?b+("&"+$.param(a)):b+("?"+$.param(a))};e.getUrl=function(b,a,d,c){var g=f.settings.serviceMethodUrl;e.urlHasQueryParams(g)?(g=g.replace(f.settings.templateQueryParams.fileName,encodeURIComponent(b)),g=g.replace(f.settings.templateQueryParams.viewOnly,
c.toString()),g=g.replace(f.settings.templateQueryParams.fileRepoId,encodeURIComponent(a)),g=g.replace(f.settings.templateQueryParams.uniqueId,d)):g=e.appendQueryParamsToUrl(g,{fileName:b,fileId:a,uniqueFileId:d,viewOnly:c});return g};e.openInModalDialog=function(b,a,d,c){var e=f.controls.dialog.replace("#","");window[e].setAjaxUrl(d);window[e].setContentMinSize(b,a);window[e].openDialog(c)};e.checkIfBrowserIsOldIE=function(){var b=navigator.userAgent.toLowerCase();return-1!=b.indexOf("msie")?10>=
parseInt(b.split("msie")[1])?!0:!1:!1};e.attachEventForOldIE=function(b,a,d){b.addEventListener?b.addEventListener(a,d,!1):b.attachEvent?b.attachEvent(a,d):b[a]=d};e.openInWindow=function(b){var a=window.open(b,"","width="+.8*screen.width+", height="+.8*screen.height+",location = 0, directories = 0, toolbar = 0, scrollbars = 0, status = 0, menubars = 0, resizable = 1");e.checkIfBrowserIsOldIE()&&e.attachEventForOldIE(a,"onload",function(){$("head",a.document).append('<style type="text/css">html,body{height:100%}html{width:auto;margin-top:-8px;}</style>')})};
e.openInNewTab=function(b){window.open(b)};e.getFileExtension=function(b){return(/[.]/.exec(b)?/[^.]+$/.exec(b):void 0).pop()};e.shouldBeOpenedInPopup=function(b){if(!Array.isArray(f.settings.fileExtensionsPreviewedInPopup))return!1;b=e.getFileExtension(b);return 0<=f.settings.fileExtensionsPreviewedInPopup.indexOf(b)};f.showPreview=function(b,a,d,c,f,k,l){var g=e.getTitle(b);e.setTitle(g);a=e.getUrl(b,a,d,c);e.shouldBeOpenedInPopup(b)?e.openInWindow(a):e.openInModalDialog(f,k,a,l)};f.showCloudItemPreview=
function(b){var a=f.settings.cloudItemViewerUrl;a=e.appendQueryParamsToUrl(a,{id:b});e.openInNewTab(a)};f.getUrl=e.getUrl;return f}
(function(c){"function"===typeof define&&define.amd?define(["jquery","tmpl","load-image","./jquery.fileupload-fp"],c):c(window.jQuery,window.tmpl,window.loadImage)})(function(c,e,f){c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{autoUpload:!0,maxNumberOfFiles:void 0,maxFileSize:void 0,minFileSize:void 0,acceptFileTypes:/.+$/i,previewSourceFileTypes:/^image\/(gif|jpeg|png)$/,previewSourceMaxFileSize:5E6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,filesContainer:void 0,prependFiles:!1,
dataType:"json",kbText:"KB",mbText:"MB",confirmReplaceFile:function(){return!0},customErrors:void 0,drop:function(b,a){b=(c(this).data("blueimp-fileupload")||c(this).data("fileupload")).options;var d=[],e=!1;c.each(a.files,function(a,b){!b.type&&(void 0===b.size||1>b.size||0==b.size%4096&&2>b.name.split(".").length)?e=!0:d.push(b)});e&&(a.files=d);b.singleFileMode&&1<a.files.length&&(a.files=a.files.slice(0,1))},add:function(b,a){var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),
e=d.options,f=a.files;c(this).fileupload("process",a).done(function(){if(e.singleFileMode&&0==e.maxNumberOfFiles)if(e.confirmReplaceFile())d.emptyFileList();else return!1;d._adjustMaxNumberOfFiles(-f.length);a.maxNumberOfFilesAdjusted=!0;a.files.valid=a.isValidated=d._validate(f);0<a.files.length&&d.options.defaultThumbnailUrl&&(a.files[0].thumbnailUrl=d.options.defaultThumbnailUrl);a.context=d._renderUpload(f).data("data",a);e.filesContainer[e.prependFiles?"prepend":"append"](a.context);d._renderPreviews(a);
d._forceReflow(a.context);d._transition(a.context).done(function(){!1!==d._trigger("added",b,a)&&(e.autoUpload||a.autoUpload)&&!1!==a.autoUpload&&a.isValidated&&a.submit()})})},send:function(b,a){var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload");if(d._additionalClientValidationCallback&&!d._additionalClientValidationCallback(a)||!a.isValidated&&(a.maxNumberOfFilesAdjusted||(d._adjustMaxNumberOfFiles(-a.files.length),a.maxNumberOfFilesAdjusted=!0),!d._validate(a.files)))return!1;
a.context&&a.dataType&&"iframe"===a.dataType.substr(0,6)&&(a.context.find(".ccl-progressbar").addClass(!c.support.transition&&"progress-animated").find(".ui-progressbar-value").css("width","100%"),a.context.find(".ccl-progressbar-labelcontainer").html("100%"));d._addUploadToList(b,a);return d._trigger("sent",b,a)},done:function(b,a){var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e=d._getFilesFromResponse(a);if(a.context)a.context.each(function(g){var h=e[g]||{error:"Empty file upload result"},
k=d._addFinishedDeferreds();h.error||d._addFilesToList(e);d._transition(c(this)).done(function(){var e=c(this);f=d._renderDownload([h]).replaceAll(e);d._forceReflow(f);d._transition(f).done(function(){a.context=c(this);d._renderPreviews(a);d._trigger("completed",b,a);d._trigger("finished",b,a);k.resolve()})})});else{e.length&&(c.each(e,function(b,c){a.maxNumberOfFilesAdjusted&&c.error?d._adjustMaxNumberOfFiles(1):a.maxNumberOfFilesAdjusted||c.error||d._adjustMaxNumberOfFiles(-1)}),a.maxNumberOfFilesAdjusted=
!0);var f=d._renderDownload(e).appendTo(d.options.filesContainer);d._renderPreviews(a);d._forceReflow(f);var k=d._addFinishedDeferreds();d._transition(f).done(function(){a.context=c(this);d._trigger("completed",b,a);d._trigger("finished",b,a);k.resolve()})}},fail:function(b,a){var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e;a.maxNumberOfFilesAdjusted&&d._adjustMaxNumberOfFiles(a.files.length);if(a.context)a.context.each(function(g){if("abort"!==a.errorThrown){var h=a.files[g];
if(a.jqXHR&&a.jqXHR.responseText)try{var k=c.parseJSON(a.jqXHR.responseText).message}catch(n){k=void 0}else k=void 0;h.error=h.error||k||a.errorThrown||d.options.customErrors.unknownError;f=d._addFinishedDeferreds();d._transition(c(this)).done(function(){var g=c(this);e=d._renderDownload([h]).replaceAll(g);d._forceReflow(e);d._transition(e).done(function(){a.context=c(this);d._trigger("failed",b,a);d._trigger("finished",b,a);f.resolve()})})}else f=d._addFinishedDeferreds(),d._transition(c(this)).done(function(){c(this).remove();
d._trigger("failed",b,a);d._trigger("finished",b,a);f.resolve()})});else if("abort"!==a.errorThrown){a.context=d._renderUpload(a.files).appendTo(d.options.filesContainer).data("data",a);d._forceReflow(a.context);var f=d._addFinishedDeferreds();d._transition(a.context).done(function(){a.context=c(this);d._trigger("failed",b,a);d._trigger("finished",b,a);f.resolve()})}else d._trigger("failed",b,a),d._trigger("finished",b,a),d._addFinishedDeferreds().resolve()},progress:function(b,a){a.context&&(b=parseInt(a.loaded/
a.total*100,10),a.context.find(".ccl-progressbar .ui-progressbar-value").css("width",b+"%"),a.context.find(".ccl-progressbar-labelcontainer").html(b+"%"))},progressall:function(b,a){b=c(this);var d=parseInt(a.loaded/a.total*100,10),e=b.find(".fileupload-progress"),f=e.find(".progress-extended");f.length&&f.html((b.data("blueimp-fileupload")||b.data("fileupload"))._renderExtendedProgress(a));e.find(".ccl-progressbar .ui-progressbar-value").css("width",d+"%");e.find(".ccl-progressbar-labelcontainer").html(d+
"%")},start:function(b){var a=c(this).data("blueimp-fileupload")||c(this).data("fileupload");a._resetFinishedDeferreds();a._transition(c(this).find(".fileupload-progress")).done(function(){a._trigger("started",b)});a._startUploadCallback&&a._startUploadCallback()},stop:function(b){var a=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),d=a._addFinishedDeferreds();c.when.apply(c,a._getFinishedDeferreds()).done(function(){a._trigger("stopped",b)});a._transition(c(this).find(".fileupload-progress")).done(function(){var a=
c(this);a.find(".ccl-progressbar .ui-progressbar-value").css("width","0");a.find(".ccl-progressbar-labelcontainer").html("0%");a.find(".progress-extended").html("&nbsp;");d.resolve()});a._stopUploadCallback&&a._stopUploadCallback()},destroy:function(b,a){var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload");a.url&&c.ajax(a);a.filekey&&d._adjustMaxNumberOfFiles(1);d._removeFilesFromList(a.filekey);d._transition(a.context).done(function(){c(this).remove();d._trigger("destroyed",b,a)})}},
_addFilesToList:function(b){var a=this;a._fileList||(a._fileList=[],a._fileListKeys=[]);c.each(b,function(d,b){a._fileList.push(b);a._fileListKeys.push(b.id)});a.options.stateHiddenField.val(JSON.stringify(a._fileList));a._notifyAboutResultChanges();a._addFileCallback&&a._addFileCallback()},_addUploadToList:function(b,a){this._uploadsList||(this._uploadsList=[]);this._uploadsList.push({element:b,data:a})},_removeFilesFromList:function(b){this._fileList&&0<this._fileList.length&&(b=this._fileListKeys.indexOf(b),
-1<b&&(this._fileList.splice(b,1),this._fileListKeys.splice(b,1)));this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback()},_notifyAboutResultChanges:function(){this._trigger("resultschanged",null,{results:this._fileList})},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(b){b||(b=c.Deferred());this._finishedUploads.push(b);return b},_getFinishedDeferreds:function(){return this._finishedUploads},
_getFilesFromResponse:function(b){return b.result&&c.isArray(b.result.files)?b.result.files:[]},_enableDragToDesktop:function(){var b=c(this),a=b.prop("href"),d=b.prop("download");b.bind("dragstart",function(b){try{b.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",d,a].join(":"))}catch(h){}})},_adjustMaxNumberOfFiles:function(b){"number"===typeof this.options.maxNumberOfFiles&&(this.options.maxNumberOfFiles+=b,1>this.options.maxNumberOfFiles&&!this.options.singleFileMode?
this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(b){return"number"!==typeof b?"":1048576<=b?(b/1048576).toFixed(2)+" "+this.options.mbText:(b/1024).toFixed(2)+" "+this.options.kbText},_formatBitrate:function(b){return"number"!==typeof b?"":1E9<=b?(b/1E9).toFixed(2)+" Gbit/s":1E6<=b?(b/1E6).toFixed(2)+" Mbit/s":1E3<=b?(b/1E3).toFixed(2)+" kbit/s":b.toFixed(2)+" bit/s"},_formatTime:function(b){var a=new Date(1E3*b);b=parseInt(b/86400,10);return(b?b+"d ":"")+("0"+
a.getUTCHours()).slice(-2)+":"+("0"+a.getUTCMinutes()).slice(-2)+":"+("0"+a.getUTCSeconds()).slice(-2)},_formatPercentage:function(b){return(100*b).toFixed(2)+" %"},_renderExtendedProgress:function(b){return this._formatBitrate(b.bitrate)+" | "+this._formatTime(8*(b.total-b.loaded)/b.bitrate)+" | "+this._formatPercentage(b.loaded/b.total)+" | "+this._formatFileSize(b.loaded)+" / "+this._formatFileSize(b.total)},_hasError:function(b){return b.error?b.error:0>this.options.maxNumberOfFiles?this.options.customErrors&&
this.options.customErrors.maxNumberOfFilesExceeded?this.options.customErrors.maxNumberOfFilesExceeded:"Maximum number of files exceeded":this.options.acceptFileTypes.test(b.type)||this.options.acceptFileTypes.test(b.name)?this.options.maxFileSize&&b.size>this.options.maxFileSize?(this._errorCallback&&this._errorCallback(),this.options.customErrors&&this.options.customErrors.fileIsTooBig?this.options.customErrors.fileIsTooBig:"File is too big"):"number"===typeof b.size&&b.size<this.options.minFileSize?
this.options.customErrors&&this.options.customErrors.fileIsTooSmall?this.options.customErrors.fileIsTooSmall:"File is too small":null:this.options.customErrors&&this.options.customErrors.fileTypeNotAllowed?this.options.customErrors.fileTypeNotAllowed:"Filetype not allowed"},_validate:function(b){var a=this,d=!!b.length;c.each(b,function(b,c){c.error=a._hasError(c);c.error&&(d=!1)});return d},_renderTemplate:function(b,a){if(!b)return c();b=b({files:a,formatFileSize:this._formatFileSize,options:this.options});
return b instanceof c?b:c(this.options.templatesContainer).html(b).children()},_renderPreview:function(b,a){var d=this,e=this.options,h=c.Deferred();return(f&&f(b,function(b){a.empty();a.append(b);d._forceReflow(a);d._transition(a).done(function(){h.resolveWith(a)});c.contains(d.document[0].body,a[0])||h.resolveWith(a)},{maxWidth:e.previewMaxWidth,maxHeight:e.previewMaxHeight,canvas:e.previewAsCanvas})||h.resolveWith(a))&&h},_renderPreviews:function(b){var a=this,d=this.options;b.context.find(".preview span").each(function(e,
f){var g=b.files[e];d.previewSourceFileTypes.test(g.type)&&("number"!==c.type(d.previewSourceMaxFileSize)||g.size<d.previewSourceMaxFileSize)&&(a._processingQueue=a._processingQueue.pipe(function(){var d=c.Deferred(),e=c.Event("previewdone",{target:f});a._renderPreview(g,c(f)).done(function(){a._trigger(e.type,e,b);d.resolveWith(a)});return d.promise()}))});return this._processingQueue},_renderUpload:function(b){return this._renderTemplate(this.options.uploadTemplate,b)},_renderDownload:function(b){return this._renderTemplate(this.options.downloadTemplate,
b).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(b){b.preventDefault();b=c(b.currentTarget);var a=b.closest(".template-upload").data("data");a&&a.submit&&!a.jqXHR&&a.submit()&&b.prop("disabled",!0)},_cancelHandler:function(b){b.preventDefault();var a=c(b.currentTarget).closest(".template-upload").data("data")||{};this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback();a.jqXHR?a.jqXHR.abort():(a.errorThrown="abort",this._trigger("fail",
b,a))},_deleteHandler:function(b){b.preventDefault();var a=c(b.currentTarget);this._trigger("destroy",b,c.extend({context:a.closest(".template-download"),type:"POST",dataType:this.options.dataType},a.data()))},_forceReflow:function(b){return c.support.transition&&b.length&&b[0].offsetWidth},_transition:function(b){var a=c.Deferred();c.support.transition&&b.hasClass("fade")?b.bind(c.support.transition.end,function(d){d.target===b[0]&&(b.unbind(c.support.transition.end),a.resolveWith(b))}).toggleClass("in"):
(b.toggleClass("in"),a.resolveWith(b));return a},_initButtonBarEventHandlers:function(){var b=this.element.find(".fileupload-buttonbar"),a=this.options.filesContainer;this._on(b.find(".start"),{click:function(d){d.preventDefault();a.find(".start button").click()}});this._on(b.find(".cancel"),{click:function(d){d.preventDefault();a.find(".cancel button").click()}});this._on(b.find(".delete"),{click:function(d){d.preventDefault();a.find(".delete input:checked").siblings("button").click();b.find(".toggle").prop("checked",
!1)}});this._on(b.find(".toggle"),{change:function(d){a.find(".delete input").prop("checked",c(d.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar button"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start button":this._startHandler,"click .cancel button":this._cancelHandler,"click .delete .button":this._deleteHandler});
this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var b=this.options;b.templatesContainer=
this.document[0].createElement(b.filesContainer.prop("nodeName"));e&&(b.uploadTemplateId&&(b.uploadTemplate=e(b.uploadTemplateId)),b.downloadTemplateId&&(b.downloadTemplate=e(b.downloadTemplateId)))},_initFilesContainer:function(){var b=this.options;void 0===b.filesContainer?b.filesContainer=this.element.find(".files"):b.filesContainer instanceof c||(b.filesContainer=c(b.filesContainer))},_stringToRegExp:function(b){b=b.split("/");var a=b.pop();b.shift();return new RegExp(b.join("/"),a)},_initRegExpOptions:function(){var b=
this.options;"string"===c.type(b.acceptFileTypes)&&(b.acceptFileTypes=this._stringToRegExp(b.acceptFileTypes));"string"===c.type(b.previewSourceFileTypes)&&(b.previewSourceFileTypes=this._stringToRegExp(b.previewSourceFileTypes))},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates();this._initRegExpOptions()},_setOption:function(b,a){this._super(b,a);"maxNumberOfFiles"===b&&this._adjustMaxNumberOfFiles(0)},_create:function(){this._super();this._refreshOptionsList.push("filesContainer",
"uploadTemplateId","downloadTemplateId");this._processingQueue||(this._processingQueue=c.Deferred().resolveWith(this).promise(),this.process=function(){return this._processingQueue});this._resetFinishedDeferreds()},enable:function(){var b=!1;this.options.disabled&&(b=!0);this._super();b&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());
this._super()},emptyFileList:function(){this.options.filesContainer.find(".delete .button, .cancel button").click()},clearResults:function(){c(this.options.filesContainer[0]).find("tr").each(function(){var b=c(this);b.hasClass("clearme")||0===b.find(".error").length?b.remove():b.addClass("clearme")});this._fileList&&(this._adjustMaxNumberOfFiles(this._fileList.length),this._fileList.length=0,this._fileListKeys.length=0);this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges()},
allowHide:function(){return 0===c(this.options.filesContainer[0]).find("tr .error").length},abortAllUploads:function(){if(this._uploadsList){var b=this;c.each(this._uploadsList,function(a,d){d.data.jqXHR?d.data.jqXHR.abort():(d.data.errorThrown="abort",b._trigger("fail",d,d.data))})}},getUploadedFiles:function(){return this._fileList||[]},setStartUploadCallback:function(b){"function"==typeof b&&(this._startUploadCallback=b)},setStopUploadCallback:function(b){"function"==typeof b&&(this._stopUploadCallback=
b)},setAddFileCallback:function(b){"function"==typeof b&&(this._addFileCallback=b)},setRemoveFileCallback:function(b){"function"==typeof b&&(this._removeFileCallback=b)},setErrorCallback:function(b){"function"==typeof b&&(this._errorCallback=b)},setAdditionalClientValidationCallback:function(b){"function"==typeof b&&(this._additionalClientValidationCallback=b)},renderHiddenFieldContent:function(){var b=this.options,a=this.options.stateHiddenField.val();if((a=a?JSON.parse(a):[])&&0<a.length){var d=
this._renderDownload(a);d.appendTo(b.filesContainer);var e=[];c.each(a,function(a,d){d.error&&0!=d.error.length||e.push(d)});0<e.length&&this._addFilesToList(e);this._adjustMaxNumberOfFiles(b.singleFileMode?-a.length:-e.length);var f=[];c.each(a,function(a,d){d.type&&b.previewSourceFileTypes.test(d.type)&&d.fileUrl&&(f.push(d),f[f.length-1].toString=function(){return d.fileUrl})});0<f.length&&(a=d.data("data",{files:a}),this._renderPreviews({context:a,files:f}))}}})});var FixedHeader;
(function(c,e,f){FixedHeader=function(b,a){if(b)if(!this instanceof FixedHeader)alert("FixedHeader warning: FixedHeader must be initialised with the 'new' keyword.");else{var d={aoCache:[],oSides:{top:!0,bottom:!1,left:0,right:0},oZIndexes:{top:104,bottom:103,left:102,right:101,topLeft:105},oCloneOnDraw:{top:!1,bottom:!1,left:!0,right:!0},oMes:{iTableWidth:0,iTableHeight:0,iTableLeft:0,iTableRight:0,iTableTop:0,iTableBottom:0},oOffset:{top:0},nTable:null,bFooter:!1,bInitComplete:!1};this.fnGetSettings=
function(){return d};this.fnUpdate=function(){this._fnUpdateClones();this._fnUpdatePositions()};this.fnPosition=function(){this._fnUpdatePositions()};this.fnInit(b,a);"function"==typeof b.fnSettings&&(b._oPluginFixedHeader=this)}};FixedHeader.prototype={fnInit:function(b,a){var d=this.fnGetSettings(),e=this;this.fnInitSettings(d,a);d.nTable=b;d.bFooter=0<f(">tfoot",d.nTable).length?!0:!1;d.oSides.left&&d.aoCache.push(e._fnCloneTable("fixedLeft","FixedHeader_Left",e._fnCloneTLeft,d.oSides.left));d.oSides.top&&
d.oSides.left&&d.aoCache.push(e._fnCloneTable("fixedTopLeft","FixedHeader_TopLeft",e._fnCloneTTopLeft,d.oSides.left));d.oSides.top&&d.aoCache.push(e._fnCloneTable("fixedHeader","FixedHeader_Header",e._fnCloneThead));FixedHeader.afnScroll.push(function(){e._fnUpdatePositions.call(e)});f(c).resize(function(){FixedHeader.fnCalculatePosition()});d.frameSizeChangedEvent&&f(c).bind(d.frameSizeChangedEvent,function(){FixedHeader.fnCalculatePosition()});f(d.nTable).on("column-reorder column-visibility",function(){FixedHeader.fnMeasure();
e._fnUpdateClones(!0);e._fnUpdatePositions()}).on("row-resize",function(){e._fnFindEqualiseTLeftRowsHeight()});FixedHeader.fnMeasure();e._fnUpdateClones();e._fnUpdatePositions();e._fnRemoveExcessIdentifiers();d.bInitComplete=!0},fnInitSettings:function(b,a){void 0!==a&&(void 0!==a.top&&(b.oSides.top=a.top),void 0!==a.bottom&&(b.oSides.bottom=a.bottom),"boolean"==typeof a.left?b.oSides.left=a.left?1:0:void 0!==a.left&&(b.oSides.left=a.left),"boolean"==typeof a.right?b.oSides.right=a.right?1:0:void 0!==
a.right&&(b.oSides.right=a.right),void 0!==a.zTop&&(b.oZIndexes.top=a.zTop),void 0!==a.zBottom&&(b.oZIndexes.bottom=a.zBottom),void 0!==a.zLeft&&(b.oZIndexes.left=a.zLeft),void 0!==a.zRight&&(b.oZIndexes.right=a.zRight),void 0!==a.offsetTop&&(b.oOffset.top=a.offsetTop),void 0!==a.alwaysCloneTop&&(b.oCloneOnDraw.top=a.alwaysCloneTop),void 0!==a.alwaysCloneBottom&&(b.oCloneOnDraw.bottom=a.alwaysCloneBottom),void 0!==a.alwaysCloneLeft&&(b.oCloneOnDraw.left=a.alwaysCloneLeft),void 0!==a.alwaysCloneRight&&
(b.oCloneOnDraw.right=a.alwaysCloneRight),void 0!=a.frameSizeChangedEvent&&(b.frameSizeChangedEvent=a.frameSizeChangedEvent))},_fnCloneTable:function(b,a,d,c){var f=this.fnGetSettings();var g=f.nTable.cloneNode(!1);g.removeAttribute("id");var l=e.createElement("div");l.style.position="absolute";l.style.top="0px";l.style.left="0px";l.className+=" FixedHeader_Cloned "+b+" "+a;"fixedHeader"==b&&(l.style.zIndex=f.oZIndexes.top);"fixedLeft"==b&&(l.style.zIndex=f.oZIndexes.left);"fixedTopLeft"==b&&(l.style.zIndex=
f.oZIndexes.topLeft);g.style.margin="0";l.appendChild(g);e.body.appendChild(l);return{nNode:g,nWrapper:l,sType:b,sPosition:"",sTop:"",sLeft:"",fnClone:d,iCells:c}},_fnMeasure:function(){var b=this.fnGetSettings(),a=b.oMes,d=f(b.nTable),c=d.offset(),e=this._fnSumScroll(b.nTable.parentNode,"scrollTop");this._fnSumScroll(b.nTable.parentNode,"scrollLeft");a.iTableWidth=d.outerWidth();a.iTableHeight=d.outerHeight();a.iTableLeft=c.left+b.nTable.parentNode.scrollLeft;a.iTableTop=c.top+e;a.iTableRight=FixedHeader.oDoc.iWidth-
a.iTableLeft-a.iTableWidth;a.iTableBottom=FixedHeader.oDoc.iHeight-a.iTableTop-a.iTableHeight},_fnSumScroll:function(b,a){for(var d=b[a];(b=b.parentNode)&&"HTML"!=b.nodeName&&"BODY"!=b.nodeName;)d=b[a];return d},_fnUpdatePositions:function(){var b=this.fnGetSettings();this._fnMeasure();for(var a=0,d=b.aoCache.length;a<d;a++)"fixedHeader"==b.aoCache[a].sType?this._fnScrollFixedHeader(b.aoCache[a]):"fixedLeft"==b.aoCache[a].sType?this._fnScrollHorizontalLeft(b.aoCache[a]):"fixedTopLeft"==b.aoCache[a].sType&&
this._fnScrollHorisontalOrVerticalTopLeft(b.aoCache[a])},_fnRemoveExcessIdentifiers:function(){var b=this.fnGetSettings();f("thead",b.nTable).find(":not(input[type=hidden])").removeAttr("id").removeAttr("name");f("td:nth-child(-n+"+b.oSides.left+")",b.nTable).find(":not(input[type=hidden])").andSelf().removeAttr("id").removeAttr("name");for(var a=0,d=b.aoCache.length;a<d;a++){var c=b.aoCache[a].nNode;f("input[type=hidden]",c).remove();switch(b.aoCache[a].sType){case "fixedHeader":f("th:nth-child(-n+"+
b.oSides.left+")",c).children().andSelf().removeAttr("id").removeAttr("name");break;case "fixedLeft":f("thead",c).find("*").removeAttr("id").removeAttr("name")}}},_fnUpdateClones:function(b){var a=this.fnGetSettings();b&&(a.bInitComplete=!1);for(var d=0,c=a.aoCache.length;d<c;d++)a.aoCache[d].fnClone.call(this,a.aoCache[d]);b&&(a.bInitComplete=!0)},_fnClearTableColumnWidths:function(){},_fnScrollHorizontalLeft:function(b){var a=this.fnGetSettings().oMes,d=FixedHeader.oWin,c=b.nWrapper,e=f(c).outerWidth();
d.iScrollLeft<a.iTableLeft?(this._fnUpdateCache(b,"sPosition","absolute","position",c.style),this._fnUpdateCache(b,"sTop",a.iTableTop+"px","top",c.style),this._fnUpdateCache(b,"sLeft",a.iTableLeft+"px","left",c.style)):d.iScrollLeft<a.iTableLeft+a.iTableWidth-e?(this._fnUpdateCache(b,"sPosition","fixed","position",c.style),this._fnUpdateCache(b,"sTop",a.iTableTop-d.iScrollTop+"px","top",c.style),this._fnUpdateCache(b,"sLeft","0px","left",c.style)):(this._fnUpdateCache(b,"sPosition","absolute","position",
c.style),this._fnUpdateCache(b,"sTop",a.iTableTop+"px","top",c.style),this._fnUpdateCache(b,"sLeft",a.iTableLeft+a.iTableWidth-e+"px","left",c.style))},_fnScrollHorisontalOrVerticalTopLeft:function(b){var a=this.fnGetSettings(),d=a.oMes,c=FixedHeader.oWin,e=b.nWrapper,k=f(e).outerWidth();a.nTable.getElementsByTagName("tbody");c.iScrollLeft<d.iTableLeft&&d.iTableTop>c.iScrollTop+a.oOffset.top?(this._fnUpdateCache(b,"sPosition","absolute","position",e.style),this._fnUpdateCache(b,"sTop",d.iTableTop+
"px","top",e.style),this._fnUpdateCache(b,"sLeft",d.iTableLeft+"px","left",e.style)):d.iTableTop>c.iScrollTop+a.oOffset.top?c.iScrollLeft<d.iTableLeft?(this._fnUpdateCache(b,"sPosition","absolute","position",e.style),this._fnUpdateCache(b,"sTop",d.iTableTop+"px","top",e.style),this._fnUpdateCache(b,"sLeft",d.iTableLeft+"px","left",e.style)):c.iScrollLeft<d.iTableLeft+d.iTableWidth-k?(this._fnUpdateCache(b,"sPosition","fixed","position",e.style),this._fnUpdateCache(b,"sTop",d.iTableTop-c.iScrollTop+
"px","top",e.style),this._fnUpdateCache(b,"sLeft","0px","left",e.style)):(this._fnUpdateCache(b,"sPosition","absolute","position",e.style),this._fnUpdateCache(b,"sTop",d.iTableTop+"px","top",e.style),this._fnUpdateCache(b,"sLeft",d.iTableLeft+d.iTableWidth-k+"px","left",e.style)):(this._fnUpdateCache(b,"sPosition","fixed","position",e.style),this._fnUpdateCache(b,"sTop",a.oOffset.top+"px","top",e.style),c.iScrollLeft<d.iTableLeft?this._fnUpdateCache(b,"sLeft",d.iTableLeft-c.iScrollLeft+"px","left",
e.style):this._fnUpdateCache(b,"sLeft","0px","left",e.style))},_fnScrollFixedHeader:function(b){for(var a=this.fnGetSettings(),d=a.oMes,c=FixedHeader.oWin,e=b.nWrapper,f=0,l=a.nTable.getElementsByTagName("tbody"),m=0;m<l.length;++m)f+=l[m].offsetHeight;d.iTableTop>c.iScrollTop+a.oOffset.top?(this._fnUpdateCache(b,"sPosition","absolute","position",e.style),this._fnUpdateCache(b,"sTop",d.iTableTop+"px","top",e.style),this._fnUpdateCache(b,"sLeft",d.iTableLeft+"px","left",e.style)):c.iScrollTop+a.oOffset.top>
d.iTableTop+f?(this._fnUpdateCache(b,"sPosition","absolute","position",e.style),this._fnUpdateCache(b,"sTop",d.iTableTop+f+"px","top",e.style),this._fnUpdateCache(b,"sLeft",d.iTableLeft+"px","left",e.style)):(this._fnUpdateCache(b,"sPosition","fixed","position",e.style),this._fnUpdateCache(b,"sTop",a.oOffset.top+"px","top",e.style),this._fnUpdateCache(b,"sLeft",d.iTableLeft-c.iScrollLeft+"px","left",e.style))},_fnUpdateCache:function(b,a,d,c,e){b[a]!=d&&(e[c]=d,b[a]=d)},_fnClassUpdate:function(b,
a){var d=this;if("TR"===b.nodeName.toUpperCase()||"TH"===b.nodeName.toUpperCase()||"TD"===b.nodeName.toUpperCase()||"SPAN"===b.nodeName.toUpperCase())a.className=b.className;f(b).children().each(function(c){d._fnClassUpdate(f(b).children()[c],f(a).children()[c])})},_fnCloneThead:function(b){var a=this.fnGetSettings(),d=b.nNode;if(a.bInitComplete&&!a.oCloneOnDraw.top)this._fnClassUpdate(f("thead",a.nTable)[0],f("thead",d)[0]);else{var c=f(a.nTable).outerWidth();b.nWrapper.style.width=c+"px";for(d.style.width=
c+"px";0<d.childNodes.length;)f("thead th",d).unbind("click"),d.removeChild(d.childNodes[0]);b=f("thead",a.nTable).clone(!0,!0)[0];d.appendChild(b);var e=[],k=[];f("thead>tr th",a.nTable).each(function(a){e.push(f(this).width())});f("thead>tr td",a.nTable).each(function(a){k.push(f(this).width())});f("thead>tr th",a.nTable).each(function(a){f("thead>tr th:eq("+a+")",d).width(e[a]);f(this).width(e[a])});f("thead>tr td",a.nTable).each(function(a){f("thead>tr td:eq("+a+")",d).width(k[a]);f(this).width(k[a])})}},
_fnCloneTLeft:function(b){for(var a=this.fnGetSettings(),d=b.nNode,c=f("tbody",a.nTable)[0];0<d.childNodes.length;)d.removeChild(d.childNodes[0]);d.appendChild(f("thead",a.nTable).clone(!0)[0]);d.appendChild(f("tbody",a.nTable).clone(!0)[0]);var e="gt("+(b.iCells-1)+")";f("thead tr",d).each(function(a){f("th:"+e,this).remove()});f("tbody tr",d).each(function(a){f("td:"+e,this).remove()});this._fnEqualiseRowsHeight(a,b,c,d);for(var k=c=0;k<b.iCells;k++)c+=f("thead tr th:eq("+k+")",a.nTable).outerWidth();
d.style.width=c+"px";b.nWrapper.style.width=c+"px"},_fnEqualiseRowsHeight:function(b,a,d,c){f("tr",c).removeClass("ccl-table-highlight");f("tr",b.nTable).height("auto");this._fnEqualiseHeights("thead",d.parentNode,c);this._fnEqualiseHeights("tbody",d.parentNode,c)},_fnFindEqualiseTLeftRowsHeight:function(){var b=this.fnGetSettings();this._fnMeasure();for(var a=0,d=b.aoCache.length;a<d;a++)if("fixedLeft"==b.aoCache[a].sType){var c=b.aoCache[a],e=f("tbody",b.nTable)[0];this._fnEqualiseRowsHeight(b,
c,e,c.nNode)}},_fnCloneTTopLeft:function(b){var a=this.fnGetSettings(),d=b.nNode;for(f("tbody",a.nTable);0<d.childNodes.length;)d.removeChild(d.childNodes[0]);d.appendChild(f("thead",a.nTable).clone(!0)[0]);var c="gt("+(b.iCells-1)+")";f("thead tr",d).each(function(a){f("th:"+c,this).remove()});for(var e=0,k=0;k<b.iCells;k++)e+=f("thead tr th:eq("+k+")",a.nTable).outerWidth();d.style.width=e+"px";b.nWrapper.style.width=e+"px"},_fnEqualiseHeights:function(b,a,d){var c=f(b+" tr",a),e;f(b+" tr",d).each(function(a){e=
c.eq(a).css("height");"Microsoft Internet Explorer"==navigator.appName&&(e=parseInt(e,10)+1);f(this).css("height",e);c.eq(a).css("height",e)})}};FixedHeader.oWin={iScrollTop:0,iScrollRight:0,iScrollBottom:0,iScrollLeft:0,iHeight:0,iWidth:0};FixedHeader.oDoc={iHeight:0,iWidth:0};FixedHeader.afnScroll=[];FixedHeader.fnMeasure=function(){var b=f(c),a=f(e),d=FixedHeader.oWin,g=FixedHeader.oDoc;g.iHeight=a.height();g.iWidth=a.width();d.iHeight=b.height();d.iWidth=b.width();d.iScrollTop=b.scrollTop();d.iScrollLeft=
b.scrollLeft();d.iScrollRight=g.iWidth-d.iScrollLeft-d.iWidth;d.iScrollBottom=g.iHeight-d.iScrollTop-d.iHeight};FixedHeader.VERSION="2.1.0-dev";FixedHeader.prototype.VERSION=FixedHeader.VERSION;FixedHeader.fnCalculatePosition=function(){FixedHeader.fnMeasure();for(var b=0,a=FixedHeader.afnScroll.length;b<a;b++)FixedHeader.afnScroll[b]()};f(c).scroll(function(){FixedHeader.fnCalculatePosition()})})(window,document,jQuery);
function FolderSelector(c){window[c.clientId]=this;var e=this;e.id=c.clientId;e.rootId="0";e.rootTitle="";e.hideRootCrumb=!1;e.selectedId="";e.parentId="";e.cache={};e.hiddenItems=c.hiddenItems;e.loadingTreshold=c.loadingTreshold;e.insertFeedbackClientId=c.insertFeedbackClientId;e.showBreadCrumbs="true"===c.showBreadCrumbs;e.closeOnlyAfterSelectionSaved="true"===c.closeOnlyAfterSelectionSaved;e.needToClose=!1;e.showUnpublishedFolders=c.showUnpublishedFolders||!1;e.controls={dialog:window[c.dialogClientId],
grid:window[c.gridClientId]};e.dialogContainer=$("#"+c.dialogClientId);e.gridContainer=e.dialogContainer.find("."+c.cssClasses.gridContainer);e.treeContainer=e.dialogContainer.find("."+c.cssClasses.treeContainer);e.navigation=e.dialogContainer.find("."+c.cssClasses.navigation);e.loadingIndicator=e.dialogContainer.find("."+c.cssClasses.loadingIndicator);e.dialogContainer.addClass(c.cssClasses.folderSelector);e.gridContainer.addClass(c.cssClasses.hidecontents);e.treeContainer.addClass(c.cssClasses.hidecontents);
e.selectButton=$("."+c.cssClasses.selectButton);e.selectAndCloseButton=$("."+c.cssClasses.selectAndCloseButton);e.navigateUpLink=$("a."+c.cssClasses.navigateUpLink);e.openDialog=function(a){e.toggleSelectButtons(!1);e.needToClose=!1;e.hideSelectFeedback();e.initializeCurrentView(a);window[c.dialogClientId].openDialog()};e.buildStructure=function(){e.reinitialize();$(e).trigger(c.eventNames.open);return!1};e.disposeStructure=function(){$(e).trigger(c.eventNames.close);e.treeContainer.empty();delete e.controls.tree};
e.reinitialize=function(a,d){a&&(e.cache={});e.treeContainer.empty();delete e.controls.tree;e.selectedId="";e.parentId="";e.toggleNavigateUpLink(!(e.selectedId===e.rootId||!e.parentId&&!e.selectedId));e.showBreadCrumbs&&b(0);e.hideSelectFeedback();e.initializeCurrentView(d);e.createTreeMenu()};e.initializeCurrentView=function(a){a&&(e.rootId="0",""!=a.ReadDataServiceUrl&&(e.controls.grid.dataSourceWebMethodUrl=a.ReadDataServiceUrl))};e.createTreeMenu=function(){e.treeContainer.empty();e.treeContainer.jstree({json_data:{data:e._loadTreeData},
plugins:["ui","json_data"],core:{animation:0,strings:{loading:" "}}}).bind("select_node.jstree",function(a,d){e.navigateToNode(d.rslt.obj.attr("nodeId"))});e.controls.tree=$.jstree._reference(e.treeContainer)};e.showEmptyContentFeedback=function(){e.dialogContainer.find("."+c.cssClasses.content).hide();e.navigation.hide();e.selectButton.hide();e.selectAndCloseButton.hide();e.dialogContainer.find("."+c.cssClasses.emptyContent).show()};e.controls.grid.refresh=function(){e.navigateToPage(e.controls.grid.pageNumber,
e.controls.grid.pageSize)};$(e.controls.grid).on(CclAjaxGrid.selectionChangeEvent,function(a,d){e.toggleSelectButtons(0<d.nodeIds.length)});e.toggleSelectButtons=function(a){e.selectButton.toggleHyperlink(a);e.selectAndCloseButton.toggleHyperlink(a)};var f=function(){var a=e.controls.grid.getSelectedValues();$(e).trigger(c.eventNames.select,[{selectedId:e.selectedId,nodeIds:a}])};e.saveSelection=function(){if(!e.selectButton.getIfHyperLinkEnabled())return!1;e.needToClose=!1;f();return!1};e.saveSelectionAndClose=
function(){if(!e.selectAndCloseButton.getIfHyperLinkEnabled())return!1;e.needToClose=!0;f();e.closeOnlyAfterSelectionSaved?e.toggleSelectButtons(!1):CssModal.closeDialog();return!1};$(document).on(c.eventNames.selectionSaved,function(){e.needToClose&&(CssModal.closeDialog(),e.toggleSelectButtons(!0))});e.gridContainer.on("click","a."+c.cssClasses.folderLink,function(){e.navigateToNode($(this).attr("folderId"));return!1});e.navigateUp=function(){if(!e.navigateUpLink.getIfHyperLinkEnabled())return!1;
if(e.parentId&&"0"!=e.parentId||"0"==e.parentId&&"0"==e.rootId)e.selectedId==e.rootId?(e.rootId=e.parentId,e.reinitialize(),e.showBreadCrumbs&&b()):e.navigateToNode(e.parentId);return!1};e.toggleNavigateUpLink=function(a){e.navigateUpLink.toggleHyperlink(a)};e._loadTreeData=function(a,d){var b=(a.data?a.attr("nodeId"):void 0)||e.rootId;a=(a.data?a.attr("setRootAsParent"):void 0)||!1;e.getData(b,1,e.controls.grid.pageSize,function(a){a=e.getCachedFolderData(a);if(e.showFeedbackOnEmpty&&e.isContentEmpty(b,
a))e.showEmptyContentFeedback();else{for(var c=-1,f=[],g=a.folders.length,h=0;h<g;h++){var p=a.folders[h];f.push({data:{title:p.title,icon:p.cssClass},attr:{nodeId:p.id,setRootAsParent:p.setRootAsParent},state:"closed"});p.selectedByDefault&&0>c&&(c=h)}d(f);""===e.selectedId&&(e.selectedId=e.rootId,e.renderGrid(e.selectedId,1,e.controls.grid.pageSize),0<=c&&c<g&&(e.hideRootCrumb=!0,e.navigateToNode(a.folders[c].id,!0)))}},a)};e.isContentEmpty=function(a,d){return"0"==a?0==d.folders.length&&0==d.items.pages[1].length:
!1};e.navigateToNode=function(a,d){if(a!=e.selectedId){e.hideSelectFeedback();e.treeContainer.find("li").removeClass(c.cssClasses.selected);var f=e.treeContainer.find("li[nodeId="+a+"]");f.addClass(c.cssClasses.selected);e.showBreadCrumbs&&b(f);var h=(f.data?f.attr("setRootAsParent"):void 0)||!1;e.getData(a,1,e.controls.grid.pageSize,function(a){e.selectedId=a;d&&(e.rootId=a);e.toggleNavigateUpLink(!(e.selectedId===e.rootId||!e.parentId&&!e.selectedId));e.renderGrid(a,1,e.controls.grid.pageSize);
f[0]&&e.controls.tree.open_node(f)},h)}};e.navigateToPage=function(a,d){e.hideSelectFeedback();e.getData(e.selectedId,a,d,function(){e.renderGrid(e.selectedId,a,d);e.controls.dialog.adjustWindowSize()})};e.getData=function(a,d,f,h,k){d=d||e.controls.grid.page;f=f||e.controls.grid.pageSize;e.hasCachedFolderData(a)&&e.hasCachedItemData(a,d,f)?h(a):(e.showLoadingIndicator(),$(e).trigger(c.eventNames.loadStart,[{nodeId:a,page:d,pageSize:f}]),$.ajax({type:"GET",url:e.controls.grid.dataSourceWebMethodUrl,
data:e.getRequestData(a,d,f,k),dataType:"jsonp",success:function(g){var k=$.Event(c.eventNames.loadComplete);$(e).trigger(k,[{success:!0,data:g}]);k.isPropagationStopped()||(a==e.rootId&&(e.rootId=g.Id,e.rootTitle=g.Title,e.showBreadCrumbs&&b()),e.cacheData(g,g.Id,d,f),h(g.Id),e.hideLoadingIndicator())},error:function(){$(e).trigger(c.eventNames.loadComplete,[{success:!1}]);e.hideLoadingIndicator()}}))};e.showLoadingIndicator=function(){clearTimeout(e.loadingTimeout);e.loadingTimeout=setTimeout(function(){e.loadingIndicator.show()},
e.loadingTreshold)};e.hideLoadingIndicator=function(){clearTimeout(e.loadingTimeout);e.loadingIndicator.hide();e.gridContainer.removeClass(c.cssClasses.hidecontents);e.treeContainer.removeClass(c.cssClasses.hidecontents)};e.getCachedFolderData=function(a){return e.cache[a]};e.getCachedItemData=function(a,d,b){a=e.cache[a];if(void 0!==a&&null!==a&&(a=a.items||{},a.pageSize===b&&a.pages))return a.pages[d.toString()]};e.hasCachedFolderData=function(a){a=e.getCachedFolderData(a);return void 0!==a&&null!==
a};e.hasCachedItemData=function(a,d,b){a=e.getCachedItemData(a,d,b);return void 0!==a&&null!==a};e.getRequestData=function(a,d,b,c){return{nodeId:a,page:d,pageSize:b,omitItems:e.hasCachedItemData(a,d,b),omitFolders:e.hasCachedFolderData(a),includeUnpublished:e.showUnpublishedFolders,setRootAsParent:void 0!==c?c||!1:!1}};e.cacheData=function(a,d,b,c){var f=e.cache[d]||{};f.description=a.Description;f.parentId=a.SetRootAsParent?e.rootId:a.ParentId;f.title=a.Title;if(null!=a.Folders){f.folders=[];for(var g=
a.Folders.length,h=0;h<g;h++){var n=a.Folders[h];f.folders.push({id:n.Id,title:n.Title,description:n.Description,cssClass:n.CssClass,isFolder:n.IsFolder,selectedByDefault:n.SelectedByDefault,setRootAsParent:n.SetRootAsParent})}}if(null!=a.Items){g=[];var p=a.Items.length;for(h=0;h<p;h++)n=a.Items[h],g.push({id:n.Id,title:n.Title,description:n.Description,cssClass:n.CssClass,isFolder:n.IsFolder,selectable:n.Selectable&&(!e.hiddenItems||-1===e.hiddenItems.indexOf(parseInt(n.Id))),selectedByDefault:n.SelectedByDefault});
f.items=f.items||{};c!==f.items.pageSize&&(f.items={});f.items.pageSize=c;f.items.pages=f.items.pages||{};f.items.pages[b.toString()]=g;f.virtualItemCount=a.VirtualItemCount}e.cache[d]=f};e.renderTypeCell=function(a){return"<div class='"+a.cssClass+"'></div>"};e.renderItemCell=function(a){var d="<span class='"+a.cssClass+"'>"+CommonFunctions.htmlEncode(a.title)+"</span>",b="";a.description&&void 0!==a.description&&(b="<div class='"+c.cssClasses.itemDescription+"'>"+CommonFunctions.htmlEncode(a.description)+
"</div>");return a.isFolder?"<a href='#' class='"+c.cssClasses.folderLink+"' folderId='"+a.id+"'>"+d+"</a>"+b:d+b};e.getItemXML=function(a){var d=[];d.push("<Item>");d.push("<Id>"+a.id+"</Id>");d.push("<Item>"+CommonFunctions.htmlEncode(e.renderItemCell(a))+"</Item>");d.push("<Selectable>"+(!0===a.selectable?"true":"false")+"</Selectable>");d.push("</Item>");return d.join("")};e.renderGrid=function(a,d,b){a=e.cache[a];e.controls.grid.pageNumber=d;e.controls.grid.pageSize=b;b=e.gridContainer.find("."+
c.cssClasses.gridHeader+" > h2");var f=e.gridContainer.find("."+c.cssClasses.gridHeader+" > span");b.text(a.title);f.text(a.description);e.parentId=a.parentId;b=e.gridContainer.find("."+c.cssClasses.navigateUpLink);""===e.parentId?b.addClass(c.cssClasses.disabled):b.removeClass(c.cssClasses.disabled);e.controls.grid.clearSelection();e.toggleSelectButtons(!1);b=a.items.pages[d].length;f=[];f.push("<Data>");f.push("<Items>");for(var g=0;g<b;g++)f.push(e.getItemXML(a.items.pages[d][g]));f.push("</Items>");
f.push("<VirtualCount>"+a.virtualItemCount+"</VirtualCount>");f.push("</Data>");e.controls.grid.render(f.join(""),!1);$(e).trigger(c.eventNames.gridRender,[e.controls.grid,a])};e.showSuccessFeedback=function(){"undefined"!=e.insertFeedbackClientId&&window[e.insertFeedbackClientId].showMessage(c.feedbackTypes.info,c.terms.insertSuccessFeedbackText)};e.showErrorFeedback=function(){"undefined"!=e.insertFeedbackClientId&&window[e.insertFeedbackClientId].showMessage(c.feedbackTypes.error,c.terms.insertErrorFeedbackText)};
e.showProgressFeedback=function(){if("undefined"!=e.insertFeedbackClientId){var a=$("<span></span>").addClass(c.cssClasses.progressMessage).html(c.terms.insertProgressFeedbackText);window[e.insertFeedbackClientId].showMessage(c.feedbackTypes.info,a)}};e.hideSelectFeedback=function(){"undefined"!=e.insertFeedbackClientId&&window[e.insertFeedbackClientId].hide()};var b=function(a){var d=[];a&&(null!=a.attr("nodeid")&&d.push([a.attr("nodeid"),a.children("a:first").contents().last().text()]),a.parentsUntil("."+
c.cssClasses.treeContainer,"li").each(function(){var a=$(this);d.push([a.attr("nodeid"),a.children("a:first").contents().last().text()])}));e.hideRootCrumb||d.push([e.rootId,e.rootTitle]);var b=$("<ul />").addClass(c.cssClasses.crumbs);a=$("<nav />").addClass(c.cssClasses.crumbsWrapper).append(b);$.each(d,function(a,d){var e=$("<li />").append($("<span />").addClass(c.cssClasses.crumbsSeparator).text(c.breadCrumbsSeparator));0<a?e.append($("<span />").append($("<a />").addClass(c.cssClasses.crumb).attr("href",
"#").data("node-id",d[0]).text(d[1]))):e.append($("<span />").text(d[1]));e.prependTo(b)});e.navigation.children("."+c.cssClasses.crumbsWrapper).remove().end().append(a)};e.navigation.on("click","a."+c.cssClasses.leftMenuToggler,function(){768<$(window).width()?e.dialogContainer.toggleClass(c.cssClasses.desktopTreeContainerVisible).toggleClass(c.cssClasses.desktopTreeContainerHidden):e.dialogContainer.toggleClass(c.cssClasses.mobileTreeContainerVisible).toggleClass(c.cssClasses.mobileTreeContainerHidden);
return!1});e.navigation.on("click","."+c.cssClasses.crumb,function(){e.navigateToNode($(this).data("node-id"));return!1});return e}function FunctionFinder(){return{getFunctionByName:function(c,e){if(void 0!==c&&null!==c){if(void 0===e||null===e)e=window;c=c.split(".");for(var f=c.pop(),b=0;b<c.length;b++)e=e[c[b]];return e[f]}}}}
function CclGridColumn(c,e,f,b,a,d,g,h){this.dataField=c;this.sortField=e;this.sortDescendingByDefault=a;this.headerHtml=f;this.width=b;this.title=d;this.className=g;this.renderTableDataCellValueInsideDiv=h}CclAjaxGrid.selectionChangeEvent="grid:selectionChange";
function CclAjaxGrid(c){function e(){$(f).trigger(CclAjaxGrid.selectionChangeEvent,[{nodeIds:f.getSelectedValues()}])}window[c]=this;var f=this;f.name=c;f.pageSize=null;f.pageNumber=null;f.mainColumn=null;f.sortingProperty=null;f.filteringPreference=null;f.sortingDirection=null;f.dataSourceWebMethodUrl=null;f.dataSourceWebMethodParams={};f.gridClientID=null;f.columnChooserDialogName=null;f.columnChooserClientID=null;f.pagerInstanceName=null;f.allowSelecting=!1;f.allowColumnChoosing=!0;f.dataKeyName=
null;f.selectingHiddenClientID=null;f.pageNumberHiddenClientID=null;f.pageSizeHiddenClientID=null;f.sortingHiddenClientID=null;f.filteringHiddenClientID=null;f.columnOrderHiddenClientID=null;f.gridContentHiddenClientID=null;f.preferenceCategoryName=null;f.visibleColumns=[];f.columns=[];f.totalCount=0;f.keepSelection=!0;f.allowRowExpanding=!0;f.expandedRowButtonTitle=null;f.emptyTableText=null;f.accordionDataSourceUrl=null;f.saveToPreferencesWebMethodUrl=null;f.gridEmbeddedInAccordionGridControlClientId=
null;f.cclGridConstants=null;f.virtualCount=null;f.rowClickable=!1;f.selectAllCheckBoxInstanceName=null;f.getSelectedIds=function(){return CCL.CommonFunctions.getIdsFromHidden($("#"+f.selectingHiddenClientID))};f.getSelectCheckBoxInstance=function(b){b=$("#"+f.gridClientID+" tr[data-id='"+b+"'] td ."+f.cclGridConstants.cssClasses.checkBoxContainer).attr("id");return window[b]};f._getColumnsCount=function(){return f.visibleColumns.length+(f.allowColumnChoosing?1:0)+(f.allowSelecting?1:0)};f._saveToPreferences=
function(b,a,d,c){f.saveToPreferencesWebMethodUrl&&$.ajax({type:"POST",url:f.saveToPreferencesWebMethodUrl,data:{category:b,name:a,value:d},success:c,error:null})};f._getInvisibleColumns=function(){for(var b=[],a=0;a<f.columns.length;a++)f.visibleColumns.contains(f.columns[a].dataField)||b.push(f.columns[a].dataField);return b};f._applySelectedRowClass=function(b,a){b.toggleClass(f.cclGridConstants.cssClasses.selectedRow,a)};f._addRemoveSelectedValue=function(b,a){a?CCL.CommonFunctions.addIdToHidden($("#"+
f.selectingHiddenClientID),b.toString()):CCL.CommonFunctions.removeIdFromHidden($("#"+f.selectingHiddenClientID),b.toString())};f.toggleSelectById=function(b,a){if(b=$("#"+f.gridClientID+" tr[data-id='"+b+"'] ."+f.cclGridConstants.cssClasses.checkBoxContainer).attr("id"))b=window[b],b.toggle(!0),a&&b.enable(!1),f._applySelectedRowClass(b.getContainer().closest("tr"),!0),e()};f.toggleSelectAll=function(b){$.each(f._getCheckBoxesClientInstanceNames(),function(a,c){a=window[c];a.isEnabled()&&(a.toggleWithSuppressEvents(b),
a=a.getContainer().closest("tr"),f._applySelectedRowClass(a,b),f._addRemoveSelectedValue(a.data("id"),b))});var a=window[f.selectAllCheckBoxInstanceName];a&&a.toggleWithSuppressEvents(b);e()};f.toggleEnableAll=function(b){window[f.selectAllCheckBoxInstanceName].enable(b);$.each(f._getCheckBoxesClientInstanceNames(),function(a,d){window[d].enable(b)})};f.init=function(){f.restoreState();f.hidePagerDependingOnElementsNumberAndGridSettings();f.rowClickable&&$("#"+f.gridClientID+" tr."+f.cclGridConstants.cssClasses.rowClickable+
" td").not("."+f.cclGridConstants.cssClasses.selectColumn).mousedown(f._mousedown.bind(this)).mouseup(f._mouseup.bind(this));$(function(){if(f.selectAllCheckBoxInstanceName){var b=window[f.selectAllCheckBoxInstanceName];b&&b.setOnChangeCallback(function(a,d){f.toggleSelectAll(d.Checked)})}$.each(f._getCheckBoxesClientInstanceNames(),function(a,d){f.addCheckBoxHandler(d)})})};f.addCheckBoxHandler=function(b){window[b].setOnChangeCallback(function(a,d){f._applySelectedRowClass($(a.currentTarget).closest("tr"),
d.Checked);var b=!0;$.each(f._getCheckBoxesClientInstanceNames(),function(a,d){a=window[d];a.isChecked()||(b=!1);f._addRemoveSelectedValue(a.getContainer().closest("tr").data("id"),a.isChecked());f.selectAllCheckBoxInstanceName&&(a=window[f.selectAllCheckBoxInstanceName])&&a.toggleWithSuppressEvents(b)});e()})};f._getCheckBoxesClientInstanceNames=function(){return $("#"+f.gridClientID+" td ."+f.cclGridConstants.cssClasses.checkBoxContainer).map(function(){return this.id})};f._mousedown=function(b){f._skipRowClickAction(b)||
f._isRightButton(b)||(window.getSelection?window.getSelection().removeAllRanges():document.selection.empty())};f._mouseup=function(b){f._skipRowClickAction(b)||f._isRightButton(b)||0<(window.getSelection?window.getSelection().toString():document.selection.createRange().text).length||$(b.target).trigger("clickableRowClicked")};f._isRightButton=function(b){if("which"in b)return 3===b.which;if("button"in b)return 2===b.button};f._skipRowClickAction=function(b){return b.target instanceof HTMLInputElement||
b.target instanceof HTMLAnchorElement||$(b.target).hasClass(f.cclGridConstants.cssClasses.emptyTableCell)?!0:!1};f.restoreState=function(){var b=document.getElementById(f.sortingHiddenClientID).value.split(":");f.pageSize=parseInt(document.getElementById(f.pageSizeHiddenClientID).value,10);f.pageNumber=parseInt(document.getElementById(f.pageNumberHiddenClientID).value,10);f.sortingProperty=b[0];f.sortingDirection=b[1];f.filteringPreference=document.getElementById(f.filteringHiddenClientID).value;
f.visibleColumns=document.getElementById(f.columnOrderHiddenClientID).value.split(",")};f.hidePagerDependingOnElementsNumberAndGridSettings=function(){var b=$("#"+f.pagerContainerClientId);b&&f.hidePagerWhenTotalCountLessMinPageSize&&f.virtualCount<=f.cclGridConstants.minRowCount&&b.hide()};f.saveState=function(){document.getElementById(f.sortingHiddenClientID).value=f.sortingProperty+":"+f.sortingDirection;document.getElementById(f.pageSizeHiddenClientID).value=f.pageSize;document.getElementById(f.pageNumberHiddenClientID).value=
f.pageNumber;document.getElementById(f.columnOrderHiddenClientID).value=f.visibleColumns.toString();document.getElementById(f.filteringHiddenClientID).value=f.filteringPreference};f._getParamsStr=function(){var b="",a;for(a in f.dataSourceWebMethodParams)b+="&"+a+"="+escape(f.dataSourceWebMethodParams[a]);return b};f.refresh=function(){f.saveState();if(f.dataSourceWebMethodUrl){var b="",a="";f.sortingProperty&&(b=f.sortingProperty+":"+f.sortingDirection,f.columns.findBySortField(f.sortingProperty).dataField!=
f.mainColumn&&(b+=","+f.columns.findByDataField(f.mainColumn).sortField+":asc"));f.filteringPreference&&(a=f.filteringPreference);if(0<f.gridEmbeddedInAccordionGridControlClientId.length&&0<f.getSelectedValues().length&&0<document.getElementById(f.gridContentHiddenClientID).value.length)f.render(document.getElementById(f.gridContentHiddenClientID).value,!1);else{if(0==f.totalCount&&f.gridEmbeddedInAccordionGridControlClientId.length){var d=$("#"+f.gridClientID+" ."+f.cclGridConstants.cssClasses.emptyTableCell);
1>$(d).length&&(d=$("#"+f.gridClientID+" > tbody"),$(d).empty(),$("#"+f.gridClientID+" > tfoot").empty(),f._addRowWithText(d,"<img class='"+f.cclGridConstants.cssClasses.gridEmbededInAccordionGridControlLoadingCssClass+"'src='"+f.cclGridConstants.onePixelTransparentImageUrl+"' />",f._getColumnsCount(),f.cclGridConstants.cssClasses.emptyTableCell))}$.ajax({type:"POST",url:f.dataSourceWebMethodUrl,data:"pageNumber="+f.pageNumber+"&pageSize="+f.pageSize+"&sort="+b+"&filter="+a+f._getParamsStr(),dataType:"xml",
success:function(a){0<f.gridEmbeddedInAccordionGridControlClientId.length&&(document.getElementById(f.gridContentHiddenClientID).value=a.xml?a.xml:f.XmlToString(a));f.render(a,!0)},error:null})}}else f.postbackFunction()};f.sort=function(b){f.sortingDirection=f.sortingProperty==b?"asc"==f.sortingDirection?"desc":"asc":f.columns.findBySortField(b).sortDescendingByDefault?"desc":"asc";f.sortingProperty=b;f.goToPage(1);b=f.sortingProperty+":"+f.sortingDirection;f.columns.findByDataField(f.mainColumn).sortField==
f.sortingProperty&&"asc"==f.sortingDirection&&(b=null);f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.sorting,b)};f.filter=function(b){f.filteringPreference!=b&&(f.filteringPreference=b,f.goToPage(1),f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.filtering,b))};f.goToPage=function(b){f.keepSelection||b==f.pageNumber||(document.getElementById(f.selectingHiddenClientID).value="");f.pageNumber=b;f.refresh()};f.changePageSize=function(b){f.pageSize=
b;f.goToPage(1);f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.pagesize,b)};f._getPageHref=function(b){return"javascript:"+f.name+".goToPage("+b+");"};f._addPager=function(){var b=window[f.pagerInstanceName];b&&(b.totalCount=f.totalCount,b.pageSize=f.pageSize,b.pageNumber=f.pageNumber,f.hidePagerWhenTotalCountLessMinPageSize&&f.totalCount<=b.getMinAvailablePageSize()?$("#"+f.pagerContainerClientId).hide():($("#"+f.pagerContainerClientId).show(),b.createIn($("#"+f.pagerContainerClientId).empty())))};
f._addHeader=function(b){var a=$("<tr></tr>");if(f.allowSelecting){var d=$("<th></th>").attr("scope","col").attr("class",f.cclGridConstants.cssClasses.selectColumn);var c=new RegExp(f.cclGridConstants.emptyCheckBox.name,"g");d.append(f.cclGridConstants.emptyCheckBox.template.replace(c,f.selectAllCheckBoxInstanceName));a.append(d)}for(var e=0;e<f.visibleColumns.length;e++){var k=f.columns.findByDataField(f.visibleColumns[e]);d=$("<th></th>").attr("scope","col");if(k.sortField){var l=$("<a></a>").attr("href",
"#").attr("title",k.title).click({sortField:k.sortField},function(a){f.sort(a.data.sortField);return!1}),m=f.sortingProperty==k.sortField?"asc"==f.sortingDirection?f.cclGridConstants.cssClasses.sortingAsc:f.cclGridConstants.cssClasses.sortingDesc:"";m=$("<span></span>").attr("class",f.cclGridConstants.cssClasses.thText+" "+m).html(k.headerHtml);d.attr("class",f.sortingProperty==k.sortField?f.cclGridConstants.cssClasses.thSelected:f.cclGridConstants.cssClasses.thSortable);l.append(m);d.append(l)}else d.html(k.headerHtml);
k.className&&d.addClass(k.className);k.width&&d.css("width",k.width+"px");d.appendTo(a)}f.allowColumnChoosing&&(d=$("<a class='"+f.cclGridConstants.cssClasses.columnChooserLink+"'></a>").attr("href","javascript:"+f.name+".showColumnChooser();").attr("title",f.cclGridConstants.terms.columnChooserToolTip),d.append($("<img />").attr("src",f.cclGridConstants.onePixelTransparentImageUrl).attr("alt",f.cclGridConstants.terms.columnChooserToolTip)),$("<th></th>").attr("class",f.cclGridConstants.cssClasses.columnChooserColumn).append(d).appendTo(a));
b.append(a);f.allowSelecting&&(new CCL.OptionCheckbox(f.selectAllCheckBoxInstanceName,{ContainerId:f.selectAllCheckBoxInstanceName,CheckboxId:f.cclGridConstants.emptyCheckBox.checkBoxClientId.replace(c,f.selectAllCheckBoxInstanceName),CheckboxCssClass:f.cclGridConstants.cssClasses.checkboxCssClass,StateChangedEventName:f.cclGridConstants.optionCheckboxChangeEvent}),window[f.selectAllCheckBoxInstanceName].setOnChangeCallback(function(a,d){f.toggleSelectAll(d.Checked)}))};f.getSelectedValues=function(){var b=
$("#"+f.selectingHiddenClientID).val();return 0==b.length?[]:b.slice(0,b.length-1).split(",")};f.clearSelection=function(){$("#"+f.selectingHiddenClientID).val("")};f.clear=function(){f.totalCount=0;f._addHeader($("#"+f.gridClientID+" > thead").empty());f._addPager();var b=$("#"+f.gridClientID+" > tbody");b.empty();var a=f._getColumnsCount();f._addRowWithText(b,f.emptyTableText,a,f.cclGridConstants.cssClasses.emptyTableCell);f._addEmptyRows(b,f.cclGridConstants.minRowCount-1,a);$("tr:nth-child(even)",
b).addClass(f.cclGridConstants.cssClasses.alternateRow)};f.render=function(b,a){a||(b=f.StringToXml(b));f.totalCount=$("VirtualCount",b).last().text();var d=f.getSelectedValues();f._addHeader($("#"+f.gridClientID+" > thead").empty());f._addPager();var c=$("#"+f.gridClientID+" > tbody");c.empty();a=$(":first-child > Items > *",b);var e=0<a.length;1>a.length&&""!=$(b).text()&&(a=$(b).children().children());1>f.totalCount&&(a.length=0,e=!1);var k=f.allowSelecting?new RegExp(f.cclGridConstants.emptyCheckBox.name,
"g"):null;a.each(function(a,b){var g=$(f.dataKeyName,b).text();a=$("<tr data-id='"+g+"'></tr>");var h=$(f.cclGridConstants.rowTooltipTextProperty,b);0<h.length&&a.attr("title",h.text());f.allowRowExpanding&&(a.css("cursor","pointer"),a.on("click",function(a){f.expandCollapseRow(b,a,g);return!0}));h=f.allowSelecting?f.name+"_select_"+g:"";if(f.allowSelecting){var l=d.contains(g);e&=l;var m=$("<td></td>").attr("class",f.cclGridConstants.cssClasses.selectColumn);0!=f.dataKeySelectionVisible.length&&
"true"!==$(f.dataKeySelectionVisible,b).text()||m.append(f.cclGridConstants.emptyCheckBox.template.replace(k,h));a.append(m);l&&a.addClass(f.cclGridConstants.cssClasses.selectedRow)}for(l=0;l<f.visibleColumns.length;l++){m=f.columns.findByDataField(f.visibleColumns[l]);var t=$(f.visibleColumns[l],b),v=$("<td></td>");v.html(m.renderTableDataCellValueInsideDiv?"<div title='"+t.text()+"'>"+t.text()+"</div>":t.text());m.className&&v.addClass(m.className);v.appendTo(a)}f.allowColumnChoosing&&a.append($("<td></td>"));
c.append(a);f.allowSelecting&&(new CCL.OptionCheckbox(h,{ContainerId:h,CheckboxId:f.cclGridConstants.emptyCheckBox.checkBoxClientId.replace(k,h),CheckboxCssClass:f.cclGridConstants.cssClasses.checkboxCssClass,StateChangedEventName:f.cclGridConstants.optionCheckboxChangeEvent}),f.addCheckBoxHandler(h))});f.allowSelecting&&window[f.selectAllCheckBoxInstanceName].toggleWithSuppressEvents(e);b=f._getColumnsCount();0==a.length&&f._addRowWithText(c,f.emptyTableText,b,f.cclGridConstants.cssClasses.emptyTableCell);
a.length<f.cclGridConstants.minRowCount&&f._addEmptyRows(c,f.cclGridConstants.minRowCount-Math.max(a.length,1),b);$("tr:nth-child(even)",c).addClass(f.cclGridConstants.cssClasses.alternateRow)};f._addRowWithText=function(b,a,d,c){b.append($("<tr></tr>").append($("<td></td>").attr("class",c).attr("colSpan",d).html(a)))};f._addEmptyRows=function(b,a,d){for(var c=0;c<a;c++)f._addRowWithText(b,"&nbsp;",d,"")};f.createColumnChooser=function(b){f.columnChooserClientID&&$("#"+f.columnChooserClientID).sortable({opacity:.8,
placeholder:b,tolerance:"pointer"})};f.showColumnChooser=function(){$("#"+f.columnChooserClientID).empty();for(var b=f.visibleColumns.concat(f._getInvisibleColumns()),a=0;a<b.length;a++){var d=f.columns.findByDataField(b[a]),c=f.visibleColumns.contains(d.dataField);d=$("<li />").attr("class",f.cclGridConstants.cssClasses.columnChooser).append($("<input type='checkbox'/>").val(d.dataField).attr("id",f.name+"_"+d.dataField+"_chk").prop("checked",c).prop("defaultChecked",c)).append($("<label></label>").attr("for",
f.name+"_"+d.dataField+"_chk").html(d.headerHtml));$("#"+f.columnChooserClientID).append(d)}window[f.columnChooserDialogName].open();(b=$("#"+this.columnChooserClientID).find("input:not(:disabled):first"))&&b.focus()};f.updateColumnsList=function(){var b=[];$(":checkbox","#"+f.columnChooserClientID).each(function(a,c){a=$(c);a.prop("checked")&&b.push(a.val())});0==b.length&&b.push(f.mainColumn);if(!b.isEqual(f.visibleColumns)){f.visibleColumns=b;f.visibleColumns.contains(f.columns.findBySortField(f.sortingProperty).dataField)?
f.refresh():f.sort(f.columns.findByDataField(f.visibleColumns[0]).sortField);var a=null;b.isEqual(f.defaultColumnOrder)||(a=f.visibleColumns.toString());f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.columnOrder,a)}return!0};f._collapseAll=function(){$("#"+f.gridClientID+" > tbody > tr."+f.accordionRow).hide()};f.expandCollapseRow=function(b,a,d){if(a=a?a:window.event)if(a=a.srcElement||a.target,"TD"!=a.tagName&&"TR"!=a.tagName)return;if($(b).next().hasClass(f.cclGridConstants.cssClasses.accordionRow))c=
$(b).next(),c.is(":hidden")?(f._collapseAll(),c.show(),c.removeAttr("style")):c.hide();else{f._collapseAll();var c=$("<tr class='"+f.cclGridConstants.cssClasses.accordionRow+"'></tr>").hide(),e=$("<td></td>").attr("colSpan",f._getColumnsCount());a=0<this.accordionDataSourceUrl.indexOf("?")?"&":"?";$.get(f.accordionDataSourceUrl+a+f.accordionDataSourceUrlParameterName+"="+encodeURIComponent(d),{},function(a){e.html(a);c.show();c.removeAttr("style")},"html");c.append(e);$(b).after(c)}};f.getRow=function(b){return $("#"+
f.gridClientID+" > tbody tr[data-id='"+b+"']")};Array.prototype.findByDataField=function(b){for(x in this)if(this[x].dataField==b)return this[x];return null};Array.prototype.findBySortField=function(b){for(x in this)if(this[x].sortField==b)return this[x];return null};Array.prototype.isEqual=function(b){if(this.length!=b.length)return!1;for(var a=0;a<b.length;a++)if(this[a].compare&&!this[a].compare(b[a])||this[a]!==b[a])return!1;return!0};Array.prototype.contains=function(b){for(x in this)if(this[x]==
b)return!0;return!1};f.StringToXml=function(b){if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.XMLDOM");a.async="false";a.loadXML(b)}else a=(new DOMParser).parseFromString(b,"text/xml");return a};f.XmlToString=function(b){return window.ActiveXObject?b.xml:(new XMLSerializer).serializeToString(b)}}
function CclGridSearchFilterInstance(c){window[c]=this;var e=this;this.inputEmptyCssClass=null;e.firstLoad=function(){e.isEmpty=e.settings.isEmpty;e.controls.searchInput.focus(function(){e.onFocus()}).keyup(function(c){return e.onKeyUp(c)}).keydown(function(c){c.which===CommonConstants.keyCodes.enter&&c.stopPropagation()}).keypress(function(c){return c.which!==CommonConstants.keyCodes.enter}).blur(function(){e.onBlur()});e.refresh()};e.onFocus=function(){e.isEmpty&&(e.isEmpty=!1,e.refresh(!0))};e.onBlur=
function(){if(0==e.controls.searchInput.val().length)e.isEmpty=!0,e.refresh(),e.filter("");else{var c=e.settings.preferenceWithoutValue+e.controls.searchInput.val();e.filter(c)}};e.onKeyUp=function(c){if(e.isEmpty)return e.isEmpty=!1,e.refresh(!0),!0;if(c.which===CommonConstants.keyCodes.enter)return c=e.settings.preferenceWithoutValue+e.controls.searchInput.val(),e.filter(c),!1};e.defineState=function(){e.isEmpty||0!=e.controls.searchInput.val().length||(e.isEmpty=!0)};e.refresh=function(c){e.isEmpty?
(e.controls.searchInput.addClass(e.inputEmptyCssClass),e.controls.searchInput.val(e.settings.searchText)):(c&&e.controls.searchInput.val(""),e.controls.searchInput.removeClass(e.inputEmptyCssClass))}}
function HtmlItemPicker(c){function e(){p.css("width",n.width()-t);p.removeClass(l.settings.cssClasses.hiddenClass)}function f(){return m.is(":visible")}function b(a){$(m).find("li[data-id='"+a+"']").addClass("ccl-htmlitempicker-highlighteditem")}function a(a){$(m).find("li[data-id='"+a+"']").removeClass("ccl-htmlitempicker-highlighteditem")}function d(d,c){a(d.id);d=l.settings.items[c];b(d.id);r=d}function g(){m=$("<span></span>").attr("id",c+"_menu").addClass(l.settings.cssClasses.menu).insertAfter(n).hide();
var a=$(String.format("<ul class='{0}'></ul>",l.settings.cssClasses.alignment)).appendTo(m);$.each(l.settings.items,function(d,b){a.append($("<li>").attr("data-id",b.id.toString()).append($("<span>").addClass("ccl-htmlitempicker-item").html(b.innerHtml).mouseenter(function(a){a=$(a.currentTarget);this.offsetWidth<this.scrollWidth&&!a.prop("title")&&a.prop("title",a.text())}).click(function(a){h();l.controls.selectedValueHidden.val()!==b.id.toString()&&(k(b.id,b.innerHtml),l.onValueChangedFunction(b,
l));a.preventDefault()})))})}function h(){m.hide();a(r.id);n.removeClass(l.settings.cssClasses.menuOpen)}function k(a,d){l.controls.selectedValueHidden.val(a);l.setSelectedHtmlContainer(d);l.controls.container.trigger(l.settings.StateChangedEventName);e()}window[c]=this;var l=this,m,n,p,r,w=$(window),t;l.initialize=function(){n=l.controls.container;p=n.find("> span");n.find("> a");g();t=p.outerWidth(!0)-p.width();e();$(document).click(function(a){if(a.target===n[0]||1===$(a.target).closest(n).length){if(n.getIfHyperLinkEnabled())if(m.is(":visible"))h();
else{var d=n.offset();a=l.settings.menuAlignment===l.settings.menuAlignmentEnum.top?d.top-m.outerHeight():d.top+n.outerHeight();var c=n.position();a=l.settings.menuAlignment===l.settings.menuAlignmentEnum.top?0<a?c.top-m.outerHeight():c.top-d.top:c.top+n.outerHeight();c=c.left;var e=w.width(),g=n.innerWidth();m.css("width",m.width()<=g?g:"auto");var k=m.outerWidth();g=w.scrollLeft();l.settings.menuHorizontalAlignment===l.settings.menuHorizontalAlignmentEnum.left?c=0:k<e?(d=d.left+k,d>e+g&&(c-=d-e-
g)):c=-d.left+g;e=(d=CCL.CommonFunctions.isIosDevice())&&10>CCL.CommonFunctions.getIosVersion();!CCL.CommonFunctions.isSafari()||d&&!e||(c=a=0);m.css({top:a+"px",left:c+"px","z-index":l.settings.zIndex});null!==l.settings.listHeight&&m.css("max-height",l.settings.listHeight);l.settings.useModernSkin&&m.css("top",n.outerHeight(!0)+"px");m.show();n.addClass(l.settings.cssClasses.menuOpen)}f()&&(r=l.getSelectedItem(),b(r.id))}else f()&&(c=m.offset(),a.clientX>c.left&&a.clientX<c.left+m.width()&&a.clientY>
c.top&&a.clientY<c.top+m.height()||h())});$(document).keydown(function(a){if(f())switch(a.which){case CommonConstants.keyCodes.enter:return l.controls.selectedValueHidden.val()!==r.id.toString()&&(k(r.id,r.innerHtml),l.onValueChangedFunction(r,l)),h(),a.preventDefault(),!1;case CommonConstants.keyCodes.tab:case CommonConstants.keyCodes.escape:h();break;case CommonConstants.keyCodes.arrowUp:if(f()){var b=l.settings.items.indexOf(r);b=0==b?l.settings.items.length-1:b-1;d(r,b)}a.preventDefault();return!1;
case CommonConstants.keyCodes.arrowDown:return f()&&(b=l.settings.items.indexOf(r),b=b==l.settings.items.length-1?0:b+1,d(r,b)),a.preventDefault(),!1}});$(window).resize(function(a){p.addClass(l.settings.cssClasses.hiddenClass);e()});l.settings.disabled&&l.toggleEnabled(!1)};l.loadMenu=function(a){l.settings.items=a;l.getMenu().remove();g()};l.selectItem=function(a){k(a,$.grep(l.settings.items,function(d){return d.id.toString()===a.toString()})[0].innerHtml)};l.hasAnyItems=function(){return 0<l.settings.items.length};
l.onchange=function(a){l.controls.container.on(l.settings.StateChangedEventName,a)};l.toggleEnabled=function(a){l.controls.container.toggleHyperlink(a)};l.closeMenu=function(){m.is(":visible")&&h()};l.getMenu=function(){return m};l.getSelectedItem=function(){var a=l.settings.items[0];$.each(l.settings.items,function(d,b){l.controls.selectedValueHidden.val()==b.id.toString()&&(a=b)});return a};l.setSelectedHtmlContainer=function(a){p.html("\n"+a+"\n")};l.setMenuItemContent=function(a,d){$(m.find("a")[a]).html(d);
l.settings.items[a].innerHtml=d};l.resizeComponent=function(){e()};return l}
(function(c,e){c(document).on("click","div[data-hybrid-editor-settings]>div.ccl-hybrideditoritem-text-container, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(e){var b=c(e.currentTarget).parent("div.ccl-hybrideditoritem");b.hybridEditorItem();b.hybridEditorItem("edit",e.currentTarget,e.target)});c(document).on("keydown","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",
null,function(c){c.which===CommonConstants.keyCodes.enter&&(c.preventDefault(),setTimeout(function(){c.target.click()},400))});c(document).on("mouseenter mouseleave focus blur","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(e){c(e.currentTarget).siblings("div.ccl-hybrideditoritem-text-container:first").toggleClass("ccl-hybrideditoritem-text-container-hovered","mouseenter"==e.type||"focusin"==
e.type)});c.widget("ccl.hybridEditor",{options:{editorClientId:e,editorSetContentFuncName:e,editorGetContentFuncName:e,dialogClientId:e,saveButtonClientId:e,modalDialogCloseHref:e,textUpdateCompleted:c.noop,ckePopupFixClass:e,isIos:!1,containerCss:e,textContainerCss:e},_create:function(){c("#"+this.options.saveButtonClientId).on("click",c.proxy(this._handleSaveClick,this));c("#"+this.options.cancelButtonClientId).on("click",c.proxy(this._handleCancelClick,this));c(document).on("keyup","."+this.options.containerCss,
c.proxy(this._handleContainerKeyUp,this));if(this.options.isIos){var e=this,b=c("html");c(document).on("cssmodal:show",function(a,d,c){c==e.options.dialogClientId&&b.addClass(e.options.ckePopupFixClass)}).on("cssmodal:hide",function(a,d,c){c==e.options.dialogClientId&&b.removeClass(e.options.ckePopupFixClass)})}},_handleContainerKeyUp:function(e){e.which===CCL.CommonConstants.keyCodes.enter&&c(e.target).find("."+this.options.textContainerCss).click()},_handleCancelClick:function(c){this._closeDialog();
return!1},_handleSaveClick:function(c){var b="";this.options.editorClientId&&this.options.editorGetContentFuncName&&(b=this.options.editorGetContentFuncName(this.options.editorClientId));this._trigger("textUpdateCompleted",c,b);this._closeDialog();return!1},_closeDialog:function(){window.location.href=this.options.modalDialogCloseHref},openEditor:function(c,b){this.updateEditorText(c);b&&""!=b&&window[this.options.dialogClientId].setTitle(b);window.location.href="#"+this.options.dialogClientId},updateEditorText:function(c){this.options.editorClientId&&
this.options.editorSetContentFuncName&&(this.options.editorSetContentFuncName(c,this.options.editorClientId),window[this.options.dialogClientId].adjustWindowSize())}})})(jQuery);
(function(c,e){c.widget("ccl.hybridEditorItem",{options:{groupSettingsFunctionName:e,groupSettingsFunctionParam:e,textContainerId:e,editLinkId:e,hybridEditorClientId:e,editModeEnabled:"hybrid",webMethodParams:e,webMethodDataParamName:e,saveContentWebUrl:e,inlineEditorOptions:e,editorDialogTitle:"",editToolTipText:e,textContainerWatermark:e,textContainerWatermarkCssClass:e,watermarkDataAttributeName:e,enable:!0},widgetState:{idle:0,inlineEditorOpened:1,savingPlainText:2,savingRichContent:3},_editor:e,
_inlineEditor:e,_textContainer:e,_editLink:e,_isAjaxEnabled:!1,_isWatermarkUsed:!1,_groupSettingsAreUsed:!1,_currentState:e,_create:function(){this._initializeSettings();this.options.webMethodParams=this._groupSettingsAreUsed?this.options.webMethodParams:JSON.parse(this.options.webMethodParams);this.options.webMethodDataParamName=this.options.webMethodDataParamName?this.options.webMethodDataParamName:"data";this._isAjaxEnabled=!!this.options.saveContentWebUrl;this._textContainer=c("#"+this.options.textContainerId);
this._textValueHidden=c("#"+this.options.textValueHiddenId);this._editLink=c("#"+this.options.editLinkId);this._isWatermarkUsed=this.options.textContainerWatermark!=e&&""!=this.options.textContainerWatermark;if(("hybrid"===this.options.editModeEnabled||"inline"===this.options.editModeEnabled)&&this.options.inlineEditorOptions){var f=this._groupSettingsAreUsed?this.options.inlineEditorOptions:JSON.parse(this.options.inlineEditorOptions);f.editFieldCssClass=(f.editFieldCssClass?f.editFieldCssClass:
"")+(f.multiline?" ccl-modern-textarea":" ccl-modern-input");this._inlineEditor=new ClientInlineEditor(this._textContainer,null,this._textValueHidden,f,c.proxy(this._savePlainText,this),c.proxy(this._inlineEditorModeChanged,this),null)}this.options.hybridEditorClientId&&(this._editor=c("#"+this.options.hybridEditorClientId));this._editor&&0!=this._editor.length||(this.options.editModeEnabled="inline");this._currentState=this.widgetState.idle},edit:function(e,b){if(this.options.enable){if(e===this._textContainer.get(0)){if(b&&
0<c(b).closest("a,input,button,textarea").length)return;this._handleTextContainerClick()}e===this._editLink.get(0)&&this._handleIconClick()}},updateTextContainer:function(c,b){this._updateText(c,b)},_initializeSettings:function(){var e=this.element.data("hybrid-editor-settings");if(c.isFunction(window[e.groupSettingsFunctionName])){var b=e.groupSettingsFunctionParam?window[e.groupSettingsFunctionName](e.groupSettingsFunctionParam):window[e.groupSettingsFunctionName]();c.extend(this.options,b);this.options.textContainerId=
e.textContainerId;this.options.textValueHiddenId=e.textValueHiddenId;this.options.editLinkId=e.editLinkId;this.options.hybridEditorClientId||(this.options.hybridEditorClientId=e.hybridEditorClientId);this.options.watermarkDataAttributeName=e.watermarkDataAttributeName;c.extend(this.options.inlineEditorOptions,{supressOriginalBehaviour:!0,editFieldAutoWidth:!1});this._groupSettingsAreUsed=!0}else c.extend(this.options,e)},_handleTextContainerClick:function(){if(this._editor)switch(this.options.editModeEnabled){case "dialog":this._openHybridEditor();
break;case "hybrid":var c=this._textContainer.html();""===c||this._isWatermarkApplied()||CommonFunctions.isPlainText(c)?this._openInlineEditor():this._openHybridEditor();break;default:this._openInlineEditor()}else this._openInlineEditor()},_handleIconClick:function(){!this._editor||"hybrid"!==this.options.editModeEnabled&&"dialog"!==this.options.editModeEnabled?this._openInlineEditor():this._openHybridEditor()},_openInlineEditor:function(){this._inlineEditor&&this._currentState==this.widgetState.idle&&
(this._removeWatermark(),this._inlineEditor.switchToEditMode(),this._currentState=this.widgetState.inlineEditorOpened)},_openHybridEditor:function(){if(this._editor&&this._currentState!=this.widgetState.savingRichContent){var e=this._currentState==this.widgetState.inlineEditorOpened||this._currentState==this.widgetState.savingPlainText,b=c.proxy(this._saveRichContent,this);this._editor.off("hybrideditortextupdatecompleted").one("hybrideditortextupdatecompleted",b);b=this._textValueHidden.val();CommonFunctions.isPlainText(b)&&
(b=this._textContainer.html());e&&(b=CommonFunctions.replaceLineBreaksWithBrTags(this._inlineEditor.getEditFieldText()));this._editor.hybridEditor("openEditor",this._isWatermarkApplied()&&!e?"":b,this.options.editorDialogTitle)}},_savePlainText:function(e,b){var a=c.trim(e.actualText);if(this._isAjaxEnabled){if(this.options.saveContentWebUrl&&this.options.webMethodParams){var d=this,f={};f[this.options.webMethodDataParamName]=encodeURIComponent(this._processPlainText(a));a=c.extend(this.options.webMethodParams,
f);this._currentState=this.widgetState.savingPlainText;c.ajax({type:"POST",url:this.options.saveContentWebUrl,data:a,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(a){a&&(a.IsSuccessfull?(e.actualText=a.Value,d._textUpdated(a.SafeHtml,a.Value,a.CustomData)):(e.isUpdateSuccess=!1,e.stopOnEdit=!0,d._handleError(a.ErrorText)))},error:function(a,b,c){e.isUpdateSuccess=!1;e.stopOnEdit=!0;d._handleAjaxError(a,b,c)},complete:function(){b(e);d.options.textUpdatedCallback&&
(new Function(d.options.textUpdatedCallback))()}})}}else this._textUpdated(this._processPlainText(a),a),b(e)},_saveRichContent:function(e,b){c.isPlainObject(b)&&(b="");if(this._isAjaxEnabled){if(this.options.saveContentWebUrl&&this.options.webMethodParams){var a=this;e={};e[this.options.webMethodDataParamName]=encodeURIComponent(b);b=c.extend(this.options.webMethodParams,e);this._currentState=this.widgetState.savingRichContent;c.ajax({type:"POST",url:this.options.saveContentWebUrl,data:b,contentType:"application/x-www-form-urlencoded; charset=UTF-8",
success:function(d){d&&(d.IsSuccessfull?(a._textUpdated(d.SafeHtml,d.Value,d.CustomData),CommonFunctions.isPlainText(d.SafeHtml)&&a._inlineEditor.setNewText(d.Value)):a._handleError(d.ErrorText));a._addWatermark();a._currentState=a.widgetState.idle},error:function(d,b,c){a._handleAjaxError(d,b,c)}})}}else this._textUpdated(b,b),this._addWatermark()},_addWatermark:function(){if(this._isWatermarkUsed&&!this._isWatermarkApplied()){var e=this._textContainer.html();e&&""!=e||(e=c("<span "+this.options.watermarkDataAttributeName+
"='true'/>").text(this.options.textContainerWatermark),this.options.textContainerWatermarkCssClass&&e.addClass(this.options.textContainerWatermarkCssClass),this._textContainer.prepend(e))}},_removeWatermark:function(){if(this._isWatermarkUsed){var c=this._textContainer.find("span["+this.options.watermarkDataAttributeName+"]");0<c.length&&c.remove()}},_isWatermarkApplied:function(){return this._isWatermarkUsed&&0<this._textContainer.find("span["+this.options.watermarkDataAttributeName+"]").length},
_inlineEditorModeChanged:function(c){c.isEditMode||(this._addWatermark(),this._currentState=this.widgetState.idle);this._trigger("inlinemodechanged",null,c)},_textUpdated:function(c,b,a){this._updateText(c,b);this._trigger("textupdated",null,{html:c,value:b,customData:a})},_updateText:function(c,b){this._textValueHidden.val(b);this._textContainer.html(c)},_processPlainText:function(c){return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;").replace(/\r?\n/g,
"<br />\n")},_handleAjaxError:function(c,b,a){this._trigger("ajaxerror",null,{xhrObject:c})},_handleError:function(c){this._trigger("saveerror",null,{errorText:c})},value:function(){return this._textValueHidden.val()},resetValue:function(){this._textUpdated("");this._inlineEditor.setNewText("");this._addWatermark()},setToolTip:function(c){this._inlineEditor.setToolTip(c);this._editLink.attr("title",c)},setEnable:function(c){this.options.enable=c;this._editLink.toggle(c);this._textContainer.toggleClass("ccl-hybrideditoritem-text-container-hovered",
c);this._textContainer.toggleClass("h-cursor-default",!c);c?(this._addWatermark(),this._textContainer.attr("title",this.options.editToolTipText)):(this._removeWatermark(),this._textContainer.attr("title",""))}})})(jQuery);
(function(c){function e(a,d,c){var e=a[0],g=/er/.test(c)?"indeterminate":/bl/.test(c)?"disabled":"checked",h="update"==c?{checked:e.checked,disabled:e.disabled,indeterminate:"true"==a.attr("indeterminate")||"false"==a.attr("determinate")}:e[g];if(/^(ch|di|in)/.test(c)&&!h)f(a,g);else if(/^(un|en|de)/.test(c)&&h)b(a,g);else if("update"==c)for(var k in h)h[k]?f(a,k,!0):b(a,k,!0);else d&&"toggle"!=c||(d||a.trigger("ifClicked"),h?"radio"!==e.type&&b(a,g):f(a,g))}function f(a,e,f){var k=a[0],l=a.parent(),
m="checked"==e,n="indeterminate"==e,v="disabled"==e,q=n?"determinate":m?"unchecked":"enabled",z=d(a,q+g(k.type)),C=d(a,e+g(k.type));if(!0!==k[e]){if(!f&&"checked"==e&&"radio"==k.type&&k.name){var G=a.closest("form"),u='input[name="'+k.name+'"]';u=G.length?G.find(u):c(u);u.each(function(){this!==k&&c(this).data("iCheck")&&b(c(this),e)})}n?(k[e]=!0,k.checked&&b(a,"checked","force")):(f||(k[e]=!0),m&&k.indeterminate&&b(a,"indeterminate",!1));h(a,m,e,f)}k.disabled&&d(a,"cursor",!0)&&l.find(".iCheck-helper").css("cursor",
"default");l.addClass(C||d(a,e)||"");l.attr("role")&&!n&&l.attr("aria-"+(v?"disabled":"checked"),"true");l.removeClass(z||d(a,q)||"")}function b(a,b,c){var e=a[0],f=a.parent(),k="checked"==b,l="indeterminate"==b,m="disabled"==b,n=l?"determinate":k?"unchecked":"enabled",z=d(a,n+g(e.type)),C=d(a,b+g(e.type));if(!1!==e[b]){if(l||!c||"force"==c)e[b]=!1;h(a,k,n,c)}!e.disabled&&d(a,"cursor",!0)&&f.find(".iCheck-helper").css("cursor","pointer");f.removeClass(C||d(a,b)||"");f.attr("role")&&!l&&f.attr("aria-"+
(m?"disabled":"checked"),"false");f.addClass(z||d(a,n)||"")}function a(a,d){a.data("iCheck")&&(a.parent().html(a.attr("style",a.data("iCheck").s||"")),d&&a.trigger(d),a.off(".i").unwrap(),c('label[for="'+a[0].id+'"]').add(a.closest("label")).off(".i"))}function d(a,d,b){if(a.data("iCheck"))return a.data("iCheck").o[d+(b?"":"Class")]}function g(a){return a.charAt(0).toUpperCase()+a.slice(1)}function h(a,d,b,c){c||(d&&a.trigger("ifToggled"),a.trigger("ifChanged").trigger("if"+g(b)))}var k=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);
c.fn.iCheck=function(d,g){var h='input[type="checkbox"], input[type="radio"]',l=c(),m=function(a){a.each(function(){var a=c(this);l=a.is(h)?l.add(a):l.add(a.find(h))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(d))return d=d.toLowerCase(),m(this),l.each(function(){var b=c(this);"destroy"==d?a(b,"ifDestroyed"):e(b,!0,d);c.isFunction(g)&&g()});if("object"!=typeof d&&d)return this;var w=c.extend({checkedClass:"checked",disabledClass:"disabled",indeterminateClass:"indeterminate",
labelHover:!0},d),t=w.handle,v=w.hoverClass||"hover",q=w.focusClass||"focus",z=w.activeClass||"active",C=!!w.labelHover,G=w.labelHoverClass||"hover",u=(""+w.increaseArea).replace("%","")|0;if("checkbox"==t||"radio"==t)h='input[type="'+t+'"]';-50>u&&(u=-50);m(this);return l.each(function(){var d=c(this);a(d);var g=this,h=g.id,l=-u+"%",m=100+2*u+"%";m={position:"absolute",top:l,left:l,display:"block",width:m,height:m,margin:0,padding:0,background:"#fff",border:0,opacity:0};l=k?{position:"absolute",
visibility:"hidden"}:u?m:{position:"absolute",opacity:0};var n="checkbox"==g.type?w.checkboxClass||"icheckbox":w.radioClass||"iradio",p=c('label[for="'+h+'"]').add(d.closest("label")),r=!!w.aria,t="iCheck-"+Math.random().toString(36).substr(2,6),M='<div class="'+n+'" '+(r?'role="'+g.type+'" ':"");r&&p.each(function(){M+='aria-labelledby="';this.id?M+=this.id:(this.id=t,M+=t);M+='"'});M=d.wrap(M+"/>").trigger("ifCreated").parent().append(w.insert);m=c('<ins class="iCheck-helper"/>').css(m).appendTo(M);
d.data("iCheck",{o:w,s:d.attr("style")}).css(l);w.inheritClass&&M.addClass(g.className||"");w.inheritID&&h&&M.attr("id","iCheck-"+h);"static"==M.css("position")&&M.css("position","relative");e(d,!0,"update");if(p.length)p.on("click.i mouseover.i mouseout.i touchbegin.i touchend.i",function(a){var b=a.type,f=c(this);if(!g.disabled){if("click"==b){if(c(a.target).is("a"))return;e(d,!1,!0)}else C&&(/ut|nd/.test(b)?(M.removeClass(v),f.removeClass(G)):(M.addClass(v),f.addClass(G)));if(k)a.stopPropagation();
else return!1}});d.on("click.i focus.i blur.i keyup.i keydown.i keypress.i",function(a){var c=a.type;a=a.keyCode;if("click"==c)return!1;if("keydown"==c&&32==a)return"radio"==g.type&&g.checked||(g.checked?b(d,"checked"):f(d,"checked")),!1;if("keyup"==c&&"radio"==g.type)!g.checked&&f(d,"checked");else if(/us|ur/.test(c))M["blur"==c?"removeClass":"addClass"](q)});m.on("click mousedown mouseup mouseover mouseout touchbegin.i touchend.i",function(a){var b=a.type,c=/wn|up/.test(b)?z:v;if(!g.disabled){if("click"==
b)e(d,!1,!0);else if(/wn|er|in/.test(b)?M.addClass(c):M.removeClass(c+" "+z),p.length&&C&&c==v)p[/ut|nd/.test(b)?"removeClass":"addClass"](G);if(k)a.stopPropagation();else return!1}})})}})(window.jQuery||window.Zepto);
(function(c){var e=$(c.document);c.IframeClickEventHelper={registerDocumentClickBubblingOnTop:function(){var f="click touchstart";navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)&&(f="click");var b=c.parent,a=c.top;e.on(f,function(){a!=c&&(CommonFunctions.makePostMessageCall(a,{messageName:"iframeClickBubble"}),b!=a&&CommonFunctions.makePostMessageCall(b,{messageName:"iframeClickBubble"}))});e.on("touchstart",function(){a!=c&&(CommonFunctions.makePostMessageCall(a,{messageName:"iframeTouchstartBubble"}),
b!=a&&CommonFunctions.makePostMessageCall(b,{messageName:"iframeTouchstartBubble"}))})},handleDocumentClickBubblingOnTop:function(){CommonFunctions.attachPostMessageEventListener($(c),"iframeClickBubble",function(c){e.trigger(CommonTriggers.clickInInnerFrame)});CommonFunctions.attachPostMessageEventListener($(c),"iframeTouchstartBubble",function(c){e.trigger(CommonTriggers.touchstartInInnerFrame)})}}})(window);
function IframeIterator(c){if(void 0===c.nodeType||void 0===c.nodeName)throw"Starting element must be a HTML Node.";var e=[c],f=c;return{hasNext:function(){return 0<e.length},next:function(){void 0!==f&&$(f).find("iframe").each(function(b,a){b=void 0;try{b=a.contentDocument}catch(d){return}null!==b&&e.push(b)});return f=e.pop()}}}
(function(c){c.IframeResizer={reportSetIframeDefaultHeight:function(){var e;(e=c.parent)&&c!==e&&CommonFunctions.makePostMessageCall(e,{messageName:"setIframeDefaultHeight"})},registerDefaultHeight:function(e,f){var b=$(c),a=$("#"+e.iframeClientId),d,g=CCL.CommonFunctions.calculateBottomOffset(a);var h=c[e.setIframeDefaultHeightFunctionName]=function(){var d=IframeResizer.getFixedIframeDefaultHeight(b,a,g);e.useMinHeight?a.css("min-height",d+"px"):a.height(d);f&&f(d+8,a)};h();b.resize(function(){d&&
clearTimeout(d);d=setTimeout(h,200)});CommonFunctions.attachPostMessageEventListener(b,"setIframeDefaultHeight",function(a){h()})},getIframeDefaultHeight:function(c,f,b){return(CCL.CommonFunctions.isIosDevice()?screen.height:c.innerHeight())-f.offset().top-b},getFixedIframeDefaultHeight:function(c,f,b){return IframeResizer.getIframeDefaultHeight(c,f,b)-8},registerExtensionIframeListener:function(e){var f=$("#"+e.IframeClientId);CommonFunctions.attachPostMessageEventListener($(c),[CommonWindowMessages.MessageNames.expandExtensionIframe,
CommonWindowMessages.MessageNames.collapseExtensionIframe],function(b){var a=(b=b.messageName===CommonWindowMessages.MessageNames.expandExtensionIframe)?"0":"";f.css({position:b?"fixed":"",top:a,right:a,bottom:a,left:a});f.toggleClass(e.ExpandedIframeCssClass,b);IframeResizer.reportSetIframeDefaultHeight()})}}})(window);
function postHeightToExtension(c,e){e.get(0)&&CommonFunctions.makePostMessageCall(e.get(0).contentWindow,new CommonWindowMessages.GenericMessageWithData(CommonWindowMessages.MessageNames.extensionContentOpened,{iframeHeight:c&&0<c?c:e.height()}))}function InlineFeedback(c){window[c]=this;var e=this;e.show=function(c){var b=e.controls;b.container.css("visibility","visible");0<c&&b.container.delay(1E3*c).fadeTo("slow",0,function(){$(this).css("visibility","hidden").css("opacity",1)})}}
(function(c){c.InlineReplyManager={sendButtonClick:function(c,f){var b=$(c),a=b.parent().prev();if(c=a.val())b.prop("disabled",!0),f({target:b,messageBody:CommonFunctions.replaceLineBreaksWithBrTags(CommonFunctions.htmlEncode(c)),sendMessageCompleteCallback:function(){b.prop("disabled",!1)},sendMessageSuccessCallback:function(){a.val("")}})}}})(window);
function ItslTextBox(c){function e(a){if((a.keyCode?a.keyCode:a.which?a.which:a.charCode)===CommonConstants.keyCodes.enter){if(h.onEnterAction)return h.onEnterAction(),a.preventDefault(),!1;$(this.form).submit();a.preventDefault();return!1}return!0}function f(b){var c=b.keyCode?b.keyCode:b.which?b.which:b.charCode;if("undefined"!==d.selectionStart){var e=0<d.selectionEnd-d.selectionStart;d.focus()}else e=!1;if(!e&&0<g.maxLength&&this.value.length>=g.maxLength){e=b.ctrlKey||b.metaKey;if(c>=CommonConstants.keyCodes.arrowLeft&&
c<=CommonConstants.keyCodes.arrowDown||c===CommonConstants.keyCodes.del||c===CommonConstants.keyCodes.backspace||e&&120===c||e&&97===c||e&&118===c||e&&99===c||e&&90===c)return b=a.val(),b.length>g.maxLength&&a.val(b.substr(0,g.maxLength)),!0;b.preventDefault();return!1}return!0}window[c]=this;var b=this,a=$("#"+c),d=a.get(0),g,h;b.initialize=function(){g=b.settings;h=b.functions;"maxLength"in d||a.bind("change keyup keydown input paste",f);g.submitOnEnter&&a.bind("change keyup keydown input paste",
e);if(b.settings.isAutogrow){var c=a.width();a.css({resize:"none",overflow:"hidden",width:c});a.autogrow({additionalHeight:b.settings.autogrowAdditionalHeight})}};return b}
(function(c){c.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:.01,overlayColor:"#FFF",draggable:!0,okButton:"&nbsp;OK&nbsp;",cancelButton:"&nbsp;Cancel&nbsp;",dialogClass:null,promptInputMaxLength:0,alert:function(e,f,b){null==f&&(f="Alert");c.alerts._show(f,e,null,"alert",function(a){b&&b(a)})},confirm:function(e,f,b){null==f&&(f="Confirm");c.alerts._show(f,e,null,"confirm",function(a){b&&b(a)})},prompt:function(e,f,b,a){null==b&&(b="Prompt");c.alerts._show(b,
e,f,"prompt",function(d){a&&a(d)})},multiButtonConfirm:function(e,f,b,a){null==f&&(f="multiButtonConfirm");c.alerts._show(f,e,null,"multiButtonConfirm",function(d){a&&a(d)},b)},_show:function(e,f,b,a,d,g){c.alerts._hide();c.alerts._overlay("show");c("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_message"></div></div></div>');c.alerts.dialogClass&&c("#popup_container").addClass(c.alerts.dialogClass);var h=c.browser.msie&&6>=parseInt(c.browser.version)?
"absolute":"fixed";c("#popup_container").css({position:h,zIndex:99999,padding:0,margin:0});c("#popup_title").text(e);c("#popup_content").addClass(a);c("#popup_message").text(f);c("#popup_message").html(c("#popup_message").text().replace(/\n/g,"<br />"));c("#popup_container").css({minWidth:c("#popup_container").outerWidth(),maxWidth:c("#popup_container").outerWidth()});c.alerts._reposition();c.alerts._maintainPosition(!0);switch(a){case "alert":c("#popup_message").after('<div id="popup_panel"><input type="button" value="'+
c.alerts.okButton+'" id="popup_ok" autofocus/></div>');c("#popup_ok").click(function(){c.alerts._hide();d(!0)});c("#popup_ok").focus().keypress(function(a){13!=a.keyCode&&27!=a.keyCode||c("#popup_ok").trigger("click")});break;case "confirm":c("#popup_message").after('<div id="popup_panel"><input type="button" value="'+c.alerts.okButton+'" id="popup_ok" autofocus/> <input type="button" value="'+c.alerts.cancelButton+'" id="popup_cancel" /></div>');c("#popup_ok").click(function(){c.alerts._hide();d&&
d(!0)});c("#popup_cancel").click(function(){c.alerts._hide();d&&d(!1)});c("#popup_ok").focus();c("#popup_ok, #popup_cancel").keypress(function(a){27==a.keyCode&&c("#popup_cancel").trigger("click")});break;case "prompt":g=0<c.alerts.promptInputMaxLength?'maxlength="'+c.alerts.promptInputMaxLength+'"':"";c("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" '+g+" />").after('<div id="popup_panel"><input type="button" value="'+c.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+
c.alerts.cancelButton+'" id="popup_cancel" /></div>');c("#popup_prompt").width(c("#popup_message").width());c("#popup_ok").click(function(){var a=c("#popup_prompt").val();c.alerts._hide();d&&d(a)});c("#popup_cancel").click(function(){c.alerts._hide();d&&d(null)});c("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(a){27==a.keyCode&&c("#popup_cancel").trigger("click")});b&&c("#popup_prompt").val(b);c("#popup_prompt").focus().select();break;case "multiButtonConfirm":b="";for(e=0;e<g.length;e++)b+=
'<input type="button" ',b+=' value="'+g[e].text+'" ',b+=' id="jqueryalertsbutton'+e+'" ',b+=' class="ccl-button '+(g[e].css?g[e].css:"ccl-button-color-grey")+'"',b+=' data-userid="'+g[e].customId+'" ',0===e&&(b+=" autofocus "),b+=" />\r\n";c("#popup_message").after('<footer class="jquery-alerts-footer">'+b+"</footer>");for(e=0;e<g.length;e++)c("#jqueryalertsbutton"+e).click(function(a){a=c(a.target);a={buttonIndex:parseInt(a.attr("id").replace("jqueryalertsbutton",""),10),customId:a.data("userid")};
c.alerts._hide();d&&d(a)});c("#jqueryalertsbutton0").focus()}if(c.alerts.draggable)try{c("#popup_container").draggable({handle:c("#popup_title")}),c("#popup_title").css({cursor:"move"})}catch(k){}},_hide:function(){c("#popup_container").remove();c.alerts._overlay("hide");c.alerts._maintainPosition(!1)},_overlay:function(e){switch(e){case "show":c.alerts._overlay("hide");c("BODY").append('<div id="popup_overlay"></div>');c("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",
width:"100%",height:c(document).height(),background:c.alerts.overlayColor,opacity:c.alerts.overlayOpacity});break;case "hide":c("#popup_overlay").remove()}},_reposition:function(){if(-1!=navigator.platform.indexOf("iPad"))if(90===window.orientation||-90===window.orientation){var e=screen.width;var f=screen.height}else e=screen.height,f=screen.width;else e=c(window).height(),f=c(window).width();e=e/2-c("#popup_container").outerHeight()/2+c.alerts.verticalOffset;f=f/2-c("#popup_container").outerWidth()/
2+c.alerts.horizontalOffset;0>e&&(e=0);0>f&&(f=0);c.browser.msie&&6>=parseInt(c.browser.version)&&(e+=c(window).scrollTop());c("#popup_container").css({top:e+"px",left:f+"px"});c("#popup_overlay").height(c(document).height())},_maintainPosition:function(e){if(c.alerts.repositionOnResize)switch(e){case !0:c(window).bind("resize",c.alerts._reposition);break;case !1:c(window).unbind("resize",c.alerts._reposition)}}};jAlert=function(e,f,b){c.alerts.alert(e,f,b)};jConfirm=function(e,f,b){c.alerts.confirm(e,
f,b)};jPrompt=function(e,f,b,a){c.alerts.prompt(e,f,b,a)};jMultiButtonConfirm=function(e,f,b,a){c.alerts.multiButtonConfirm(e,f,b,a)}})(jQuery);
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){if(!c.support.cors&&c.ajaxTransport&&window.XDomainRequest){var e=/^https?:\/\//i,f=/^get|post$/i,b=new RegExp("^"+location.protocol,"i");c.ajaxTransport("* text html xml json",function(a,d,g){if(a.crossDomain&&a.async&&f.test(a.type)&&e.test(a.url)&&b.test(a.url)){var h=null;return{send:function(b,e){b="";var f=(d.dataType||"").toLowerCase();h=new XDomainRequest;/^\d+$/.test(d.timeout)&&(h.timeout=d.timeout);
h.ontimeout=function(){e(500,"timeout")};h.onload=function(){var a="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,d=200,b="success",g={text:h.responseText};try{if("html"===f||/text\/html/i.test(h.contentType))g.html=h.responseText;else if("json"===f||"text"!==f&&/\/json/i.test(h.contentType))try{g.json=c.parseJSON(h.responseText)}catch(v){d=500,b="parseerror"}else if("xml"===f||"text"!==f&&/\/xml/i.test(h.contentType)){var k=new ActiveXObject("Microsoft.XMLDOM");k.async=
!1;try{k.loadXML(h.responseText)}catch(v){k=void 0}if(!k||!k.documentElement||k.getElementsByTagName("parsererror").length)throw d=500,b="parseerror","Invalid XML: "+h.responseText;g.xml=k}}catch(v){throw v;}finally{e(d,b,g,a)}};h.onprogress=function(){};h.onerror=function(){e(500,"error",{text:h.responseText})};d.data&&(b="string"===c.type(d.data)?d.data:c.param(d.data));h.open(a.type,a.url);h.send(b)},abort:function(){h&&h.abort()}}}})}});
function LabeledInput(c){function e(){return m.find("."+d.settings.itemClass)}function f(a,b){d.settings.throwEventInsteadAddingItemToInput?($(document).trigger(d.settings.onSelectEventName,b.item.metadata),d.settings.eventNamespace&&$(document).trigger(d.settings.onSelectEventName+":"+d.settings.eventNamespace,b.item.metadata)):d.pushLabel(b.item.label,b.item.metadata);h.val("");return!1}function b(){h.prop("placeholder",e().length?"":d.settings.watermark);a();d.settings.onLabelsChangedHandler&&
$.each(l,function(a,d){d()})}function a(){d.settings.watermark&&!h.val()&&0==e().length?(h.removeAttr("width"),h.attr("size",h.attr("placeholder").length),h.css("max-width",m.width()-40+"px")):(h.removeAttr("size"),h.attr("width","100"))}var d=this,g,h,k,l=[],m;window[c]=d;d.initialize=function(){d.settings.onLabelsChangedHandler&&l.push(d.settings.onLabelsChangedHandler);g=d.settings.removeButtonTooltipFormat;m=$("#"+d.settings.containerId);m.on(d.settings.clickOrTouch,".ccl-labeled-input-remove",
function(a){$(a.target).parent().remove();b()});h=$("#"+d.settings.inputId);k=h.parent();h.autocomplete({open:function(a,d){$(".ui-autocomplete").width(m.width())},focus:function(a,d){a.preventDefault()},position:{collision:"none flip",of:m},source:d.settings.autocompleteCallback,select:f,delay:d.settings.autocomplete.delay,minLength:d.settings.autocomplete.minLength,messages:{noResults:"",results:function(){return""}},create:function(){d.settings.renderItem&&($(this).data("ui-autocomplete")._renderItem=
d.settings.renderItem)}});h.keyup(function(){a()});h.keydown(function(a){a.which!==CommonConstants.keyCodes.backspace||d.hasText()||(a=e(),0<a.length&&(a.last().remove(),b()))});h.blur(function(){h.val("");a()});h.focus(function(){a()});d.settings.autocomplete.autocompleteMenuCssClass&&h.data("ui-autocomplete").menu.activeMenu.addClass(d.settings.autocomplete.autocompleteMenuCssClass);k.append(h.data("ui-autocomplete").menu.activeMenu.detach());m.on(d.settings.clickOrTouch,function(a){h.is(":focus")||
(a.preventDefault(),h.focus())});a()};d.pushLabel=function(a,c){var e=$("<span></span>"),f=$("<span>"+a+"</span>"),h=$('<a href="#" class="ccl-labeled-input-remove">\u00d7</a>');h.prop("title",g.replace("{0}",a));e.data("meta",c);f.addClass(d.settings.textClass);e.addClass(d.settings.itemClass);e.append(f).append(h);e.insertBefore(k);b()};d.getLabelsMetadata=function(){return $.makeArray(e().map(function(a,d){return $(d).data("meta")}))};d.mapLabelsField=function(a){return d.getLabelsMetadata().map(function(d){return d[a]})};
d.clear=function(){e().remove();h.val("");b()};d.hasText=function(){return""!==h.val().trim()};d.getText=function(){return h.val()};d.addLabelsChangedHandler=function(a){d.settings.onLabelsChangedHandler&&l.push(a)};d.focus=function(){h.focus()}}
function LearningObjectivesSelector(c,e,f,b,a,d){window[c]=this;var g=this;g.readLearningObjectivesUrl=a.readLearningObjectivesUrl;g.selectedIds=b;g.selectableCategory=a.selectableCategory;g.selectableObjective=a.selectableObjective;g.selectableSubject=a.selectableSubject;g.cutOffLoStructure=a.cutOffLoStructure;g.terms=f;g.language=a.language;g.updateContainerOnSelect=a.updateContainerOnSelect;e?(g.folderSelector=e,g.baseGetRequestData=e.getRequestData,g.editable=!0):g.editable=!1;g.placeHolderOnEmpty=
a.placeHolderOnEmpty;g.courseId=a.courseId;g.countryCode=a.countryCode;g.showTooltip=a.showTooltip;g.firstLoad=!0;g.cache={};g.cssClasses=d;g.filtersData={};""!=a.filtersData&&(g.filtersData=a.filtersData);g.defaultFilter=a.defaultFilter;g.filtersddl=$(".js-filter-ddl");g.GetCurrentFilter=function(){return 0<g.filtersddl.length?g.filtersddl.find(":selected").val():g.defaultFilter};g.folderSelector&&(g.folderSelector.dialogContainer.addClass(g.cssClasses.learningObjectivesSelector),g.folderSelector.showFeedbackOnEmpty=
0==g.filtersddl.length);g.selectedContainer=$("#"+c).find("."+g.cssClasses.selectedContainer);g.emptyContainer=$("#"+c).find("."+g.cssClasses.emptyContainer);g.addLink=$("#"+c).find("."+g.cssClasses.addLink);if(g.editable)g.selectedContainer.on("click","."+g.cssClasses.removeLink,function(){$(g).trigger(a.clientEvents.removeItem,$(this));g.removeSelectedIds([$(this).data("loId")]);return!1});g.openDialog=function(){g.folderSelector&&g.folderSelector.openDialog(g.filtersData[g.GetCurrentFilter()])};
g.updateSelectedItemsContainer=function(){g.updateContainerOnSelect&&(g.selectedContainer.empty(),g.emptyContainer.empty(),g.listIsEmpty()?g.toggleEmptyContentFeedback(!0):(g.setSelectedIds(g.selectedIds,!0),g.loadData(g.selectedIds,function(a){var d=[];$.each(a,function(a,b){g.renderSelectedItemHtml(b.id,b.title,b.description,b.type,b.options);d.push(b.id)});0===d.length&&g.toggleEmptyContentFeedback(!0)})),$(g).trigger(a.clientEvents.itemContainerUpdated))};g.createTooltip=function(a,d){var b=$("<span></span>");
b.text(a);var c=new ToolTip(null,b);c.title=$("<div/>").text(a).html();c.description=d;c.settings={showPopupTimeout:300,hidePopupTimeout:300,cssClasses:{tooltipPopup:"ccl-tooltip-popup",linkToTooltip:"ccl-tooltip-link",arrowUp:"ccl-tooltip-arrow-up",arrowDown:"ccl-tooltip-arrow-down",arrowContainer:"ccl-tooltip-arrow-container",tooltipTitle:"ccl-tooltip-popup-title",tooltipDescription:"ccl-tooltip-popup-description"}};c.initialize();return b};g.renderSelectedItemHtml=function(a,d,b,c,e){d=$("<div></div>").addClass(g.cssClasses.selectedItem).append($("<span></span>").addClass(g.cssClasses.selectedItemIcon).addClass(c)).append(g.showTooltip?
g.createTooltip(d,b):$("<span></span>").text(d));g.editable&&(a=$("<a></a>").data("loId",a).addClass(g.cssClasses.removeLink).attr("data-loId",a).attr("title",g.terms.deleteTooltip).attr("href","#").text("\u00d7"),void 0!==e&&a.data("options",e),d.append(a));g.selectedContainer.append(d)};g.getSelectedItemsSelector=function(){return String.format(".{0}",g.cssClasses.selectedItem)};g.listIsEmpty=function(){return 0==g.selectedIds.length};g.toggleEmptyContentFeedback=function(a){g.emptyContainer.toggle(a).text(a?
g.placeHolderOnEmpty:"")};g.showSuccessFeedback=function(){g.folderSelector.showSuccessFeedback()};g.showErrorFeedback=function(){g.folderSelector.showErrorFeedback()};g.showProgressFeedback=function(){g.folderSelector.showProgressFeedback()};g.addSelectedIds=function(d){var b={};$.each(g.selectedIds,function(a,d){b[d]=d});$.each(d,function(a,d){b[d]=d});g.selectedIds=[];$.each(b,function(a){g.selectedIds.push(a)});$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.removeSelectedIds=
function(d){var b={};$.each(g.selectedIds,function(a,d){b[d]=d});$.each(d,function(a,d){delete b[d]});g.selectedIds=[];$.each(b,function(a){g.selectedIds.push(a)});$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.clearSelectedIds=function(){g.selectedIds=[];$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.setSelectedIds=function(a,d){g.selectedIds=a;g.toggleFolderSelectById(g.selectedIds,d)};g.toggleFolderSelectById=function(a,d){g.folderSelector&&
($.each(a,function(a,b){g.folderSelector.controls.grid.toggleSelectById(b,d)}),d&&g.folderSelector.toggleSelectButtons(!1))};g.loadData=function(d,b){var c=[],e={};$.each(d,function(a,d){void 0===g.cache[d]?c.push(d):e[d]=g.cache[d]});0==c.length?b(e):$.ajax({type:"POST",url:g.readLearningObjectivesUrl,data:{ids:c.join(",")},dataType:"jsonp",success:function(a){$.each(a.Items,function(a,d){a={id:d.Id,title:d.Title,description:d.Description,type:d.Type};g.cache[d.Id]=a;e[d.Id]=a});b(e)},error:function(){$(g).trigger(a.clientEvents.error)}})};
g.changeFilter=function(a){g.folderSelector.reinitialize(!0,g.filtersData[a])};if(e){var h=!1;e.getRequestData=function(a,d,b,c){a=g.baseGetRequestData(a,d,b,c);a.SelectableCategory=g.selectableCategory;a.SelectableLearningObjective=g.selectableObjective;a.SelectableSubject=g.selectableSubject;a.cutOffLoStructure=g.cutOffLoStructure;g.language&&(a.lan=g.language);return a};$(e).on(a.folderSelectorEvents.select,function(d,b){d=h?[b.selectedId]:b.nodeIds;$(g).trigger(a.clientEvents.addItems,[d.filter(function(a){return 0>
g.selectedIds.indexOf(a)})]);g.addSelectedIds(d)});if(a.restrictInsertContext)$(e).on(a.folderSelectorEvents.gridRender,function(a,d,b){if(h=b.virtualItemCount>b.folders.length)d.toggleSelectAll(!0),d.toggleEnableAll(!1)});else $(e).on(a.folderSelectorEvents.gridRender,function(a,d,b){$.each(g.selectedIds,function(a,b){d.toggleSelectById(b,!0)})});if(g.filtersddl)g.filtersddl.on("change",function(){g.changeFilter($(this).val())})}g.updateSelectedItemsContainer();return g}
function ListCollapser(c,e,f,b,a){var d=this;d.showCount=e;d.showCountJquerySelector=e-1;d.hidden=!0;d.listHolder=c;d.listChangesEvents=f;d.showLinkText=b;d.hideLinkText=a;d.getList=function(){return d.listHolder.children("ul")};d.getLength=function(){return d.getList().children("li").length};d.restructure=function(){var b=d.getLength(),c=$("#showLink",d.listHolder),e=$("#hideLink",d.listHolder),f=Math.min(d.showCount,b);d.getList().children("li:lt("+f+")").show();d.showCount<b?(void 0==c[0]?(c=$("<a>").attr("href",
"javascript:void(0);").attr("id","showLink").css("display","none").insertAfter(d.getList()),c.click(function(){d.hidden=!1;d.getList().children("li").show();e.show();c.hide()})):c.insertAfter(d.getList()),void 0==e[0]?(e=$("<a>").html(a).attr("href","javascript:void(0);").attr("id","hideLink").css("display","none").insertAfter(d.getList()),e.click(function(){d.hidden=!0;d.getList().children("li:gt("+d.showCountJquerySelector+")").hide();e.hide();c.show().html(d.showLinkText+" ("+d.getLength()+")")})):
e.insertAfter(d.getList()),d.hidden?(d.getList().children("li:gt("+d.showCountJquerySelector+")").hide(),e.hide(),c.show().html(d.showLinkText+" ("+b+")")):(c.hide(),e.show())):(c.hide(),e.hide())};d.init=function(){d.restructure();if(d.listChangesEvents)d.listHolder.on(d.listChangesEvents,d.restructure)}}
function MetadataTranslationsList(c){window[c]=this;var e=this,f;e.firstLoad=function(){f=e.controls.table.find("tbody");var b=e.controls.languageDataHidden.val();e.settings.metadataLanguages=b?JSON.parse(b):[];e.controls.addLanguageLink.on("click",function(){e.addLanguageLinkClick()});e.controls.languageInput.on("change",function(){e.controls.languageIdHidden.val(e.controls.languageInput.val())});e.updateAddButton();$.each(e.metadataColumns,function(a,d){if(d.IsMultiLine){var b=e.getInputForMetadataColumn(d),
c=b.attr("rows")*b.attr("cols")*2;b.keypress(function(a){b.val().length>c&&a.preventDefault()});b.on("paste",function(){setTimeout(function(){b.val($.trim(b.val().replace(/[\n\r]+/g,"")));b.val(b.val().substring(0,c))},100)})}})};e.getInputForMetadataColumn=function(b){return $("#"+e.settings.modalDialogClientId+"_"+b.Name)};e.addLanguageLinkClick=function(){e.fillLanguageInfo(null)};e.editLanguageLinkClick=function(b,a){e.fillLanguageInfo(a)};e.dialogLoaded=function(){e.controls.languageInput.is(":visible")?
e.controls.languageInput.focus():e.getInputForMetadataColumn(e.metadataColumns[0]).focus()};e.saveLanguageClick=function(){e.clearValidators();var b={},a=!0,d=parseInt(e.controls.languageIdHidden.val());0>d&&(e.showValidationMessage(e.controls.languageInput,e.settings.requiredValidationMessage),a=!1);b[e.settings.metadataLanguageIdDataField]=d;$.each(e.metadataColumns,function(d,c){d=$.trim(e.getInputForMetadataColumn(c).val());e.validateMetadataColumn(c,d)||(a=!1);b[c.DataField]=d});if(!a)return!1;
var c=e.findMetadataLanguageById(d);c?$.each(e.metadataColumns,function(a,d){c[d.DataField]=b[d.DataField]}):e.settings.metadataLanguages.push(b);e.saveLanguagesToHidden();e.fillTableRow(b);e.updateTable();e.updateAddButton();return!0};e.getTableRow=function(b){b=f.find("tr:has(td:first input[value='"+b+"']:hidden)");0==b.length&&(b=$("<tr></tr>").appendTo(f));return b};e.fillTableRow=function(b){var a=e.cssClasses,d=b[e.settings.metadataLanguageIdDataField],c=e.getTableRow(d);c.empty().append($("<td></td>").addClass(a.TableColumnLanguage).append($("<input />").attr("type",
"hidden").val(d)).append($("<a></a>").attr("href","javascript:void(0);").text(e.getLanguageTitleById(d)).on("click",function(){e.editLanguageLinkClick(this,d)})));$.each(e.metadataColumns,function(a,d){c.append($("<td></td>").addClass(d.CssClass).text(b[d.DataField]))});c.append($("<td></td>").addClass(a.TableColumnDelete).append($("<a></a>").addClass("ccl-iconlink").addClass(a.TableColumnDeleteImage).attr("href","javascript:void(0);").attr("title",e.settings.deleteRowTooltip).on("click",function(){e.removeLanguageClick(this,
d)}).append($("<img />").attr("src",e.settings.deleteImageUrl).attr("alt",e.settings.deleteRowTooltip).addClass(a.tableColumnDeleteImage))))};e.validateMetadataColumn=function(b,a){var d=!0;b.IsRequired&&0==a.length&&(d=!1,e.showValidationMessage(e.getInputForMetadataColumn(b),e.settings.requiredValidationMessage));return d};e.removeLanguageClick=function(b,a){var d=e.settings.metadataLanguages;$.each(d,function(b,c){return c[e.settings.metadataLanguageIdDataField]==a?(d.splice(b,1),e.saveLanguagesToHidden(),
!1):!0});$(b).parent().parent().remove();e.updateTable();e.updateAddButton()};e.saveLanguagesToHidden=function(){e.controls.languageDataHidden.val(JSON.stringify(e.settings.metadataLanguages))};e.findMetadataLanguageById=function(b){var a=null;$.each(e.settings.metadataLanguages,function(d,c){return c[e.settings.metadataLanguageIdDataField]==b?(a=c,!1):!0});return a};e.getAvailableLanguagesData=function(){return $.grep(e.settings.languages,function(b){return null==e.findMetadataLanguageById(b.Key)})};
e.disableSelectedLanguages=function(){var b=e.controls.languageInput;b.find("option").remove();$.each(e.getAvailableLanguagesData(),function(a,d){b.append($("<option></option>").val(d.Key).text(d.Value))})};e.getLanguageTitleById=function(b){for(index in e.settings.languages)if(e.settings.languages[index].Key==b)return e.settings.languages[index].Value;return""};e.showValidationMessage=function(b,a){$("<div></div>").text(a).addClass(e.cssClasses.ErrorMessage).appendTo(b.parent())};e.clearValidators=
function(){e.controls.modalDialogContainer.find("div."+e.cssClasses.ErrorMessage).remove()};e.fillLanguageInfo=function(b){var a=null;0<=b&&(a=e.findMetadataLanguageById(b));var d=!!a;e.clearValidators();window[e.settings.modalDialogName].setNewTitle(d?e.getLanguageTitleById(b):e.settings.addLanguageDialogTitle);e.controls.languageIdHidden.val(d?a[e.settings.metadataLanguageIdDataField]:-1);e.controls.languageInput.parent().toggle(!d);$.each(e.metadataColumns,function(b,c){e.getInputForMetadataColumn(c).val(d?
a[c.DataField]:"")});d||e.disableSelectedLanguages();window[e.settings.modalDialogName].open()};e.updateTable=function(){var b=e.cssClasses.TableRowAlternate;f.find("tr:even").removeClass(b);f.find("tr:odd").addClass(b);f.parent().toggle(0<f.find("tr:has(td)").length)};e.updateAddButton=function(){e.controls.addLanguageLink.toggle(e.settings.metadataLanguages.length<e.settings.languages.length-1)};return e}
function ObjectInstanceAdministrator(){return{cleanupObject:function(c,e,f){var b=Object.keys(f);$.each(b,function(a,d){void 0===e[d]?delete c[d]:e[d]!=f[d]&&(c[d]=e[d])})},cloneObject:function(c){return Object.create(c)}}}
function ObjectPropertiesInspector(){return{getObjectProperties:function(c){var e=Object.keys(c),f={};$.each(e,function(b,a){f[a]=c[a]});return f},isValuePropertyOfObject:function(c,e){var f=Object.keys(e),b=!1;$.each(f,function(a,d){e[d]===c&&(b=!0)});return b},getPropertiesDelta:function(c,e){var f=Object.keys(e),b=[];$.each(f,function(a,d){c[d]!==e[d]&&b.push({keyValue:d,beforeValue:c[d],afterValue:e[d]})});return b}}}
function ObjectStateValidators(){var c={},e={isUndefinedSafe:function(c,b){return c===b}};c.isNull=function(c){return null===c};c.isUndefined=function(c){return e.isUndefinedSafe(c)};c.isNullOrUndefined=function(e){return c.isUndefined(e)||c.isNull(e)};c.isFunction=function(c){return"function"===typeof c};c.isArray=function(c){return Array.isArray(c)};c.isString=function(c){return"string"===typeof c};c.isNumber=function(c){return"number"===typeof c&&!isNaN(c)};c.isBoolean=function(c){return"boolean"===
typeof c};c.isWhitespace=function(e){return c.isString(e)&&/^\s*$/.test(e)};c.isNullOrWhitespace=function(e){return c.isNullOrUndefined(e)||c.isWhitespace(e)};c.isFileError=function(c){return"undefined"!==typeof FileError&&c instanceof FileError?!0:!1};c.isDomError=function(c){return"undefined"!==typeof DOMError&&c instanceof DOMError?!0:!1};return c}var objectState=ObjectStateValidators();
function OkOrCancel(c){window[c]=this;var e=this,f,b,a,d;e.initialize=function(){f=e.settings;b=e.scripts;a=e.controls;d=a.okButton.val();f.attachInProgressEventManually||a.okButton.click(function(){var a=$(this).parents("form:first");if(a.length&&"undefined"!==typeof a[0].checkValidity?a[0].checkValidity():1)e.toggleInProgressState(!0,f.toggleCancel),CommonFunctions.safeExecuteFunction(b.okButtonClick)})};e.toggleInProgressState=function(b,c){b?(a.okButton.addClass(e.settings.inProgressCssClass),
a.okButton.attr("title",e.settings.inProgressTitle),a.okButton.attr("value","")):(a.okButton.removeAttr("title"),a.okButton.removeClass(e.settings.inProgressCssClass),a.okButton.attr("value",d));a.okButton.prop("disabled",b);c&&a.cancelButton.toggleHyperlink(!b)};return e}
function Pager(c){window[c]=this;var e=this,f,b;e.totalCount=0;e.pageSize=0;e.pageNumber=0;e.initialize=function(){f=e.settings.cssClasses;b=e.settings.terms};e.goToPage=function(a){e.customScripts.goToPage&&e.customScripts.goToPage({pageNumber:a});e.events&&$(document).trigger(e.events.onPageNumberChanged,[c,a])};e.changePageSize=function(a){e.customScripts.changePageSize&&e.customScripts.changePageSize({pageSize:a});e.events&&$(document).trigger(e.events.onPageSizeChanged,[c,a])};e.hide=function(){e.controls.pagerContainer.empty()};
e.getMinAvailablePageSize=function(){return e.settings.pageSizes&&0<e.settings.pageSizes.length?e.settings.pageSizes[0]:0};e.render=function(){var a=e.controls.pagerContainer,d=$("<ul></ul>").attr("class",f.pager),g=Math.ceil(e.totalCount/e.pageSize);a.empty();a.append(d);if(e.mode&e.settings.pagerMode.nextPrev&&0<g){if(1<e.pageNumber){var h=$("<li></li>").attr("class",f.previousNext);var k=e.pageNumber-1;var l=$("<a></a>").attr("href","#").attr("title",b.previous).click(function(){e.goToPage(k);
return!1}).append($("<span></span>").html("&laquo;").attr("class",f.prevArrow));h.append(l)}else h=$("<li></li>").attr("class",f.text).append($("<span></span>").html("&laquo;").attr("class",f.prevArrowDisabled));if(e.pageNumber<g){var m=e.pageNumber+1;l=$("<li></li>").attr("class",f.previousNext).append($("<a></a>").attr("href","#").attr("title",b.next).click(function(){e.goToPage(m);return!1}).append($("<span></span>").html("&raquo;").attr("class",f.nextArrow)))}else l=$("<li></li>").attr("class",
f.text).append($("<span></span>").html("&raquo;").attr("class",f.nextArrowDisabled));d.append(h);e.mode&e.settings.pagerMode.nextPrevBeforeNumericPages&&d.append(l)}if(e.mode&e.settings.pagerMode.numericPages)for(e.mode&e.settings.pagerMode.nextPrevBeforeNumericPages&&d.append($("<li>|</li>").attr("class",f.text)),h=1;h<=g;h++)if(e.pageNumber==h){var n=!1;d.append($("<li></li>").attr("class",f.selectedItem).append($("<span></span>").text(h)))}else e.pageNumber==h||1==h||h==g||Math.abs(e.pageNumber-
h)<=e.settings.pageLinksNearSelectedCount?d.append($("<li></li>").append($("<a>"+h+"</a>").attr("href","#").click({actualPageNumber:h},function(a){e.goToPage(a.data.actualPageNumber);return!1}))):n||(n=!0,d.append($("<li></li>").attr("class",f.text).append("<span>...</span>")));0==(e.mode&e.settings.pagerMode.nextPrevBeforeNumericPages)&&d.append(l);if(e.mode&e.settings.pagerMode.pageSize||e.mode&e.settings.pagerMode.pageSizeDropdown||e.mode&e.settings.pagerMode.pageSizeStaticLabel||e.mode&e.settings.pagerMode.pageInfo){d=
$("<span></span>").attr("class",f.pageSizeChooser);a.append(d);if(e.mode&e.settings.pagerMode.pageInfo){h=e.pageSize*e.pageNumber;h>e.totalCount&&(h=e.totalCount);a=1+e.pageSize*(e.pageNumber-1);if(0==e.pageNumber||0==e.totalCount)a=0;d.append($("<span></span>").text(b.pageInfoLabelTemplate.replace("{0}",a).replace("{1}",h).replace("{2}",e.totalCount)))}a=e.settings.pageSizes;if(e.mode&e.settings.pagerMode.pageSize)for(g=$("<ul></ul>"),d.append(g),g.append($("<li></li>").attr("class",f.pageSizeChooserLabel).text(b.pageSizeChooserLabel)),
h=0;h<a.length;h++)n=a[h]==e.pageSize?$("<li></li>").attr("class",f.selectedItem).text(a[h]):$("<li></li>").append($("<a></a>").attr("href","javascript:"+c+".changePageSize("+a[h]+");").text(a[h])),g.append(n);if(e.mode&e.settings.pagerMode.pageSizeDropdown){h=$("<select></select>");$(h).change(function(){window[c].changePageSize(this.options[this.selectedIndex].value)});d.append(h);for(g=0;g<a.length;g++)n=$("<option></option>").attr("value",a[g]).text(b.pageSizeItemPrefix+" "+a[g]),h.append(n);
h.find("option").each(function(){var a=$(this);if(a.val()==e.pageSize)return a.prop("selected",!0),!1})}e.mode&e.settings.pagerMode.pageSizeStaticLabel&&d.append($("<span/>").text(b.pageSizeItemPrefix+" "+e.pageSize).addClass(f.pageSizeStaticLabel))}};e.createIn=function(a){var d=$("<div></div>").prop("className",f.main);a.append(d);e.controls.pagerContainer=d;e.render()};return e}
(function e$jscomp$0(c,e,f){function a(g,k){if(!e[g]){if(!c[g]){var h="function"==typeof require&&require;if(!k&&h)return h(g,!0);if(d)return d(g,!0);k=Error("Cannot find module '"+g+"'");throw k.code="MODULE_NOT_FOUND",k;}k=e[g]={exports:{}};c[g][0].call(k.exports,function(d){var e=c[g][1][d];return a(e?e:d)},k,k.exports,e$jscomp$0,c,e,f)}return e[g].exports}for(var d="function"==typeof require&&require,g=0;g<f.length;g++)a(f[g]);return a})({1:[function(c,e,f){function b(b){b.fn.perfectScrollbar=
function(b){return this.each(function(){"object"===typeof b||"undefined"===typeof b?d.get(this)||a.initialize(this,b):"update"===b?a.update(this):"destroy"===b&&a.destroy(this)})}}var a=c("../main"),d=c("../plugin/instances");"function"===typeof define&&define.amd?define(["jquery"],b):(c=window.jQuery?window.jQuery:window.$,"undefined"!==typeof c&&b(c));e.exports=b},{"../main":7,"../plugin/instances":18}],2:[function(c,e,f){f.add=function(b,a){if(b.classList)b.classList.add(a);else{var d=b.className.split(" ");
0>d.indexOf(a)&&d.push(a);b.className=d.join(" ")}};f.remove=function(b,a){if(b.classList)b.classList.remove(a);else{var d=b.className.split(" ");a=d.indexOf(a);0<=a&&d.splice(a,1);b.className=d.join(" ")}};f.list=function(b){return b.classList?Array.prototype.slice.apply(b.classList):b.className.split(" ")}},{}],3:[function(c,e,f){var b={e:function(a,d){a=document.createElement(a);a.className=d;return a},appendTo:function(a,d){d.appendChild(a);return a},css:function(a,d,b){if("object"===typeof d){for(var c in d)b=
d[c],"number"===typeof b&&(b=b.toString()+"px"),a.style[c]=b;return a}if("undefined"===typeof b)return window.getComputedStyle(a)[d];c=b;"number"===typeof c&&(c=c.toString()+"px");a.style[d]=c;return a},matches:function(a,d){if("undefined"!==typeof a.matches)return a.matches(d);if("undefined"!==typeof a.matchesSelector)return a.matchesSelector(d);if("undefined"!==typeof a.webkitMatchesSelector)return a.webkitMatchesSelector(d);if("undefined"!==typeof a.mozMatchesSelector)return a.mozMatchesSelector(d);
if("undefined"!==typeof a.msMatchesSelector)return a.msMatchesSelector(d)},remove:function(a){"undefined"!==typeof a.remove?a.remove():a.parentNode&&a.parentNode.removeChild(a)},queryChildren:function(a,d){return Array.prototype.filter.call(a.childNodes,function(a){return b.matches(a,d)})}};e.exports=b},{}],4:[function(c,e,f){var b=function(a){this.element=a;this.events={}};b.prototype.bind=function(a,d){"undefined"===typeof this.events[a]&&(this.events[a]=[]);this.events[a].push(d);this.element.addEventListener(a,
d,!1)};b.prototype.unbind=function(a,d){var b="undefined"!==typeof d;this.events[a]=this.events[a].filter(function(c){if(b&&c!==d)return!0;this.element.removeEventListener(a,c,!1);return!1},this)};b.prototype.unbindAll=function(){for(var a in this.events)this.unbind(a)};c=function(){this.eventElements=[]};c.prototype.eventElement=function(a){var d=this.eventElements.filter(function(d){return d.element===a})[0];"undefined"===typeof d&&(d=new b(a),this.eventElements.push(d));return d};c.prototype.bind=
function(a,d,b){this.eventElement(a).bind(d,b)};c.prototype.unbind=function(a,d,b){this.eventElement(a).unbind(d,b)};c.prototype.unbindAll=function(){for(var a=0;a<this.eventElements.length;a++)this.eventElements[a].unbindAll()};c.prototype.once=function(a,d,b){var c=this.eventElement(a),e=function(a){c.unbind(d,e);b(a)};c.bind(d,e)};e.exports=c},{}],5:[function(c,e,f){e.exports=function(){function b(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return b()+
b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()}}()},{}],6:[function(c,e,f){var b=c("./class"),a=c("./dom"),d=f.toInt=function(a){return parseInt(a,10)||0},g=f.clone=function(a){if(null===a)return null;if(a.constructor===Array)return a.map(g);if("object"===typeof a){var d={},b;for(b in a)d[b]=g(a[b]);return d}return a};f.extend=function(a,d){a=g(a);for(var b in d)a[b]=g(d[b]);return a};f.isEditable=function(d){return a.matches(d,"input,[contenteditable]")||a.matches(d,"select,[contenteditable]")||a.matches(d,
"textarea,[contenteditable]")||a.matches(d,"button,[contenteditable]")};f.removePsClasses=function(a){for(var d=b.list(a),c=0;c<d.length;c++){var e=d[c];0===e.indexOf("ps-")&&b.remove(a,e)}};f.outerWidth=function(b){return d(a.css(b,"width"))+d(a.css(b,"paddingLeft"))+d(a.css(b,"paddingRight"))+d(a.css(b,"borderLeftWidth"))+d(a.css(b,"borderRightWidth"))};f.startScrolling=function(a,d){b.add(a,"ps-in-scrolling");"undefined"!==typeof d?b.add(a,"ps-"+d):(b.add(a,"ps-x"),b.add(a,"ps-y"))};f.stopScrolling=
function(a,d){b.remove(a,"ps-in-scrolling");"undefined"!==typeof d?b.remove(a,"ps-"+d):(b.remove(a,"ps-x"),b.remove(a,"ps-y"))};f.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(c,e,f){f=c("./plugin/destroy");var b=c("./plugin/initialize");c=c("./plugin/update");e.exports={initialize:b,
update:c,destroy:f}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(c,e,f){e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(c,e,f){var b=c("../lib/helper"),a=c("../lib/dom"),
d=c("./instances");e.exports=function(c){var e=d.get(c);e&&(e.event.unbindAll(),a.remove(e.scrollbarX),a.remove(e.scrollbarY),a.remove(e.scrollbarXRail),a.remove(e.scrollbarYRail),b.removePsClasses(c),d.remove(c))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(c,e,f){function b(d,b){var c=function(a){a.stopPropagation()};b.settings.stopPropagationOnClick&&b.event.bind(b.scrollbarY,"click",c);b.event.bind(b.scrollbarYRail,"click",function(c){var e=a.toInt(b.scrollbarYHeight/2);
e=b.railYRatio*(c.pageY-window.pageYOffset-b.scrollbarYRail.getBoundingClientRect().top-e)/(b.railYRatio*(b.railYHeight-b.scrollbarYHeight));0>e?e=0:1<e&&(e=1);h(d,"top",(b.contentHeight-b.containerHeight)*e);g(d);c.stopPropagation()});b.settings.stopPropagationOnClick&&b.event.bind(b.scrollbarX,"click",c);b.event.bind(b.scrollbarXRail,"click",function(c){var e=a.toInt(b.scrollbarXWidth/2);e=b.railXRatio*(c.pageX-window.pageXOffset-b.scrollbarXRail.getBoundingClientRect().left-e)/(b.railXRatio*(b.railXWidth-
b.scrollbarXWidth));0>e?e=0:1<e&&(e=1);h(d,"left",(b.contentWidth-b.containerWidth)*e-b.negativeScrollAdjustment);g(d);c.stopPropagation()})}var a=c("../../lib/helper"),d=c("../instances"),g=c("../update-geometry"),h=c("../update-scroll");e.exports=function(a){var c=d.get(a);b(a,c)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(c,e,f){function b(a,b){var c=null,e=null,f=function(f){var g=c+(f.pageX-e)*b.railXRatio,h=Math.max(0,b.scrollbarXRail.getBoundingClientRect().left)+
b.railXRatio*(b.railXWidth-b.scrollbarXWidth);b.scrollbarXLeft=0>g?0:g>h?h:g;g=d.toInt(b.scrollbarXLeft*(b.contentWidth-b.containerWidth)/(b.containerWidth-b.railXRatio*b.scrollbarXWidth))-b.negativeScrollAdjustment;l(a,"left",g);k(a);f.stopPropagation();f.preventDefault()},h=function(){d.stopScrolling(a,"x");b.event.unbind(b.ownerDocument,"mousemove",f)};b.event.bind(b.scrollbarX,"mousedown",function(k){e=k.pageX;c=d.toInt(g.css(b.scrollbarX,"left"))*b.railXRatio;d.startScrolling(a,"x");b.event.bind(b.ownerDocument,
"mousemove",f);b.event.once(b.ownerDocument,"mouseup",h);k.stopPropagation();k.preventDefault()})}function a(a,b){var c=null,e=null,f=function(f){var g=c+(f.pageY-e)*b.railYRatio,h=Math.max(0,b.scrollbarYRail.getBoundingClientRect().top)+b.railYRatio*(b.railYHeight-b.scrollbarYHeight);b.scrollbarYTop=0>g?0:g>h?h:g;g=d.toInt(b.scrollbarYTop*(b.contentHeight-b.containerHeight)/(b.containerHeight-b.railYRatio*b.scrollbarYHeight));l(a,"top",g);k(a);f.stopPropagation();f.preventDefault()},h=function(){d.stopScrolling(a,
"y");b.event.unbind(b.ownerDocument,"mousemove",f)};b.event.bind(b.scrollbarY,"mousedown",function(k){e=k.pageY;c=d.toInt(g.css(b.scrollbarY,"top"))*b.railYRatio;d.startScrolling(a,"y");b.event.bind(b.ownerDocument,"mousemove",f);b.event.once(b.ownerDocument,"mouseup",h);k.stopPropagation();k.preventDefault()})}var d=c("../../lib/helper"),g=c("../../lib/dom"),h=c("../instances"),k=c("../update-geometry"),l=c("../update-scroll");e.exports=function(d){var c=h.get(d);b(d,c);a(d,c)}},{"../../lib/dom":3,
"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(c,e,f){function b(b,c){function e(a,d){var e=b.scrollTop;if(0===a){if(!c.scrollbarYActive)return!1;if(0===e&&0<d||e>=c.contentHeight-c.containerHeight&&0>d)return!c.settings.wheelPropagation}e=b.scrollLeft;if(0===d){if(!c.scrollbarXActive)return!1;if(0===e&&0>a||e>=c.contentWidth-c.containerWidth&&0<a)return!c.settings.wheelPropagation}return!0}var f=!1;c.event.bind(b,"mouseenter",function(){f=!0});
c.event.bind(b,"mouseleave",function(){f=!1});var g=!1;c.event.bind(c.ownerDocument,"keydown",function(l){if(!l.isDefaultPrevented||!l.isDefaultPrevented()){var m=d.matches(c.scrollbarX,":focus")||d.matches(c.scrollbarY,":focus");if(f||m){if(m=document.activeElement?document.activeElement:c.ownerDocument.activeElement){if("IFRAME"===m.tagName)m=m.contentDocument.activeElement;else for(;m.shadowRoot;)m=m.shadowRoot.activeElement;if(a.isEditable(m))return}var n=m=0;switch(l.which){case 37:m=-30;break;
case 38:n=30;break;case 39:m=30;break;case 40:n=-30;break;case 33:n=90;break;case 32:n=l.shiftKey?90:-90;break;case 34:n=-90;break;case 35:n=l.ctrlKey?-c.contentHeight:-c.containerHeight;break;case 36:n=l.ctrlKey?b.scrollTop:c.containerHeight;break;default:return}k(b,"top",b.scrollTop-n);k(b,"left",b.scrollLeft+m);h(b);(g=e(m,n))&&l.preventDefault()}}})}var a=c("../../lib/helper"),d=c("../../lib/dom"),g=c("../instances"),h=c("../update-geometry"),k=c("../update-scroll");e.exports=function(a){var d=
g.get(a);b(a,d)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(c,e,f){function b(a,b){function c(d,c){var e=a.scrollTop;if(0===d){if(!b.scrollbarYActive)return!1;if(0===e&&0<c||e>=b.contentHeight-b.containerHeight&&0>c)return!b.settings.wheelPropagation}e=a.scrollLeft;if(0===c){if(!b.scrollbarXActive)return!1;if(0===e&&0>d||e>=b.contentWidth-b.containerWidth&&0<d)return!b.settings.wheelPropagation}return!0}function e(b,d){var c=
a.querySelector("textarea:hover, .ps-child:hover");if(c){if("TEXTAREA"!==c.tagName&&!window.getComputedStyle(c).overflow.match(/(scroll|auto)/))return!1;var e=c.scrollHeight-c.clientHeight;if(0<e&&!(0===c.scrollTop&&0<d||c.scrollTop===e&&0>d))return!0;d=c.scrollLeft-c.clientWidth;if(0<d&&!(0===c.scrollLeft&&0>b||c.scrollLeft===d&&0<b))return!0}return!1}function f(f){var k=f.deltaX;var l=-1*f.deltaY;if("undefined"===typeof k||"undefined"===typeof l)k=-1*f.wheelDeltaX/6,l=f.wheelDeltaY/6;f.deltaMode&&
1===f.deltaMode&&(k*=10,l*=10);k!==k&&l!==l&&(k=0,l=f.wheelDelta);l=[k,l];k=l[0];l=l[1];!e(k,l)&&(h=!1,b.settings.useBothWheelAxes?b.scrollbarYActive&&!b.scrollbarXActive?(l?g(a,"top",a.scrollTop-l*b.settings.wheelSpeed):g(a,"top",a.scrollTop+k*b.settings.wheelSpeed),h=!0):b.scrollbarXActive&&!b.scrollbarYActive&&(k?g(a,"left",a.scrollLeft+k*b.settings.wheelSpeed):g(a,"left",a.scrollLeft-l*b.settings.wheelSpeed),h=!0):(g(a,"top",a.scrollTop-l*b.settings.wheelSpeed),g(a,"left",a.scrollLeft+k*b.settings.wheelSpeed)),
d(a),h=h||c(k,l))&&(f.stopPropagation(),f.preventDefault())}var h=!1;"undefined"!==typeof window.onwheel?b.event.bind(a,"wheel",f):"undefined"!==typeof window.onmousewheel&&b.event.bind(a,"mousewheel",f)}var a=c("../instances"),d=c("../update-geometry"),g=c("../update-scroll");e.exports=function(d){var c=a.get(d);b(d,c)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(c,e,f){function b(a,b){b.event.bind(a,"scroll",function(){d(a)})}var a=c("../instances"),d=c("../update-geometry");
e.exports=function(d){var c=a.get(d);b(d,c)}},{"../instances":18,"../update-geometry":19}],15:[function(c,e,f){function b(b,c){function e(){var a=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===a.toString().length?null:a.getRangeAt(0).commonAncestorContainer}function f(){l||(l=setInterval(function(){d.get(b)?(h(b,"top",b.scrollTop+w.top),h(b,"left",b.scrollLeft+w.left),g(b)):clearInterval(l)},50))}function k(){l&&(clearInterval(l),l=null);a.stopScrolling(b)}
var l=null,w={top:0,left:0},t=!1;c.event.bind(c.ownerDocument,"selectionchange",function(){b.contains(e())?t=!0:(t=!1,k())});c.event.bind(window,"mouseup",function(){t&&(t=!1,k())});c.event.bind(window,"mousemove",function(d){if(t){var c=d.pageX;d=d.pageY;var e=b.offsetLeft+b.offsetWidth,g=b.offsetTop,h=b.offsetTop+b.offsetHeight;c<b.offsetLeft+3?(w.left=-5,a.startScrolling(b,"x")):c>e-3?(w.left=5,a.startScrolling(b,"x")):w.left=0;d<g+3?(w.top=5>g+3-d?-5:-20,a.startScrolling(b,"y")):d>h-3?(w.top=
5>d-h+3?5:20,a.startScrolling(b,"y")):w.top=0;0===w.top&&0===w.left?k():f()}})}var a=c("../../lib/helper"),d=c("../instances"),g=c("../update-geometry"),h=c("../update-scroll");e.exports=function(a){var c=d.get(a);b(a,c)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(c,e,f){function b(a,b,c,e){var f;function k(b,d){h(a,"top",a.scrollTop-d);h(a,"left",a.scrollLeft-b);g(a)}function l(){E=!0}function m(){E=!1}function n(a){return a.targetTouches&&
1===a.targetTouches.length||a.pointerType&&"mouse"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE?!0:!1}function q(a){if(n(a)){I=!0;var b=a.targetTouches?a.targetTouches[0]:a;G.pageX=b.pageX;G.pageY=b.pageY;u=(new Date).getTime();null!==D&&clearInterval(D);a.stopPropagation()}}function z(d){!I&&b.settings.swipePropagation&&q(d);if(!E&&I&&n(d)){var c=d.targetTouches?d.targetTouches[0]:d,e={pageX:c.pageX,pageY:c.pageY};c=e.pageX-G.pageX;var g=e.pageY-G.pageY;k(c,g);G=e;e=(new Date).getTime();
var h=e-u;0<h&&(f=c/h,B=g/h,u=e);a:{e=a.scrollTop;h=a.scrollLeft;var l=Math.abs(c),m=Math.abs(g);if(m>l){if(0>g&&e===b.contentHeight-b.containerHeight||0<g&&0===e){c=!b.settings.swipePropagation;break a}}else if(l>m&&(0>c&&h===b.contentWidth-b.containerWidth||0<c&&0===h)){c=!b.settings.swipePropagation;break a}c=!0}c&&(d.stopPropagation(),d.preventDefault())}}function C(){!E&&I&&(I=!1,clearInterval(D),D=setInterval(function(){d.get(a)?.01>Math.abs(f)&&.01>Math.abs(B)?clearInterval(D):(k(30*f,30*B),
f*=.8,B*=.8):clearInterval(D)},10))}var G={},u=0;var B=f=void 0;var D=null,E=!1,I=!1;c&&(b.event.bind(window,"touchstart",l),b.event.bind(window,"touchend",m),b.event.bind(a,"touchstart",q),b.event.bind(a,"touchmove",z),b.event.bind(a,"touchend",C));e&&(window.PointerEvent?(b.event.bind(window,"pointerdown",l),b.event.bind(window,"pointerup",m),b.event.bind(a,"pointerdown",q),b.event.bind(a,"pointermove",z),b.event.bind(a,"pointerup",C)):window.MSPointerEvent&&(b.event.bind(window,"MSPointerDown",
l),b.event.bind(window,"MSPointerUp",m),b.event.bind(a,"MSPointerDown",q),b.event.bind(a,"MSPointerMove",z),b.event.bind(a,"MSPointerUp",C)))}var a=c("../../lib/helper"),d=c("../instances"),g=c("../update-geometry"),h=c("../update-scroll");e.exports=function(c){if(a.env.supportsTouch||a.env.supportsIePointer){var e=d.get(c);b(c,e,a.env.supportsTouch,a.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(c,e,f){var b=c("../lib/helper"),
a=c("../lib/class"),d=c("./instances"),g=c("./update-geometry"),h={"click-rail":c("./handler/click-rail"),"drag-scrollbar":c("./handler/drag-scrollbar"),keyboard:c("./handler/keyboard"),wheel:c("./handler/mouse-wheel"),touch:c("./handler/touch"),selection:c("./handler/selection")},k=c("./handler/native-scroll");e.exports=function(c,e){e="object"===typeof e?e:{};a.add(c,"ps-container");var f=d.add(c);f.settings=b.extend(f.settings,e);a.add(c,"ps-theme-"+f.settings.theme);f.settings.handlers.forEach(function(a){h[a](c)});
k(c);g(c)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(c,e,f){function b(b){function c(){d.add(b,"ps-focus")}function e(){d.remove(b,"ps-focus")}this.settings=a.clone(g);this.contentHeight=this.contentWidth=this.containerHeight=this.containerWidth=null;this.isRtl="rtl"===
h.css(b,"direction");this.negativeScrollAdjustment=(this.isNegativeScroll=function(){var a=b.scrollLeft;b.scrollLeft=-1;var d=0>b.scrollLeft;b.scrollLeft=a;return d}())?b.scrollWidth-b.clientWidth:0;this.event=new k;this.ownerDocument=b.ownerDocument||document;this.scrollbarXRail=h.appendTo(h.e("div","ps-scrollbar-x-rail"),b);this.scrollbarX=h.appendTo(h.e("div","ps-scrollbar-x"),this.scrollbarXRail);this.scrollbarX.setAttribute("tabindex",0);this.event.bind(this.scrollbarX,"focus",c);this.event.bind(this.scrollbarX,
"blur",e);this.scrollbarXLeft=this.scrollbarXWidth=this.scrollbarXActive=null;this.scrollbarXBottom=a.toInt(h.css(this.scrollbarXRail,"bottom"));this.scrollbarXTop=(this.isScrollbarXUsingBottom=this.scrollbarXBottom===this.scrollbarXBottom)?null:a.toInt(h.css(this.scrollbarXRail,"top"));this.railBorderXWidth=a.toInt(h.css(this.scrollbarXRail,"borderLeftWidth"))+a.toInt(h.css(this.scrollbarXRail,"borderRightWidth"));h.css(this.scrollbarXRail,"display","block");this.railXMarginWidth=a.toInt(h.css(this.scrollbarXRail,
"marginLeft"))+a.toInt(h.css(this.scrollbarXRail,"marginRight"));h.css(this.scrollbarXRail,"display","");this.railXRatio=this.railXWidth=null;this.scrollbarYRail=h.appendTo(h.e("div","ps-scrollbar-y-rail"),b);this.scrollbarY=h.appendTo(h.e("div","ps-scrollbar-y"),this.scrollbarYRail);this.scrollbarY.setAttribute("tabindex",0);this.event.bind(this.scrollbarY,"focus",c);this.event.bind(this.scrollbarY,"blur",e);this.scrollbarYTop=this.scrollbarYHeight=this.scrollbarYActive=null;this.scrollbarYRight=
a.toInt(h.css(this.scrollbarYRail,"right"));this.scrollbarYLeft=(this.isScrollbarYUsingRight=this.scrollbarYRight===this.scrollbarYRight)?null:a.toInt(h.css(this.scrollbarYRail,"left"));this.scrollbarYOuterWidth=this.isRtl?a.outerWidth(this.scrollbarY):null;this.railBorderYWidth=a.toInt(h.css(this.scrollbarYRail,"borderTopWidth"))+a.toInt(h.css(this.scrollbarYRail,"borderBottomWidth"));h.css(this.scrollbarYRail,"display","block");this.railYMarginHeight=a.toInt(h.css(this.scrollbarYRail,"marginTop"))+
a.toInt(h.css(this.scrollbarYRail,"marginBottom"));h.css(this.scrollbarYRail,"display","");this.railYRatio=this.railYHeight=null}var a=c("../lib/helper"),d=c("../lib/class"),g=c("./default-setting"),h=c("../lib/dom"),k=c("../lib/event-manager"),l=c("../lib/guid"),m={};f.add=function(a){var d=l();a.setAttribute("data-ps-id",d);m[d]=new b(a);return m[d]};f.remove=function(a){delete m[a.getAttribute("data-ps-id")];a.removeAttribute("data-ps-id")};f.get=function(a){return m[a.getAttribute("data-ps-id")]}},
{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(c,e,f){function b(a,b){a.settings.minScrollbarLength&&(b=Math.max(b,a.settings.minScrollbarLength));a.settings.maxScrollbarLength&&(b=Math.min(b,a.settings.maxScrollbarLength));return b}function a(a,b){var d={width:b.railXWidth};d.left=b.isRtl?b.negativeScrollAdjustment+a.scrollLeft+b.containerWidth-b.contentWidth:a.scrollLeft;b.isScrollbarXUsingBottom?d.bottom=b.scrollbarXBottom-
a.scrollTop:d.top=b.scrollbarXTop+a.scrollTop;h.css(b.scrollbarXRail,d);d={top:a.scrollTop,height:b.railYHeight};b.isScrollbarYUsingRight?d.right=b.isRtl?b.contentWidth-(b.negativeScrollAdjustment+a.scrollLeft)-b.scrollbarYRight-b.scrollbarYOuterWidth:b.scrollbarYRight-a.scrollLeft:d.left=b.isRtl?b.negativeScrollAdjustment+a.scrollLeft+2*b.containerWidth-b.contentWidth-b.scrollbarYLeft-b.scrollbarYOuterWidth:b.scrollbarYLeft+a.scrollLeft;h.css(b.scrollbarYRail,d);h.css(b.scrollbarX,{left:b.scrollbarXLeft,
width:b.scrollbarXWidth-b.railBorderXWidth});h.css(b.scrollbarY,{top:b.scrollbarYTop,height:b.scrollbarYHeight-b.railBorderYWidth})}var d=c("../lib/helper"),g=c("../lib/class"),h=c("../lib/dom"),k=c("./instances"),l=c("./update-scroll");e.exports=function(c){var e=k.get(c);e.containerWidth=c.clientWidth;e.containerHeight=c.clientHeight;e.contentWidth=c.scrollWidth;e.contentHeight=c.scrollHeight;if(!c.contains(e.scrollbarXRail)){var f=h.queryChildren(c,".ps-scrollbar-x-rail");0<f.length&&f.forEach(function(a){h.remove(a)});
h.appendTo(e.scrollbarXRail,c)}c.contains(e.scrollbarYRail)||(f=h.queryChildren(c,".ps-scrollbar-y-rail"),0<f.length&&f.forEach(function(a){h.remove(a)}),h.appendTo(e.scrollbarYRail,c));!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=b(e,d.toInt(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=d.toInt((e.negativeScrollAdjustment+
c.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1;!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=b(e,d.toInt(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=d.toInt(c.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):
e.scrollbarYActive=!1;e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth);e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight);a(c,e);e.scrollbarXActive?g.add(c,"ps-active-x"):(g.remove(c,"ps-active-x"),e.scrollbarXWidth=0,e.scrollbarXLeft=0,l(c,"left",0));e.scrollbarYActive?g.add(c,"ps-active-y"):(g.remove(c,"ps-active-y"),e.scrollbarYHeight=0,e.scrollbarYTop=0,l(c,"top",0))}},{"../lib/class":2,"../lib/dom":3,
"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(c,e,f){var b=c("./instances"),a=document.createEvent("Event"),d=document.createEvent("Event"),g=document.createEvent("Event"),h=document.createEvent("Event"),k=document.createEvent("Event"),l=document.createEvent("Event"),m=document.createEvent("Event"),n=document.createEvent("Event"),p=document.createEvent("Event"),r=document.createEvent("Event"),w,t;a.initEvent("ps-scroll-up",!0,!0);d.initEvent("ps-scroll-down",!0,!0);g.initEvent("ps-scroll-left",
!0,!0);h.initEvent("ps-scroll-right",!0,!0);k.initEvent("ps-scroll-y",!0,!0);l.initEvent("ps-scroll-x",!0,!0);m.initEvent("ps-x-reach-start",!0,!0);n.initEvent("ps-x-reach-end",!0,!0);p.initEvent("ps-y-reach-start",!0,!0);r.initEvent("ps-y-reach-end",!0,!0);e.exports=function(c,e,f){if("undefined"===typeof c)throw"You must provide an element to the update-scroll function";if("undefined"===typeof e)throw"You must provide an axis to the update-scroll function";if("undefined"===typeof f)throw"You must provide a value to the update-scroll function";
"top"===e&&0>=f&&(c.scrollTop=f=0,c.dispatchEvent(p));"left"===e&&0>=f&&(c.scrollLeft=f=0,c.dispatchEvent(m));var v=b.get(c);"top"===e&&f>=v.contentHeight-v.containerHeight&&(f=v.contentHeight-v.containerHeight,1>=f-c.scrollTop?f=c.scrollTop:c.scrollTop=f,c.dispatchEvent(r));"left"===e&&f>=v.contentWidth-v.containerWidth&&(f=v.contentWidth-v.containerWidth,1>=f-c.scrollLeft?f=c.scrollLeft:c.scrollLeft=f,c.dispatchEvent(n));w||(w=c.scrollTop);t||(t=c.scrollLeft);"top"===e&&f<w&&c.dispatchEvent(a);
"top"===e&&f>w&&c.dispatchEvent(d);"left"===e&&f<t&&c.dispatchEvent(g);"left"===e&&f>t&&c.dispatchEvent(h);"top"===e&&(c.scrollTop=w=f,c.dispatchEvent(k));"left"===e&&(c.scrollLeft=t=f,c.dispatchEvent(l))}},{"./instances":18}],21:[function(c,e,f){var b=c("../lib/helper"),a=c("../lib/dom"),d=c("./instances"),g=c("./update-geometry"),h=c("./update-scroll");e.exports=function(c){var e=d.get(c);e&&(e.negativeScrollAdjustment=e.isNegativeScroll?c.scrollWidth-c.clientWidth:0,a.css(e.scrollbarXRail,"display",
"block"),a.css(e.scrollbarYRail,"display","block"),e.railXMarginWidth=b.toInt(a.css(e.scrollbarXRail,"marginLeft"))+b.toInt(a.css(e.scrollbarXRail,"marginRight")),e.railYMarginHeight=b.toInt(a.css(e.scrollbarYRail,"marginTop"))+b.toInt(a.css(e.scrollbarYRail,"marginBottom")),a.css(e.scrollbarXRail,"display","none"),a.css(e.scrollbarYRail,"display","none"),g(c),h(c,"top",c.scrollTop),h(c,"left",c.scrollLeft),a.css(e.scrollbarXRail,"display",""),a.css(e.scrollbarYRail,"display",""))}},{"../lib/dom":3,
"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]);
function PersonActivityLogger(c){function e(){for(var b=new IframeIterator(window.top.document);b.hasNext();)if(b.next().hasFocus())return!0;return!1}function f(b){!1!==e()&&(b.forEach(function(a){a.DateTime=(new Date).toISOString()}),$.ajax({type:"POST",url:c,data:JSON.stringify(b),contentType:"application/json; charset=utf-8",dataType:"json"}))}return{initialize:function(b,a){setInterval(function(){f(a)},1E3*b);f(a)}}}
(function(c,e){function f(d,c,e,f){var h={};h[e.format]=e.url;d.jPlayer("setMedia",h);if(e.isVideo){c.css({"line-height":0});h=a(c);var k=b(c);f.jPlayer.flash.used||k.add(h).removeAttr("style");f.jPlayer.status.noFullWindow&&(f=$(d.jPlayer("option","cssSelectorAncestor")),f.find(".jp-screen-control").hide(),f.find(".jp-bar").css({right:"0"}));0<k.length?(e=e.width?e.width:c.width(),d.jPlayer("option","size",{width:e+"px",height:Math.round(e/16*9)+"px"}),c.css({position:"relative"})):g.commonSettings.isIpad?
0===c.find("canvas").length&&(d=$("<canvas>"),d.css({height:"auto"}),c.prepend(d),c.css({position:"relative","padding-top":"6.2%"})):h.css({position:"inherit"})}}function b(a){return a.find("object, embed")}function a(a){return a.find("video")}function d(a,b,d){$("#"+a).find(".jp-play").prop("title",b?d.pause:d.play)}var g=c.PlayerManager={commonSettings:e,addPlayer:function(c,e){$("#"+e.playerContainerId).on("click",function(a){a.stopPropagation()});return c.jPlayer({ready:function(a){f($(this),
c,e,a)},ended:function(a){f($(this),c,e,a)},error:function(a){a.jPlayer.error.type===$.jPlayer.error.URL&&(a='<div class="'+e.cssClassFeedback+'">'+e.terms.contentNotAvailable+"</div>",$(this).closest(".jp-flat-video, .jp-flat-audio").html(a).removeClass())},swfPath:g.commonSettings.swfPath,cssSelectorAncestor:"#"+e.playerContainerId,useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!0,remainingDuration:!0,keyEnabled:!0,keyBindings:{loop:null,muted:null,volumeUp:null,volumeDown:null},supplied:e.format,
size:e.isVideo?{width:"100%",height:0<b(c).length?"100%":"auto",cssClass:e.cssClassSize?e.cssClassSize:g.commonSettings.defaultCssClassSize}:{},sizeFull:e.isVideo?{cssClass:"jp-flat-video-full"}:{},autohide:e.isVideo?{full:!1,restored:!1}:{},noFullWindow:{msie:/msie/,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/}}).on($.jPlayer.event.play,
function(f){e.isVideo&&!f.jPlayer.flash.used&&b(c).add(a(c)).removeAttr("style");e.isVideo&&$(this).jPlayer("option","autohide",{full:!0,restored:!0});g.commonSettings.isIpad||a(c).css({position:"inherit"});d(e.playerContainerId,!0,e.terms);$(this).jPlayer("pauseOthers")}).on($.jPlayer.event.pause,function(){e.isVideo&&$(this).jPlayer("option","autohide",{full:!1,restored:!1});d(e.playerContainerId,!1,e.terms)}).on($.jPlayer.event.resize,function(d){if(e.isVideo&&!d.jPlayer.flash.used){b(c).add(a(c)).removeAttr("style");
c.css({position:d.jPlayer.options.fullScreen||d.jPlayer.options.fullWindow?"":"relative"});g.commonSettings.isIpad||a(c).css({position:"inherit"});d=d.jPlayer.options.fullScreen||d.jPlayer.options.fullWindow;var f=e.terms;$("#"+e.playerContainerId).find(".jp-full-screen").prop("title",d?f.restoreScreen:f.fullScreen)}}).on($.jPlayer.event.click,function(a){e.isVideo&&(a.jPlayer.status.paused?$(this).jPlayer("play"):$(this).jPlayer("pause"))})}}})(window);
function ProgressBar(c){window[c]=this;var e=this,f=!0,b,a;e.initialize=function(){b=e.settings;a=e.controls;void 0!==b.showLabel&&(f=b.showLabel);a.bar.find(".ui-progressbar-value").remove();a.bar.progressbar({value:b.percent});f&&a.labelContainer.html(b.percent+"%")};e.setPercent=function(b){a.bar.progressbar("option",{value:b});f&&a.labelContainer.html(b+"%")};e.setToolTip=function(b){a.bar.attr("title",b)};return e}
(function(c){c.ProgressCircle=function(c,f,b){function a(a,b,d){var c=document.createElementNS("http://www.w3.org/2000/svg",a);c.attr=function(a,b){c.setAttributeNS(null,a,b);return c};b&&c.attr("class",b);d.appendChild(c);return c}function d(a){b?h.textContent=Math.round(a.done/a.total*100)+"%":(k.textContent=a.done,l.textContent="/"+a.total);if(0===a.done)e.attr("d"," ");else{a=a.done/a.total*Math.PI*2;var d=["M",50,5];a>Math.PI&&(d=d.concat(["A",45,45,0,0,1,50,95]));d=d.concat(["A",45,45,0,0,1,
50+45*Math.cos(a-Math.PI/2),50+45*Math.sin(a-Math.PI/2)]);e.attr("d",d.join(" "))}}b=b||!1;c=a("svg","itsl-progress-circle",c).attr("viewBox","0 0 100 100");a("path","itsl-progress-circle__outer",c).attr("d","M 50 5 A 45 45 0 1 1 49.999 5");var e=a("path","itsl-progress-circle__progress",c);if(b)var h=a("text","itsl-progress-circle__percent",c).attr("x",50).attr("y",50);else{var k=a("text","itsl-progress-circle__done",c).attr("x",25).attr("y",65);var l=a("text","itsl-progress-circle__total",c).attr("x",
50).attr("y",65)}d(f);return{update:d}}})(CCL||(CCL={}));
function QuotaBarInitializer(c,e,f,b,a){var d={},g={};d.safeBarWidth=c;d.warningBarWidth=e;d.unusedSpaceBarWidth=f;d.literals={};d.functionFinder=FunctionFinder();d.windowWidth={small:480,large:960};d.thresholdTextWidth={small:10,medium:15,large:20};d.positionerSelectors={leftBufferId:"#quota-left-buffer",warningThresholdTextId:"#quota-warning-threshold-text",middleBufferId:"#quota-middle-buffer",dangerThresholdTextId:"#quota-danger-threshold-text",rightBufferId:"#quota-right-buffer",safeBarId:"#quota-safe-bar",
warningBarId:"#quota-warning-bar",dangerBarId:"#quota-danger-bar",unusedSpaceBarId:"#quota-unused-space-bar"};d.literalsSelectors={warningThresholdTextId:"#quota-warning-threshold-text",dangerThresholdTextId:"#quota-danger-threshold-text",currentUsageTextId:"#quota-current-usage-text"};g.updateUsedSpace=function(a,b){d.unusedSpaceBarWidth=100-a;d.initAndRunPositioner();d.literals.currentUsageLiteral=b;d.literals.setLiteralsOnTextElements()};d.initialize=function(){d.initializeLiterals();d.initAndRunPositioner();
d.attachResizeEvent();void 0!==a.OnControlInitialization&&(a.OnControlInitialization=d.functionFinder.getFunctionByName(a.OnControlInitialization),a.OnControlInitialization(g))};d.initializeLiterals=function(){d.literals=QuotaBarLiterals(b,d.literalsSelectors);d.literals.setLiteralsOnTextElements()};d.attachResizeEvent=function(){$(window).resize(function(){d.initAndRunPositioner()})};d.initAndRunPositioner=function(){var a=d.calculateThresholdTextWidth();QuotaBarPositioner(d.positionerSelectors,
a).positionElements(d.safeBarWidth,d.warningBarWidth,d.unusedSpaceBarWidth)};d.calculateThresholdTextWidth=function(){var a=$(window).width();return a>=d.windowWidth.large?d.thresholdTextWidth.small:a<d.windowWidth.large&&a>=d.windowWidth.small?d.thresholdTextWidth.medium:a<d.windowWidth.small?d.thresholdTextWidth.large:d.thresholdTextWidth.small};d.initialize();return g}
function QuotaBarLiterals(c,e){contract.require(!objectState.isNullOrUndefined(c),"argument 'translations' is not defined");contract.require(!objectState.isNullOrUndefined(c.WarningThreshold),"argument 'translations.WarningThreshold' is not defined");contract.require(!objectState.isNullOrUndefined(c.DangerThreshold),"argument 'translations.DangerThreshold' is not defined");contract.require(!objectState.isNullOrUndefined(c.CurrentUsage),"argument 'translations.CurrentUsage' is not defined");contract.require(!objectState.isNullOrUndefined(e),
"argument 'selectors' is not defined");contract.require(!objectState.isNullOrUndefined(e.warningThresholdTextId),"argument 'selectors.warningThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(e.dangerThresholdTextId),"argument 'selectors.dangerThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(e.currentUsageTextId),"argument 'selectors.currentUsageTextId' is not defined");var f={};f.warningThresholdLiteral=c.WarningThreshold;f.dangerThresholdLiteral=
c.DangerThreshold;f.currentUsageLiteral=c.CurrentUsage;f.warningThresholdTextElement=$(e.warningThresholdTextId);f.dangerThresholdTextElement=$(e.dangerThresholdTextId);f.currentUsageTextElement=$(e.currentUsageTextId);f.setLiteralsOnTextElements=function(){f.warningThresholdTextElement.text(f.warningThresholdLiteral);f.dangerThresholdTextElement.text(f.dangerThresholdLiteral);f.currentUsageTextElement.text(f.currentUsageLiteral)};return f}
function QuotaBarPositioner(c,e){contract.require(!objectState.isNullOrUndefined(c),"argument 'selectors' is not defined");contract.require(!objectState.isNullOrUndefined(c.leftBufferId),"argument 'selectors.leftBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(c.warningThresholdTextId),"argument 'selectors.warningThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(c.middleBufferId),"argument 'selectors.middleBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(c.dangerThresholdTextId),
"argument 'selectors.dangerThresholdTextId' is not defined");contract.require(!objectState.isNullOrUndefined(c.rightBufferId),"argument 'selectors.rightBufferId' is not defined");contract.require(!objectState.isNullOrUndefined(c.safeBarId),"argument 'selectors.safeBarId' is not defined");contract.require(!objectState.isNullOrUndefined(c.warningBarId),"argument 'selectors.warningBarId' is not defined");contract.require(!objectState.isNullOrUndefined(c.dangerBarId),"argument 'selectors.dangerBarId' is not defined");
contract.require(!objectState.isNullOrUndefined(c.unusedSpaceBarId),"argument 'selectors.unusedSpaceBarId' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'thresholdTextWidth' is not defined");contract.require(50>=e,"argument 'thresholdTextWidth' can't be greater than 50");var f={},b={};f.leftBufferElement=$(c.leftBufferId);f.warningThresholdTextElement=$(c.warningThresholdTextId);f.middleBufferElement=$(c.middleBufferId);f.dangerThresholdTextElement=$(c.dangerThresholdTextId);
f.rightBufferElement=$(c.rightBufferId);f.safeBarElement=$(c.safeBarId);f.warningBarElement=$(c.warningBarId);f.dangerBarElement=$(c.dangerBarId);f.unusedSpaceBarElement=$(c.unusedSpaceBarId);b.widths={};b.widths.header={leftBuffer:null,warningThreshold:null,middleBuffer:null,dangerThreshold:null,rightBuffer:null};b.widths.bars={safe:null,warning:null,danger:null,unusedSpace:null};b.extraSpaceTakenByThresholdText=e/2;f.positionElements=function(a,d,c){contract.require(!objectState.isNullOrUndefined(a),
"argument 'safeBarWidth' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'warningBarWidth' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'unusedSpaceBarWidth' is not defined");contract.require(100>=a+d,"sum of 'safeBarWidth' and 'warningBarWidth' can't be greater than 100");contract.require(100>=c,"argument 'unusedSpaceBarWidth' can't be greater than 100");b.calculateWidthsOfHeaderElements(a,d);b.calculateWidthsOfBars(a,d,c);b.setWidthsOfHeaderElements();
b.setWidthsOfBars(c);b.determineWarningElementsVisibility(a,c);b.determineDangerElementsVisibility(a,d,c)};b.calculateWidthsOfHeaderElements=function(a,d){b.calculateLeftBufferWidth(a);b.widths.header.warningThreshold=e;b.calculateMiddleBufferWidth(a,d);b.widths.header.dangerThreshold=e;b.calculateRightBufferWidth()};b.calculateLeftBufferWidth=function(a){b.widths.header.leftBuffer=b.ensureBufferWidthIsInBounds(a-b.extraSpaceTakenByThresholdText)};b.calculateMiddleBufferWidth=function(a,d){d=a+d+
b.extraSpaceTakenByThresholdText;100<d&&(d=100);b.widths.header.middleBuffer=b.ensureBufferWidthIsInBounds(d-(a+b.extraSpaceTakenByThresholdText)-e)};b.ensureBufferWidthIsInBounds=function(a){a=b.ensureBufferWidthIsNotBiggerThanMaxWidth(a);return b.ensureBufferWidthIsNotNegative(a)};b.ensureBufferWidthIsNotBiggerThanMaxWidth=function(a){var b=100-2*e;return b<a?b:a};b.ensureBufferWidthIsNotNegative=function(a){return 0>a?0:a};b.calculateRightBufferWidth=function(){b.widths.header.rightBuffer=b.ensureBufferWidthIsNotNegative(100-
b.widths.header.leftBuffer-b.widths.header.warningThreshold-b.widths.header.middleBuffer-b.widths.header.dangerThreshold)};b.calculateWidthsOfBars=function(a,d,c){b.widths.bars.safe=a;b.widths.bars.warning=d;b.widths.bars.danger=100-a-d;b.widths.bars.unusedSpace=c};b.setWidthsOfHeaderElements=function(){f.leftBufferElement.width(b.convertToPercentageString(b.widths.header.leftBuffer));f.warningThresholdTextElement.width(b.convertToPercentageString(b.widths.header.warningThreshold));f.middleBufferElement.width(b.convertToPercentageString(b.widths.header.middleBuffer));
f.dangerThresholdTextElement.width(b.convertToPercentageString(b.widths.header.dangerThreshold));f.rightBufferElement.width(b.convertToPercentageString(b.widths.header.rightBuffer))};b.setWidthsOfBars=function(a){f.safeBarElement.width(b.convertToPercentageString(b.widths.bars.safe));f.warningBarElement.width(b.convertToPercentageString(b.widths.bars.warning));f.dangerBarElement.width(b.convertToPercentageString(b.widths.bars.danger));f.unusedSpaceBarElement.width(b.convertToPercentageString(a))};
b.convertToPercentageString=function(a){return a+"%"};b.determineWarningElementsVisibility=function(a,b){100-b<=a?(f.warningThresholdTextElement.hide(),f.warningBarElement.hide()):(f.warningThresholdTextElement.show(),f.warningBarElement.show())};b.determineDangerElementsVisibility=function(a,b,c){100-c<=a+b?(f.dangerThresholdTextElement.hide(),f.dangerBarElement.hide()):(f.dangerThresholdTextElement.show(),f.dangerBarElement.show())};return f}
function CclResponsiveGrid(c){function e(){r=!1;g.trigger(CclResponsiveGrid.LoadingCompletedEventName)}function f(a){var b=l.scrollTop(),d=l.scrollLeft(),c=g.offset();c.frameTop=0;c.frameLeft=0;if(m){var e=$('iframe[name="mainmenu"]',l[0].document).offset();c.frameTop=e.top;c.frameLeft=e.left}e=c.top+c.frameTop+g.outerHeight()-h.outerHeight();b>=c.top+c.frameTop&&b<e?(h.hasClass(n)||(k.height(h.height()).show(),h.css("width",h.width()).addClass(n)),a?h.css("top",b-c.frameTop):h.css("left",c.left-
d)):h.hasClass(n)&&(k.hide(),h.removeClass(n).css("top","").css("left","").css("width",""))}function b(){h.hasClass(n)&&(h.removeClass(n).css("width",""),k.height(h.height()),h.css("width",h.width()).addClass(n))}function a(a,b){b&&(a+="[value='"+b+"']");return g.find(a)}window[c]=this;var d=this;d.name=c;d.gridClientID=null;d.pageSize=null;d.pageNumber=null;d.pagerInstanceName=null;d.cclGridConstants=null;d.pageNumberHiddenClientID=null;d.pageSizeHiddenClientID=null;d.preferenceCategoryName=null;
d.selectingHiddenClientID=null;d.sortingHiddenClientID=null;d.filteringHiddenClientID=null;d.selectColumn=null;d.selectedRow=null;d.ajaxSettings=null;d.totalCount=0;d.freezeToolbar=!1;d.scrollToControlOnPagination=!1;d.filteringPreference=null;d.sortingProperty=null;d.isIos=!1;d.isReorderModeAvailable=!1;d.orderProperty=null;d.reorderTogglerClientId=null;d.isReorderModeOn=!1;d.isReorderModeHandlerAttached=!1;var g,h,k,l=$(window),m=!1,n,p=0,r=!1;d.initialize=function(){g=$("#"+d.gridClientID);h=g.find("."+
d.cclGridConstants.cssClasses.toolbar);d.rowCheckBoxesSelector="."+d.cclGridConstants.cssClasses.gridRow+" ."+d.cclGridConstants.cssClasses.selectColumn+" input[type=checkbox]";d.headerRowCheckBoxesSelector="."+d.cclGridConstants.cssClasses.headerGridRow+" ."+d.cclGridConstants.cssClasses.selectColumn+" input[type=checkbox]";d.pageSizeHidden=document.getElementById(d.pageSizeHiddenClientID);d.pageNumberHidden=document.getElementById(d.pageNumberHiddenClientID);d.sortingHidden=document.getElementById(d.sortingHiddenClientID);
d.filteringHidden=document.getElementById(d.filteringHiddenClientID);d.selectingHidden=document.getElementById(d.selectingHiddenClientID);d.restoreState();d.attachEvents();d.ajaxSettings.useAjaxMode&&d.ajaxSettings.dataSourceWebMethodUrl&&!d.ajaxSettings.delayedInitialization&&d.refresh();if(d.freezeToolbar&&h.length){n=d.cclGridConstants.cssClasses.toolbarFreeze;k=$('<div style="display:none;"/>').attr("class",h.attr("class")).insertAfter(h);if(d.isIos&&(m=window.top!=window)){l=$(window.top);var a=
function(){f(!0)};l.on("scroll",a);$(window).on("unload",function(){l.off("scroll",a)})}$(window).scroll(function(){f()}).resize(function(){b()})}};d.useAjaxMode=function(){return d.ajaxSettings&&d.ajaxSettings.useAjaxMode};d.goToPage=function(a){d.clearSelection();d.pageNumber=a;d.refresh();d.scrollAfterPagination()};d.sort=function(a){d.sortingProperty!=a&&(d.sortingProperty=a,d.goToPage(1))};d.filter=function(a){d.filteringPreference!=a&&(d.filteringPreference=a,d.goToPage(1))};d.changePageSize=
function(a){d.pageSize=a;d.goToPage(1)};d.restoreState=function(){null!=d.pageSizeHidden&&(d.pageSize=parseInt(d.pageSizeHidden.value,10));null!=d.pageNumberHidden&&(d.pageNumber=parseInt(d.pageNumberHidden.value,10));null!=d.sortingHidden&&(d.sortingProperty=d.sortingHidden.value);null!=d.filteringHidden&&(d.filteringPreference=d.filteringHidden.value)};d.saveState=function(){null!=d.pageSizeHidden&&(d.pageSizeHidden.value=d.pageSize);null!=d.pageNumberHidden&&(d.pageNumberHidden.value=d.pageNumber);
null!=d.sortingHidden&&(d.sortingHidden.value=d.sortingProperty);null!=d.filteringHidden&&(d.filteringHidden.value=d.filteringPreference)};d._addRemoveSelectedValue=function(a,b){b?CCL.CommonFunctions.addIdToHidden($(d.selectingHidden),a):CCL.CommonFunctions.removeIdFromHidden($(d.selectingHidden),a)};d.toggleSelect=function(a){d._applySelectedRowClass(a.parentNode.parentNode,a.checked);d.updateHeaderRowCheckBoxSelection()};d.updateHeaderRowCheckBoxSelection=function(){var b=!0;a(d.rowCheckBoxesSelector).each(function(a,
c){b&&!c.checked&&(b=!1);d._addRemoveSelectedValue(c.value,c.checked)});a(d.headerRowCheckBoxesSelector).prop("checked",b)};d.getSelectedValues=function(){return null!=d.selectingHidden&&0<d.selectingHidden.value.length?d.selectingHidden.value.slice(0,d.selectingHidden.value.length-1).split(","):[]};d.getAllValues=function(){var a=[];d.getRows().each(function(){a.push($(this).data(d.cclGridConstants.dataAttributes.id))});return a};d.replaceKeyValue=function(b,c){a(d.rowCheckBoxesSelector,b).each(function(a,
e){e.value=c;e.checked&&(d._addRemoveSelectedValue(b,!1),d._addRemoveSelectedValue(c,!0))});var e=d.cclGridConstants.cssClasses.gridRow+"-";g.find("."+e+b+":first").removeClass(e+b).addClass(e+c)};d.isHeaderExist=function(){return g.find("."+d.cclGridConstants.cssClasses.headerGridRow).length};d.getRows=function(){return g.find("."+d.cclGridConstants.cssClasses.gridRow)};d.getSelectedRows=function(){return g.find("."+d.cclGridConstants.cssClasses.selectedRow)};d.getRowById=function(a){return g.find("."+
d.cclGridConstants.cssClasses.gridRow+"[data-"+d.cclGridConstants.dataAttributes.id+"="+a+"]:first")};d.deleteRowById=function(a,b){d.getRowById(a).remove();b&&eval(b)};d.getRowsContainer=function(){return g.find("."+d.cclGridConstants.cssClasses.gridRowsContainer+":first")};d.getRows=function(){return d.getRowsContainer().find("."+d.cclGridConstants.cssClasses.gridRow)};d.getRowsCount=function(){return d.getRows().length};d.toggleRowStatus=function(a,b){return d.getRowById(a).toggleClass(d.cclGridConstants.cssClasses.inactiveRow,
!b)};d.getGridElement=function(){return g};d.getToolbarElement=function(){return h};d.disableToolbarItem=function(a){a=d.getToolbarElement().find(a);0<a.length&&$(a.parent("li")).addClass("disabled")};d.getFeedback=function(){return window[d.feedbackInstanceName]};d.clearSelection=function(){null!=d.selectingHidden&&(d.selectingHidden.value="")};d._applySelectedRowClass=function(a,b){b?(b=d.cclGridConstants.cssClasses.selectedRow,a.className=a.className.replace(b,"").replace(/^\s+|\s+$/,""),a.className=
(a.className+" "+b).replace(/^\s+|\s+$/,"")):a.className=a.className.replace(d.cclGridConstants.cssClasses.selectedRow,"").replace(/^\s+|\s+$/,"")};d.toggleSelectAll=function(b){a(d.rowCheckBoxesSelector).each(function(a,c){c.checked=b;d._addRemoveSelectedValue(c.value,b);d._applySelectedRowClass(c.parentNode.parentNode,b)});a(d.headerRowCheckBoxesSelector).prop("checked",b)};d.toggleDisableAll=function(b){a(d.rowCheckBoxesSelector).each(function(a,d){d.disabled=b});a(d.headerRowCheckBoxesSelector).prop("disabled",
b)};d.addGridMessage=function(a){d.removeGridMessage();d.removeEmptyText();var b=d.getRowsContainer();a=$("<div></div>").addClass(d.cclGridConstants.cssClasses.gridText).html(a);b.before(a)};d.addGridLoadingMessage=function(){d.addGridMessage(d.cclGridConstants.terms.ajaxLoadingText)};d.removeGridMessage=function(){g.find("."+d.cclGridConstants.cssClasses.gridText+":first").remove()};d.refresh=function(){d.saveState();d.updateFreezeState();if(d.ajaxSettings.useAjaxMode){d.addGridLoadingMessage();
if(d.ajaxSettings.useChunkLoading&&0<d.ajaxSettings.chunkSize){p=0;var a=d.getRowsContainer();a.empty();a.css("display","none");return d.refreshChunks()}r=!0;return $.ajax({type:"POST",url:d.ajaxSettings.dataSourceWebMethodUrl,data:"pageNumber="+d.pageNumber+"&pageSize="+d.pageSize+"&sort="+d.sortingProperty+"&filter="+d.filteringPreference+d._getParamsStr(),dataType:"json",success:function(a){d.removeGridMessage();d.render(a);d.updateFreezeState();e()},error:function(){d.addGridMessage(d.cclGridConstants.terms.ajaxErrorText);
e()}})}d.postbackFunction()};d.refreshChunks=function(){0===p&&(r=!0);return $.when($.ajax({type:"POST",url:d.ajaxSettings.dataSourceWebMethodUrl,data:"pageNumber="+d.pageNumber+"&pageSize="+d.pageSize+"&sort="+d.sortingProperty+"&filter="+d.filteringPreference+"&chunkNumber="+p+"&chunkSize="+d.ajaxSettings.chunkSize+d._getParamsStr(),dataType:"json"})).done(function(a){"undefined"!==typeof a.noChunks?(a.noChunks?(d.removeGridMessage(),d.render(a,!0),d.updateFreezeState(),e()):(p++,d.render(a,!0),
d.refreshChunks()),d.getRowsContainer().css("display","")):(d.removeGridMessage(),d.addGridMessage(d.cclGridConstants.terms.ajaxErrorText))}).fail(function(){d.removeGridMessage();d.addGridMessage(d.cclGridConstants.terms.ajaxErrorText);e()})};d.isLoadingInProgress=function(){return r};d.scrollAfterPagination=function(){!0===d.scrollToControlOnPagination?$(window).scrollTop($("#"+d.gridClientID).offset().top):$(window).scrollTop(0)};d._getParamsStr=function(){var a="";$.each(d.ajaxSettings.dataSourceWebMethodParams,
function(b,d){a+="&"+b+"="+escape(d)});return a};d.getRowPrimaryKeyValue=function(a){return d.getCurrentRow(a).find("."+d.cclGridConstants.cssClasses.rowDetailsColumn+" ."+d.cclGridConstants.cssClasses.primaryKey).val()};d.getRowPrimaryKeyValueByIndex=function(a){return d.getRowsContainer().find("."+d.cclGridConstants.cssClasses.gridRow+":eq("+a+") ").find("."+d.cclGridConstants.cssClasses.rowDetailsColumn+" ."+d.cclGridConstants.cssClasses.primaryKey).val()};d.getRowPrimaryKeyValueByRow=function(a){return a.find("."+
d.cclGridConstants.cssClasses.rowDetailsColumn+" ."+d.cclGridConstants.cssClasses.primaryKey).val()};d.getRowIndex=function(a){return d.getCurrentRow(a).find("."+d.cclGridConstants.cssClasses.rowDetailsColumn+" ."+d.cclGridConstants.cssClasses.rowIndex).val()};d.getCurrentRow=function(a){return $(a).parents("."+d.cclGridConstants.cssClasses.gridRow)};d.setMode=function(a){d.getRowsContainer().attr("class",d.cclGridConstants.cssClasses.gridRowsContainer+" "+a)};d.render=function(a,b){b="undefined"!==
typeof b?b:!1;d.totalCount=b?d.totalCount+a.virtualCount:a.virtualCount;d.reInitializePager(d.pageNumber,d.pageSize,d.totalCount);var c=d.getRowsContainer();b?c.append(a.gridData):c.html(a.gridData);d.isReorderModeAvailable&&$("#"+d.reorderTogglerClientId).parent("li").removeClass(d.cclGridConstants.cssClasses.selectedItem);0<d.orderProperty.length&&(d.isReorderModeAvailable=0<=d.sortingProperty.indexOf(d.orderProperty)&&1<d.totalCount,d.attachReorderModeHandler(),0<d.reorderTogglerClientId.length&&
d.toggleReorderTogglerElement($("#"+d.reorderTogglerClientId),d.isReorderModeAvailable),"Auto"==d.reorderModeAjaxSettings.reorderMode&&d.toggleReorderMode());g.trigger("datachanged")};d.addNewRow=function(){return $.ajax({type:"POST",url:d.addNewSettings.webMethodUrl,data:d.addNewSettings.params||"{}",dataType:"json",success:function(a){d.render(a,!0);d.updateFreezeState();0<d.getRowsCount()&&d.getEmptyTextContainer().hide()},error:function(){d.addGridMessage(d.cclGridConstants.terms.ajaxErrorText)}})};
d.attachEvents=function(){g.on("click",d.headerRowCheckBoxesSelector,function(){d.toggleSelectAll($(this).prop("checked"))});g.on("click",d.rowCheckBoxesSelector,function(){d.toggleSelect(this)});g.on("change","."+d.cclGridConstants.cssClasses.sorting+" > select",function(){var a=$(this).val();d.sort(a)});if(d.freezeToolbar&&d.isIos)g.on("hybrideditoriteminlinemodechanged",function(a,b){b.isEditMode||f(!0)});d.isReorderModeAvailable&&d.attachReorderModeHandler()};d.reInitializePager=function(a,b,
c){var e=window[d.pagerInstanceName];e&&(e.pageNumber=a,e.pageSize=b,e.totalCount=c,e.render(),d.hidePagerWhenTotalCountLessMinPageSize?e.controls.pagerContainer.toggle(0<c&&d.totalCount>e.getMinAvailablePageSize()):e.controls.pagerContainer.toggle(0<c))};d.updateFreezeState=function(a){d.freezeToolbar&&h.length&&(f(a),b())};d.removeEmptyText=function(){d.getEmptyTextContainer().remove()};d.getEmptyTextContainer=function(){return d.getRowsContainer().children("."+d.cclGridConstants.cssClasses.emptyGridText)};
d.getRowOrderPropertyValue=function(a){return a.find("."+d.cclGridConstants.cssClasses.rowDetailsColumn+" ."+d.cclGridConstants.cssClasses.orderValue).val()};d.setRowOrderPropertyValue=function(a,b){return a.find("."+d.cclGridConstants.cssClasses.rowDetailsColumn+" ."+d.cclGridConstants.cssClasses.orderValue).val(b)};d.setRowIndexPropertyValue=function(a,b){return a.find("."+d.cclGridConstants.cssClasses.rowDetailsColumn+" ."+d.cclGridConstants.cssClasses.rowIndex).val(b)};d.attachReorderModeHandler=
function(){!d.isReorderModeHandlerAttached&&d.isReorderModeAvailable&&($("."+d.cclGridConstants.cssClasses.reorderModeSelector).sortable({axis:"y",scroll:!0,scrollSensitivity:50,scrollSpeed:10,handle:"."+d.cclGridConstants.cssClasses.reorderModeDragHandler,cursor:"move",items:"> ."+d.cclGridConstants.cssClasses.reorderMode}),g.find("."+d.cclGridConstants.cssClasses.reorderModeSelector).on("sortstart",function(a,b){b.item.hasClass(d.cclGridConstants.cssClasses.reorderMode)&&b.item.data(d.cclGridConstants.dataAttributes.startPosition,
b.item.index())}),g.find("."+d.cclGridConstants.cssClasses.reorderModeSelector).on("sortstop",function(a,b){if(b.item.hasClass(d.cclGridConstants.cssClasses.reorderMode)){var c=d.isHeaderExist()?1:0;a=b.item.data(d.cclGridConstants.dataAttributes.startPosition)-c;c=b.item.index()-c;var e=d.getRowsCount();if(a!=c){b=d.getRowPrimaryKeyValueByRow(b.item);var f=c>a?c==e-1?d.getRowPrimaryKeyValueByIndex(c-1):d.getRowPrimaryKeyValueByIndex(c+1):d.getRowPrimaryKeyValueByIndex(c+1);d.useAjaxMode()?d.callReorderModeUpdateMethod(b,
f,a,c,c==e-1):"undefined"!==typeof d.reorderModeAjaxSettings.reorderModeCallbackClientFunction&&d.reorderModeAjaxSettings.reorderModeCallbackClientFunction(null)}}}),d.isReorderModeHandlerAttached=!0)};d.toggleReorderMode=function(){d.isReorderModeOn="Auto"==d.reorderModeAjaxSettings.reorderMode?!0:!d.isReorderModeOn;$("#"+d.reorderTogglerClientId).parent("li").toggleClass(d.cclGridConstants.cssClasses.selectedItem,d.isReorderModeOn);d.getRowsContainer().find("."+d.cclGridConstants.cssClasses.gridRow).toggleClass(d.cclGridConstants.cssClasses.reorderMode,
d.isReorderModeOn);g.find("."+d.cclGridConstants.cssClasses.reorderModeColumnSelector+" div > img").toggleClass(d.cclGridConstants.cssClasses.hidden,!d.isReorderModeOn)};d._getReorderParamsStr=function(){var a="";$.each(d.reorderModeAjaxSettings.reorderModeWebMethodParams,function(b,d){a+="&"+b+"="+escape(d)});return a};d.callReorderModeUpdateMethod=function(a,b,c,e,f){return $.ajax({type:"POST",url:d.reorderModeAjaxSettings.reorderModeWebMethodUrl,data:"sourceId="+a+"&targetId="+b+"&oldIndex="+c+
"&newIndex="+e+"&insertAfterTargetItem="+f+d._getReorderParamsStr(),dataType:"json",success:function(a){"undefined"!==typeof d.reorderModeAjaxSettings.reorderModeCallbackClientFunction&&d.reorderModeAjaxSettings.reorderModeCallbackClientFunction(a)},error:function(a,b,c){$("."+d.cclGridConstants.cssClasses.reorderModeSelector).sortable("cancel")}})};d.toggleReorderTogglerElement=function(a,b){var d=a.attr("id"),c=a.html(),e=a.attr("class");b?(a.parent("li").removeClass("disabled"),a.replaceWith('<a href="#" id="'+
d+'" class="'+e+'" onclick="javascript:'+this.name+'.toggleReorderMode();">'+c+"</a>")):(a.parent("li").addClass("disabled"),a.replaceWith('<span id="'+d+'" class="'+e+'">'+c+"</span>"))}}CclResponsiveGrid.LoadingCompletedEventName="ResponsiveGrid:LoadingCompleted";
function RubricAssessmentCriteriaList(c){function e(a,b,d){za[a]&&delete za[a];document.getElementById(d).remove();b=b||0===Object.keys(za).length;$(document).trigger(A.deleteLearningObjectiveEvent,{learningObjectiveId:a,reloadPage:b})}function f(b,d,c){Oa(b,d,c,!1);a();b.toggleSelectAll(!1)}function b(a,b,d,c,e){if(0<b){Q[a]={LearningObjectiveId:a,Status:b,MasteryOption:d,Comment:c};ha.overriddenCriteriaAssessmentsHidden.val(JSON.stringify(Q));var f=e.find(String.format("> span.{0}",y.statusBox)),
g=e.siblings("."+y.overrideMasterText).find("span."+y.masteredBoxHolder),h=g.find("> span");g=g.find("> img");var k=e.siblings("."+y.overrideComment);e=k.find("."+y.overrideCommentText);k=k.find("."+y.overrideCommentLabel);n(f,b);k.parent().toggle(""!=c);e.text(c);A.useMastery&&(T[a].BreaksRecurrence&&d!==ua.mastered?m(h,g,!1):(c=T[a].AffectsByLevel,f=T[a].AffectsByResettingMastery,a=T[a].MasteredWithoutOverride,d===ua.mastered?m(h,g,!0):f&&(c?(b=p(b),m(h,g,b>=A.masteryStartsAt)):m(h,g,a))))}}function a(){A.searchSharedCriteriaBox&&
window[A.searchSharedCriteriaBox]&&window[A.searchSharedCriteriaBox].refresh()}function d(a,b){G(a);B(a,b);D(a);E(a)}function g(a){a=$(a.data);var b=a.parent(),d=a.hasClass(y.selectedBox);b.children("li."+y.selectedBox).removeClass(y.selectedBox);b.find("li span."+y.star).removeClass(y.starOn).addClass(y.starOff);var c=ia(a.find("input[type=hidden]").val()),e=c.key;c=c.value;d?(xa[e]=A.rubricAssessmentCustomNull,b.find("li."+y.criteriaDescriptionRow).hide()):(a.addClass(y.selectedBox),a.find("span."+
y.star).removeClass(y.starOff).addClass(y.starOn),xa[e]=c,b.find("li."+y.criteriaDescriptionRow).show());ha.updatedCriteriaAssessmentsHidden.val(JSON.stringify(xa));ha.updatedCriteriaAssessmentsHidden.trigger("change");A.showOverride&&(a=b.parents("."+y.criteriaContainer),b=a.find("div."+y.overrideStatusBoxContainer).data("learningobjectiveid").toString(),l(a.find("ul."+y.row),b));a=k();h(a)}function h(a){function b(a){if(-1!==a){var b=Math.pow(10,2);a=(Math.round(A.assessmentUpdaterSettings.maxScore*
a/100*b)/b).toString();"."!==A.assessmentUpdaterSettings.numberDecimalSeparator&&0<a.indexOf(".")&&(a=a.replace(".",A.assessmentUpdaterSettings.numberDecimalSeparator));return a}return""}function d(a){var b=$.grep($a,function(b,d){return a>=b});return A.assessmentUpdaterSettings.assessmentPercentage[b[b.length-1]]}A.assessmentUpdaterSettings.connectAssessmentCriteriaToScale&&(A.assessmentUpdaterSettings.useScore&&Z.callbacks.scoreSetValueFunction?Z.callbacks.scoreSetValueFunction(b(a)):A.assessmentUpdaterSettings.useAssessment&&
Z.callbacks.assessmentSetValueFunction&&Z.callbacks.assessmentSetValueFunction(d(a)),db.show())}function k(){var a=0,b=0,d=[];$("."+y.selectedBox).each(function(){var a=ia($(this).find("input[type=hidden]").val());d[a.key]=a.value});$.each(A.achievementLevelsPoints,function(c,e){if(d[c]&&0!=d[c]){var f=d[c],g=0;$.each(e,function(a,b){b>g&&(g=b)});a+=A.achievementLevelsPoints[c][f];b+=g}});return 0<b?a/b*100:-1}function l(a,b){if(A.showOverride){var d=0,c=a.length;a.each(function(){var a=$(this),b=
a.find("li."+y.column),e=a.find("li."+y.selectedBox);a=b.index(e)+1;A.achivementLevelOrderDirection==Ea.lowestToHighest&&(a=$(b.get().reverse()).index(e)+1);1<=a?(b=b.length,d+=100*(b-a+1)/b):c--});var e=d/c;a=a.parents("."+y.criteriaContainer);var f=a.find(String.format("div.{0} > span.{1}",y.overrideStatusBoxContainer,y.statusBox)),g=a.find("span."+y.masteredBoxHolder);a=g.find("> span");g=g.find("> img");1<=e?$.each(L,function(a,d){a=(a=a+1<L.length?L[a+1]:null)?a.startsAt:A.maximumPercentageValue;
e>=d.startsAt&&e<a&&(Fa[b]=Aa[d.type].Title,ha.assessmentStatusesByCriteriaHidden.val(JSON.stringify(Fa)),null==Q[b]&&n(f,d.type))}):(Fa[b]=Aa[Pa.notAssessed].Title,ha.assessmentStatusesByCriteriaHidden.val(JSON.stringify(Fa)),null==Q[b]&&n(f,Pa.notAssessed));if(A.useMastery&&(null==Q[b]||!Q[b].MasteryOption))if(T[b].BreaksRecurrence)m(a,g,!1);else{var h=T[b],k=h.AffectsByLevel;h.AffectsByResettingMastery&&k&&(h=Q[b],h=null==h?e:p(h.Status),m(a,g,h>=A.masteryStartsAt))}}}function m(a,b,d){a.text(A.useMastery&&
d?Ua.mastered:Ua.notMastered);a.removeClass(y.noPrint);a.addClass(A.useMastery&&d?"":y.noPrint);b.prop("src",A.useMastery&&d?aa.masteredIcon:aa.notMasteredIcon);b.removeClass(y.noPrint);b.addClass(A.useMastery&&d?"":y.noPrint)}function n(a,b){$.each(Aa,function(b,d){a.removeClass(d.CssClass)});a.addClass(Aa[b].CssClass);a.text(Aa[b].Title)}function p(a){var b=0;$.each(L,function(d,c){c.type==a&&(b=c.startsAt)});return b}function r(a,b,d,c){d=a.getRowById(d);var e=d.find("."+y.row+":first").find("a."+
y.criteriaWeight).text(),f=$(b);f.find("a."+y.undoLink).click(function(){t(a,f,e?e:0,c)});f.find("a."+y.undoCloseImage).click(function(){f.remove()});d.replaceWith(f)}function w(a,b,c){var e=window[za[a]].getRowsContainer(),f=0===q(e);b=$(b).appendTo(e);f&&0<q(e)&&(e.children("."+y.gridEmptyText).remove(),$(document).trigger(A.emptyStateChangedEvent,{isAnyEmpty:v(),loUpdate:{id:a,isEmpty:!1}}));d(b,c);Ha()}function t(a,b,c,e){var f=b.children("input:first").val();$.ajax({type:"post",url:A.webMethods.restoreCriteria,
dataType:"html",data:{courseId:A.courseId,criteriaJson:f,showCriteriaWeights:A.showCriteriaWeights,criteriaWeightToRestore:c}}).done(function(f){f=$(f);var g=f.find("."+y.row+":first");b.replaceWith(f);f.find("a."+y.criteriaWeight).text(c);g=g.next().val();ea(e,g,c);d(f,!1);f.scrollMinimal();f=a.getRowsContainer();1===q(f)&&(f.children("."+y.gridEmptyText).remove(),$(document).trigger(A.emptyStateChangedEvent,{isAnyEmpty:v(),loUpdate:{id:e,isEmpty:!1}}))}).fail(ka)}function v(){return 0<$("div."+
y.criteriaContainer).filter(function(){return 0===q(this)}).length}function q(a){return $("."+y.row,a).length}function z(a){a=a.find("."+y.criteriaLevelDescription);$.each(a,function(a,b){a={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:y.inlineEditor,maxLength:1024};new ClientInlineEditor($(b),void 0,$(b).parent().find("input").last(),a,C,ma,void 0)})}function C(a,b){var d=a.source.parents("ul").next().val();na[d]=a.actualText;ha.updatedCriteriaDecriptionsHidden.val(JSON.stringify(na));
a.isUpdateSuccess=!0;b(a)}function G(a){a=a.find("."+y.criteriaItem);$.each(a,function(a,b){if(u(b))return!0;a={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:y.inlineEditor,maxLength:A.criteriaItemDescriptionMaxLength};new ClientInlineEditor($(b),void 0,$(b).parent().find("input").last(),a,J,ma,void 0)})}function u(a){return 0<$(a).closest(CommonFunctions.formatString(".{0},.{1}",y.officialCriteria,y.criteriaOfObsoleteLearningObjective)).length}function B(a,b){a=a.find("."+y.criteriaTitle);
$.each(a,function(a,d){if(u(d))return!0;a=new ClientInlineEditor(d,void 0,void 0,{submitOnEnter:!0,editFieldDisplayInline:!0,editFieldAutoWidth:!1,editFieldCssClass:y.criteriaTitle,maxLength:64},I,void 0,{isTitle:!0});b&&a.switchToEditMode().select()})}function D(a){a=a.find("."+y.criteriaDescription);$.each(a,function(a,b){if(u(b))return!0;a={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:y.inlineEditor,maxLength:A.criteriaItemDescriptionMaxLength};new ClientInlineEditor(b,void 0,
$(b).parent().find("input").last(),a,I,ma,{isTitle:!1})})}function E(a){a=a.find("."+y.criteriaWeight);$.each(a,function(a,b){new ClientInlineEditor(b,void 0,void 0,{submitOnEnter:!0,editFieldDisplayInline:!0,editFieldAutoWidth:!1,editFieldCssClass:y.criteriaWeight,maxLength:3},R,X,void 0)})}function I(a,b){var d=a.source.parents("ul").next().val();a.actualText=$.trim(a.actualText);a.userData.isTitle&&!a.actualText.length?(a.isUpdateSuccess=!1,b(a)):$.ajax({type:"post",url:A.webMethods.updateCriteria,
dataType:"json",data:{courseId:A.courseId,criteriaId:d,text:a.actualText,isTitle:a.userData.isTitle}}).done(function(b){a.isUpdateSuccess=!0;var c=a.source.parents("ul");Ga(c);b&&(S(b.learningObjectiveId,c,b.criteriaId),window[za[b.learningObjectiveId]].replaceKeyValue(d,b.criteriaId))}).fail(function(b,d,c){a.isUpdateSuccess=!1;ka(b,d,c)}).always(function(){b(a)})}function R(a,b){var d=parseInt(a.source.parents("."+y.criteriaContainer).siblings("input[type=hidden]").val()),c=a.source.parents("ul").next().val(),
e=a.source.parents("ul"),f=!$.trim(a.actualText).length||!/^[1-9][0-9]?$|^100$/.test(a.actualText);e.find("."+y.criteriaWeightValidationMessage).toggle(f);f?(a.stopOnEdit=!0,a.isUpdateSuccess=!1):(ja&&(f=parseInt(a.actualText),da(f,e),ea(d,c,f)),a.isUpdateSuccess=!0);b(a)}function X(a){a.isEditMode||a.source.parents("ul").find("."+y.criteriaWeightValidationMessage).hide()}function da(a,b){b=b.find("."+y.criteriaItemWeight);var d=A.achivementLevelOrderDirection==Ea.lowestToHighest?1:b.length;$.each(b,
function(b,c){c.innerHTML=d*a;A.achivementLevelOrderDirection===Ea.lowestToHighest?d++:d--})}function J(a,b){var d=a.source.parents("li");d=ia(d.find("input[type=hidden]").val());var c=d.key;d=d.value;a.actualText=$.trim(a.actualText);$.ajax({type:"post",url:A.webMethods.updateCriteriaItem,dataType:"json",data:{courseId:A.courseId,criteriaId:c,levelId:d,text:a.actualText}}).done(function(b){a.isUpdateSuccess=!0;var d=a.source.parents("ul");Ga(d);b&&(S(b.learningObjectiveId,d,b.criteriaId),window[za[b.learningObjectiveId]].replaceKeyValue(c,
b.criteriaId))}).fail(function(b,d,c){a.isUpdateSuccess=!1;ka(b,d,c)}).always(function(){b(a)})}function S(a,b,d){M(a,b,d);b.next().val(d);a=b.find("li."+y.column+" > input[type=hidden]");$.each(a,function(a,b){a=$(b);b=ia(a.val());b.key=d.toString();a.val(JSON.stringify(b))})}function M(a,b,d){if(ja){var c=b.next().val();b=parseInt(b.find("."+y.criteriaWeight+":first").text());ja&&ja[a]&&delete ja[a][c];ea(a,d,b)}}function ea(a,b,d){ja&&0<d&&(ja[a]||(ja[a]={}),ja[a][b]=d,Ha())}function Ha(){$(document).trigger(A.criteriaWeightsChangedEvent,
{data:ja,loCriteriaWeights:va()})}function va(){var a={};$("."+y.criteriaContainer).each(function(){var b=$(this),d=parseInt(b.siblings("input[type=hidden]").val());a[d]=0;$("a."+y.criteriaWeight,b).each(function(){var b=$(this),c=b.siblings("input."+y.criteriaWeight);a[d]+=parseInt(c.length?c.val():b.text())})});return a}function ma(a){var b=a.source;a.isEditMode||b.parent().find("input").last().val()?b.removeClass(y.criteriaItemEmptyState):(b.addClass(y.criteriaItemEmptyState),b.text(A.watermark))}
function wa(a,b){$.each(b,function(b,d){b=a.getRowById(d).find("."+y.row+":first");b.find("img."+y.shareLoadingIcon).show();b.find("img."+y.shareIcon).hide()})}function Oa(a,b,d,c){$.each(d,function(d,e){d=a.getRowById(e).find("."+y.row+":first");var f=d.find("img."+y.shareIcon);void 0!=b[e]&&(f.attr("title",c?b[e]:""),f.toggle(c),d.find("img."+y.reshareIcon).hide());d.find("img."+y.shareLoadingIcon).hide()})}function Ga(a){a.find("img."+y.reshareIcon).toggle(a.find("img."+y.shareIcon).is(":visible"))}
function ka(a,b){a.status>=CCL.CommonConstants.httpStatusCodes.badRequest&&alert(!0===b&&a.statusText.length?a.statusText:Z.settings.terms.errorOccured)}function ia(a){return JSON.parse(a||"{}")}function Ca(){var a=$.find("img."+y.shareLoadingIcon+":visible");$.each(a,function(a,b){b.hide()})}window[c]=this;var Z=this,A,ha,y,Aa,xa,na,L,Q,Fa,Ea,ja={},za,Sa,Pa,ua,Ua,aa,T,$a=[],db;Z.initialize=function(){A=Z.settings;ha=Z.controls;y=A.cssClasses;Aa=A.assessmentStatuses;xa=ia(ha.updatedCriteriaAssessmentsHidden.val());
na=ia(ha.updatedCriteriaDecriptionsHidden.val());Ea=A.achievementLevelOrder;za=ia(A.grids);Sa=ia(A.officialCriteriaGrids);A.criteriaWeightsData&&(ja=JSON.parse(A.criteriaWeightsData));if(A.assessMode){z(ha.container);var a=ha.container.find("ul li."+y.column);$.each(a,function(a,b){$(b).click(b,g)});Pa=A.assessmentStatusType;ua=A.learningObjectiveOverrideMasteryOption;Ua=A.terms;aa=A.imgUrls;L=ia(ha.activeAssessmentStatusesHidden.val());Q=ia(ha.overriddenCriteriaAssessmentsHidden.val());Fa=ia(ha.assessmentStatusesByCriteriaHidden.val());
T=ia(ha.possibleMasteredLearningObjectivesHidden.val());A.assessmentUpdaterSettings.connectAssessmentCriteriaToScale&&(A.assessmentUpdaterSettings.assessmentPercentage&&($.each(A.assessmentUpdaterSettings.assessmentPercentage,function(a,b){$a.push(a)}),$a.sort(function(a,b){return a-b})),db=$("#"+A.assessmentUpdaterSettings.assessmentChangedWarningLabelClientId))}if(A.manageMode&&(d(ha.container,!1),A.isIosDevice))$("input."+y.addButton).on("touchend",function(){$(this).click()});if(A.showOverride)ha.changeReportStatusControl.on(Z.settings.events.saveOverridingsEvent,
function(a){Z.saveOverridings()});$(function(){$(document).on(Z.settings.events.addSharedCriteriaJsEvent,function(a,b){$.each(b.Criteria,function(a,b){w(a,b,!1)});b.IsThereMismatchBetweenLevelsCount&&A.levelsMismatchWarningClientId&&$("#"+A.levelsMismatchWarningClientId).show()})})};Z.deleteLearningObjective=function(a,b,d,c){A.webMethods.deleteLearningObjective?$.ajax({type:"post",url:A.webMethods.deleteLearningObjective,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({courseId:A.courseId,
topicId:d,learningObjectiveId:a})}).done(function(){e(a,b,c)}).fail(function(a){ka(a,!0)}):e(a,b,c)};Z.addCriteria=function(a){$.ajax({type:"post",url:A.webMethods.addCriteria,dataType:"html",data:{courseId:A.courseId,learningObjectiveId:a,showCriteriaWeights:A.showCriteriaWeights}}).done(function(b){w(a,b,!0)}).fail(ka)};Z.saveStatusOverridings=function(a,d,c){A.showOverride&&(c=c.toString(),a=0<a.length?parseInt(a):0,b(c,a,0,"",d.controls.container.parents("div."+y.overrideStatusBoxContainer).first()))};
Z.saveOverridings=function(){if(A.showOverride){var a=ha.learningObjectiveIdHidden.val(),d=$(String.format(".{0} option:selected",y.overrideStatusDropdown)).val();d=0<d.length?parseInt(d):0;var c=parseInt(A.useMastery?$(String.format(".{0} option:selected",y.overrideMasteryDropdown)).val():0),e=$(String.format(".{0}",y.overrideStatusComment)).val().substring(0,A.maximumCommentLength);b(a,d,c,e,$("a[rel="+a+"]").parent())}};Z.shareSelectedCriterias=function(b,d){var c=window[za[b]],e=c.getSelectedValues();
1>e.length?alert(A.terms.noSelectionForSharing):(wa(c,e),$.ajax({type:"post",url:A.webMethods.shareCriteria,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({courseId:A.courseId,hierarchyId:d,criteriaIdsJson:JSON.stringify(e)})}).done(function(b){Oa(c,b.d,e,!0);a();c.toggleSelectAll(!1)}).fail(function(a){ka(a,!0)}).always(function(){Ca()}))};Z.stopSharingSelectedCriterias=function(a){var b=window[za[a]],d=b.getSelectedValues();1>d.length?alert(A.terms.noSelectionForSharing):
(wa(b,d),$.ajax({type:"post",url:A.webMethods.stopSharingCriteria,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({courseId:A.courseId,criteriaIdsJson:JSON.stringify(d)})}).done(function(a){f(b,a.d,d)}).fail(ka).always(function(){Ca()}))};Z.removeSelectedCriterias=function(a){var b=window[za[a]],d=b.getSelectedValues();d.length?($.ajax({type:"post",url:A.webMethods.deleteCriteria,dataType:"html",data:{courseId:A.courseId,criteriaIdsJson:JSON.stringify(d)}}).done(function(c){c=
ia(c);f(b,c.criteriaToUnshare,d);$.each(c.criterias,function(d,c){r(b,c,d,a);ja&&ja[a]&&delete ja[a][d]});Ha();c=b.getRowsContainer();if(0===q(c)){var e=b.getGridElement().find("."+y.criteriaEmptyGridText);0<e.length&&c.append(e.html());c=!1;(e=window[Sa[a]])?(e=e.getRowsContainer(),0===q(e)&&(c=!0)):c=!0;c&&$(document).trigger(A.emptyStateChangedEvent,{isAnyEmpty:!0,loUpdate:{id:a,isEmpty:!0}})}}).fail(ka),b.toggleSelectAll(!1)):alert(A.terms.noSelectionForRemoval)}}
function SafeConsoleLogger(){var c={},e={noop:function(){}};e.safeLogger={assert:e.noop,count:e.noop,dir:e.noop,error:e.noop,group:e.noop,groupEnd:e.noop,info:e.noop,log:e.noop,time:e.noop,timeEnd:e.noop,trace:e.noop,warn:e.noop};e.initialize=function(){objectState.isNullOrUndefined(window.console)||(e.safeLogger=window.console)};c.assert=function(c){e.safeLogger.assert(c)};c.count=function(c){e.safeLogger.count(c)};c.dir=function(c){e.safeLogger.dir(c)};c.error=function(c){e.safeLogger.error(c)};
c.group=function(c){e.safeLogger.group(c)};c.groupEnd=function(c){e.safeLogger.groupEnd(c)};c.info=function(c){e.safeLogger.info(c)};c.log=function(c){e.safeLogger.log(c)};c.time=function(c){e.safeLogger.time(c)};c.timeEnd=function(c){e.safeLogger.timeEnd(c)};c.trace=function(c){e.safeLogger.trace(c)};c.warn=function(c){e.safeLogger.warn(c)};e.initialize();return c}var safeConsoleLogger=SafeConsoleLogger();
$.widget("itslccl.searchTextBox",$.itslccl.extendedTextBox,{options:{searchInput:void 0,container:void 0,searchLink:void 0,fakeInput:void 0,searchKeyStorage:void 0,textSearchEvent:void 0,usePostBack:!1,clearByEsc:!1,postBackReference:void 0},_create:function(){this._super();var c=this,e=this.options.searchInput,f=this.options.searchLink,b=this.options.fakeInput;e.keydown(function(a){return a.which!==CommonConstants.keyCodes.enter||a.shiftKey?!0:(c._doSearch(),!1)});e.keyup(function(a){c.options.clearByEsc&&
a.which===CommonConstants.keyCodes.escape&&c._clearSearchBox();return!0});f&&f.click(function(a){a.preventDefault();c._doSearch()});b&&b.focus(function(){e.focus()})},_clearSearchBox:function(){this.options.searchInput.val("");this.options.searchInput.focus()},_doSearch:function(){this.options.searchInput.focus();var c=this._isWatermarkMode?"":$.trim(this.options.searchInput.val());this.options.usePostBack?(this._saveSearchTextToHiddenField(),eval(this.options.postBackReference)):this.options.container.trigger(this.options.textSearchEvent,
c)},_saveSearchTextToHiddenField:function(c){!this.options.usePostBack&&c?this.options.searchKeyStorage.val($.trim(c)):this.options.searchKeyStorage.val($.trim(this.options.searchInput.val()))}});
function SearchTextBox(c,e){window[c]=this;var f=this;e&&SearchTextBox.instances.push(this);f.initialize=function(){f.controls={searchInput:$("#"+f.controlIds.searchInputId),container:$("#"+f.controlIds.containerId),searchLink:$("#"+f.controlIds.searchLinkId),fakeInput:$("#"+f.controlIds.fakeInputId),searchKeyStorage:$("#"+f.controlIds.searchKeyStorageId)};var b=f.controls.searchInput;e&&b.hasClass(f.settings.focusRequiredCssClass)&&b.focus();b.searchTextBox({searchInput:f.controls.searchInput,container:f.controls.container,
searchLink:f.controls.searchLink,fakeInput:f.controls.fakeInput,searchKeyStorage:f.controls.searchKeyStorage,watermarkText:f.settings.watermarkText,watermarkCssClass:f.settings.watermarkCssClass,textSearchEvent:f.settings.textSearchEvent,clearByEsc:f.settings.clearByEsc,usePostBack:f.settings.usePostBack,postBackReference:f.settings.postBackReference,focusRequiredCssClass:f.settings.focusRequiredCssClass})};f.clearSearch=function(){f.controls.searchInput.val("")};f.autocompleteopen=function(b,a){var d=
f.controls.searchInput.autocomplete("widget");if(1<$(".ui-menu-item",d).length){var c=f.controls.searchInput.autocomplete("option","select");f.controls.searchInput.autocomplete({select:function(a,b){if(-1!==b.item.id)c(a,b);else{var e=[];$(".ui-menu-item:not(.ccl-searchtextbox-select-all)",d).each(function(){e.push($(this).data("ui-autocomplete-item"))});f.controls.searchInput.trigger("autocompleteselectall",{items:e});f.controls.searchInput.autocomplete("close")}}});b=$("<li></li>").data("ui-autocomplete-item",
{id:-1,value:""}).attr("class","ui-menu-item ccl-searchtextbox-select-all").appendTo(d);$("<a></a>").attr("href","#").text(f.settings.selectAllText).appendTo(b)}}}SearchTextBox.instances=[];SearchTextBox.initialize=function(){for(var c=0,e=this.instances.length;c<e;c+=1)this.instances[c].initialize()};
function StarsSelector(c){window[c]=this;var e=this,f,b;e.initialize=function(){function a(a){a=isNaN(a)?0:a;e.settings.activeIconCss&&e.settings.inactiveIconCss?(b.filter(":lt("+a+")").find("i").removeClass().addClass(e.settings.activeIconCss),b.filter(":eq("+a+"), :gt("+a+")").find("i").removeClass().addClass(e.settings.inactiveIconCss)):e.settings.activeIconUrl&&e.settings.inactiveIconUrl&&(b.filter(":lt("+a+")").find("img").prop("src",e.settings.activeIconUrl),b.filter(":eq("+a+"), :gt("+a+")").find("img").prop("src",
e.settings.inactiveIconUrl))}f=e.controls.ratingHidden;b=e.controls.starsContainer.find("a");b.click(function(d){d=b.index(this)+1;f.val()!=d&&(f.val(d).change(),a(d));return!1}).mouseover(function(d){a(b.index(this)+1)}).mouseout(function(b){a(parseInt(f.val()))});$(document).on(e.settings.showRateEventName,function(b,c){f.val()!=c&&(f.val(c),a(c))});$(document).on(e.settings.rateSuccessEventName,function(a,c){a=b.filter(":lt("+c+")");for(c=0;2>c;c++)a.fadeTo("normal",.5).fadeTo("normal",1)})};return e}
function MakeTableHighlightable(c){function e(c){var b="mouseenter"==c.type;$("tr > :nth-child("+($(this).index()+1)+")",$(c.delegateTarget)).toggleClass("ccl-table-highlight",b);$(this).parent().toggleClass("ccl-table-highlight",b)}c.delegate("td","mouseenter mouseleave",e);c.delegate("tbody th","mouseenter mouseleave",e)}
(function(c,e){var f=c.TextBoxAutoCompleteManager={commonSettings:e,makeTextBoxAutocomplete:function(b,a,d,g){function h(a,b){a=a.split(" ");var d=b.split(" "),c=-1,e=!0,f=!1;$.each(a,function(a,b){f=!1;$.each(d,function(a,d){if(f=0==d.indexOf(b))return c=a,!1});-1<c&&(d.splice(c,1),c=-1);e=f&&e});return e}function k(){t.autocomplete("widget").is(":visible")?t.autocomplete("close"):($(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close"),t.autocomplete("option","minLength",0),t.autocomplete("search",
""));t.focus()}function l(){var a=t.get(0);b.isIos?a.setSelectionRange(0,a.value.length):a.select()}function m(a,d){var c=!1;$.each(a,function(a,e){a=b.caseSensitiveSearch?d:d.toLowerCase();if((b.caseSensitiveSearch?e.value:e.value.toLowerCase())===a)return c=!0,!1});return c}function n(){b.allowCustomText||(m(b.values,t.val())?b.defaultText=t.val():(b.defaultText?t.val(b.defaultText):t.val(""),p(!1)));a&&a();b.isAutoPostBack&&t.closest("form").submit()}function p(a){b.useHighlight&&v.toggleClass(f.commonSettings.cssClasses.highlight,
a)}function r(a){var d=b.caseSensitiveSearch?$(this).val():$(this).val().toUpperCase(),c=t.data("ui-autocomplete");c.widget().children(".ui-menu-item").each(function(){var a=$(this).data("ui-autocomplete-item");if((b.caseSensitiveSearch?a.value:a.value.toUpperCase())===d)return c.selectedItem=a,!1});c.selectedItem&&c._trigger("select",a,{item:c.selectedItem})}var w=!0,t=$("#"+b.textboxId),v=t.parent(),q=c[b.textboxId]=t;b.isDropDown&&(b.minLength=0);t.autocomplete({autoFocus:!0,source:function(a,
d){d($.map(b.values,function(d){var c=b.caseSensitiveSearch?a.term:a.term.toLowerCase(),g=b.caseSensitiveSearch?d.value:d.value.toLowerCase();switch(b.filterType){case f.commonSettings.filterType.wordStartsWith:return h(c,g)?d:e;default:return 0<=g.indexOf(c)?d:e}}))},delay:b.delay,minLength:b.minLength,change:function(a,d){b.defaultText!==t.val()&&n()},close:function(a,b){d&&d();w=!0},select:function(a,b){q.selectValue(b.item);n()},open:function(a,d){b.zIndex&&t.autocomplete("widget").css("z-index",
b.zIndex);w=!1},create:function(a,d){t.data("autocompleteItemId",b.defaultValue)},messages:{noResults:b.terms.noResults,results:function(a){return 1==a?b.terms.oneResult:b.terms.resultsTemplate.replace("{0}",a.toString())}}});t.keyup(function(){p(!!t.val()&&!m(b.values,t.val()))}).keydown(function(a){a.which===CommonConstants.keyCodes.enter&&(w||a.preventDefault(),b.defaultText!==t.val()&&(a.preventDefault(),n()),t.autocomplete("close"))}).click(l).on("autocompletesearchcomplete",function(a,b){});
q.selectValue=function(a){p(!1);t.val(a.value);t.data("autocompleteItemId",a.id);$(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close");g&&g(a)};q.getValue=function(){return t.data("autocompleteItemId")};b.isDropDown&&($("#"+b.buttonId).click(k).click(l),t.click(k),t.blur(r))}}})(window);
(function(c){var e={},f=!1,b=c.TextEditorManager={commonSettings:void 0,addStartupFunction:function(a,b){e[a]=b},textEditorSetup:function(){function a(a,b,c){if(a=a.getButton(b))c=$("#"+a.domId).removeClass().addClass(c).removeAttr("title"),a=c.find("span").removeClass(),c.append(document.createTextNode(a.text())),a.text("")}f||(f=!0,c.CKEDITOR&&(CKEDITOR.on("dialogDefinition",function(d){d=d.data.definition;var c=d.onLoad;d.onLoad=function(){a(this,"ok",b.commonSettings.cssClasses.ok);a(this,"cancel",
b.commonSettings.cssClasses.cancel);if(c)return c.apply(this,arguments)}}),CKEDITOR.on("instanceReady",function(a){(a=e[a.editor.name])&&a()}),CommonFunctions.attachPostMessageEventListener($(c),CommonWindowMessages.MessageNames.textEditorInteraction,function(a,b){switch(a.interactionType){case CommonWindowMessages.TextEditorInteractionType.CloseDialog:CloseDialog();return;case CommonWindowMessages.TextEditorInteractionType.InsertHtml:InsertHtml(a.htmlContent,a.editorInstanceId,a.isEmbeddedImage);
break;case CommonWindowMessages.TextEditorInteractionType.InsertLinkToFile:b=CKEDITOR;var d=b.dialog.getCurrent()._.editor,c={href:a.linkUrl,target:"_blank"};d.focus();var e=d.getSelection(),f=e.getRanges(!0);if(1==f.length&&f[0].collapsed){var g=new b.dom.text(a.linkName,d.document);f[0].insertNode(g);f[0].selectNodeContents(g);e.selectRanges(f)}c=new b.style({element:"a",attributes:c});c.type=b.STYLE_INLINE;c.apply(d.document);break;case CommonWindowMessages.TextEditorInteractionType.UpdateItslPluginsList:d=
a.editorInstanceId&&""!=a.editorInstanceId?CKEDITOR.instances[a.editorInstanceId]:CKEDITOR.dialog.getCurrent()._.editor;d.plugins.dynamicinsertmenu?d.plugins.dynamicinsertmenu.update(d,a.pluginId):d.plugins.itslpluginlist&&d.plugins.itslpluginlist.update(d,a.pluginId);break;case CommonWindowMessages.TextEditorInteractionType.InsertImageToSlideshow:null!=(a.editorInstanceId&&0<a.editorInstanceId.length?CKEDITOR.instances[a.editorInstanceId]:CKEDITOR.dialog.getCurrent()._.editor)&&(a.closeDialogAfterPerformingOperation&&
(CloseDialog(),a.closeDialogAfterPerformingOperation=!1),CKEDITOR.dialog.getCurrent().insertImageToSlideshow(a.extendedData))}a.closeDialogAfterPerformingOperation&&CloseDialog()})))},getIframeFromDialog:function(a){return $("#"+a._.contents.iframe.undefined.domId)},refreshCustomOpenPopupButtonPosition:function(a,b){""===a.val()?b.html(unescape(b.attr("data-temp-html"))).removeClass("ccl-ck-link-right-bottom").addClass("ccl-ck-link-center"):b.html("").removeClass("ccl-ck-link-center").addClass("ccl-ck-link-right-bottom")}};
b.getOnContentLoadFunctionForIframeDialog=function(a){return function(){var d=CKEDITOR.dialog.getCurrent();if(d){d=b.getIframeFromDialog(d).attr({webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:"true",allow:"microphone *; camera *"});a&&a(d);try{d.contents().keydown(function(a){a.which===CommonConstants.keyCodes.escape&&c.CloseDialog()}),d[0].focus()}catch(g){}}}};b.setupIframePlugin=function(a,d){var c=$.extend({addToolBarButton:!0,dialogName:void 0,dialogSrcReplacementFunction:void 0,
beforeInitComplete:void 0,dialogContentLoad:void 0,emptyIframeOnClose:!1,useBuiltInCloseButton:!1},d);return{requires:["iframedialog"],init:function(d){var e=d.config[a],f=e.DialogWidth,g=e.DialogHeight,h=c.dialogName,p=0,r=b.getOnContentLoadFunctionForIframeDialog(function(a){e.IsEditorDialogTransparent&&e.IframeCssClass&&a.addClass(e.IframeCssClass);c.dialogContentLoad&&c.dialogContentLoad(d,e,a)});d.addCommand(e.Id,{startDisabled:e.Disabled,exec:function(a){var b=h+p++,k=c.dialogSrcReplacementFunction?
c.dialogSrcReplacementFunction(d,e,a):e.DialogSrc;k&&(CKEDITOR.dialog.addIframe(b,"",k,f,g,r,{onShow:function(){var a=CKEDITOR.dialog.getCurrent(),b=a.parts;!1===c.useBuiltInCloseButton&&b.close.hide();b.footer.hide();b.title.hide();e.IsEditorDialogTransparent&&a._.element.addClass("hiddenDialog");CKEDITOR.env.ie&&a._.element.addClass("noScrollbars");TextEditorManager.getIframeFromDialog(a).parents("div.cke_dialog_page_contents").css({width:e.DialogWidth})},onHide:function(){c.emptyIframeOnClose&&
TextEditorManager.getIframeFromDialog(CKEDITOR.dialog.getCurrent()).attr("src","")}}),a.openDialog(b))}});if(c.addToolBarButton){var w={label:e.Text,command:e.Id};"string"===typeof c.icon&&(w.icon=c.icon);d.ui.addButton(e.Id,w)}c.beforeInitComplete&&c.beforeInitComplete(d,e)}}};b.setupContentForIframe=function(){$(c.document).keydown(function(a){a.which===CommonConstants.keyCodes.escape&&CommonFunctions.makePostMessageCall(c.parent,new CommonWindowMessages.TextEditorCloseDialogMessage)});c.focus()};
b.setupPopupSettings=function(a){var d=$("#"+a.popupSettings.linkToEditId),c=$("#"+a.popupSettings.hiddenInputId);""===c.val()&&d.html(a.popupSettings.text);d.attr("data-temp-html",escape(a.popupSettings.text));b.refreshCustomOpenPopupButtonPosition(c,d)};b.getExtensionIdFromIdString=function(a){var b=a.indexOf(":",0);if(0>b)return null;var c=a.indexOf(":",b+1);return 0>c?null:a.substring(b+1,c)}})(window);
function InsertHtml(c,e,f){var b=e&&0<e.length?CKEDITOR.instances[e]:CKEDITOR.dialog.getCurrent()._.editor;null!=b&&(f&&(f=b.getSelection().getSelectedElement())&&(f=f.getAscendant("img",!0),f=f.getAttribute("src"),c=c.replace("src='data:'","src='"+f+"'")),CKEDITOR.env.webkit?b.config.mask&&IsEditorEmpty(b.name,b.config.mask)?(SetHtml(c,e),checkForMaskAndDelete(b.name)):b.insertHtml(c):(CKEDITOR.env.gecko&&b.config.mask&&checkForMaskAndDelete(b.name),b.insertHtml(c)))}
function CloseDialog(){window.CKEDITOR.env.webkit&&closeRecorderIfExists();CKEDITOR.dialog.getCurrent().hide()}function SetHtml(c,e,f){e&&0<e.length?CKEDITOR.instances[e].setData(c,function(){f||SetTextEditorFocus(e)}):CKEDITOR.dialog.getCurrent()._.editor.setData(c,function(){f||CKEDITOR.dialog.getCurrent()._.editor.focus()})}
function GetTextEditorContent(c){return window.CKEDITOR?c&&0<c.length?CKEDITOR.instances[c].getData():CKEDITOR.dialog.getCurrent()?CKEDITOR.dialog.getCurrent()._.editor.getData():null:(c=$("div[data-ck-id="+c+"] > input[type=hidden]"),1===c.length?c.val():null)}function SetTextEditorFocus(c){CKEDITOR.instances[c].focus()}function RemoveEditorInstance(c){if(CKEDITOR.instances[c]){var e=CKEDITOR.instances[c].editable();e.hasFocus&&(e.blur(),e.hasFocus=!1);CKEDITOR.instances[c].destroy()}}
function IsEditorEmpty(c,e){if(c=CKEDITOR.instances[c]){c=c.getData().replace("\n","");var f=CommonFunctions.htmlEncode(c),b=CommonFunctions.htmlEncode(e);return""==c||e&&f===b||"<p>&nbsp;</p>"==c||"<div>&nbsp;</div>"==c||"<p>&#160;</p>"==c||"<p></p>"==c||"<p>"+b+"</p>"==c?!0:!1}}function IsEditorContainsMask(c,e){if(c=CKEDITOR.instances[c])return-1<c.getData().indexOf(e)}
function isTextEditorDirty(c){var e;if(c&&0<c.length&&(e=CKEDITOR.instances[c]))return e.checkDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.checkDirty()}function isAnyTextEditorDirty(){if(window.CKEDITOR)for(var c in CKEDITOR.instances)if(!0===CKEDITOR.instances[c].checkDirty())return!0;return!1}
function resetEditorIsDirty(c){if(c&&0<c.length)return CKEDITOR.instances[c].resetDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.resetDirty()}function resetAllTextEditorsIsDirty(){if(window.CKEDITOR)for(var c in CKEDITOR.instances)CKEDITOR.instances[c].resetDirty();return!1}function setTextEditorTextColor(c,e){c=CKEDITOR.instances[c];e=new CKEDITOR.style(CKEDITOR.config.colorButton_foreStyle,{color:e});c.applyStyle(e)}
function setTextEditorTextSize(c,e){c=CKEDITOR.instances[c];e=new CKEDITOR.style(CKEDITOR.config.fontSize_style,{size:e});c.applyStyle(e)}
var focusListener=function(c){var e=c.editor.config.mask,f=!1;IsEditorEmpty(c.editor.name,e)?(toggleWatermark(!1,c.editor),f=!0):IsEditorContainsMask(c.editor.name,e)&&(e=c.editor.getData().replace(e,""),c.editor.document.getBody().setHtml(e),f=!0);f&&(c.editor.mayBeDirty=!0,resetEditorIsDirty(c.editor.name))},blurListener=function(c){IsEditorEmpty(c.editor.name)&&c.editor.config.mask&&0<c.editor.config.mask.length&&(toggleWatermark(!0,c.editor),resetEditorIsDirty(c.editor.name))},modeListener=function(c){IsEditorEmpty(c.editor.name,
c.editor.config.mask)&&toggleWatermark("source"!=c.editor.mode,c.editor)};function toggleWatermark(c,e){if("wysiwyg"==e.mode){var f=e.document.getBody();c?(f.setHtml(e.config.mask),f.addClass("watermarked")):(f.setHtml(""),f.removeClass("watermarked"))}else c||e.setData("")}
function cleanOnFocusEvent(c,e,f){var b=CKEDITOR.instances[e];if(b){b.config.mask=c;if(f||IsEditorEmpty(b.name,b.config.mask))b.focusManager.hasFocus||setTimeout(function(){toggleWatermark(!0,b);b.mayBeDirty=!1;resetEditorIsDirty(b.name)},50);b.on("focus",focusListener);b.on("blur",blurListener);b.on("mode",modeListener);window.CKEDITOR.env.ie&&AttachListenersToInsertEvents(e)}}
function closeRecorderIfExists(){var c=TextEditorManager.getIframeFromDialog(CKEDITOR.dialog.getCurrent()),e;try{var f=c.contents();(e=f.find("object"))&&e.hide()}catch(b){}}function checkForMaskAndDelete(c){var e=null;c&&0<c.length?e=CKEDITOR.instances[c]:CKEDITOR.dialog.getCurrent()&&(e=CKEDITOR.dialog.getCurrent()._.editor);null!=e&&e.config.mask&&IsEditorEmpty(e.name,e.config.mask)&&e.document.getBody().setHtml("")}
function AttachListenersToInsertEvents(c){if(c&&0<c.length){var e=CKEDITOR.instances[c];e.on("insertText",function(e){checkForMaskAndDelete(c)});e.on("insertElement",function(e){checkForMaskAndDelete(c)});e.on("insertHtml",function(e){checkForMaskAndDelete(c)})}}
function TextEditorToolbar(c){function e(a){a.parent("ul").children("li").removeClass("active");a.addClass("active")}window[c]=this;var f=this,b,a,d;f.initialize=function(){a=f.controls.container.find("."+f.settings.fontColorSectionClass).find("li");d=f.controls.container.find("."+f.settings.fontSizeSectionClass).find("li");CKEDITOR.on("instanceReady",function(){b=CKEDITOR.instances[f.settings.editorId];b.on("selectionChange",function(){f.updateToolbarState()});a.find("a").click(function(){var a=
$(this).parent("li"),b=a.find("input:hidden:first").val();SetTextEditorFocus(f.settings.editorId);setTextEditorTextColor(f.settings.editorId,b);e(a);return!1});d.find("a").click(function(){var a=$(this).parent("li"),b=a.find("input:hidden:first").val();SetTextEditorFocus(f.settings.editorId);setTextEditorTextSize(f.settings.editorId,b);e(a);return!1});f.updateToolbarState()})};f.insertImage=function(a){InsertHtml('<img src="'+a+'" alt="" />',f.settings.editorId)};f.updateToolbarState=function(){var c=
b.getSelection();if(c){var e;if(c=$(c.getStartElement().$)){var k=c.prop("style").color;k||(e=c.parents('span[style*="color:"]:first'))&&e.prop("style")&&(k=e.prop("style").color);e=k;(k=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))?(e=[],e.push("#"),e.push(("0"+parseInt(k[1],10).toString(16)).slice(-2)),e.push(("0"+parseInt(k[2],10).toString(16)).slice(-2)),e.push(("0"+parseInt(k[3],10).toString(16)).slice(-2)),k=e.join("")):k=e;k=k.toLowerCase();e=c.prop("style").fontSize;e||(c=c.parents('span[style*="font-size:"]:first'))&&
c.prop("style")&&(e=c.prop("style").fontSize)}k||(k="#000000");e||(e=f.settings.defaultFontSizeStyle);a.removeClass("active");a.filter(":has(input[value='"+k+"']:hidden)").addClass("active");d.removeClass("active");e&&d.filter(":has(input[value='"+e+"']:hidden)").addClass("active")}}}
function TextEditorToolbarExtenderDialog(c){window[c]=this;var e=this;e.initialize=function(){e.controls.targetlink.on("click",function(c){c.preventDefault();e.show();return!1});e.controls.closelink.on("click",function(c){c.preventDefault();e.hide();return!1});e.controls.container.appendTo("body").on("click",function(c){c.preventDefault();return!1});e.controls.container.find("ul li a").on("click",function(c){e.hide();return!0});$(document).click(function(c){var b=e.controls.container;return 2>c.button&&
!b.is(":hidden")?(e.hide(),!1):!0})};e.show=function(){var c=e.controls.targetlink.offset();e.controls.container.css({top:c.top+e.controls.targetlink.height()+"px",left:c.left+"px"}).show()};e.hide=function(){e.controls.container.hide()};return e}
function TimeSlotPicker(c){function e(){g.val(a.val())}window[c]=this;var f=this,b,a,d,g,h;f.initialize=function(){b=$("#"+f.settings.clientIds.timeSlotPickerPanel);a=$("#"+f.settings.clientIds.timeSlotDropDown);d=$("#"+f.settings.clientIds.availableTimeSlotsHidden);g=$("#"+f.settings.clientIds.selectedTimeSlotIdHidden);a.change(function(){e()});var c=d.val();c&&(h=JSON.parse(c));f.toggle(!0)};f.toggle=function(a){b.toggle(a&&!!h)};f.updateFilteredTimeForDate=function(b,c){if(f.getAvailableTimeSlotsForDateFunction)if(b=
{date:b,dateFilterId:c},f.getAvailableTimeSlotsForDateFunction(b),h=b.availableTimeSlots,d.val(h?JSON.stringify(h):""),h){a.empty();if(h&&h.length)for(b=0;b<h.length;b++)a.append("<option value='"+h[b].TimeSlotId+"'>"+h[b].Description+"</option>");f.toggle(!0);e()}else f.resetTimes()};f.resetTimes=function(){a.empty();h=void 0;d.val(h?JSON.stringify(h):"");e();f.toggle(!1)};f.getSelectedTimeSlot=function(){return g.val()};return f}
function Toast(c,e,f,b,a,d){var g={controls:{},collapseAnimationDurationInMs:1500,scrollFrictionTimer:null,scrollFrictionStopTimeInMs:1200,minimalBottomMargin:20,isCollapsedHiddenField:null,initialize:function(){g.configureToastrPlugin();g.setuUpButtons();g.isCollapsedHiddenField=$("#"+d);"true"===g.isCollapsedHiddenField.val()&&setInterval(g.collapse(),100);g.attachPositionHandlersForMobileIos()},attachPositionHandlersForMobileIos:function(){if(browserSniffer.isMobileIos()){window.document.addEventListener("touchmove",
function(a){g.moveForMobileIosHandler()},!1);window.addEventListener("orientationchange",function(){g.moveForMobileIosHandler()});var a=g.calculateDefaultBottomMargin();g.setBottomMargin(a)}},configureToastrPlugin:function(){toastr.options=g.getToastrPluginOptions();toastr.success(c,e,f)},getToastrPluginOptions:function(){return{closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,toastClass:"ccl-toast",positionClass:"ccl-toast position-bottom-right",preventDuplicates:!0,onclick:null,showDuration:"0",
hideDuration:"1000",timeOut:"0",extendedTimeOut:"0",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut",tapToDismiss:!1,containerId:a}},setuUpButtons:function(){g.controls.toastContainer=$("#"+a);g.controls.messageContainer=$(".ccl-toast.ccl-default-toast");g.controls.collapseButton=g.createButton("toggle-toast-button collapse");g.controls.collapseButtonContainer=g.createCollapseButtonContainer(g.controls.collapseButton);g.controls.expandButton=g.createButton("toggle-toast-button expand");
g.controls.collapsedStateIcon=g.createCollapsedStateIcon();g.controls.expandButtonContainer=g.createExpandButtonContainer();g.setUpExpandButton();g.setUpCollapseButton()},createCollapsedStateIcon:function(){return $("<img/>",{src:b,style:"background-color: white;"})},createButton:function(a){return $("<button/>",{"class":a})},createExpandButtonContainer:function(){return $("<div />",{"class":"expand-button-container"}).append(g.controls.expandButton).append($("<br />")).append(g.controls.collapsedStateIcon)},
createCollapseButtonContainer:function(a){return $("<div />",{"class":"collapse-button-container"}).append(a)},setUpExpandButton:function(){g.controls.toastContainer.prepend(g.controls.expandButtonContainer);g.controls.expandButtonContainer.hide();g.controls.expandButton.click(function(){g.isCollapsedHiddenField.val("false");g.controls.messageContainer.css("margin-left","0");g.controls.expandButtonContainer.hide();g.controls.collapseButton.show();g.controls.toastContainer.animate({right:"+="+g.controls.toastContainer.css("right").replace("-",
"")},g.collapseAnimationDurationInMs)})},setUpCollapseButton:function(){g.controls.toastContainer.prepend(g.controls.collapseButtonContainer);g.controls.collapseButton.click(function(){g.onCollapseButtonClick()})},onCollapseButtonClick:function(){g.isCollapsedHiddenField.val("true");g.controls.collapseButton.unbind("click");g.controls.toastContainer.animate({right:"-="+g.controls.toastContainer.css("width")},g.collapseAnimationDurationInMs,function(){g.collapse();g.controls.collapseButton.click(function(){g.onCollapseButtonClick()})})},
collapse:function(){g.controls.toastContainer.css("right","-"+g.controls.toastContainer.width()+"px");g.controls.collapseButton.hide();g.controls.expandButtonContainer.show();g.controls.messageContainer.css("margin-left",g.controls.expandButtonContainer.width())},getScreenHeight:function(){return g.isMobileLandscape()?screen.width:screen.height},isMobileLandscape:function(){return 90===Math.abs(window.orientation)?!0:!1},calculateDefaultBottomMargin:function(){return $(parent.document).height()-g.getScreenHeight()+
$("#"+a).height()},setBottomMargin:function(b){$("#"+a).css("margin-bottom",b)},calculateBottomMarginForMobileIos:function(){var a=g.calculateDefaultBottomMargin()-$(parent.document).scrollTop();return 0>=$(parent.document).scrollTop()?g.calculateDefaultBottomMargin():a<g.minimalBottomMargin?g.minimalBottomMargin:a},moveForMobileIosHandler:function(){null!==g.scrollFrictionTimer&&clearTimeout(g.scrollFrictionTimer);g.scrollFrictionTimer=setTimeout(function(){var a=g.calculateBottomMarginForMobileIos();
g.setBottomMargin(a)},g.scrollFrictionStopTimeInMs)}};g.initialize();return{}}
(function(c){c(["jquery"],function(c){return function(){function e(a,b){a||(a=d());h=c("#"+a.containerId);if(h.length)return h;b&&(h=c("<div/>").attr("id",a.containerId).addClass(a.positionClass).attr("aria-live","polite").attr("role","alert"),h.appendTo(c(a.target)));return h}function b(a,b,d){d=d&&d.force?d.force:!1;return a&&(d||0===c(":focus",a).length)?(a[b.hideMethod]({duration:b.hideDuration,easing:b.hideEasing,complete:function(){g(a)}}),!0):!1}function a(a){function b(a){if(!c(":focus",u).length||
a)return clearTimeout(I.intervalId),u[q.hideMethod]({duration:q.hideDuration,easing:q.hideEasing,complete:function(){g(u);if(q.onHidden&&"hidden"!==R.state)q.onHidden();R.state="hidden";R.endTime=new Date;k&&k(R)}})}function f(){if(0<q.timeOut||0<q.extendedTimeOut)G=setTimeout(b,q.extendedTimeOut),I.maxHideTime=parseFloat(q.extendedTimeOut),I.hideEta=(new Date).getTime()+I.maxHideTime}function m(){clearTimeout(G);I.hideEta=0;u.stop(!0,!0)[q.showMethod]({duration:q.showDuration,easing:q.showEasing})}
function p(){var a=(I.hideEta-(new Date).getTime())/I.maxHideTime*100;D.width(a+"%")}var q=d(),z=a.iconClass||q.iconClass;"undefined"!==typeof a.optionsOverride&&(q=c.extend(q,a.optionsOverride),z=a.optionsOverride.iconClass||z);a:{if(q.preventDuplicates)if(a.message===n){var C=!0;break a}else n=a.message;C=!1}if(!C){l++;h=e(q,!0);var G=null,u=c("<div/>");C=c("<div/>");var B=c("<div/>"),D=c("<div/>"),E=c(q.closeHtml),I={intervalId:null,hideEta:null,maxHideTime:null},R={toastId:l,state:"visible",startTime:new Date,
options:q,map:a};a.iconClass&&u.addClass(q.toastClass).addClass(z);a.title&&(C.append(a.title).addClass(q.titleClass),u.append(C));a.message&&(B.append(a.message).addClass(q.messageClass),u.append(B));q.closeButton&&(E.addClass("toast-close-button").attr("role","button"),u.prepend(E));q.progressBar&&(D.addClass("toast-progress"),u.prepend(D));q.newestOnTop?h.prepend(u):h.append(u);u.hide();u[q.showMethod]({duration:q.showDuration,easing:q.showEasing,complete:q.onShown});0<q.timeOut&&(G=setTimeout(b,
q.timeOut),I.maxHideTime=parseFloat(q.timeOut),I.hideEta=(new Date).getTime()+I.maxHideTime,q.progressBar&&(I.intervalId=setInterval(p,10)));(function(){u.hover(m,f);!q.onclick&&q.tapToDismiss&&u.click(b);q.closeButton&&E&&E.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&!0!==a.cancelBubble&&(a.cancelBubble=!0);b(!0)});q.onclick&&u.click(function(){q.onclick();b()})})();k&&k(R);q.debug&&console&&console.log(R);return u}}function d(){return c.extend({},{tapToDismiss:!0,
toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1E3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1E3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5E3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',
newestOnTop:!0,preventDuplicates:!1,progressBar:!1},m.options)}function g(a){h||(h=e());a.is(":visible")||(a.remove(),0===h.children().length&&(h.remove(),n=void 0))}var h,k,l=0,m={clear:function(a,f){var g=d();h||e(g);if(!b(a,g,f))for(a=h.children(),f=a.length-1;0<=f;f--)b(c(a[f]),g)},remove:function(a){var b=d();h||e(b);a&&0===c(":focus",a).length?g(a):h.children().length&&h.remove()},error:function(b,c,e){return a({type:"error",iconClass:d().iconClasses.error,message:b,optionsOverride:e,title:c})},
getContainer:e,info:function(b,c,e){return a({type:"info",iconClass:d().iconClasses.info,message:b,optionsOverride:e,title:c})},options:{},subscribe:function(a){k=a},success:function(b,c,e){return a({type:"success",iconClass:d().iconClasses.success,message:b,optionsOverride:e,title:c})},version:"2.1.1",warning:function(b,c,e){return a({type:"warning",iconClass:d().iconClasses.warning,message:b,optionsOverride:e,title:c})}},n;return m}()})})("function"===typeof define&&define.amd?define:function(c,
e){"undefined"!==typeof module&&module.exports?module.exports=e(require("jquery")):window.toastr=e(window.jQuery)});
function Toggle(c){function e(){0<l.length&&"INPUT"==l[0].tagName&&"checkbox"==l.attr("type")&&(n.bind("mousedown",function(){return!1}),p.bind("mousedown",function(){return!1}),"true"===w&&(m.bind(k.options.clientClickEventName,b),l.bind("change",f)))}function f(){g()?a():d();l.trigger(k.options.clientStateChangedEventName,[{toggleInstanceId:c}])}function b(){l.is(":disabled")||(l.prop("checked",!g()),f())}function a(){"true"===r&&m.removeClass(t.toggleOff).addClass(t.toggleOn);p.removeClass(t.checkedLabel).addClass(t.uncheckedLabel);
n.removeClass(t.uncheckedLabel).addClass(t.checkedLabel);l.prop("checked",!0)}function d(){"true"===r&&m.removeClass(t.toggleOn).addClass(t.toggleOff);n.removeClass(t.checkedLabel).addClass(t.uncheckedLabel);p.removeClass(t.uncheckedLabel).addClass(t.checkedLabel);l.prop("checked",!1)}function g(){return l.prop("checked")}function h(){if(!m.data("events"))return!1;var a=m.data("events")[k.options.clientClickEventName],d=!1;$.each(a,function(a,c){if(c.handler==b)return d=!0,!1});return d}window[c]=
this;var k=this,l,m,n,p,r,w,t;k.initialize=function(){l=k.controls.checkbox;m=k.controls.toggleBox;n=k.controls.labelOn;n.attr("title");p=k.controls.labelOff;p.attr("title");r=k.options.onOffMode;w=k.options.enabled;t=k.options.cssClassess;e()};k.revertState=function(){g()?d():a()};k.clone=function(a,b){b=new Toggle(b);b.controls={checkbox:a.find(k.controls.checkbox.selector),toggleBox:a.find(k.controls.toggleBox.selector),labelOn:a.find(k.controls.labelOn.selector),labelOff:a.find(k.controls.labelOff.selector)};
b.options=k.options;b.initialize()};k.toggleOnOff=function(b){b?a():d()};k.isChecked=function(){return g()};k.enable=function(){h()||m.bind(k.options.clientClickEventName,b);m.removeClass(t.toggleDisabled)};k.disable=function(){h()&&m.unbind(k.options.clientClickEventName,b);m.addClass(t.toggleDisabled)}}
function ToolTip(c,e){function f(a,d,c,e){ma=a;!d&&c&&(clearTimeout(M),M=setTimeout(function(){clearTimeout(S);e&&k();b(ma)},m.settings.showPopupTimeout))}function b(a){B=u.scrollLeft();D=u.scrollTop();n.offset();d();$(document).trigger("hideTooltips");X=p.outerHeight(!0);da=p.outerWidth(!0);r||(r=h(),r.insertAfter(p));R=r.outerHeight(!0);J=r.outerWidth(!0);t=R+1;v=u.width()+B;q=u.height()+D;n.height();if(0>=a.pageX&&0>=a.pageY){var b=$(a.target),c=b.offset();a.pageX=c.left+b.outerWidth()/2;a.pageY=
c.top+b.outerHeight()/2}C=a.pageX?a.pageX:a.originalEvent.touches[0].pageX;G=a.pageY?a.pageY:a.originalEvent.touches[0].pageY;Ha=G-D>X+t;ea=q-G>X+t;va=Ha&&!ea;w||(w=$("<div></div>").appendTo(r));w.attr("class",va?E.arrowDown:E.arrowUp);p.show();r.show();w.show();a=da/2;p.css({top:va?G-X-t:G+t,left:C-a<B?B:C+a>v?v-da:C-a});I=p.offset();z=I.left+p.outerWidth();a=va?I.top+X-1:I.top+1-R;b=z-J;b=C>b?b:C-J/2;C<I.left+J/2&&(b=I.left);r.css({top:a,left:b})}function a(){p&&r&&(p.hide(),r.hide())}function d(){p||
(p=g(),p.appendTo("form"))}function g(){var b=$("<div></div>").addClass(E.tooltipPopup).hover(function(){clearTimeout(S)},function(){S=setTimeout(function(){a()},m.settings.hidePopupTimeout)});m.autoWidth&&$(b).addClass(E.tooltipAutoWidth);$("<div></div>").addClass(E.tooltipTitle).appendTo(b).html(m.title);$("<div></div>").addClass(E.tooltipDescription).appendTo(b).html(m.description);return b}function h(){return $("<div></div>").addClass(E.arrowContainer).hover(function(){clearTimeout(S)},function(){S=
setTimeout(function(){a()},m.settings.hidePopupTimeout)})}function k(){if(m.dataSource){var a=n.data(m.settings.attributes.idDataKey),b=m.dataSource[a];b?l(b.title,b.description):(l("",""),m.loadDataClientFunction&&m.loadDataClientFunction(a).done(function(){(b=m.dataSource[a])&&l(b.title,b.description)}))}else l(n.data(m.settings.attributes.titleDataKey),n.data(m.settings.attributes.descriptionDataKey))}function l(a,b){m.title=a;m.description=b;p&&(p.find("."+E.tooltipTitle).html(m.title?m.title:
""),p.find("."+E.tooltipDescription).html(m.title||m.description?m.description:m.settings.missingDataText))}window[c]=this;var m=this,n=e,p,r,w,t,v,q,z,C,G,u=$(window),B,D,E,I,R,X,da,J,S,M,ea,Ha,va,ma;m.initialize=function(){m.dataSource&&(m.title=m.dataSource[m.dataKey].title,m.description=m.dataSource[m.dataKey].description,m.autoWidth=m.dataSource[m.dataKey].autoWidth);E=m.settings.cssClasses;$(document).bind("hideTooltips",function(){a()});n.is("a")||n.addClass(E.linkToTooltip);var c=!!document.ontouchstart;
n.hover(function(a){f(a,c,!0,!1)},function(){c||(clearTimeout(M),S=setTimeout(function(){a()},m.settings.hidePopupTimeout))}).mousemove(function(a){f(a,c,p&&p.is(":visible"),!1)}).on("ensureTooltipExists",function(){d()}).on("click",function(d){clearTimeout(S);clearTimeout(M);p&&p.is(":visible")?a():b(d)})};m.initializeUnobtrusive=function(){E=m.settings.cssClasses;$(document).on("hideTooltips",function(){a()}).on("mouseenter","["+m.settings.attributes.id+"],["+m.settings.attributes.title+"], ["+
m.settings.attributes.description+"]",function(c){n=$(this);var e=!!document.ontouchstart;n.data("tooltip_initialized")||(n.is("a")||n.addClass(E.linkToTooltip),n.mousemove(function(a){f(a,e,p&&p.is(":visible"),!0)}).on("mouseleave",function(){clearTimeout(M);S=setTimeout(function(){clearTimeout(S);a()},m.settings.hidePopupTimeout)}).on("ensureTooltipExists",function(){d()}).on("click",function(d){clearTimeout(S);clearTimeout(M);p&&p.is(":visible")?a():(k(),b(d))}),n.data("tooltip_initialized",!0));
f(c,e,!0,!0)});d()};return m}function TwoControlsSynchronizationObject(c){var e={},f={};f.callback=c;e.onFirstControlInitialized=function(b){f.control1=b;"undefined"!=typeof f.control2&&f.callback(f.control1,f.control2)};e.onSecondControlInitialized=function(b){f.control2=b;"undefined"!=typeof f.control1&&f.callback(f.control1,f.control2)};return e}UploaderSenderOptionsConstants={fileRepoData:"fileRepoData"};
function TrackXiti(c,e,f,b,a,d,g,h,k){xt_multc="&x1="+c+"&x2="+e+"&x3="+f+"&x4="+b;window.xtparam=null!=window.xtparam?window.xtparam+xt_multc:xt_multc;xtidc=xt_at=a;xt_ac=e;window.xtparam=null!=window.xtparam?window.xtparam+("&ac="+xt_ac+"&at="+xt_at):"&ac="+xt_ac+"&at="+xt_at;xtnv=document;xtsd=k;xtsite=d;xtn2=g;xtpage=h;xtdi=""}
(function(c){c.fn.autogrow=function(e){this.filter("textarea").each(function(){var f=this,b=c(f),a=b.height(),d,g=20;e&&e.hasOwnProperty("additionalHeight")&&(g=e.additionalHeight);var h=c("<div></div>").css({position:"absolute",top:-1E4,left:-1E4,fontSize:b.css("fontSize"),fontFamily:b.css("fontFamily"),font:b.css("font"),resize:"none"}).appendTo(document.body),k=function(){var d=b.css("word-wrap");h.css({width:b.width()-parseInt(b.css("paddingLeft"))-parseInt(b.css("paddingRight")),lineHeight:b.css("lineHeight"),
"word-wrap":d?d:"break-word"});d=f.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(a){for(var b="",d=0;d<a.length-1;d++)b+="&nbsp;";return b+" "});h.html(d);b.css("height",Math.max(h.height()+g,a))};b.bind("change keyup keydown input paste",k);c(window).resize(function(){d&&clearTimeout(d);d=setTimeout(function(){k.apply(f)},200)});k.apply(f)});return self}})(jQuery);
jQuery.cookie=function(c,e,f){if(1<arguments.length&&"[object Object]"!==String(e)){f=jQuery.extend({},f);if(null===e||void 0===e)f.expires=-1;if("number"===typeof f.expires){var b=f.expires,a=f.expires=new Date;a.setDate(a.getDate()+b)}e=String(e);return document.cookie=[encodeURIComponent(c),"=",f.raw?e:encodeURIComponent(e),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}f=e||{};a=f.raw?function(a){return a}:
decodeURIComponent;return(b=(new RegExp("(?:^|; )"+encodeURIComponent(c)+"=([^;]*)")).exec(document.cookie))?a(b[1]):null};
(function(){var c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"===typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};self.linkify={};(function(e){function f(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=Object.create(a.prototype),e;for(e in d)c[e]=d[e];c.constructor=b;b.prototype=c;return b}function b(a){a=a||{};this.defaultProtocol=a.defaultProtocol||m.defaultProtocol;
this.events=a.events||m.events;this.format=a.format||m.format;this.formatHref=a.formatHref||m.formatHref;this.nl2br=a.nl2br||m.nl2br;this.tagName=a.tagName||m.tagName;this.target=a.target||m.target;this.validate=a.validate||m.validate;this.ignoreTags=[];this.attributes=a.attributes||a.linkAttributes||m.attributes;this.className=a.className||a.linkClass||m.className;a=a.ignoreTags||m.ignoreTags;for(var b=0;b<a.length;b++)this.ignoreTags.push(a[b].toUpperCase())}function a(a){return a}function d(){return function(a){this.j=
[];this.T=a||null}}function g(a,b,d,c){for(var e=0,f=a.length,g=[],h=void 0;e<f&&(h=b.next(a[e]));)b=h,e++;if(e>=f)return[];for(;e<f-1;)h=new r(c),g.push(h),b.on(a[e],h),b=h,e++;h=new r(d);g.push(h);b.on(a[f-1],h);return g}function h(){return function(a){a&&(this.v=a)}}function k(a){a=a?{v:a}:{};return f(t,h(),a)}function l(a){return a instanceof v||a instanceof ea}var m={defaultProtocol:"http",events:null,format:a,formatHref:a,nl2br:!1,tagName:"a",target:function(a,b){return"url"===b?"_blank":null},
validate:!0,ignoreTags:[],attributes:null,className:"linkified"};b.prototype={resolve:function(a){var b=a.toHref(this.defaultProtocol);return{formatted:this.get("format",a.toString(),a),formattedHref:this.get("formatHref",b,a),tagName:this.get("tagName",b,a),className:this.get("className",b,a),target:this.get("target",b,a),events:this.getObject("events",b,a),attributes:this.getObject("attributes",b,a)}},check:function(a){return this.get("validate",a.toString(),a)},get:function(a,b,d){var e=this[a];
if(!e)return e;switch("undefined"===typeof e?"undefined":c(e)){case "function":return e(b,d.type);case "object":return a=e[d.type]||m[a],"function"===typeof a?a(b,d.type):a}return e},getObject:function(a,b,d){a=this[a];return"function"===typeof a?a(b,d.type):a}};var n=Object.freeze({defaults:m,Options:b,contains:function(a,b){for(var d=0;d<a.length;d++)if(a[d]===b)return!0;return!1}}),p=d();p.prototype={defaultTransition:!1,on:function(a,b){if(a instanceof Array){for(var d=0;d<a.length;d++)this.j.push([a[d],
b]);return this}this.j.push([a,b]);return this},next:function(a){for(var b=0;b<this.j.length;b++){var d=this.j[b],c=d[1];if(this.test(a,d[0]))return c}return this.defaultTransition},accepts:function(){return!!this.T},test:function(a,b){return a===b},emit:function(){return this.T}};var r=f(p,d(),{test:function(a,b){return a===b||b instanceof RegExp&&b.test(a)}}),w=f(p,d(),{jump:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=this.next(new a(""));d===this.defaultTransition?
(d=new this.constructor(b),this.on(a,d)):b&&(d.T=b);return d},test:function(a,b){return a instanceof b}}),t=h();t.prototype={toString:function(){return this.v+""}};var v=k(),q=k("@"),z=k(":"),C=k("."),G=k(),u=k(),B=k("\n"),D=k(),E=k("+"),I=k("#"),R=k(),X=k("mailto:"),da=k("?"),J=k("/"),S=k("_"),M=k(),ea=k(),Ha=k(),va=k("{"),ma=k("["),wa=k("<"),Oa=k("("),Ga=k("}"),ka=k("]"),ia=k(">"),Ca=k(")"),Z=k("&"),A=Object.freeze({Base:t,DOMAIN:v,AT:q,COLON:z,DOT:C,PUNCTUATION:G,LOCALHOST:u,NL:B,NUM:D,PLUS:E,
POUND:I,QUERY:da,PROTOCOL:R,MAILTO:X,SLASH:J,UNDERSCORE:S,SYM:M,TLD:ea,WS:Ha,OPENBRACE:va,OPENBRACKET:ma,OPENANGLEBRACKET:wa,OPENPAREN:Oa,CLOSEBRACE:Ga,CLOSEBRACKET:ka,CLOSEANGLEBRACKET:ia,CLOSEPAREN:Ca,AMPERSAND:Z}),ha="aaa aarp abb abbott abogado ac academy accenture accountant accountants aco active actor ad adac ads adult ae aeg aero af afl ag agency ai aig airforce airtel al alibaba alipay allfinanz alsace am amica amsterdam an analytics android ao apartments app apple aq aquarelle ar aramco archi army arpa arte as asia associates at attorney au auction audi audio author auto autos avianca aw ax axa az azure ba baidu band bank bar barcelona barclaycard barclays bargains bauhaus bayern bb bbc bbva bcg bcn bd be beats beer bentley berlin best bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday bloomberg blue bm bms bmw bn bnl bnpparibas bo boats boehringer bom bond boo book boots bosch bostik bot boutique br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call camera camp cancerresearch canon capetown capital car caravan cards care career careers cars cartier casa cash casino cat catering cba cbn cc cd ceb center ceo cern cf cfa cfd cg ch chanel channel chase chat cheap chloe christmas chrome church ci cipriani circle cisco citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com commbank community company compare computer comsec condos construction consulting contact contractors cooking cool coop corsica country coupon coupons courses cr credit creditcard creditunion cricket crown crs cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance date dating datsun day dclk de dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev diamonds diet digital direct directory discount dj dk dm dnp do docs dog doha domains download drive dubai durban dvag dz earth eat ec edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er erni es esq estate et eu eurovision eus events everbank exchange expert exposed express fage fail fairwinds faith family fan fans farm fashion fast feedback ferrero fi film final finance financial firestone firmdale fish fishing fit fitness fj fk flickr flights florist flowers flsmidth fly fm fo foo football ford forex forsale forum foundation fox fr fresenius frl frogans frontier fund furniture futbol fyi ga gal gallery gallup game garden gb gbiz gd gdn ge gea gent genting gf gg ggee gh gi gift gifts gives giving gl glass gle global globo gm gmail gmbh gmo gmx gn gold goldpoint golf goo goog google gop got gov gp gq gr grainger graphics gratis green gripe group gs gt gu gucci guge guide guitars guru gw gy hamburg hangout haus hdfcbank health healthcare help helsinki here hermes hiphop hitachi hiv hk hm hn hockey holdings holiday homedepot homes honda horse host hosting hoteles hotmail house how hr hsbc ht hu hyundai ibm icbc ice icu id ie ifm iinet il im immo immobilien in industries infiniti info ing ink institute insurance insure int international investments io ipiranga iq ir irish is iselect ist istanbul it itau iwc jaguar java jcb je jetzt jewelry jlc jll jm jmp jo jobs joburg jot joy jp jpmorgan jprs juegos kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kitchen kiwi km kn koeln komatsu kp kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster land landrover lanxess lasalle lat latrobe law lawyer lb lc lds lease leclerc legal lexus lgbt li liaison lidl life lifeinsurance lifestyle lighting like limited limo lincoln linde link live living lixil lk loan loans local locus lol london lotte lotto love lr ls lt ltd ltda lu lupin luxe luxury lv ly ma madrid maif maison makeup man management mango market marketing markets marriott mba mc md me med media meet melbourne meme memorial men menu meo mg mh miami microsoft mil mini mk ml mm mma mn mo mobi mobily moda moe moi mom monash money montblanc mormon mortgage moscow motorcycles mov movie movistar mp mq mr ms mt mtn mtpc mtr mu museum mutuelle mv mw mx my mz na nadex nagoya name natura navy nc ne nec net netbank network neustar new news nexus nf ng ngo nhk ni nico nikon ninja nissan nl no nokia norton nowruz np nr nra nrw ntt nu nyc nz obi office okinawa om omega one ong onl online ooo oracle orange org organic origins osaka otsuka ovh pa page pamperedchef panerai paris pars partners parts party passagens pe pet pf pg ph pharmacy philips photo photography photos physio piaget pics pictet pictures pid pin ping pink pizza pk pl place play playstation plumbing plus pm pn pohl poker porn post pr praxi press pro prod productions prof promo properties property protection ps pt pub pw pwc py qa qpon quebec quest racing re read realtor realty recipes red redstone redumbrella rehab reise reisen reit ren rent rentals repair report republican rest restaurant review reviews rexroth rich ricoh rio rip ro rocher rocks rodeo room rs rsvp ru ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsung sandvik sandvikcoromant sanofi sap sapo sarl sas saxo sb sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scor scot sd se seat security seek select sener services seven sew sex sexy sfr sg sh sharp shell shia shiksha shoes show shriram si singles site sj sk ski skin sky skype sl sm smile sn sncf so soccer social softbank software sohu solar solutions song sony soy space spiegel spot spreadbetting sr srl st stada star starhub statefarm statoil stc stcgroup stockholm storage store studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiss sx sy sydney symantec systems sz tab taipei taobao tatamotors tatar tattoo tax taxi tc tci td team tech technology tel telecity telefonica temasek tennis tf tg th thd theater theatre tickets tienda tiffany tips tires tirol tj tk tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tp tr trade trading training travel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubs ug uk unicom university uno uol us uy uz va vacations vana vc ve vegas ventures verisign versicherung vet vg vi viajes video viking villas vin vip virgin vision vista vistaprint viva vlaanderen vn vodka volkswagen vote voting voto voyage vu vuelos wales walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weir wf whoswho wien wiki williamhill win windows wine wme wolterskluwer work works world ws wtc wtf xbox xerox xin xperia xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama youtube yt za zara zero zip zm zone zuerich zw".split(" "),
y="0123456789".split(""),Aa="0123456789abcdefghijklmnopqrstuvwxyz".split(""),xa=" \f\r\t\x0B\u00a0\u1680\u180e".split(""),na=[],L=function(a){return new r(a)},Q=L(),Fa=L(D),Ea=L(v),ja=L(),za=L(Ha);Q.on("@",L(q)).on(".",L(C)).on("+",L(E)).on("#",L(I)).on("?",L(da)).on("/",L(J)).on("_",L(S)).on(":",L(z)).on("{",L(va)).on("[",L(ma)).on("<",L(wa)).on("(",L(Oa)).on("}",L(Ga)).on("]",L(ka)).on(">",L(ia)).on(")",L(Ca)).on("&",L(Z)).on([",",";","!",'"',"'"],L(G));Q.on("\n",L(B)).on(xa,za);za.on(xa,za);for(var Sa=
0;Sa<ha.length;Sa++){var Pa=g(ha[Sa],Q,ea,v);na.push.apply(na,Pa)}var ua=g("file",Q,v,v),Ua=g("ftp",Q,v,v),aa=g("http",Q,v,v),T=g("mailto",Q,v,v);na.push.apply(na,ua);na.push.apply(na,Ua);na.push.apply(na,aa);var $a=ua.pop(),db=Ua.pop(),cb=aa.pop(),ob=T.pop(),Za=L(v),K=L(R),N=L(X);db.on("s",Za).on(":",K);cb.on("s",Za).on(":",K);na.push(Za);$a.on(":",K);Za.on(":",K);ob.on(":",N);var H=g("localhost",Q,u,v);na.push.apply(na,H);Q.on(y,Fa);Fa.on("-",ja).on(y,Fa).on(Aa,Ea);Ea.on("-",ja).on(Aa,Ea);for(var Ma=
0;Ma<na.length;Ma++)na[Ma].on("-",ja).on(Aa,Ea);ja.on("-",ja).on(y,Ea).on(Aa,Ea);Q.defaultTransition=L(M);var Ra=function(a){for(var b=a.replace(/[A-Z]/g,function(a){return a.toLowerCase()}),d=a.length,c=[],e=0;e<d;){for(var f=Q,g=null,h=0,k=null,l=-1;e<d&&(g=f.next(b[e]));)f=g,f.accepts()?(l=0,k=f):0<=l&&l++,h++,e++;0>l||(e-=l,h-=l,f=k.emit(),c.push(new f(a.substr(e-h,h))))}return c},zb=Object.freeze({State:r,TOKENS:A,run:Ra,start:Q}),ab=h();ab.prototype={type:"token",isLink:!1,toString:function(){for(var a=
[],b=0;b<this.v.length;b++)a.push(this.v[b].toString());return a.join("")},toHref:function(){return this.toString()},toObject:function(){return{type:this.type,value:this.toString(),href:this.toHref(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"http")}}};var sb=f(ab,h(),{type:"email",isLink:!0}),eb=f(ab,h(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),qb=f(ab,h(),{type:"text"}),tb=f(ab,h(),{type:"nl"}),Va=f(ab,h(),{type:"url",isLink:!0,toHref:function(){for(var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:"http",b=!1,d=!1,c=this.v,e=[],f=0;c[f]instanceof R;)b=!0,e.push(c[f].toString().toLowerCase()),f++;for(;c[f]instanceof J;)d=!0,e.push(c[f].toString()),f++;for(;l(c[f]);)e.push(c[f].toString().toLowerCase()),f++;for(;f<c.length;f++)e.push(c[f].toString());e=e.join("");b||d||(e=a+"://"+e);return e},hasProtocol:function(){return this.v[0]instanceof R}}),lb=Object.freeze({Base:ab,MAILTOEMAIL:sb,EMAIL:eb,NL:tb,TEXT:qb,URL:Va}),V=function(a){return new w(a)},
mb=V(),ub=V(),vb=V(),rb=V(),wb=V(),Wa=V(),P=V(),ib=V(Va),xb=V(),yb=V(Va),Y=V(Va),Ba=V(),ra=V(),oa=V(),F=V(),fa=V(),O=V(Va),pa=V(Va),ba=V(Va),U=V(Va),W=V(),ca=V(),jb=V(),la=V(),gb=V(),Ka=V(),Na=V(eb),La=V(),Ta=V(eb),sa=V(sb),ya=V(),Ja=V(),Da=V(),Ia=V(),nb=V(tb);mb.on(B,nb).on(R,ub).on(X,vb).on(J,rb);ub.on(J,rb);rb.on(J,wb);mb.on(ea,Wa).on(v,Wa).on(u,ib).on(D,Wa);wb.on(ea,Y).on(v,Y).on(D,Y).on(u,Y);Wa.on(C,P);gb.on(C,Ka);P.on(ea,ib).on(v,Wa).on(D,Wa).on(u,Wa);Ka.on(ea,Na).on(v,gb).on(D,gb).on(u,gb);
ib.on(C,P);Na.on(C,Ka);ib.on(z,xb).on(J,Y);xb.on(D,yb);yb.on(J,Y);Na.on(z,La);La.on(D,Ta);var qa=[v,q,u,D,E,I,R,J,ea,S,M,Z],ta=[z,C,da,G,Ga,ka,ia,Ca,va,ma,wa,Oa];Y.on(va,ra).on(ma,oa).on(wa,F).on(Oa,fa);Ba.on(va,ra).on(ma,oa).on(wa,F).on(Oa,fa);ra.on(Ga,Y);oa.on(ka,Y);F.on(ia,Y);fa.on(Ca,Y);O.on(Ga,Y);pa.on(ka,Y);ba.on(ia,Y);U.on(Ca,Y);W.on(Ga,Y);ca.on(ka,Y);jb.on(ia,Y);la.on(Ca,Y);ra.on(qa,O);oa.on(qa,pa);F.on(qa,ba);fa.on(qa,U);ra.on(ta,W);oa.on(ta,ca);F.on(ta,jb);fa.on(ta,la);O.on(qa,O);pa.on(qa,
pa);ba.on(qa,ba);U.on(qa,U);O.on(ta,O);pa.on(ta,pa);ba.on(ta,ba);U.on(ta,U);W.on(qa,O);ca.on(qa,pa);jb.on(qa,ba);la.on(qa,U);W.on(ta,W);ca.on(ta,ca);jb.on(ta,jb);la.on(ta,la);Y.on(qa,Y);Ba.on(qa,Y);Y.on(ta,Ba);Ba.on(ta,Ba);vb.on(ea,sa).on(v,sa).on(D,sa).on(u,sa);sa.on(qa,sa).on(ta,ya);ya.on(qa,sa).on(ta,ya);var Xa=[v,D,E,I,da,S,M,Z,ea];Wa.on(Xa,Ja).on(q,Da);ib.on(Xa,Ja).on(q,Da);P.on(Xa,Ja);Ja.on(Xa,Ja).on(q,Da).on(C,Ia);Ia.on(Xa,Ja);Da.on(ea,gb).on(v,gb).on(u,Na);var hb=function(a){for(var b=a.length,
d=0,c=[],e=[];d<b;){for(var f=mb,g=null,h=null,k=0,l=null,m=-1;d<b&&!(g=f.next(a[d]));)e.push(a[d++]);for(;d<b&&(h=g||f.next(a[d]));)g=null,f=h,f.accepts()?(m=0,l=f):0<=m&&m++,d++,k++;if(0>m)for(k=d-k;k<d;k++)e.push(a[k]);else 0<e.length&&(c.push(new qb(e)),e=[]),d-=m,k-=m,f=l.emit(),c.push(new f(a.slice(d-k,d)))}0<e.length&&c.push(new qb(e));return c},Ya=Object.freeze({State:w,TOKENS:lb,run:hb,start:mb});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
var bb=function(a){return hb(Ra(a))};e.find=function(a){for(var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=bb(a),c=[],e=0;e<d.length;e++){var f=d[e];!f.isLink||b&&f.type!==b||c.push(f.toObject())}return c};e.inherits=f;e.options=n;e.parser=Ya;e.scanner=zb;e.test=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=bb(a);return 1===d.length&&d[0].isLink&&(!b||d[0].type===b)};e.tokenize=bb})(self.linkify)})();"use strict";
(function(c,e){e=function(c){function b(a){this.named=a}function a(a,b){this.delegate=a;this.entityParser=b;this.input=this.state=null;this.tagColumn=this.tagLine=this.column=this.line=this.index=-1;this.reset()}function d(b,d){this.token=null;this.startLine=1;this.startColumn=0;this.options=d||{};this.tokenizer=new a(this,b)}var e={nbsp:"\u00a0"},f=/^#[xX]([A-Fa-f0-9]+)$/,k=/^#([0-9]+)$/,l=/^([A-Za-z0-9]+)$/;b.prototype.parse=function(a){if(a){var b=a.match(f);if(b)return"&#x"+b[1]+";";if(b=a.match(k))return"&#"+
b[1]+";";if(b=a.match(l))return this.named[b[1]]||"&"+b[1]+";"}};var m=/[\t\n\f ]/,n=/[A-Za-z]/,p=/\r\n?/g;a.prototype={reset:function(){this.state="beforeData";this.input="";this.index=0;this.line=1;this.column=0;this.tagColumn=this.tagLine=-1;this.delegate.reset()},tokenize:function(a){this.reset();this.tokenizePart(a);this.tokenizeEOF()},tokenizePart:function(a){for(this.input+=a.replace(p,"\n");this.index<this.input.length;)this.states[this.state].call(this)},tokenizeEOF:function(){this.flushData()},
flushData:function(){"data"===this.state&&(this.delegate.finishData(),this.state="beforeData")},peek:function(){return this.input.charAt(this.index)},consume:function(){var a=this.peek();this.index++;"\n"===a?(this.line++,this.column=0):this.column++;return a},consumeCharRef:function(){var a=this.input.indexOf(";",this.index);if(-1!==a){var b=this.input.slice(this.index,a);if(a=this.entityParser.parse(b)){for(b=b.length;b;)this.consume(),b--;this.consume();return a}}},markTagStart:function(){this.tagLine=
this.line;this.tagColumn=this.column;this.delegate.tagOpen&&this.delegate.tagOpen()},states:{beforeData:function(){"<"===this.peek()?(this.state="tagOpen",this.markTagStart(),this.consume()):(this.state="data",this.delegate.beginData())},data:function(){var a=this.peek();"<"===a?(this.delegate.finishData(),this.state="tagOpen",this.markTagStart(),this.consume()):"&"===a?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(a))},tagOpen:function(){var a=
this.consume();"!"===a?this.state="markupDeclaration":"/"===a?this.state="endTagOpen":n.test(a)&&(this.state="tagName",this.delegate.beginStartTag(),this.delegate.appendToTagName(a.toLowerCase()))},markupDeclaration:function(){"-"===this.consume()&&"-"===this.input.charAt(this.index)&&(this.consume(),this.state="commentStart",this.delegate.beginComment())},commentStart:function(){var a=this.consume();"-"===a?this.state="commentStartDash":">"===a?(this.delegate.finishComment(),this.state="beforeData"):
(this.delegate.appendToCommentData(a),this.state="comment")},commentStartDash:function(){var a=this.consume();"-"===a?this.state="commentEnd":">"===a?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("-"),this.state="comment")},comment:function(){var a=this.consume();"-"===a?this.state="commentEndDash":this.delegate.appendToCommentData(a)},commentEndDash:function(){var a=this.consume();"-"===a?this.state="commentEnd":(this.delegate.appendToCommentData("-"+
a),this.state="comment")},commentEnd:function(){var a=this.consume();">"===a?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("--"+a),this.state="comment")},tagName:function(){var a=this.consume();m.test(a)?this.state="beforeAttributeName":"/"===a?this.state="selfClosingStartTag":">"===a?(this.delegate.finishTag(),this.state="beforeData"):this.delegate.appendToTagName(a)},beforeAttributeName:function(){var a=this.peek();m.test(a)?this.consume():"/"===a?(this.state=
"selfClosingStartTag",this.consume()):">"===a?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeName",this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(a))},attributeName:function(){var a=this.peek();m.test(a)?(this.state="afterAttributeName",this.consume()):"/"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===a?(this.state="beforeAttributeValue",
this.consume()):">"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeName(a))},afterAttributeName:function(){var a=this.peek();m.test(a)?this.consume():"/"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===a?(this.consume(),this.state="beforeAttributeValue"):">"===a?(this.delegate.beginAttributeValue(!1),
this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="attributeName",this.delegate.beginAttribute(),this.delegate.appendToAttributeName(a))},beforeAttributeValue:function(){var a=this.peek();m.test(a)?this.consume():'"'===a?(this.state="attributeValueDoubleQuoted",this.delegate.beginAttributeValue(!0),this.consume()):"'"===a?(this.state="attributeValueSingleQuoted",
this.delegate.beginAttributeValue(!0),this.consume()):">"===a?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeValueUnquoted",this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(a))},attributeValueDoubleQuoted:function(){var a=this.consume();'"'===a?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===a?this.delegate.appendToAttributeValue(this.consumeCharRef('"')||
"&"):this.delegate.appendToAttributeValue(a)},attributeValueSingleQuoted:function(){var a=this.consume();"'"===a?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===a?this.delegate.appendToAttributeValue(this.consumeCharRef("'")||"&"):this.delegate.appendToAttributeValue(a)},attributeValueUnquoted:function(){var a=this.peek();m.test(a)?(this.delegate.finishAttributeValue(),this.consume(),this.state="beforeAttributeName"):"&"===a?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef(">")||
"&")):">"===a?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeValue(a))},afterAttributeValueQuoted:function(){var a=this.peek();m.test(a)?(this.consume(),this.state="beforeAttributeName"):"/"===a?(this.consume(),this.state="selfClosingStartTag"):">"===a?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},selfClosingStartTag:function(){">"===this.peek()?
(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},endTagOpen:function(){var a=this.consume();n.test(a)&&(this.state="tagName",this.delegate.beginEndTag(),this.delegate.appendToTagName(a.toLowerCase()))}}};d.prototype={tokenize:function(a){this.tokens=[];this.tokenizer.tokenize(a);return this.tokens},tokenizePart:function(a){this.tokens=[];this.tokenizer.tokenizePart(a);return this.tokens},tokenizeEOF:function(){this.tokens=
[];this.tokenizer.tokenizeEOF();return this.tokens[0]},reset:function(){this.token=null;this.startLine=1;this.startColumn=0},addLocInfo:function(){this.options.loc&&(this.token.loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}});this.startLine=this.tokenizer.line;this.startColumn=this.tokenizer.column},beginData:function(){this.token={type:"Chars",chars:""};this.tokens.push(this.token)},appendToData:function(a){this.token.chars+=a},
finishData:function(){this.addLocInfo()},beginComment:function(){this.token={type:"Comment",chars:""};this.tokens.push(this.token)},appendToCommentData:function(a){this.token.chars+=a},finishComment:function(){this.addLocInfo()},beginStartTag:function(){this.token={type:"StartTag",tagName:"",attributes:[],selfClosing:!1};this.tokens.push(this.token)},beginEndTag:function(){this.token={type:"EndTag",tagName:""};this.tokens.push(this.token)},finishTag:function(){this.addLocInfo()},markTagAsSelfClosing:function(){this.token.selfClosing=
!0},appendToTagName:function(a){this.token.tagName+=a},beginAttribute:function(){this._currentAttribute=["","",null];this.token.attributes.push(this._currentAttribute)},appendToAttributeName:function(a){this._currentAttribute[0]+=a},beginAttributeValue:function(a){this._currentAttribute[2]=a},appendToAttributeValue:function(a){this._currentAttribute[1]=this._currentAttribute[1]||"";this._currentAttribute[1]+=a},finishAttributeValue:function(){}};var r={HTML5NamedCharRefs:e,EntityParser:b,EventedTokenizer:a,
Tokenizer:d,tokenize:function(a,c){return(new d(new b(e),c)).tokenize(a)}},w=c.options,t=w.Options;return function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=r.tokenize(a),e=[],f=[],g;b=new t(b);for(g=0;g<d.length;g++){var h=d[g];if("StartTag"===h.type){if(e.push(h),h=h.tagName.toUpperCase(),"A"===h||w.contains(b.ignoreTags,h)){for(var k=e.length,l=d,m=++g,n=e,p=1;m<l.length&&0<p;){var v=l[m];"StartTag"===v.type&&v.tagName.toUpperCase()===h?p++:"EndTag"===v.type&&v.tagName.toUpperCase()===
h&&p--;n.push(v);m++}g+=e.length-k-1}}else if("Chars"!==h.type)e.push(h);else{k=b;h=c.tokenize(h.chars);l=[];for(m=0;m<h.length;m++)if(n=h[m],"nl"===n.type&&k.nl2br)l.push({type:"StartTag",tagName:"br",attributes:[],selfClosing:!0});else if(n.isLink&&k.check(n)){var J=k.resolve(n);n=J.formatted;p=J.tagName;v=J.className;var S=J.target,M=J.attributes;J=[["href",J.formattedHref]];v&&J.push(["class",v]);S&&J.push(["target",S]);for(var ea in M)J.push([ea,M[ea]]);l.push({type:"StartTag",tagName:p,attributes:J,
selfClosing:!1});l.push({type:"Chars",chars:n});l.push({type:"EndTag",tagName:p})}else l.push({type:"Chars",chars:n.toString()});e.push.apply(e,l)}}for(g=0;g<e.length;g++)switch(d=e[g],d.type){case "StartTag":b="<"+d.tagName;if(0<d.attributes.length){d=d.attributes;ea=[];for(k=0;k<d.length;k++)h=d[k],ea.push(h[0]+'="'+h[1].replace(/"/g,"&quot;")+'"');b+=" "+ea.join(" ")}b+=">";f.push(b);break;case "EndTag":f.push("</"+d.tagName+">");break;case "Chars":f.push(d.chars);break;case "Comment":f.push("\x3c!--"+
d.chars+"--\x3e")}return f.join("")}}(e);c.linkifyHtml=e})(window,linkify);
(function(c){function e(e){if("string"===typeof e.data){var b=e.handler,a=e.data.toLowerCase().split(" ");e.handler=function(d){if(this===d.target||!/textarea|select/i.test(d.target.nodeName)&&"text"!==d.target.type&&"password"!==d.target.type){var e="keypress"!==d.type&&c.hotkeys.specialKeys[d.which],f=String.fromCharCode(d.which).toLowerCase(),k="",l={};d.altKey&&"alt"!==e&&(k+="alt+");d.ctrlKey&&"ctrl"!==e&&(k+="ctrl+");d.metaKey&&!d.ctrlKey&&"meta"!==e&&(k+="meta+");d.shiftKey&&"shift"!==e&&(k+=
"shift+");e?l[k+e]=!0:(l[k+f]=!0,l[k+c.hotkeys.shiftNums[f]]=!0,"shift+"===k&&(l[c.hotkeys.shiftNums[f]]=!0));e=0;for(f=a.length;e<f;e++)if(l[a[e]])return b.apply(this,arguments)}}}}c.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",
105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};c.each(["keydown","keyup","keypress"],function(){c.event.special[this]={add:e}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var c=!1,e=!1,f=!1;(function(b){b.vakata={};b.vakata.css={get_css:function(a,b,d){a=a.toLowerCase();var c=d.cssRules||d.rules,e=0;do{if(c.length&&e>c.length+5)break;if(c[e].selectorText&&c[e].selectorText.toLowerCase()==a)return!0===b?(d.removeRule&&d.removeRule(e),d.deleteRule&&d.deleteRule(e),!0):c[e]}while(c[++e]);return!1},add_css:function(a,d){if(b.jstree.css.get_css(a,!1,d))return!1;d.insertRule?d.insertRule(a+" { }",0):d.addRule(a,null,0);return b.vakata.css.get_css(a)},
remove_css:function(a,d){return b.vakata.css.get_css(a,!0,d)},add_sheet:function(a){var d=!1,c=!0;if(a.str)return a.title&&(d=b("style[id='"+a.title+"-stylesheet']")[0]),d?c=!1:(d=document.createElement("style"),d.setAttribute("type","text/css"),a.title&&d.setAttribute("id",a.title+"-stylesheet")),d.styleSheet?c?(document.getElementsByTagName("head")[0].appendChild(d),d.styleSheet.cssText=a.str):d.styleSheet.cssText=d.styleSheet.cssText+" "+a.str:(d.appendChild(document.createTextNode(a.str)),document.getElementsByTagName("head")[0].appendChild(d)),
d.sheet||d.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(n){}else return d=document.createElement("link"),d.rel="stylesheet",d.type="text/css",d.media="all",d.href=a.url,document.getElementsByTagName("head")[0].appendChild(d),d.styleSheet}};var a=[],d=-1,g={},h={};b.fn.jstree=function(d){var c="string"==typeof d,e=Array.prototype.slice.call(arguments,1),f=this;if(c){if("_"==d.substring(0,1))return f;this.each(function(){var c=a[b.data(this,"jstree_instance_id")];
c=c&&b.isFunction(c[d])?c[d].apply(c,e):c;if("undefined"!==typeof c&&(0===d.indexOf("is_")||!0!==c&&!1!==c))return f=c,!1})}else this.each(function(){var c=b.data(this,"jstree_instance_id"),f=[],h=d?b.extend({},!0,d):{},k=b(this),l=!1,m=[];f=f.concat(e);k.data("jstree")&&f.push(k.data("jstree"));h=f.length?b.extend.apply(null,[!0,h].concat(f)):h;"undefined"!==typeof c&&a[c]&&a[c].destroy();c=parseInt(a.push({}),10)-1;b.data(this,"jstree_instance_id",c);h.plugins=b.isArray(h.plugins)?h.plugins:b.jstree.defaults.plugins.slice();
h.plugins.unshift("core");h.plugins=h.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");l=b.extend(!0,{},b.jstree.defaults,h);l.plugins=h.plugins;b.each(g,function(a,d){-1===b.inArray(a,l.plugins)?(l[a]=null,delete l[a]):m.push(a)});l.plugins=m;a[c]=new b.jstree._instance(c,b(this).addClass("jstree jstree-"+c),l);b.each(a[c]._get_settings().plugins,function(b,d){a[c].data[d]={}});b.each(a[c]._get_settings().plugins,function(b,d){g[d]&&
g[d].__init.apply(a[c])});setTimeout(function(){a[c]&&a[c].init()},0)});return f};b.jstree={defaults:{plugins:[]},_focused:function(){return a[d]||null},_reference:function(d){if(a[d])return a[d];var c=b(d);c.length||"string"!==typeof d||(c=b("#"+d));return c.length?a[c.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(a,d,c){this.data={core:{}};this.get_settings=function(){return b.extend(!0,{},c)};this._get_settings=function(){return c};this.get_index=function(){return a};
this.get_container=function(){return d};this.get_container_ul=function(){return d.children("ul:eq(0)")};this._set_settings=function(a){c=b.extend(!0,{},c,a)}},_fn:{},plugin:function(a,d){d=b.extend({},{__init:b.noop,__destroy:b.noop,_fn:{},defaults:!1},d);g[a]=d;b.jstree.defaults[a]=d.defaults;b.each(d._fn,function(d,c){c.plugin=a;c.old=b.jstree._fn[d];b.jstree._fn[d]=function(){var a=c,e=Array.prototype.slice.call(arguments);var f=new b.Event("before.jstree");var g=!1;if(!0!==this.data.core.locked||
"unlock"===d||"is_locked"===d){do{if(a&&a.plugin&&-1!==b.inArray(a.plugin,this._get_settings().plugins))break;a=a.old}while(a);if(a){if(0===d.indexOf("_"))f=a.apply(this,e);else{f=this.get_container().triggerHandler(f,{func:d,inst:this,args:e,plugin:a.plugin});if(!1===f)return;"undefined"!==typeof f&&(e=f);f=a.apply(b.extend({},this,{__callback:function(a){this.get_container().triggerHandler(d+".jstree",{inst:this,args:e,rslt:a,rlbk:g})},__rollback:function(){return g=this.get_rollback()},__call_old:function(b){return a.old.apply(this,
b?Array.prototype.slice.call(arguments,1):e)}}),e)}return f}}};b.jstree._fn[d].old=c.old;b.jstree._fn[d].plugin=a})},rollback:function(d){d&&(b.isArray(d)||(d=[d]),b.each(d,function(b,d){a[d.i].set_rollback(d.h,d.d)}))}};b.jstree._fn=b.jstree._instance.prototype={};b(function(){var a=navigator.userAgent.toLowerCase(),d=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],g=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(a)&&6==parseInt(d,10)){c=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}g+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
7==parseInt(d,10)&&(e=!0,g+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&/mozilla/.test(a)&&1.9>parseFloat(d,10)&&(f=!0,g+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");b.vakata.css.add_sheet({str:g,title:"jstree"})});b.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",b.proxy(function(a){a=b(a.target);this.toggle_node(a)},this)).bind("mousedown.jstree",b.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();
try{a.removeAllRanges(),a.collapse()}catch(l){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",b.proxy(function(a,d){a=this._get_node(d.rslt.obj);var c=this;-1===a&&(a=this.get_container_ul());a.length&&a.find("li").each(function(){var a=b(this);a.data("jstree")&&b.each(a.data("jstree"),function(d,e){c.data[d]&&b.isFunction(c["_"+d+"_notify"])&&c["_"+d+"_notify"].call(c,a,e)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
b.proxy(function(a,d){a=this._get_node(d.rslt.obj);var c=this;-1===a&&(a=this.get_container_ul());a.length&&a.find("li.jstree-open:not(:has(ul))").each(function(){c.load_node(this,b.noop,b.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var c,e=this.get_index(),f=this._get_settings(),h=this;b.each(f.plugins,function(a,b){try{g[b].__destroy.apply(h)}catch(w){}});this.__callback();if(this.is_focused())for(c in a)if(a.hasOwnProperty(c)&&
c!=e){a[c].set_focus();break}e===d&&(d=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});b(document).unbind(".jstree-"+e).undelegate(".jstree-"+e);a[e]=null;delete a[e]},_core_notify:function(a,b){b.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var d=this,c=!0,e=[],f=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=b.map(b.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:")}),this.data.core.to_load=b.map(b.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(b.each(this.data.core.to_load,function(a,d){if("#"==d)return!0;b(d).length?e.push(d):f.push(d)}),e.length&&(this.data.core.to_load=f,b.each(e,function(a,b){d._is_loaded(b)||(d.load_node(b,function(){d.reload_nodes(!0)},function(){d.reload_nodes(!0)}),
c=!1)})));this.data.core.to_open.length&&b.each(this.data.core.to_open,function(a,b){d.open_node(b,!1,!0)});c&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){d.__callback({},d)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&b.each(this.data.core.to_open,function(b,d){a.open_node(d,!1,!0)});this.__callback({})},refresh:function(a,b){var d=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){d.__callback({obj:a});d.reload_nodes();b&&"function"==typeof b&&b()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=b.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");d=this.get_index();this.__callback()}},is_focused:function(){return d==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),
d=-1);this.__callback()},_get_node:function(a){var d=b(a,this.get_container());if(d.is(".jstree")||-1==a)return-1;d=d.closest("li:not(.jstree-header)",this.get_container());return d.length?d:!1},_get_next:function(a,b){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:not(.jstree-header):first-child"):a.length?b?0<a.nextAll("li:not(.jstree-header)").size()?a.nextAll("li:not(.jstree-header):eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:not(.jstree-header):eq(0)"):0<a.nextAll("li:not(.jstree-header)").size()?
a.nextAll("li:not(.jstree-header):eq(0)"):a.parentsUntil(".jstree","li").next("li:not(.jstree-header)").eq(0):!1},_get_prev:function(a,b){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:not(.jstree-header):last-child");if(!a.length)return!1;if(b)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prevAll("li:not(.jstree-header)").length){for(a=a.prevAll("li:not(.jstree-header)").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:not(.jstree-header):last");
return a}a=a.parentsUntil(".jstree","li:not(.jstree-header):eq(0)");return a.length?a:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:not(.jstree-header):eq(0)");return a.length?a:-1},_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li:not(.jstree-header)"):a.length?a.children("ul:eq(0)").children("li:not(.jstree-header)"):!1},get_path:function(a,b){var d=[],c=this;a=this._get_node(a);
if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){d.push(b?this.id:c.get_text(this))});d.reverse();d.push(b?a.attr("id"):this.get_text(a));return d},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},
correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,b,d){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return b&&b.call(),!1;var e=d||c?0:this._get_settings().core.animation,f=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){f.open_node(this,!1,
!0)}),e&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),e?a.children("ul").stop(!0,!0).slideDown(e,function(){this.style.display="";f.after_open(a)}):f.after_open(a),this.__callback({obj:a}),b&&b.call()):(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){f.open_node(a,b,d)},b))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,b){a=this._get_node(a);b=b||c?0:this._get_settings().core.animation;
var d=this;if(!a.length||!a.hasClass("jstree-open"))return!1;b&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");b?a.children("ul").stop(!0,!0).slideUp(b,function(){this.style.display="";d.after_close(a)}):d.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},
open_all:function(a,b,d){(a=a?this._get_node(a):-1)&&-1!==a||(a=this.get_container_ul());d?a=a.find("li.jstree-closed"):(d=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").andSelf():a.find("li.jstree-closed"));var c=this;a.each(function(){var a=this;c._is_loaded(this)?c.open_node(this,!1,!b):c.open_node(this,function(){c.open_all(a,b,d)},!b)});0===d.find("li.jstree-closed").length&&this.__callback({obj:d})},close_all:function(a,b){var d=this;(a=a?this._get_node(a):this.get_container())&&-1!==
a||(a=this.get_container_ul());a.find("li.jstree-open").andSelf().each(function(){d.close_node(this,!b)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?b(a):this.get_container_ul();a=a.is("li")?a.find("li").andSelf():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();
this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,b){this.get_container().empty().append(a);this.data=b;this.__callback()},load_node:function(a,b,d){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(a,d,c,e,f){a=this._get_node(a);d="undefined"===typeof d?"last":d;var g=b("<li />"),h=this._get_settings().core;if(-1!==a&&!a.length)return!1;if(!f&&
!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,d,c,e,!0)}),!1;this.__rollback();"string"===typeof c&&(c={data:c});c||(c={});c.attr&&g.attr(c.attr);c.metadata&&g.data(c.metadata);c.state&&g.addClass("jstree-"+c.state);c.data||(c.data=this._get_string("new_node"));if(!b.isArray(c.data)){var k=c.data;c.data=[];c.data.push(k)}b.each(c.data,function(a,d){k=b("<a />");b.isFunction(d)&&(d=d.call(this,c));if("string"==typeof d)k.attr("href","#")[h.html_titles?"html":"text"](d);
else d.attr||(d.attr={}),d.attr.href||(d.attr.href="#"),k.attr(d.attr)[h.html_titles?"html":"text"](d.title),d.language&&k.addClass(d.language);k.prepend("<ins class='jstree-icon'>&#160;</ins>");!d.icon&&c.icon&&(d.icon=c.icon);d.icon&&(-1===d.icon.indexOf("/")?k.children("ins").addClass(d.icon):k.children("ins").css("background","url('"+d.icon+"') center center no-repeat"));g.append(k)});g.prepend("<ins class='jstree-icon'>&#160;</ins>");-1===a&&(a=this.get_container(),"before"===d&&(d="first"),
"after"===d&&(d="last"));switch(d){case "before":a.before(g);k=this._get_parent(a);break;case "after":a.after(g);k=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(g);k=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(g);k=a;break;default:a.children("ul").length||a.append("<ul />"),d||(d=0),k=a.children("ul").children("li").eq(d),k.length?k.before(g):a.children("ul").append(g),k=a}if(-1===
k||k.get(0)===this.get_container().get(0))k=-1;this.clean_node(k);this.__callback({obj:g,parent:k});e&&e.call(this,g);return g},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var b=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(b)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,b){a=this._get_node(a);if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var d=
a.children("INS").clone();a.html(b).prepend(d);this.__callback({obj:a,name:b});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:b});return a.nodeValue=b},rename_node:function(a,b){a=this._get_node(a);this.__rollback();a&&a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:a,name:b})},delete_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.__rollback();var d=this._get_parent(a),c=b([]),e=this;
a.each(function(){c=c.add(e._get_prev(this))});a=a.detach();-1!==d&&0===d.find("> ul > li").length&&d.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(d);this.__callback({obj:a,prev:c,parent:d});return a},prepare_move:function(a,d,c,e,f){var g={};g.ot=b.jstree._reference(a)||this;g.o=g.ot._get_node(a);g.r=-1===d?-1:this._get_node(d);g.p="undefined"===typeof c||!1===c?"last":c;if(f||!h.o||h.o[0]!==g.o[0]||h.r[0]!==g.r[0]||h.p!==g.p){g.ot=b.jstree._reference(g.o)||this;
g.rt=b.jstree._reference(g.r)||this;if(-1!==g.r&&g.r){if(!/^(before|after)$/.test(g.p)&&!this._is_loaded(g.r))return this.load_node(g.r,function(){this.prepare_move(a,d,c,e,!0)});switch(g.p){case "before":g.cp=g.r.index();g.cr=g.rt._get_parent(g.r);break;case "after":g.cp=g.r.index()+1;g.cr=g.rt._get_parent(g.r);break;case "first":g.cp=0;g.cr=g.r;break;case "inside":case "last":g.cp=g.r.find(" > ul > li").length;g.cr=g.r;break;default:g.cp=g.p,g.cr=g.r}}else switch(g.cr=-1,g.p){case "first":case "before":case "inside":g.cp=
0;break;case "after":case "last":g.cp=g.rt.get_container().find(" > ul > li").length;break;default:g.cp=g.p}g.np=-1==g.cr?g.rt.get_container():g.cr;g.op=g.ot._get_parent(g.o);g.cop=g.o.index();-1===g.op&&(g.op=g.ot?g.ot.get_container():this.get_container());!/^(before|after)$/.test(g.p)&&g.op&&g.np&&g.op[0]===g.np[0]&&g.o.index()<g.cp&&g.cp++;g.or=g.np.find(" > ul > li:nth-child("+(g.cp+1)+")");h=g}this.__callback(h);e&&e.call(this,h)},check_move:function(){var a=h,b=!0,d=-1===a.r?this.get_container():
a.r;if(!a||!a.o||a.or[0]===a.o[0]||a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==d.parentsUntil(".jstree","li").andSelf().index(this))return b=!1});return b},move_node:function(a,d,c,e,f,g){if(!f)return this.prepare_move(a,d,c,function(a){this.move_node(a,!1,!1,e,!0,g)});e&&(h.cy=!0);if(!g&&!this.check_move())return!1;this.__rollback();d=!1;e?(d=a.o.clone(!0),d.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):d=a.o;a.or.length?
a.or.before(d):(a.np.children("ul").length||b("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(d));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(w){}e&&(h.cy=!0,h.oc=d);this.__callback(h);return h},_get_move:function(){return h}}})})(jQuery);(function(b){var a,d,c;b(function(){/msie/.test(navigator.userAgent.toLowerCase())?(d=b('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",
top:-1E3,left:0}).appendTo("body"),c=b('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=d.width()-c.width(),d.add(c).remove()):(d=b("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),a=100-d.width(),d.parent().remove())});b.jstree.plugin("ui",{__init:function(){this.data.ui.selected=b();this.data.ui.last_selected=
!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",b.proxy(function(a){a.preventDefault();a.currentTarget.blur();b(a.currentTarget).hasClass("jstree-loading")||this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",b.proxy(function(a){b(a.currentTarget).hasClass("jstree-loading")||this.hover_node(a.target)},this)).delegate("a","mouseleave.jstree",b.proxy(function(a){b(a.currentTarget).hasClass("jstree-loading")||
this.dehover_node(a.target)},this)).bind("reopen.jstree",b.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",b.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",b.proxy(function(){this.reselect()},this)).bind("close_node.jstree",b.proxy(function(a,d){var c=this._get_settings().ui,e=this._get_node(d.rslt.obj);a=e&&e.length?e.children("ul").find("a.jstree-clicked"):b();var f=this;!1!==c.selected_parent_close&&a.length&&a.each(function(){f.deselect_node(this);
"select_parent"===c.selected_parent_close&&f.select_node(e)})},this)).bind("delete_node.jstree",b.proxy(function(a,b){a=this._get_settings().ui.select_prev_on_delete;var d=this._get_node(b.rslt.obj);d=d&&d.length?d.find("a.jstree-clicked"):[];var c=this;d.each(function(){c.deselect_node(this)});a&&d.length&&b.rslt.prev.each(function(){if(this.parentNode)return c.select_node(this),!1})},this)).bind("move_node.jstree",b.proxy(function(a,b){b.rslt.cy&&b.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},
this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(a,d){if("undefined"===typeof a||null===a)return d?this.data.ui.selected:this.data.ui.last_selected;d=b(a,this.get_container());if(d.is(".jstree")||-1==a)return-1;d=d.closest("li",this.get_container());return d.length?d:!1},_ui_notify:function(a,
b){b.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:"))});this.__callback(this.data.ui.to_select)},reselect:function(){var a=this,d=this.data.ui.to_select;d=b.map(b.makeArray(d),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,
"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:")});b.each(d,function(b,d){d&&"#"!==d&&a.select_node(d)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();
this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered;if(!a||!a.length)return!1;var b=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===b[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,b,d){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var c=this._get_settings().ui,e="on"==c.select_multiple_modifier||!1!==c.select_multiple_modifier&&d&&d[c.select_multiple_modifier+"Key"],f=!1!==c.select_range_modifier&&
d&&d[c.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],g=this.is_selected(a),h=!0,k=this;if(b){if(c.disable_selecting_children&&e&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;h=!1;switch(!0){case f:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":
"prevUntil"](".jstree-last-selected").andSelf();-1==c.select_limit||a.length<c.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==k.data.ui.last_selected[0]&&k.deselect_node(this)}),g=!1,h=!0):h=!1;break;case g&&!e:this.deselect_all();g=!1;h=!0;break;case !g&&!e:if(-1==c.select_limit||0<c.select_limit)this.deselect_all(),h=!0;break;case g&&e:this.deselect_node(a);break;case !g&&e:if(-1==c.select_limit||this.data.ui.selected.length+
1<=c.select_limit)h=!0}}h&&!g&&(f||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),c.selected_parent_open&&a.parents(".jstree-closed").each(function(){k.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:d}))},_fix_scroll:function(b){var d=this.get_container()[0];d.scrollHeight>d.offsetHeight&&(b=this._get_node(b))&&-1!==b&&b.length&&b.is(":visible")&&(b=b.offset().top-this.get_container().offset().top,
0>b&&(d.scrollTop=d.scrollTop+b-1),b+this.data.core.li_height+(d.scrollWidth>d.offsetWidth?a:0)>d.offsetHeight&&(d.scrollTop+=b-d.offsetHeight+this.data.core.li_height+1+(d.scrollWidth>d.offsetWidth?a:0)))},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},
toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(a){return a?b(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?b(a).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=
b([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});b.jstree.defaults.plugins.push("ui")})(jQuery);(function(b){b.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",b.proxy(function(a,b){if(this._get_settings().crrm.move.open_onmove){var d=this;b.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){d.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",
check_move:function(a){return!0}}},_fn:{_show_input:function(a,d){a=this._get_node(a);var c=this._get_settings().core.rtl,e=this._get_settings().crrm.input_width_limit,f=a.children("ins").width(),l=a.find("> a:visible > ins").width()*a.find("> a:visible > ins").length,m=this.get_text(a),n=b("<div />",{css:{position:"absolute",top:"-200px",left:c?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),p=a.css("position","relative").append(b("<input />",{value:m,"class":"jstree-rename-input",css:{padding:"0",
border:"1px solid silver",position:"absolute",left:c?"auto":f+l+4+"px",right:c?f+l+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:b.proxy(function(){var b=a.children(".jstree-rename-input"),c=b.val();""===c&&(c=m);n.remove();b.remove();this.set_text(a,m);this.rename_node(a,c);d.call(this,a,c,m);a.css("position","")},this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=m,this.blur()):13==a?this.blur():p.width(Math.min(n.text("pW"+
this.value).width(),e))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(a,"");n.css({fontFamily:p.css("fontFamily")||"",fontSize:p.css("fontSize")||"",fontWeight:p.css("fontWeight")||"",fontStyle:p.css("fontStyle")||"",fontStretch:p.css("fontStretch")||"",fontVariant:p.css("fontVariant")||"",letterSpacing:p.css("letterSpacing")||"",wordSpacing:p.css("wordSpacing")||""});p.width(Math.min(n.text("pW"+p[0].value).width(),e))[0].select()},
rename:function(a){a=this._get_node(a);this.__rollback();var b=this.__callback;this._show_input(a,function(a,d,c){b.call(this,{obj:a,new_name:d,old_name:c})})},create:function(a,d,c,e,f){var g=this;(a=this._get_node(a))||(a=-1);this.__rollback();return this.create_node(a,d,c,function(a){var d=this._get_parent(a),c=b(a).index();e&&e.call(this,a);d.length&&d.hasClass("jstree-closed")&&this.open_node(d,!1,!0);f?g.__callback({obj:a,name:this.get_text(a),parent:d,position:c}):this._show_input(a,function(a,
b,e){g.__callback({obj:a,name:b,parent:d,position:c})})})},remove:function(a){a=this._get_node(a,!0);var b=this._get_parent(a),c=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:c,parent:b})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(a,b,c,e,f,l){var d=this._get_settings().crrm.move;if(!f)return"undefined"===typeof c&&(c=d.default_position),"inside"!==
c||d.default_position.match(/^(before|after)$/)||(c=d.default_position),this.__call_old(!0,a,b,c,e,!1,l);if(!0===d.always_copy||"multitree"===d.always_copy&&a.rt.get_index()!==a.ot.get_index())e=!0;this.__call_old(!0,a,b,c,e,!0,l)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},
paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var b=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,nodes:b})}}})})(jQuery);(function(b){var a=[];b.jstree._themes=!1;b.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",
b.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",b.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(d,c){if(!d)return!1;c||(c=b.jstree._themes+d+"/style.css");-1==b.inArray(c,a)&&(b.vakata.css.add_sheet({url:c}),
a.push(c));this.data.themes.theme!=d&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=d);this.get_container().addClass("jstree-"+d);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=
!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});b(function(){!1===b.jstree._themes&&b("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return b.jstree._themes=
this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===b.jstree._themes&&(b.jstree._themes="themes/")});b.jstree.defaults.plugins.push("themes")})(jQuery);(function(b){var a=[];b.jstree.plugin("hotkeys",{__init:function(){if("undefined"===typeof b.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";b.each(this._get_settings().hotkeys,function(d,c){!1!==c&&-1==b.inArray(d,a)&&(b(document).bind("keydown",
d,function(a){a:{var c=b.jstree._focused(),e;if(c&&c.data&&c.data.hotkeys&&c.data.hotkeys.enabled&&(e=c._get_settings().hotkeys[d])){a=e.call(c,a);break a}a=void 0}return a}),a.push(d))});this.get_container().bind("lock.jstree",b.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",b.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},
"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||
this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=
this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},
f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled||(this.data.hotkeys.enabled=!0)},disable_hotkeys:function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1)}}})})(jQuery);(function(b){b.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,
b){b.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,b,c){var d=this;this.load_node_json(a,function(){d.__callback({obj:d._get_node(a)});b.call(this)},c)},_is_loaded:function(a){var d=this._get_settings().json_data;a=this._get_node(a);return-1==a||!a||!d.ajax&&!d.progressive_render&&!b.isFunction(d.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").length},refresh:function(a){a=
this._get_node(a);var d=this._get_settings().json_data;a&&-1!==a&&d.progressive_unload&&(b.isFunction(d.data)||d.ajax)&&a.removeData("jstree_children");return this.__call_old()},load_node_json:function(a,d,c){var e=this.get_settings().json_data,f=function(){};var g=function(){};if((a=this._get_node(a))&&-1!==a&&(e.progressive_render||e.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&0===a.children("ul").children("li").length&&a.data("jstree_children")){if(g=this._parse_json(a.data("jstree_children"),
a))a.append(g),e.progressive_unload||a.removeData("jstree_children");this.clean_node(a);d&&d.call(this)}else{if(a&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !e.data&&!e.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(e.data):e.data.call(this,a,b.proxy(function(b){(b=this._parse_json(b,a))?(-1!==a&&a?(a.append(b).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(b.children()),
this.clean_node(a),d&&d.call(this)):(-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&this.correct_state(a)):e.correct_state&&this.get_container().children("ul").empty(),c&&c.call(this))},this));break;case !!e.data&&!e.ajax||!!e.data&&!!e.ajax&&(!a||-1===a):a&&-1!=a||((g=this._parse_json(e.data,a))?(this.get_container().children("ul").empty().append(g.children()),this.clean_node()):e.correct_state&&this.get_container().children("ul").empty());
d&&d.call(this);break;case !e.data&&!!e.ajax||!!e.data&&!!e.ajax&&a&&-1!==a:f=function(b,d,f){var g=this.get_settings().json_data.ajax.error;g&&g.call(this,b,d,f);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===d&&e.correct_state&&this.correct_state(a)):"success"===d&&e.correct_state&&this.get_container().children("ul").empty();c&&c.call(this)},g=function(c,g,h){var k=this.get_settings().json_data.ajax.success;k&&(c=k.call(this,
c,g,h)||c);if(""===c||c&&c.toString&&""===c.toString().replace(/^[\s\n]+$/,"")||!b.isArray(c)&&!b.isPlainObject(c))return f.call(this,h,g,"");(c=this._parse_json(c,a))?(-1!==a&&a?(a.append(c).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()),this.clean_node(a),d&&d.call(this)):-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&
(this.correct_state(a),d&&d.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))},e.ajax.context=this,e.ajax.error=f,e.ajax.success=g,e.ajax.dataType||(e.ajax.dataType="json"),b.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,a)),b.isFunction(e.ajax.data)&&(e.ajax.data=e.ajax.data.call(this,a)),b.ajax(e.ajax)}}},_parse_json:function(a,d,c){var e=!1,f=this._get_settings(),g=f.json_data,m=f.core.html_titles;if(!a)return e;g.progressive_unload&&d&&-1!==
d&&d.data("jstree_children",e);if(b.isArray(a)){e=b();if(!a.length)return!1;f=0;for(g=a.length;f<g;f++){var n=this._parse_json(a[f],d,!0);n.length&&(e=e.add(n))}}else{"string"==typeof a&&(a={data:a});if(!a.data&&""!==a.data)return e;e=b("<li />");a.attr&&e.attr(a.attr);a.metadata&&e.data(a.metadata);a.state&&e.addClass("jstree-"+a.state);b.isArray(a.data)||(n=a.data,a.data=[],a.data.push(n));b.each(a.data,function(d,c){n=b("<a />");b.isFunction(c)&&(c=c.call(this,a));if("string"==typeof c)n.attr("href",
"#")[m?"html":"text"](c);else c.attr||(c.attr={}),c.attr.href||(c.attr.href="#"),n.attr(c.attr)[m?"html":"text"](c.title),c.language&&n.addClass(c.language);n.prepend("<ins class='jstree-icon'>&#160;</ins>");!c.icon&&a.icon&&(c.icon=a.icon);c.icon&&(-1===c.icon.indexOf("/")?n.children("ins").addClass(c.icon):n.children("ins").css("background","url('"+c.icon+"') center center no-repeat"));e.append(n)});e.prepend("<ins class='jstree-icon'>&#160;</ins>");a.children&&(g.progressive_render&&"open"!==a.state?
e.addClass("jstree-closed").data("jstree_children",a.children):(g.progressive_unload&&e.data("jstree_children",a.children),b.isArray(a.children)&&a.children.length&&(n=this._parse_json(a.children,d,!0),n.length&&(d=b("<ul />"),d.append(n),e.append(d)))))}c||(c=b("<ul />"),c.append(e),e=c);return e},get_json:function(a,d,c,e){var f=[],g=this._get_settings(),h=this,n,p,r,w,t,v;(a=this._get_node(a))&&-1!==a||(a=this.get_container().find("> ul > li"));d=b.isArray(d)?d:["id","class"];!e&&this.data.types&&
d.push(g.types.type_attr);c=b.isArray(c)?c:[];a.each(function(){r=b(this);n={data:[]};d.length&&(n.attr={});b.each(d,function(a,b){(p=r.attr(b))&&p.length&&p.replace(/jstree[^ ]*/ig,"").length&&(n.attr[b]=(" "+p).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))});r.hasClass("jstree-open")&&(n.state="open");r.hasClass("jstree-closed")&&(n.state="closed");r.data()&&(n.metadata=r.data());w=r.children("a");w.each(function(){t=b(this);c.length||-1!==b.inArray("languages",
g.plugins)||t.children("ins").get(0).style.backgroundImage.length||t.children("ins").get(0).className&&t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(v=!1,-1!==b.inArray("languages",g.plugins)&&b.isArray(g.languages)&&g.languages.length&&b.each(g.languages,function(a,b){if(t.hasClass(b))return v=b,!1}),p={attr:{},title:h.get_text(t,v)},b.each(c,function(a,b){p.attr[b]=(" "+(t.attr(b)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),
-1!==b.inArray("languages",g.plugins)&&b.isArray(g.languages)&&g.languages.length&&b.each(g.languages,function(a,b){if(t.hasClass(b))return p.language=b,!0}),t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(p.icon=t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),t.children("ins").get(0).style.backgroundImage.length&&(p.icon=t.children("ins").get(0).style.backgroundImage.replace("url(",
"").replace(")",""))):p=h.get_text(t);1<w.length?n.data.push(p):n.data=p});r=r.find("> ul > li");r.length&&(n.children=h.get_json(r,d,c,!0));f.push(n)});return f}}})})(jQuery);(function(b){b.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(a){var d=this._get_settings().languages,c=".jstree-"+this.get_index()+" a";if(!b.isArray(d)||0===d.length)return!1;if(-1==b.inArray(a,d))if(d[a])a=d[a];else return!1;if(a==this.data.languages.current_language)return!0;
d=b.vakata.css.get_css(c+"."+this.data.languages.current_language,!1,this.data.languages.language_css);!1!==d&&(d.style.display="none");d=b.vakata.css.get_css(c+"."+a,!1,this.data.languages.language_css);!1!==d&&(d.style.display="");this.data.languages.current_language=a;this.__callback(a);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(a,d){var c=this._get_settings().languages,e=this._get_settings().core.strings;b.isArray(c)&&c.length&&(d=d&&-1!=b.inArray(d,
c)?d:this.data.languages.current_language);return e[d]&&e[d][a]?e[d][a]:e[a]?e[a]:a},get_text:function(a,d){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var c=this._get_settings().languages,e=this._get_settings().core.html_titles;b.isArray(c)&&c.length?(d=d&&-1!=b.inArray(d,c)?d:this.data.languages.current_language,a=a.children("a."+d)):a=a.children("a:eq(0)");if(e)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];
return a.nodeValue},set_text:function(a,d,c){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var e=this._get_settings().languages,f=this._get_settings().core.html_titles;b.isArray(e)&&e.length?(c=c&&-1!=b.inArray(c,e)?c:this.data.languages.current_language,a=a.children("a."+c)):a=a.children("a:eq(0)");if(f)return e=a.children("INS").clone(),a.html(d).prepend(e),this.__callback({obj:a,name:d,lang:c}),!0;a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,
name:d,lang:c});return a.nodeValue=d},_load_css:function(){var a=this._get_settings().languages,d="/* languages css */",c=".jstree-"+this.get_index()+" a",e;if(b.isArray(a)&&a.length){this.data.languages.current_language=a[0];for(e=0;e<a.length;e++)d+=c+"."+a[e]+" {",a[e]!=this.data.languages.current_language&&(d+=" display:none; "),d+=" } ";this.data.languages.language_css=b.vakata.css.add_sheet({str:d,title:"jstree-languages"})}},create_node:function(a,d,c,e){return this.__call_old(!0,a,d,c,function(a){var d=
this._get_settings().languages,c=a.children("a"),f;if(b.isArray(d)&&d.length){for(f=0;f<d.length;f++)c.is("."+d[f])||a.append(c.eq(0).clone().removeClass(d.join(" ")).addClass(d[f]));c.not("."+d.join(", .")).remove()}e&&e.call(this,a)})}}})})(jQuery);(function(b){b.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof b.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var a=this._get_settings().cookies,d;a.save_loaded&&(d=b.cookie(a.save_loaded))&&d.length&&(this.data.core.to_load=
d.split(","));a.save_opened&&(d=b.cookie(a.save_opened))&&d.length&&(this.data.core.to_open=d.split(","));a.save_selected&&(d=b.cookie(a.save_selected))&&d.length&&this.data.ui&&(this.data.ui.to_select=d.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",b.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",b.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+
a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var d=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":d.save_opened&&(this.save_opened(),b.cookie(d.save_opened,this.data.core.to_open.join(","),d.cookie_options));d.save_loaded&&(this.save_loaded(),b.cookie(d.save_loaded,this.data.core.to_load.join(","),
d.cookie_options));break;case "select_node":case "deselect_node":d.save_selected&&this.data.ui&&(this.save_selected(),b.cookie(d.save_selected,this.data.ui.to_select.join(","),d.cookie_options))}else d.save_loaded&&(this.save_loaded(),b.cookie(d.save_loaded,this.data.core.to_load.join(","),d.cookie_options)),d.save_opened&&(this.save_opened(),b.cookie(d.save_opened,this.data.core.to_open.join(","),d.cookie_options)),d.save_selected&&this.data.ui&&(this.save_selected(),b.cookie(d.save_selected,this.data.ui.to_select.join(","),
d.cookie_options))}}}})})(jQuery);(function(b){b.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",b.proxy(function(a,b){a=this._get_node(b.rslt.obj);a=-1===a?this.get_container().children("ul"):a.children("ul");this.sort(a)},this)).bind("rename_node.jstree create_node.jstree create.jstree",b.proxy(function(a,b){this.sort(b.rslt.obj.parent())},this)).bind("move_node.jstree",b.proxy(function(a,b){a=-1==b.rslt.np?this.get_container():b.rslt.np;this.sort(a.children("ul"))},
this))},defaults:function(a,b){return this.get_text(a)>this.get_text(b)?1:-1},_fn:{sort:function(a){var d=this._get_settings().sort,c=this;a.append(b.makeArray(a.children("li")).sort(b.proxy(d,c)));a.find("> li > ul").each(function(){c.sort(b(this))});this.clean_node(a)}}})})(jQuery);(function(b){var a=!1,d=!1,c=!1,e=!1,f=!1,l=!1,m=!1,n=!1,p=!1;b.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,d,
c){b.vakata.dnd.is_drag&&b.vakata.dnd.drag_stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(v){}b.vakata.dnd.init_x=a.pageX;b.vakata.dnd.init_y=a.pageY;b.vakata.dnd.user_data=d;b.vakata.dnd.is_down=!0;b.vakata.dnd.helper=b("<div id='vakata-dragged' />").html(c);b(document).bind("mousemove",b.vakata.dnd.drag);b(document).bind("mouseup",b.vakata.dnd.drag_stop);return!1},drag:function(a){if(b.vakata.dnd.is_down){if(!b.vakata.dnd.is_drag)if(5<
Math.abs(a.pageX-b.vakata.dnd.init_x)||5<Math.abs(a.pageY-b.vakata.dnd.init_y))b.vakata.dnd.helper.appendTo("body"),b.vakata.dnd.is_drag=!0,b(document).triggerHandler("drag_start.vakata",{event:a,data:b.vakata.dnd.user_data});else return;if("mousemove"===a.type){var d=b(document),c=b(window),e=d.scrollTop(),g=d.scrollLeft(),h=b.jstree._focused();null!=h&&(h=h._get_settings().dnd.scroll_parent)&&(d=c=h,e=g=0);20>a.pageY-e?(l&&"down"===m&&(clearInterval(l),l=!1),l||(m="up",l=setInterval(function(){d.scrollTop(d.scrollTop()-
b.vakata.dnd.scroll_spd)},150))):l&&"up"===m&&(clearInterval(l),l=!1);20>c.height()-(a.pageY-e)?(l&&"up"===m&&(clearInterval(l),l=!1),l||(m="down",l=setInterval(function(){d.scrollTop(d.scrollTop()+b.vakata.dnd.scroll_spd)},150))):l&&"down"===m&&(clearInterval(l),l=!1);20>a.pageX-g?(f&&"right"===n&&(clearInterval(f),f=!1),f||(n="left",f=setInterval(function(){d.scrollLeft(d.scrollLeft()-b.vakata.dnd.scroll_spd)},150))):f&&"left"===n&&(clearInterval(f),f=!1);20>c.width()-(a.pageX-g)?(f&&"left"===n&&
(clearInterval(f),f=!1),f||(n="right",f=setInterval(function(){d.scrollLeft(d.scrollLeft()+b.vakata.dnd.scroll_spd)},150))):f&&"right"===n&&(clearInterval(f),f=!1)}b.vakata.dnd.helper.css({left:a.pageX+b.vakata.dnd.helper_left+"px",top:a.pageY+b.vakata.dnd.helper_top+"px"});b(document).triggerHandler("drag.vakata",{event:a,data:b.vakata.dnd.user_data})}},drag_stop:function(a){f&&clearInterval(f);l&&clearInterval(l);b(document).unbind("mousemove",b.vakata.dnd.drag);b(document).unbind("mouseup",b.vakata.dnd.drag_stop);
b(document).triggerHandler("drag_stop.vakata",{event:a,data:b.vakata.dnd.user_data});b.vakata.dnd.helper.remove();b.vakata.dnd.init_x=0;b.vakata.dnd.init_y=0;b.vakata.dnd.user_data={};b.vakata.dnd.is_down=!1;b.vakata.dnd.is_drag=!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",title:"vakata"})});b.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,
after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",b.proxy(function(d){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.themes&&(c.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),d.currentTarget===d.target&&b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&
b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==d.target&&(d=b.jstree._reference(d.target),d.data.dnd.foreign?(d=d._get_settings().dnd.drag_check.call(this,{o:a,r:d.get_container(),is_root:!0}),!0!==d&&!0!==d.inside&&!0!==d.before&&!0!==d.after||b.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(d.prepare_move(a,d.get_container(),"last"),d.check_move()&&b.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))))},this)).bind("mouseup.jstree",b.proxy(function(d){if(b.vakata.dnd.is_drag&&
b.vakata.dnd.user_data.jstree&&d.currentTarget===d.target&&b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==d.target){var c=b.jstree._reference(d.currentTarget);c.data.dnd.foreign?(d=c._get_settings().dnd.drag_check.call(this,{o:a,r:c.get_container(),is_root:!0}),!0!==d&&!0!==d.inside&&!0!==d.before&&!0!==d.after||c._get_settings().dnd.drag_finish.call(this,{o:a,r:c.get_container(),is_root:!0})):c.move_node(a,c.get_container(),
"last",d[c._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",b.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&
b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",b.proxy(function(a){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree){var d=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(b.proxy(function(){this.scrollLeft+=b.vakata.dnd.scroll_spd},d),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=
setInterval(b.proxy(function(){this.scrollLeft-=b.vakata.dnd.scroll_spd},d),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop+=b.vakata.dnd.scroll_spd},d),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop-=b.vakata.dnd.scroll_spd},
d),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&c&&e&&(c.hide(),e.hide(),b(document).triggerHandler("dnd_hide.vakata",{inst:this}))},this)).delegate("a","mousedown.jstree",b.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&this.dnd_enter(a.currentTarget)},
this)).delegate("a","mousemove.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(d&&d.length&&d.children("a")[0]===a.currentTarget||this.dnd_enter(a.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=b(a.target).offset()),this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",b.proxy(function(a){if(b.vakata.dnd.is_drag&&
b.vakata.dnd.user_data.jstree){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;c&&c.hide();e&&e.hide();b(document).triggerHandler("dnd_hide.vakata",{inst:this});this.data.dnd.mto=setTimeout(function(b){return function(){b.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));b(document).bind("drag_stop.vakata",b.proxy(function(){this.data.dnd.to1&&
clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;c&&c.css({top:"-2000px"});e&&e.css({top:"-2000px"})},
this)).bind("drag_start.vakata",b.proxy(function(a,d){d.data.jstree&&(a=b(d.event.target),a.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(a))},this));var f=this._get_settings().dnd;f.drag_target&&b(document).delegate(f.drag_target,"mousedown.jstree-"+this.get_index(),b.proxy(function(d){a=d.target;b.vakata.dnd.drag_start(d,{jstree:!0,obj:d.target},"<ins class='jstree-icon'></ins>"+b(d.target).text());this.data.themes&&(c&&c.attr("class","jstree-"+this.data.themes.theme),
e&&e.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var f=this.get_container();this.data.dnd.cof=f.offset();this.data.dnd.cw=parseInt(f.width(),10);this.data.dnd.ch=parseInt(f.height(),10);this.data.dnd.foreign=!0;d.preventDefault()},this));f.drop_target&&b(document).delegate(f.drop_target,"mouseenter.jstree-"+this.get_index(),b.proxy(function(d){this.data.dnd.active&&
this._get_settings().dnd.drop_check.call(this,{o:a,r:b(d.target),e:d})&&b.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(f.drop_target,"mouseleave.jstree-"+this.get_index(),b.proxy(function(a){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(f.drop_target,"mouseup.jstree-"+this.get_index(),b.proxy(function(d){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,
{o:a,r:b(d.target),e:d})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:b.noop,drag_target:".jstree-draggable",drag_finish:b.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}},scroll_parent:!1},_fn:{dnd_prepare:function(){if(d&&d.length){this.data.dnd.off=d.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+d.width());if(this.data.dnd.foreign){var b=
this._get_settings().dnd.drag_check.call(this,{o:a,r:d});this.data.dnd.after=b.after;this.data.dnd.before=b.before;this.data.dnd.inside=b.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,d,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,d,"after");this.data.dnd.after=this.check_move();this._is_loaded(d)?(this.prepare_move(a,d,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},
dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],d=!1,f=this._get_settings().core.rtl;a=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];b.each(a,b.proxy(function(a,c){if(this.data.dnd[c])return b.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),d=c,!1},this));!1===
d&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=f?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(d){case "before":c.css({left:a+"px",top:this.data.dnd.off.top-6+"px"}).show();e&&e.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":c.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();e&&e.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":c.css({left:a+
(f?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();e&&e.hide();break;default:c.hide(),e&&e.hide()}b(document).triggerHandler("dnd_show.vakata",{data:this._get_move(),position:d,inst:this});return p=d}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(d,b.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(f){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:d,p:p}):
(this.dnd_prepare(),this.move_node(a,d,p,f[this._get_settings().dnd.copy_modifier+"Key"]));d=a=!1;c.hide();e&&e.hide();b(document).triggerHandler("dnd_hide.vakata",{inst:this})},dnd_enter:function(a){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var c=this._get_settings().dnd;this.data.dnd.prepared=!1;d=this._get_node(a);c.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(b.proxy(this.dnd_prepare,this),c.check_timeout)):this.dnd_prepare();
c.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),d&&d.length&&d.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(b.proxy(this.dnd_open,this),c.open_timeout))):d&&d.length&&d.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");c.hide();e&&e.hide();b(document).triggerHandler("dnd_hide.vakata",{inst:this});d&&d[0]===a.target.parentNode&&
(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(d,f){a=this._get_node(d);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));d=1<a.length?this._get_string("multiple_selection"):this.get_text(a);var g=this.get_container();this._get_settings().core.html_titles||(d=d.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));b.vakata.dnd.drag_start(f,{jstree:!0,obj:a},"<ins class='jstree-icon'></ins>"+
d);this.data.themes&&(c&&c.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=g.offset();this.data.dnd.cw=parseInt(g.width(),10);this.data.dnd.ch=parseInt(g.height(),10);this.data.dnd.active=!0}}});b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});c=b("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){c.hide();e.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");e=b("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(d&&d.length)return d.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var f=b(a.relatedTarget);if((f.is(".jstree")||0===f.closest(".jstree").length)&&
d&&d.length)return d.children("a").trigger(a),c.hide(),e.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");b(document).bind("drag_start.vakata",function(a,b){b.data.jstree&&(c.show(),e&&e.show())});b(document).bind("drag_stop.vakata",function(a,b){b.data.jstree&&(c.hide(),e&&e.hide())})})})(jQuery);(function(b){b.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=b.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",b.proxy(function(a,b){this._prepare_checkboxes(b.rslt.obj)},this)).bind("loaded.jstree",b.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",b.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,b){b.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");if(!1!==a){var d,c=this,e,f=this._get_settings().checkbox.two_state,l=this._get_settings().checkbox.real_checkboxes,m=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){e=b(this);d=e.is("li")&&(e.hasClass("jstree-checked")||l&&e.children(":checked").length)?"jstree-checked":"jstree-unchecked";e.find("li").andSelf().each(function(){var a=
b(this);a.children("a"+(c.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(f?"jstree-unchecked":d);if(l)if(a.children(":checkbox").length)a.children(":checkbox").addClass("jstree-real-checkbox");else{var e=m.call(c,a);a.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+e[0]+"' name='"+e[0]+"' value='"+e[1]+"' />")}f?(a.hasClass("jstree-checked")||a.children(":checked").length)&&
a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===d||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});f||a.find(".jstree-checked").parent().parent().each(function(){c._repair_state(this)})}},change_state:function(a,d){a=this._get_node(a);var c=!1,e=this._get_settings().checkbox.real_checkboxes;if(!a||-1===a)return!1;d=!1===d||!0===d?d:a.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)d?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),e&&a.children(":checkbox").prop("checked",!1)):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),e&&a.children(":checkbox").prop("checked",!0));else{if(d){c=a.find("li").andSelf();if(!c.filter(".jstree-checked, .jstree-undetermined").length)return!1;c.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&c.children(":checkbox").prop("checked",!1)}else{c=
a.find("li").andSelf();if(!c.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;c.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&c.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=a);this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=b(this);if(d){if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
e&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&a.children(":checkbox").prop("checked",!1)}else{if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),e&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
!1),!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&a.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var b=this;a.parents(".jstree-closed").each(function(){b.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var b=this._get_settings().checkbox.real_checkboxes,
c=a.find("> ul > .jstree-checked").length,e=a.find("> ul > .jstree-undetermined").length,f=a.find("> ul > li").length;0===f?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===c&&0===e?this.change_state(a,!0):c===f?this.change_state(a,!1):(a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),b&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var a=
this,d=this.data.ui.to_select;d=b.map(b.makeArray(d),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/:/g,"\\:")});this.deselect_all();b.each(d,function(b,d){a.check_node(d)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
b(function(){b.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(b){b.vakata.xslt=function(a,d,c){var e="";if(document.recalc){var f=document.createElement("xml");e=document.createElement("xml");f.innerHTML=a;e.innerHTML=d;b("body").append(f).append(e);setTimeout(function(a,d,c){return function(){c.call(null,a.transformNode(d.XMLDocument));setTimeout(function(a,d){return function(){b(a).remove();b(d).remove()}}(a,d),200)}}(f,e,c),100);
return!0}"undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"===typeof window.XSLTProcessor&&(a=(new DOMParser).parseFromString(a,"text/xml"),d=(new DOMParser).parseFromString(d,"text/xml"));if("undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"!==typeof window.XSLTProcessor){f=new XSLTProcessor;e=b.isFunction(f.transformDocument)?"undefined"!==typeof window.XMLSerializer:!0;if(!e)return!1;a=(new DOMParser).parseFromString(a,
"text/xml");d=(new DOMParser).parseFromString(d,"text/xml");b.isFunction(f.transformDocument)?(e=document.implementation.createDocument("","",null),f.transformDocument(a,d,e,null),c.call(null,(new XMLSerializer).serializeToString(e))):(f.importStylesheet(d),e=f.transformToFragment(a,document),c.call(null,b("<div />").append(e).html()));return!0}return!1};var a={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
d=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};b.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,b,d){var c=this;this.load_node_xml(a,function(){c.__callback({obj:c._get_node(a)});b.call(this)},d)},_is_loaded:function(a){var d=this._get_settings().xml_data;a=this._get_node(a);return-1==a||
!a||!d.ajax&&!b.isFunction(d.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_xml:function(a,d,c){var e=this.get_settings().xml_data,f=function(){},g=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !e.data&&!e.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(e.data):e.data.call(this,a,b.proxy(function(c){this.parse_xml(c,b.proxy(function(c){c&&(c=
c.replace(/ ?xmlns="[^"]*"/ig,""),10<c.length?(c=b(c),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(c),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()),e.clean_node&&this.clean_node(a),d&&d.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),d&&d.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),
d&&d.call(this)))},this))},this));break;case !!e.data&&!e.ajax||!!e.data&&!!e.ajax&&(!a||-1===a):a&&-1!=a||this.parse_xml(e.data,b.proxy(function(c){c?(c=c.replace(/ ?xmlns="[^"]*"/ig,""),10<c.length&&(c=b(c),this.get_container().children("ul").empty().append(c.children()),e.clean_node&&this.clean_node(a),d&&d.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))},this));break;case !e.data&&!!e.ajax||!!e.data&&!!e.ajax&&a&&-1!==a:f=function(b,d,f){var g=this.get_settings().xml_data.ajax.error;
g&&g.call(this,b,d,f);-1!==a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===d&&e.correct_state&&this.correct_state(a)):"success"===d&&e.correct_state&&this.get_container().children("ul").empty();c&&c.call(this)},g=function(c,g,h){c=h.responseText;var k=this.get_settings().xml_data.ajax.success;k&&(c=k.call(this,c,g,h)||c);if(""===c||c&&c.toString&&""===c.toString().replace(/^[\s\n]+$/,""))return f.call(this,h,g,"");this.parse_xml(c,
b.proxy(function(c){c&&(c=c.replace(/ ?xmlns="[^"]*"/ig,""),10<c.length?(c=b(c),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(c),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()),e.clean_node&&this.clean_node(a),d&&d.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),d&&d.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),
d&&d.call(this)))},this))},e.ajax.context=this,e.ajax.error=f,e.ajax.success=g,e.ajax.dataType||(e.ajax.dataType="xml"),b.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,a)),b.isFunction(e.ajax.data)&&(e.ajax.data=e.ajax.data.call(this,a)),b.ajax(e.ajax)}},parse_xml:function(d,c){var e=this._get_settings().xml_data;b.vakata.xslt(d,a[e.xsl],c)},get_xml:function(a,c,e,f,m){var g="",h=this._get_settings(),k=this,l,t,v,q,z;a||(a="flat");m||(m=0);(c=this._get_node(c))&&-1!==c||(c=this.get_container().find("> ul > li"));
e=b.isArray(e)?e:["id","class"];!m&&this.data.types&&-1===b.inArray(h.types.type_attr,e)&&e.push(h.types.type_attr);f=b.isArray(f)?f:[];m||(h.xml_data.get_include_preamble&&(g+='<?xml version="1.0" encoding="UTF-8"?>'),g+="<root>");c.each(function(){g+="<item";v=b(this);b.each(e,function(a,b){a=v.attr(b);h.xml_data.get_skip_empty&&"undefined"===typeof a||(g+=" "+b+'="'+d((" "+(a||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});v.hasClass("jstree-open")&&
(g+=' state="open"');v.hasClass("jstree-closed")&&(g+=' state="closed"');"flat"===a&&(g+=' parent_id="'+d(m)+'"');g+=">";g+="<content>";q=v.children("a");q.each(function(){l=b(this);z=!1;g+="<name";-1!==b.inArray("languages",h.plugins)&&b.each(h.languages,function(a,b){if(l.hasClass(b))return g+=' lang="'+d(b)+'"',z=b,!1});f.length&&b.each(f,function(a,b){a=l.attr(b);h.xml_data.get_skip_empty&&"undefined"===typeof a||(g+=" "+b+'="'+d((" "+a||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,
"").replace(/ $/,""))+'"')});l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(g+=' icon="'+d(l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');l.children("ins").get(0).style.backgroundImage.length&&(g+=' icon="'+d(l.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');g+=">";g+="<![CDATA["+k.get_text(l,z)+"]]\x3e";
g+="</name>"});g+="</content>";t=v[0].id||!0;v=v.find("> ul > li");t=v.length?k.get_xml(a,v,e,f,t):"";"nest"==a&&(g+=t);g+="</item>";"flat"==a&&(g+=t)});m||(g+="</root>");return g}}})})(jQuery);(function(b){b.expr[":"].jstree_contains=function(a,b,c){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(c[3].toLowerCase())};b.expr[":"].jstree_title_contains=function(a,b,c){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(c[3].toLowerCase())};b.jstree.plugin("search",{__init:function(){this.data.search.str=
"";this.data.search.result=b();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(a,d){b(this).children("ul").find("li").hide().removeClass("jstree-last");d.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){b(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){b(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",
show_only_matches:!1},_fn:{search:function(a,d){if(""===b.trim(a))this.clear_search();else{var c=this.get_settings().search,e=this,f=function(){};this.data.search.str=a;if(!d&&!1!==c.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;f=function(a,b,d){var c=this.get_settings().search.ajax.success;c&&(a=c.call(this,a,b,d)||a);this.data.search.to_open=a;this._search_open()};c.ajax.context=this;c.ajax.error=function(){};c.ajax.success=
f;b.isFunction(c.ajax.url)&&(c.ajax.url=c.ajax.url.call(this,a));b.isFunction(c.ajax.data)&&(c.ajax.data=c.ajax.data.call(this,a));c.ajax.data||(c.ajax.data={search_string:a});if(!c.ajax.dataType||/^json/.exec(c.ajax.dataType))c.ajax.dataType="json";b.ajax(c.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+c.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){e.open_node(this,
!1,!0)}),this.__callback({nodes:this.data.search.result,str:a})}},clear_search:function(a){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=b()},_search_open:function(a){var d=this;a=!0;var c=[],e=[];this.data.search.to_open.length&&(b.each(this.data.search.to_open,function(a,d){if("#"==d)return!0;b(d).length&&b(d).is(".jstree-closed")?c.push(d):e.push(d)}),c.length&&(this.data.search.to_open=e,b.each(c,function(a,b){d.open_node(b,
function(){d._search_open(!0)})}),a=!1));a&&this.search(this.data.search.str,!0)}}})})(jQuery);(function(b){b.vakata.context={hide_on_mouseleave:!1,cnt:b("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,d,c,e,f,l,m){b.vakata.context.rtl=!!m;if(a=b.vakata.context.parse(a)){b.vakata.context.vis=!0;b.vakata.context.tgt=d;b.vakata.context.par=l||d||null;b.vakata.context.data=f||null;b.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,
top:0});if(b.vakata.context.hide_on_mouseleave)b.vakata.context.cnt.one("mouseleave",function(a){b.vakata.context.hide()});f=b.vakata.context.cnt.height();l=b.vakata.context.cnt.width();c+l>b(document).width()&&(c=b(document).width()-(l+5),b.vakata.context.cnt.find("li > ul").addClass("right"));e+f>b(document).height()&&(e-=f+d[0].offsetHeight,b.vakata.context.cnt.find("li > ul").addClass("bottom"));b.vakata.context.cnt.css({left:c,top:e}).find("li:has(ul)").bind("mouseenter",function(a){a=b(document).width();
var d=b(document).height(),c=b(this).children("ul").show();a!==b(document).width()&&c.toggleClass("right");d!==b(document).height()&&c.toggleClass("bottom")}).bind("mouseleave",function(a){b(this).children("ul").hide()}).end().css({visibility:"visible"}).show();b(document).triggerHandler("context_show.vakata")}},hide:function(){b.vakata.context.vis=!1;b.vakata.context.cnt.attr("class","").css({visibility:"hidden"});b(document).triggerHandler("context_hide.vakata")},parse:function(a,d){if(!a)return!1;
var c="",e=!1,f=!0;d||(b.vakata.context.func={});c+="<ul>";b.each(a,function(a,d){if(!d)return!0;b.vakata.context.func[a]=d.action;!f&&d.separator_before&&(c+="<li class='vakata-separator vakata-separator-before'></li>");f=!1;c+="<li class='"+(d._class||"")+(d._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";d.icon&&-1===d.icon.indexOf("/")&&(c+=" class='"+d.icon+"' ");d.icon&&-1!==d.icon.indexOf("/")&&(c+=" style='background:url("+d.icon+") center center no-repeat;' ");c+=">&#160;</ins><a href='#' rel='"+
a+"'>";d.submenu&&(c+="<span style='float:"+(b.vakata.context.rtl?"left":"right")+";'>&raquo;</span>");c+=d.label+"</a>";d.submenu&&(e=b.vakata.context.parse(d.submenu,!0))&&(c+=e);c+="</li>";d.separator_after&&(c+="<li class='vakata-separator vakata-separator-after'></li>",f=!0)});c=c.replace(/<li class='vakata-separator vakata-separator-after'><\/li>$/,"");c+="</ul>";b(document).triggerHandler("context_parse.vakata");return 10<c.length?c:!1},exec:function(a){return b.isFunction(b.vakata.context.func[a])?
(b.vakata.context.func[a].call(b.vakata.context.data,b.vakata.context.par),!0):!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; } #vakata-contextmenu ul { min-width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});b.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(a){!b(this).parent().hasClass("jstree-contextmenu-disabled")&&b.vakata.context.exec(b(this).attr("rel"))?b.vakata.context.hide():b(this).blur()}).delegate("a","mouseover",function(){b.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");b(document).bind("mousedown",function(a){b.vakata.context.vis&&!b.contains(b.vakata.context.cnt[0],a.target)&&
b.vakata.context.hide()});"undefined"!==typeof b.hotkeys&&b(document).bind("keydown","up",function(a){if(b.vakata.context.vis){var d=b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();d.length||(d=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());d.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(b.vakata.context.vis){var d=
b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();d.length||(d=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());d.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){b.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){("input"!==a.target.tagName.toLowerCase()||"checkbox"!==a.target.type.toLowerCase()&&"search"!==a.target.type.toLowerCase())&&
a.preventDefault()})});b.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",b.proxy(function(a){a.preventDefault();b(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",b.proxy(function(a){this.data.contextmenu&&b.vakata.context.hide()},this)).bind("destroy.jstree",b.proxy(function(){this.data.contextmenu&&b.vakata.context.hide()},this));b(document).bind("context_hide.vakata",
b.proxy(function(){this.data.contextmenu=!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",
action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,d,c){a=this._get_node(a);var e=this.get_settings().contextmenu,f=a.children("a:visible:eq(0)");e.select_node&&this.data.ui&&!this.is_selected(a)&&(this.deselect_all(),
this.select_node(a,!0));if(e.show_at_node||"undefined"===typeof d||"undefined"===typeof c)c=f.offset(),d=c.left,c=c.top+this.data.core.li_height;e=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:e.items;b.isFunction(e)&&(e=e.call(this,a));this.data.contextmenu=!0;b.vakata.context.show(e,f,d,c,this,a,this._get_settings().core.rtl);this.data.themes&&b.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(b){b.jstree.plugin("types",
{__init:function(){var a=this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",b.proxy(function(){var d=a.type_attr,c="",e=this;b.each(a.types,function(a,f){b.each(f,function(a,b){/^(max_depth|max_children|icon|valid_children)$/.test(a)||e.data.types.attach_to.push(a)});if(!f.icon)return!0;if(f.icon.image||f.icon.position)c="default"==a?c+(".jstree-"+e.get_index()+" a > .jstree-icon { "):c+(".jstree-"+e.get_index()+" li["+d+'="'+a+'"] > a > .jstree-icon { '),
f.icon.image&&(c+=" background-image:url("+f.icon.image+"); "),c=f.icon.position?c+(" background-position:"+f.icon.position+"; "):c+" background-position:0 0; ",c+="} "});""!==c&&b.vakata.css.add_sheet({str:c,title:"jstree-types"})},this)).bind("before.jstree",b.proxy(function(a,c){var d;if((d=(d=this._get_settings().types.use_data?this._get_node(c.args[0]):!1)&&-1!==d&&d.length?d.data("jstree"):!1)&&d.types&&!1===d.types[c.func])return a.stopImmediatePropagation(),!1;if(-1!==b.inArray(c.func,this.data.types.attach_to)&&
c.args[0]&&(c.args[0].tagName||c.args[0].jquery)){d=this._get_settings().types.types;var e=this._get_type(c.args[0]);if((d[e]&&"undefined"!==typeof d[e][c.func]||d["default"]&&"undefined"!==typeof d["default"][c.func])&&!1===this._check(c.func,c.args[0]))return a.stopImmediatePropagation(),!1}},this));c&&this.get_container().bind("load_node.jstree set_type.jstree",b.proxy(function(a,c){var d=c&&c.rslt&&c.rslt.obj&&-1!==c.rslt.obj?this._get_node(c.rslt.obj).parent():this.get_container_ul(),e=!1,f=
this._get_settings().types;b.each(f.types,function(a,b){b.icon&&(b.icon.image||b.icon.position)&&(e="default"===a?d.find("li > a > .jstree-icon"):d.find("li["+f.type_attr+"='"+a+"'] > a > .jstree-icon"),b.icon.image&&e.css("backgroundImage","url("+b.icon.image+")"),e.css("backgroundPosition",b.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,
b){b.type&&this._get_settings().types.use_data&&this.set_type(b.type,a)},_get_type:function(a){return(a=this._get_node(a))&&a.length?a.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(a,b){b=this._get_node(b);var d=b.length&&a?b.attr(this._get_settings().types.type_attr,a):!1;d&&this.__callback({obj:b,type:a});return d},_check:function(a,d,c){d=this._get_node(d);var e=!1,f=this._get_type(d),g=0,m=this,n=this._get_settings().types,p=!1;if(-1===d)if(n[a])e=n[a];else return;
else{if(!1===f)return;(p=n.use_data?d.data("jstree"):!1)&&p.types&&"undefined"!==typeof p.types[a]?e=p.types[a]:n.types[f]&&"undefined"!==typeof n.types[f][a]?e=n.types[f][a]:n.types["default"]&&"undefined"!==typeof n.types["default"][a]&&(e=n.types["default"][a])}b.isFunction(e)&&(e=e.call(this,d));"max_depth"===a&&-1!==d&&!1!==c&&-2!==n.max_depth&&0!==e&&d.children("a:eq(0)").parentsUntil(".jstree","li").each(function(b){if(-1!==n.max_depth&&0>=n.max_depth-(b+1))return e=0,!1;g=0===b?e:m._check(a,
this,!1);if(-1!==g&&0>=g-(b+1))return e=0,!1;0<=g&&(g-(b+1)<e||0>e)&&(e=g-(b+1));0<=n.max_depth&&(n.max_depth-(b+1)<e||0>e)&&(e=n.max_depth-(b+1))});return e},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),d=a.rt._get_settings().types,c=a.rt._check("max_children",a.cr),e=a.rt._check("max_depth",a.cr),f=a.rt._check("valid_children",a.cr),l=0,m=1;if("none"===f||b.isArray(f)&&a.ot&&a.ot._get_type&&(a.o.each(function(){if(-1===b.inArray(a.ot._get_type(this),f))return m=!1}),
!1===m)||-2!==d.max_children&&-1!==c&&(l=-1===a.cr?this.get_container().find("> ul > li").not(a.o).length:a.cr.find("> ul > li").not(a.o).length,l+a.o.length>c))return!1;if(-2!==d.max_depth&&-1!==e){m=0;if(0===e)return!1;if("undefined"===typeof a.o.d){for(d=a.o;0<d.length;)d=d.find("> ul > li"),m++;a.o.d=m}if(0>e-a.o.d)return!1}return!0},create_node:function(a,d,c,e,f,l){if(!l&&(f||this._is_loaded(a))){var g="string"==typeof d&&d.match(/^before|after$/i)&&-1!==a?this._get_parent(a):this._get_node(a),
h=this._get_settings().types,k=this._check("max_children",g),r=this._check("max_depth",g),w=this._check("valid_children",g);"string"===typeof c&&(c={data:c});c||(c={});if("none"===w)return!1;if(b.isArray(w))if(!c.attr||!c.attr[h.type_attr])c.attr||(c.attr={}),c.attr[h.type_attr]=w[0];else if(-1===b.inArray(c.attr[h.type_attr],w))return!1;if(-2!==h.max_children&&-1!==k&&(g=-1===g?this.get_container().find("> ul > li").length:g.find("> ul > li").length,g+1>k)||-2!==h.max_depth&&-1!==r&&0>r-1)return!1}return this.__call_old(!0,
a,d,c,e,f,l)}}})})(jQuery);(function(b){b.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,b,c){var d=this;this.load_node_html(a,function(){d.__callback({obj:d._get_node(a)});b.call(this)},c)},_is_loaded:function(a){a=
this._get_node(a);return-1==a||!a||!this._get_settings().html_data.ajax&&!b.isFunction(this._get_settings().html_data.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_html:function(a,d,c){var e=this.get_settings().html_data,f=function(){};var g=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case b.isFunction(e.data):e.data.call(this,a,b.proxy(function(c){c&&""!==c&&c.toString&&
""!==c.toString().replace(/^[\s\n]+$/,"")?(c=b(c),c.is("ul")||(c=b("<ul />").append(c)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(c).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()).find("li, a").filter(function(){return!this.firstChild||
!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),d&&d.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),d&&d.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))},this));break;case !e.data&&
!e.ajax:a&&-1!=a||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());d&&d.call(this);break;case !!e.data&&!e.ajax||!!e.data&&!!e.ajax&&(!a||-1===a):a&&-1!=a||(g=b(e.data),g.is("ul")||
(g=b("<ul />").append(g)),this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());d&&d.call(this);break;case !e.data&&!!e.ajax||!!e.data&&!!e.ajax&&a&&-1!==a:a=this._get_node(a),f=function(b,d,f){var g=this.get_settings().html_data.ajax.error;
g&&g.call(this,b,d,f);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===d&&e.correct_state&&this.correct_state(a)):"success"===d&&e.correct_state&&this.get_container().children("ul").empty();c&&c.call(this)},g=function(c,g,h){var k=this.get_settings().html_data.ajax.success;k&&(c=k.call(this,c,g,h)||c);if(""===c||c&&c.toString&&""===c.toString().replace(/^[\s\n]+$/,"")||""===c.toString().replace(/["']/g,""))return f.call(this,
h,g,"");c?(c=b(c),c.is("ul")||(c=b("<ul />").append(c)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(c).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()).find("li, a").filter(function(){return!this.firstChild||
!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),d&&d.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),d&&d.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))},e.ajax.context=this,e.ajax.error=
f,e.ajax.success=g,e.ajax.dataType||(e.ajax.dataType="html"),b.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,a)),b.isFunction(e.ajax.data)&&(e.ajax.data=e.ajax.data.call(this,a)),b.ajax(e.ajax)}}}});b.jstree.defaults.plugins.push("html_data")})(jQuery);(function(b){b.jstree.plugin("themeroller",{__init:function(){var a=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(d){b(d.currentTarget).hasClass("jstree-loading")||
b(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){b(this).removeClass(a.item_h)}).bind("init.jstree",b.proxy(function(a,b){b.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(b.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",b.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",
b.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("delete_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.parent)},this)).bind("correct_state.jstree",b.proxy(function(b,c){c.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||
"jstree-no-icon")},this)).bind("select_node.jstree",b.proxy(function(b,c){c.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",b.proxy(function(b,c){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",b.proxy(function(b,c){c.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",b.proxy(function(b,c){this.get_container().find("a."+a.item_h).not(c.rslt.obj).removeClass(a.item_h);
c.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.o);this._themeroller(b.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,d=["ui-icon"];b.each(a,function(a,b){b=b.split(" ");b.length&&(d=d.concat(b))});this.get_container().removeClass("ui-widget-content").find("."+d.join(", .")).removeClass(d.join(" "))},_fn:{_themeroller:function(a){var b=this._get_settings().themeroller;a=a&&-1!=a?this._get_node(a).parent():
this.get_container_ul();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(b.opened).addClass("ui-icon "+b.closed).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+" "+b.item_open).addClass(b.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(b.closed).addClass("ui-icon "+
b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+" "+b.item_clsd).addClass(b.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(b.closed+" ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===
this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_clsd+" "+b.item_open).addClass(b.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});b(function(){b.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",
title:"jstree"})})})(jQuery);(function(b){b.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",b.proxy(function(a,d){var c=[],e=!0;"move_node"==d.func&&!0===d.args[4]&&d.args[0].o&&d.args[0].o.length&&(d.args[0].o.children("a").each(function(){c.push(b(this).text().replace(/^\s+/g,""))}),e=this._check_unique(c,d.args[0].np.find("> ul > li").not(d.args[0].o),"move_node"));"create_node"==d.func&&(d.args[4]||this._is_loaded(d.args[0]))&&(e=this._get_node(d.args[0]),!d.args[1]||
"before"!==d.args[1]&&"after"!==d.args[1]||(e=this._get_parent(d.args[0]))&&-1!==e||(e=this.get_container()),"string"===typeof d.args[2]?c.push(d.args[2]):d.args[2]&&d.args[2].data?c.push(d.args[2].data):c.push(this._get_string("new_node")),e=this._check_unique(c,e.find("> ul > li"),"create_node"));"rename_node"==d.func&&(c.push(d.args[1]),d=this._get_node(d.args[0]),(e=this._get_parent(d))&&-1!==e||(e=this.get_container()),e=this._check_unique(c,e.find("> ul > li").not(d),"rename_node"));if(!e)return a.stopPropagation(),
!1},this))},defaults:{error_callback:b.noop},_fn:{_check_unique:function(a,d,c){var e=[];d.children("a").each(function(){e.push(b(this).text().replace(/^\s+/g,""))});if(!e.length||!a.length)return!0;e=e.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");return e.length+a.length!=e.concat(a).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?(this._get_settings().unique.error_callback.call(null,
a,d,c),!1):!0},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),d=[];return a.o&&a.o.length?(a.o.children("a").each(function(){d.push(b(this).text().replace(/^\s+/g,""))}),this._check_unique(d,a.np.find("> ul > li").not(a.o),"check_move")):!0}}})})(jQuery);(function(b){b.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",
b.proxy(function(a,b){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",b.proxy(function(a,b){this._prepare_wholerow_span(b&&b.rslt&&b.rslt.obj?b.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",b.proxy(function(a,b){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,b){return function(){a._prepare_wholerow_ul(b)}}(this,
b&&b.rslt&&b.rslt.obj?b.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",b.proxy(function(a,b){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",b.proxy(function(a,d){d.rslt.obj.each(function(){d.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((b(this).offset().top-d.inst.get_container().offset().top+d.inst.get_container()[0].scrollTop)/
d.inst.data.core.li_height,10)+")").children("a").attr("class",d.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",b.proxy(function(a,b){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((b.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/
this.data.core.li_height,10)+")").children("a").attr("class",b.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var d=b(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&d.closest("li").is(".jstree-open, .jstree-closed")||(d.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li","mouseover.jstree",b.proxy(function(a){a.stopImmediatePropagation();if(b(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;
this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",b.proxy(function(a){b(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));(e||c)&&b.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=
a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");!1!==a&&a.each(function(){b(this).find("li").andSelf().each(function(){var a=b(this);if(a.children(".jstree-wholerow-span").length)return!0;a.prepend("<span class='jstree-wholerow-span' style='width:"+18*a.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),b=a.html();a.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==b&&(this.data.wholerow.last_html=
b,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",-1*(a.height()+(e?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});b(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
f&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(e||c)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";b.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(b){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],d=function(a,d){var c=!0;a=a||{};d=[].concat(d);b.each(d,function(d,e){if(!b.isFunction(a[e]))return c=!1});return c};b.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(c,e){c=-1==c?this._get_settings().model.object:c.data("jstree_model");if(!d(c,a))return e.call(null,!1);this._get_settings().model.async?c.getChildren(b.proxy(function(a){this.model_done(a,
e)},this)):this.model_done(c.getChildren(),e)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,d){var c=[],e=this._get_settings(),f=this;b.isArray(a)||(a=[a]);b.each(a,function(a,d){a=d.getProps()||{};a.attr=d.getAttr()||{};d.getChildrenCount()&&(a.state="closed");a.data=d.getName();b.isArray(a.data)||(a.data=[a.data]);f.data.types&&b.isFunction(d.getType)&&(a.attr[e.types.type_attr]=d.getType());a.attr.id&&e.model.id_prefix&&(a.attr.id=e.model.id_prefix+a.attr.id);a.metadata||
(a.metadata={});a.metadata.jstree_model=d;c.push(a)});d.call(null,c)}}})})(jQuery)}})();
(function(c,e){function f(f,k,l){function m(){f.addClass("fc");k.isRTL?f.addClass("fc-rtl"):f.addClass("fc-ltr");k.theme&&f.addClass("ui-widget");oa=c("<div class='fc-content' style='position:relative'/>").prependTo(f);Ba=new b(P,k);(ra=Ba.render())&&f.prepend(ra);r(k.defaultView);k.handleWindowResize&&"listWeek"!=F.name&&(c(window).resize(v),la=c(document).width(),setTimeout(function(){la!=c(document).width()&&(la=c(document).width(),v())},200));c("body").is(":visible")||K()}function K(){setTimeout(function(){!F.start&&
c("body").is(":visible")&&B()},0)}function p(){return f.is(":visible")}function r(a){F&&a==F.name||(ba++,F&&(u("viewDestroy",F,F,F.element),I(),F.triggerEventDestroy(),y(),F.element.remove(),Ba.deactivateButton(F.name)),Ba.activateButton(a),F=new T[a](c("<div class='fc-view fc-view-"+a+"' style='position:relative'/>").appendTo(oa),P),B(),A(),ba--,u("viewChange",P,a))}function B(a){(!F.start||a||U<F.start||U>=F.end)&&p()&&N(a)}function N(a){ba++;F.start&&(u("viewDestroy",F,F,F.element),I(),E());y();
F.render(U,a||0);t();A();(F.afterRender||X)();Ba.updateTitle(F.title);a=new Date;(a=a>=F.start&&a<F.end)?Ba.disableButton("today"):Ba.enableButton("today");u("updateTodayButton",Y,!a);u("viewRender",F,F,F.element);F.trigger("viewDisplay",Y);ba--;!k.lazyFetching||M(F.visStart,F.visEnd)?J(F.visStart,F.visEnd):D()}function H(){p()&&(I(),E(),q(),t(),D())}function q(){O=k.contentHeight?k.contentHeight:k.height?k.height-(ra?ra.height():0)-R(oa):Math.round(oa.width()/Math.max(k.aspectRatio,.5))}function t(){O===
e&&q();ba++;F.setHeight(O);F.setWidth(oa.width());ba--;fa=f.outerWidth()}function v(){if(!ba)if(F.start){var a=++pa;setTimeout(function(){a==pa&&!ba&&p()&&fa!=(fa=f.outerWidth())&&(ba++,H(),F.trigger("windowResize",Y),ba--)},200)}else K()}function z(a){E();D(a)}function D(a){var b=[];if(p()){var d=c(document).height()>c(window).height();F.setEventData(W);b=F.renderEvents(W,a);null!=navigator.userAgent.match(/iPod|iPhone|iPad/i)&&c("div.fc-event").trigger("mouseover");F.trigger("eventAfterAllRender");
c(document).height()>c(window).height()!=d&&H()}return b}function E(){F.triggerEventDestroy();F.clearEvents();F.clearEventData()}function I(){F&&F.unselect()}function y(){oa.css({width:"100%",height:oa.height(),overflow:"hidden"})}function A(){oa.css({width:"",height:"",overflow:""})}function u(a,b){if(k[a])return k[a].apply(b||Y,Array.prototype.slice.call(arguments,2))}var P=this;P.options=k;P.render=function(a){oa?p()&&(q(),N(a)):m()};P.destroy=function(){F&&(u("viewDestroy",F,F,F.element),F.triggerEventDestroy());
c(window).unbind("resize",v);Ba.destroy();oa.remove();f.removeClass("fc fc-rtl ui-widget")};P.refetchEvents=function(){E();J(F.visStart,F.visEnd)};P.reportEvents=function(a){W=a;ca=D()};P.reportEventChange=function(a){z(a)};P.rerenderEvents=z;P.changeView=r;P.select=function(a,b,d){F.select(a,b,d===e?!0:d)};P.unselect=I;P.prev=function(){B(-1)};P.next=function(){B(1)};P.prevYear=function(){d(U,-1);B()};P.nextYear=function(){d(U,1);B()};P.today=function(){U=new Date;B()};P.gotoDate=function(a,b,d){a instanceof
Date?U=n(a):w(U,a,b,d);B()};P.incrementDate=function(a,b,c){a!==e&&d(U,a);b!==e&&g(U,b);c!==e&&h(U,c);B()};P.formatDate=function(a,b){return C(a,b,k)};P.formatDates=function(a,b,d){return G(a,b,d,k)};P.getDate=function(){return n(U)};P.getView=function(){return F};P.option=function(a,b){if(b===e)return k[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)k[a]=b,H()};P.trigger=u;P.calcSize=q;P.setSize=t;P.refetchSource=function(a){da(F.visStart,F.visEnd,a)};P.getSegmentsByRowAndColumn=function(a,
b){for(var d=[],c=0;c<ca.length;c++)ca[c].row==a&&ca[c].leftCol<=b&&b<=ca[c].rightCol&&d.push(ca[c]);return d};a.call(P,k,l);var M=P.isFetchNeeded,J=P.fetchEvents,da=P.refetchEventSource,Y=f[0],Ba,ra,oa,F,fa,O,pa=0,ba=0,U=new Date,W=[],ca=[],L,la;w(U,k.year,k.month,k.date);k.droppable&&c(document).bind("dragstart",function(a,b){var d=a.target,e=c(d);if(!e.parents(".fc").length){var f=k.dropAccept;if(c.isFunction(f)?f.call(d,e):e.is(f))L=d,F.dragStart(L,a,b)}}).bind("dragstop",function(a,b){L&&(F.dragStop(L,
a,b),L=null)})}function b(a,b){function d(d){var e=c("<td class='fc-header-"+d+"'/>");(d=b.header[d])&&c.each(d.split(" "),function(d){0<d&&e.append("<span class='fc-header-space'/>");var g;c.each(this.split(","),function(d,h){if("title"==h)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),g&&g.addClass(f+"-corner-right"),g=null;else{var k;a[h]?k=a[h]:T[h]&&(k=function(){m.removeClass(f+"-state-hover");a.changeView(h)});if(k){d=b.theme?S(b.buttonIcons,h):null;var l=S(b.buttonText,h),
m=c("<span class='fc-button fc-button-"+h+" "+f+"-state-default'>"+(d?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+d+"'/></span>":l)+"</span>").click(function(){m.hasClass(f+"-state-disabled")||k()}).mousedown(function(){m.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){m.removeClass(f+"-state-down")}).hover(function(){m.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){m.removeClass(f+
"-state-hover").removeClass(f+"-state-down")}).appendTo(e);ea(m);g||m.addClass(f+"-corner-left");g=m}}});g&&g.addClass(f+"-corner-right")});return e}this.render=function(){f=b.theme?"ui":"fc";if(b.header)return e=c("<table class='fc-header' style='width:100%'/>").append(c("<tr/>").append(d("left")).append(d("center")).append(d("right")))};this.destroy=function(){e.remove()};this.updateTitle=function(a){c("#current-date-title").html(a)};this.activateButton=function(a){e.find("span.fc-button-"+a).addClass(f+
"-state-active")};this.deactivateButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+a).addClass(f+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-disabled")};var e=c([]),f}function a(a,b){function d(b,d){f(b,function(e){if(d==I){if(e){a.eventDataTransform&&(e=c.map(e,a.eventDataTransform));b.eventDataTransform&&(e=c.map(e,b.eventDataTransform));for(var f=0;f<e.length;f++)e[f].source=
b,l(e[f]);A=A.concat(e)}C--;C||q(A)}})}function f(b,d){var e,g=aa.sourceFetchers;for(e=0;e<g.length;e++){var l=g[e](b,z,E,d);if(!0===l)return;if("object"==typeof l){f(l,d);return}}if(e=b.events)c.isFunction(e)?(h(),e(n(z),n(E),function(a){d(a);k()})):c.isArray(e)?d(e):d();else if(b.url){var m=b.success,K=b.error,p=b.complete;e=c.isFunction(b.data)?b.data():b.data;e=c.extend({},e||{});g=wa(b.startParam,a.startParam);l=wa(b.endParam,a.endParam);g&&(e[g]=v(z));l&&(e[l]=v(E));h();c.ajax(c.extend({},$a,
b,{data:e,success:function(a){a=a||[];var b=ma(m,this,arguments);c.isArray(b)&&(a=b);d(a)},error:function(){ma(K,this,arguments);d()},complete:function(){ma(p,this,arguments);k()}}))}else d()}function g(a){c.isFunction(a)||c.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a)return m(a),D.push(a),a}function h(){y++||B("loading",null,!0,N())}function k(){--y||B("loading",null,!1,N())}function l(b){var d=b.source||{},c=wa(d.ignoreTimezone,a.ignoreTimezone);b._id=b._id||(b.id===
e?"_fc"+db++:b.id+"");b.date&&(b.start||(b.start=b.date),delete b.date);b._start=n(b.start=t(b.start,c));b.end=t(b.end,c);b.end&&b.end<=b.start&&(b.end=null);b._end=b.end?n(b.end):null;b.allDay===e&&(b.allDay=wa(d.allDayDefault,a.allDayDefault));b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function m(a){a.className?"string"==typeof a.className&&(a.className=a.className.split(/\s+/)):a.className=[];for(var b=aa.sourceNormalizers,d=0;d<b.length;d++)b[d](a)}
function K(a){c.isFunction(a)||c.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a)return m(a),a}function p(a,b){return a&&b&&r(a)==r(b)}function r(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!z||a<z||b>E};this.fetchEvents=function(a,b){z=a;E=b;A=[];a=++I;C=b=D.length;for(var c=0;c<b;c++)d(D[c],a)};this.addEventSource=function(a){if(a=g(a))C++,d(a,I)};this.removeEventSource=function(a){D=c.grep(D,function(b){return!p(b,a)});
A=c.grep(A,function(b){return!p(b.source,a)});q(A)};this.updateEvent=function(a){var b,d=A.length,c=N().defaultEventEnd,e=a.start-a._start,f=a.end?a.end-(a._end||c(a)):0;for(b=0;b<d;b++){var g=A[b];g._id==a._id&&g!=a&&(g.start=new Date(+g.start+e),g.end=a.end?g.end?new Date(+g.end+f):new Date(+c(g)+f):null,g.title=a.title,g.url=a.url,g.allDay=a.allDay,g.className=a.className,g.editable=a.editable,g.color=a.color,g.backgroundColor=a.backgroundColor,g.borderColor=a.borderColor,g.textColor=a.textColor,
l(g))}l(a);q(A)};this.renderEvent=function(a,b){l(a);a.source||(b&&(w.events.push(a),a.source=w),A.push(a));q(A)};this.removeEvents=function(a){if(a){if(!c.isFunction(a)){var b=a+"";a=function(a){return a._id==b}}A=c.grep(A,a,!0);for(d=0;d<D.length;d++)c.isArray(D[d].events)&&(D[d].events=c.grep(D[d].events,a,!0))}else{A=[];for(var d=0;d<D.length;d++)c.isArray(D[d].events)&&(D[d].events=[])}q(A)};this.clientEvents=function(a){return c.isFunction(a)?c.grep(A,a):a?(a+="",c.grep(A,function(b){return b._id==
a})):A};this.normalizeEvent=l;this.refetchEventSource=function(a,b,e){if(e=K(e))z=a,E=b,A=c.grep(A,function(a){return!p(a.source,e)}),q(A),C++,d(e,I)};this.renderEventForSource=function(a,b){if(b=K(b))l(a),a.source=b,A.push(a);q(A)};for(var B=this.trigger,N=this.getView,q=this.reportEvents,w={events:[]},D=[w],z,E,I=0,C=0,y=0,A=[],u=0;u<b.length;u++)g(b[u])}function d(a,b,d){a.setFullYear(a.getFullYear()+b);d||m(a);return a}function g(a,b,d){if(+a){b=a.getMonth()+b;var c=n(a);c.setDate(1);c.setMonth(b);
a.setMonth(b);for(d||m(a);a.getMonth()!=c.getMonth();)a.setDate(a.getDate()+(a<c?1:-1))}return a}function h(a,b,d){if(+a){b=a.getDate()+b;var c=n(a);c.setHours(9);c.setDate(b);a.setDate(b);d||m(a);k(a,c)}return a}function k(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*ob)}function l(a,b){a.setMinutes(a.getMinutes()+b);return a}function m(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function n(a,b){return b?m(new Date(+a)):new Date(+a)}function p(){var a=
0;do var b=new Date(1970,a++,1);while(b.getHours());return b}function r(a,b){return Math.round((n(a,!0)-n(b,!0))/864E5)}function w(a,b,d,c){b!==e&&b!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(b));d!==e&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d));c!==e&&a.setDate(c)}function t(a,b){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));b===e&&(b=!0);return q(a,b)||(a?new Date(a):
null)}return null}function v(a){a=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());return Math.round(+a/1E3)}function q(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!a)return null;var d=new Date(a[1],0,1);b||!a[13]?(b=new Date(a[1],0,1,9,0),a[3]&&(d.setMonth(a[3]-1),b.setMonth(a[3]-1)),a[5]&&(d.setDate(a[5]),b.setDate(a[5])),k(d,b),a[7]&&d.setHours(a[7]),a[8]&&d.setMinutes(a[8]),a[10]&&
d.setSeconds(a[10]),a[12]&&d.setMilliseconds(1E3*Number("0."+a[12])),k(d,b)):(d.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1),d.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?1E3*Number("0."+a[12]):0),a[14]&&(b=60*Number(a[16])+(a[18]?Number(a[18]):0),b*="-"==a[15]?1:-1,d=new Date(+d+6E4*b)));return d}function z(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);a[3]&&(b%=12,"p"==a[3].toLowerCase().charAt(0)&&
(b+=12));return 60*b+(a[2]?parseInt(a[2],10):0)}}function C(a,b,d){return G(a,null,b,d)}function G(a,b,d,c){c=c||ua;var e=a,f=b,g,h=d.length,k,l,m="";for(g=0;g<h;g++){var n=d.charAt(g);if("'"==n)for(k=g+1;k<h;k++){if("'"==d.charAt(k)){e&&(m=k==g+1?m+"'":m+d.substring(g+1,k),g=k);break}}else if("("==n)for(k=g+1;k<h;k++){if(")"==d.charAt(k)){g=C(e,d.substring(g+1,k),c);parseInt(g.replace(/\D/,""),10)&&(m+=g);g=k;break}}else if("["==n)for(k=g+1;k<h;k++){if("]"==d.charAt(k)){n=d.substring(g+1,k);g=C(e,
n,c);g!=C(f,n,c)&&(m+=g);g=k;break}}else if("{"==n)e=b,f=a;else if("}"==n)e=a,f=b;else{for(k=h;k>g;k--)if(l=Za[d.substring(g,k)]){e&&(m+=l(e,c));g=k-1;break}k==g&&e&&(m+=n)}}return m}function u(a){if(a.end){var b=a.end;a=a.allDay;b=n(b);return a||b.getHours()||b.getMinutes()?h(b,1):m(b)}return h(n(a.start),1)}function B(a,b,d){a.unbind("mouseover").mouseover(function(a){for(var f=a.target,g;f!=this;)g=f,f=f.parentNode;(f=g._fci)!==e&&(g._fci=e,g=b[f],d(g.event,g.element,g),c(a.target).trigger(a));
a.stopPropagation()})}function D(a,b,d){for(var e=0,f;e<a.length;e++)f=c(a[e]),f.width(Math.max(0,b-I(f,d)))}function E(a,b,d){for(var e=0,f;e<a.length;e++)f=c(a[e]),f.height(Math.max(0,b-R(f,d)))}function I(a,b){var d=(parseFloat(c.css(a[0],"paddingLeft",!0))||0)+(parseFloat(c.css(a[0],"paddingRight",!0))||0);var e=(parseFloat(c.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(c.css(a[0],"borderRightWidth",!0))||0);d+=e;a=b?(parseFloat(c.css(a[0],"marginLeft",!0))||0)+(parseFloat(c.css(a[0],"marginRight",
!0))||0):0;return d+a}function R(a,b){var d=(parseFloat(c.css(a[0],"paddingTop",!0))||0)+(parseFloat(c.css(a[0],"paddingBottom",!0))||0);var e=(parseFloat(c.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(c.css(a[0],"borderBottomWidth",!0))||0);d+=e;a=b?(parseFloat(c.css(a[0],"marginTop",!0))||0)+(parseFloat(c.css(a[0],"marginBottom",!0))||0):0;return d+a}function X(){}function da(a,b){return a-b}function J(a){return(10>a?"0":"")+a}function S(a,b){if(a[b]!==e)return a[b];b=b.split(/(?=[A-Z])/);for(var d=
b.length-1,c;0<=d;d--)if(c=a[b[d].toLowerCase()],c!==e)return c;return a[""]}function M(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ea(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Ha(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function va(a,b){var d=a.source||{},c=a.color,e=d.color,f=b("eventColor"),g=a.backgroundColor||c||d.backgroundColor||e||b("eventBackgroundColor")||f;c=a.borderColor||c||d.borderColor||e||b("eventBorderColor")||f;a=a.textColor||d.textColor||b("eventTextColor");b=[];g&&b.push("background-color:"+g);c&&b.push("border-color:"+c);a&&b.push("color:"+a);return b.join(";")}function ma(a,b,d){c.isFunction(a)&&(a=[a]);if(a){var e;for(e=0;e<a.length;e++)var f=a[e].apply(b,d)||f;return f}}function wa(){for(var a=
0;a<arguments.length;a++)if(arguments[a]!==e)return arguments[a]}function Oa(a,b,d){var e=this;e.renderList=function(b,d,n){l=b;p=d;f("theme");f("columnFormat");f("weekNumbers");f("weekNumberShortTitle");f("weekNumberTitle");f("weekNumberCalculation");r=[];a.find(".fc-list-day").remove();b=c("<ul class='fc-list-day'></ul>").appendTo(a);d=m(new Date);for(n=0;n<p;n++){var B=h(0,n),q=c("<li class='fc-list-day-item' data-date='"+k(B,"yyyy-MM-dd")+"'></li>").appendTo(b);+B==+d?q.addClass("fc-today"):+B<
+d&&q.addClass("fc-past");q=c("<div class='fc-day-content'></div>").appendTo(q);g("dayRender",e,B,q);r.push(q)}};e.setHeight=function(a){};e.setWidth=function(a){};e.renderDayOverlay=function(a,b,d){};e.defaultSelectionEnd=function(a,b){};e.renderSelection=function(a,b,d){};e.clearSelection=function(){};e.reportDayClick=function(a,b,d){};e.dragStart=function(a,b,d){};e.dragStop=function(a,b,d){};e.defaultEventEnd=function(a){return n(a.start)};e.getHoverListener=function(){return hoverListener};e.colLeft=
function(a){return null};e.colRight=function(a){return null};e.colContentLeft=function(a){return null};e.colContentRight=function(a){return null};e.getIsCellAllDay=function(){return!0};e.allDayRow=function(a){return null};e.getRowCnt=function(){return l};e.getColCnt=function(){return p};e.getColWidth=function(){return colWidth};e.getDayItems=function(){return r};na.call(e,a,b,d);Ea.call(e);Ga.call(e);var f=e.opt,g=e.trigger,h=e.cellToDate,k=b.formatDate,l,p,r=[]}function Ga(){var a=this;a.renderEvents=
function(b,d){d=a.getColCnt();for(var e=a.getDayItems(),f=0;f<d;f++){for(var g=a.cellToDate(0,f),h=[],k=[],l=0;l<b.length;l++){var m=b[l];m.allDay||0!==r(g,m.start)||h.push(m);m.allDay&&(m.start<=g&&m.end>=g||0===r(g,m.start))&&k.push(m)}k.sort(xa);h.sort(xa);g=k.concat(h);h=e[f];h.find(".fc-list-event").remove();if(0<g.length)for(k=c("<ul class='fc-list-event'></ul>").appendTo(h),l=0;l<g.length;l++)m=c("<li/>").addClass("fc-list-event-item").append(c("<div class='fc-event-inner'></div>")),a.trigger("eventRender",
g[l],g[l],m),k.append(m),CommonFunctions.executeScripts(g[l].description),CommonFunctions.executeScripts(g[l].extraDescription);h.parents(".fc-list-day-item:first").toggleClass("fc-day-empty",0===g.length)}};a.clearEvents=function(){}}function ka(a,b,d){function e(){var b=f(),d;C&&C.remove();C=c(b).appendTo(a);I=C.find("thead");y=I.find(".fc-day-header");u=C.find("tbody");G=u.find("tr");X=u.find(".fc-day");J=G.find("td:first-child");Ta=u.find(".fc-week-number-link");L=G.eq(0).find(".fc-day > div");
F=G.eq(0).find(".fc-day-content > div");Ha(I.add(I.find("tr")));Ha(G);G.eq(0).addClass("fc-first");G.filter(":last").addClass("fc-last");X.each(function(a,b){a=z(Math.floor(a/ca),a%ca);d=c(b);t("dayRender",B,a,d);d.find(".fc-day-number:first").mousedown(k)});Ta.click(l);X.click(g).mousedown(H)}function f(){var a=la+"-widget-header",b;var d="<thead><tr>";Q&&(d+="<th class='fc-week-number "+a+"'>"+M(Na)+"</th>");for(b=0;b<ca;b++){var c=z(0,b);d+="<th class='fc-day-header fc-"+cb[c.getDay()]+" "+a+"'>"+
M(A(c,S))+"</th>"}a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+(d+"</tr></thead>");d=la+"-widget-content";var e;var f="<tbody>";for(b=0;b<W;b++){f+="<tr class='fc-week'>";Q&&(c=e=z(b,0),c.getFullYear()<B.start.getFullYear()&&(c=new Date(B.start.getFullYear(),0,1)),c.getMonth()<B.start.getMonth()&&(c=new Date(B.start.getFullYear(),B.start.getMonth(),1)),f+="<td class='fc-week-number "+d+"'><div><a class='fc-week-number-link' href='javascript:void(0);' data-date='"+A(c,
"yyyy-MM-dd")+"'>"+M(A(e,La))+"</a></div></td>");for(c=0;c<ca;c++){e=z(b,c);var g=la+"-widget-content",h=B.start.getMonth(),k=m(new Date),l="";g=["fc-day","fc-"+cb[e.getDay()],g];e.getMonth()!=h&&g.push("fc-other-month");+e==+k?g.push("fc-today",la+"-state-highlight"):e<k?g.push("fc-past"):g.push("fc-future");l+="<td class='"+g.join(" ")+"' data-date='"+A(e,"yyyy-MM-dd")+"'><div>";da&&(l+="<a class='fc-day-number' href='javascript:void(0);'>"+e.getDate()+"</a>");f+=l+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}f+=
"</tr>"}return a+(f+"</tbody>")+"</table>"}function g(a){if(!w("selectable")){var b=q(c(this).data("date"));t("dayClick",this,b,!0,a)}}function k(){var a=c(this).parents(".fc-day:first").data("date");b.gotoDate(q(a));b.changeView("agendaDay")}function l(){var a=c(this).data("date");b.gotoDate(q(a));b.changeView("agendaWeek")}function p(a,b,d){d&&sa.build();a=N(a,b);for(b=0;b<a.length;b++)d=a[b],r(d.row,d.leftCol,d.row,d.rightCol).click(g).mousedown(H)}function r(b,d,c,e){b=sa.rect(b,d,c,e,a);return v(b,
a)}var B=this;B.renderBasic=function(b,d,f){W=b;ca=d;da=f;la=w("theme")?"ui":"fc";S=w("columnFormat");Q=w("weekNumbers");Na=w("weekNumberShortTitle");w("weekNumberTitle");La="iso"!=w("weekNumberCalculation")?"w":"W";u||(fa=c("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a));e()};B.setHeight=function(a){pa=a;a=pa-I.height();var b,d;if("variable"==w("weekMode"))var e=b=Math.floor(a/(1==W?2:6));else e=Math.floor(a/W),b=a-e*(W-1);J.each(function(a,f){a<
W&&(d=c(f),d.find("> div").css("min-height",(a==W-1?b:e)-R(d)))})};B.setWidth=function(a){O=a;Ja.clear();Da.clear();U=0;Q&&(U=I.find("th.fc-week-number").outerWidth());ba=Math.floor((O-U)/ca);D(y.slice(0,-1),ba)};B.renderDayOverlay=p;B.defaultSelectionEnd=function(a,b){return n(a)};B.renderSelection=function(a,b,d){p(a,h(n(b),1),!0)};B.clearSelection=function(){K()};B.reportDayClick=function(a,b,d){var c=E(a);t("dayClick",X[c.row*ca+c.col],a,b,d)};B.dragStart=function(a,b,d){ya.start(function(a){K();
a&&r(a.row,a.col,a.row,a.col)},b)};B.dragStop=function(a,b,d){var c=ya.stop();K();c&&(c=z(c),t("drop",a,c,!0,b,d))};B.defaultEventEnd=function(a){return n(a.start)};B.getHoverListener=function(){return ya};B.colLeft=function(a){return Ja.left(a)};B.colRight=function(a){return Ja.right(a)};B.colContentLeft=function(a){return Da.left(a)};B.colContentRight=function(a){return Da.right(a)};B.getIsCellAllDay=function(){return!0};B.allDayRow=function(a){return G.eq(a)};B.getRowCnt=function(){return W};B.getColCnt=
function(){return ca};B.getColWidth=function(){return ba};B.getDaySegmentContainer=function(){return fa};na.call(B,a,b,d);ja.call(B);Ea.call(B);ia.call(B);var w=B.opt,t=B.trigger,v=B.renderOverlay,K=B.clearOverlays,H=B.daySelectionMousedown,z=B.cellToDate,E=B.dateToCell,N=B.rangeToSegments,A=b.formatDate,C,I,y,u,G,X,J,L,F,fa,O,pa,ba,U,W,ca,da,la,S,Q,Na,La,Ta;ea(a.addClass("fc-grid"));var sa=new za(function(a,b){var d,e,f;y.each(function(a,g){d=c(g);e=d.offset().left;a&&(f[1]=e);f=[e];b[a]=f});f[1]=
e+d.outerWidth();G.each(function(b,g){b<W&&(d=c(g),e=d.offset().top,b&&(f[1]=e),f=[e],a[b]=f)});f[1]=e+d.outerHeight()});var ya=new Sa(sa);var Ja=new Pa(function(a){return L.eq(a)});var Da=new Pa(function(a){return F.eq(a)})}function ia(){var a=this;a.renderEvents=function(b,d){return a.renderDayEvents(b,d)};a.clearEvents=function(){a.getDaySegmentContainer().empty()};L.call(a)}function Ca(a,b,d){function f(){var b=T+"-widget-header";var d="",e,f=m(new Date);d+="<thead><tr>";if(wa){var g=ra(0,0);
g=fa(g,Ca);g=ka?g+Aa:Aa+" "+g;d+="<th class='fc-agenda-axis fc-week-number "+b+"'>"+M(g)+"</th>"}else d+="<th class='fc-agenda-axis "+b+"'>&nbsp;</th>";var h=1<Qa;for(e=0;e<Qa;e++){g=ra(0,e);var k=+g==+f;k&&h&&(d+="<th style='width: 1px; position: relative; z-index: 3;' class='fc-state-hightlight-border'></th>");d+="<th class='fc-"+cb[g.getDay()]+" fc-col"+e+" "+b;k&&h&&(d+=" "+T+"-state-highlight fc-today");d+="'>";d=h?d+("<a class='fc-day-number' href='javascript:void(0);' data-date='"+fa(g,"yyyy-MM-dd")+
"'>"+M(fa(g,va))+"</a>"):d+M(fa(g,va));d+="</th>";k&&h&&(d+="<th style='width: 1px; position: relative; z-index: 3;' class='fc-state-hightlight-border'></th>")}b="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+(d+("<th class='fc-agenda-gutter "+b+"'>&nbsp;</th></tr></thead>"));g=T+"-widget-header";d=T+"-widget-content";f=m(new Date);h="<tbody><tr><th class='fc-agenda-axis "+g+"'>&nbsp;</th>";e="";k=1<Qa;for(g=0;g<Qa;g++){var l=ra(0,g);var n=+l==+f;var p=["fc-col"+
g,"fc-"+cb[l.getDay()],d];n&&k?p.push(T+"-state-highlight","fc-today"):l<f?p.push("fc-past"):p.push("fc-future");l="<td class='"+p.join(" ")+"'";n&&k&&(l+="style='border-width: 0px !important; border-bottom-width: 1px !important;'");l+=" ><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";n&&k&&(l="<td style='position: relative; z-index: 3; width: 1px;' class='fc-state-hightlight-border'></td>"+l+"<td style='position: relative; z-index: 3; width: 1px;' class='fc-state-hightlight-border'></td>");
e+=l}b=b+(h+e+("<td class='fc-agenda-gutter "+d+"'>&nbsp;</td></tr></tbody>"))+"</table>";O&&O.remove();O=c(b).prependTo(a);pa=O.find("thead");ba=pa.find("th:not(.fc-state-hightlight-border)").slice(1,-1);U=O.find("tbody");W=U.find("td:not(.fc-state-hightlight-border)").slice(0,-1);ca=W.find("> div");ha=W.find(".fc-day-content > div");la=W.eq(0);ia=ca.eq(0);Ha(pa.add(pa.find("tr")));Ha(U.add(U.find("tr")));ba.find(".fc-day-number").click(B)}function g(){function a(){sa.scrollTop(c)}var b=p(),d=n(b);
d.setHours(y("firstHour"));var c=H(b,d)+1;a();setTimeout(a,0)}function k(a){if(!y("selectable")){var b=Math.min(Qa-1,Math.floor((a.pageX-O.offset().left-qa)/ta)),d=ra(0,b),c=this.parentNode.className.match(/fc-slot(\d+)/);c?(c=parseInt(c[1])*y("slotMinutes"),d.setHours(Math.floor(c/60)),d.setMinutes(c%60+fb),G("dayClick",W[b],d,!1,a)):G("dayClick",W[b],d,!0,a)}}function B(){var a=c(this).data("date");b.gotoDate(q(a));b.changeView("agendaDay")}function r(a,b,d){d&&ua.build();a=F(a,b);for(b=0;b<a.length;b++)d=
a[b],w(d.row,d.leftCol,d.row,d.rightCol).click(k).mousedown(Y)}function w(a,b,d,c){a=ua.rect(a,b,d,c,Ka);return X(a,Ka)}function t(a,b){for(var d=0;d<Qa;d++){var c=ra(0,d),e=h(n(c),1),f=new Date(Math.max(c,a)),g=new Date(Math.min(e,b));f<g&&(e=ua.rect(0,d,0,d,ya),f=H(c,f),c=H(c,g),e.top=f,e.height=c-f,X(e,ya).click(k).mousedown(I))}}function v(a){return y("allDaySlot")&&!a.row}function K(a){var b=ra(0,a.col);a=a.row;y("allDaySlot")&&a--;l(b,60*u.minVisibleHour);0<=a&&l(b,a*Ya);return b}function H(a,
b){a=n(a,!0);if(b<l(n(a),fb))return 0;if(b>=l(n(a),60*(u.maxVisibleHour+1)))return Da.height();a=y("slotMinutes");b=60*b.getHours()+b.getMinutes()-fb;var d=Math.floor(b/a),c=aa[d];c===e&&(c=aa[d]=Da.find("tr").eq(d).find("td div")[0].offsetTop);return Math.max(0,Math.round(c-1+b%a/a*hb))}function A(a,b){var d=y("selectHelper");ua.build();if(d){var e=oa(a).col;if(0<=e&&e<Qa){e=ua.rect(0,e,0,e,ya);var f=H(a,a),g=H(a,b);if(g>f){e.top=f;e.height=g-f;e.left+=2;e.width-=5;if(c.isFunction(d)){if(a=d(a,b))e.position=
"absolute",Ia=c(a).css(e).appendTo(ya)}else e.isStart=!0,e.isEnd=!0,Ia=c(Q({title:"",start:a,end:b,className:["fc-select-helper"],editable:!1},e)),Ia.css("opacity",y("dragOpacity"));Ia&&(Ia.click(k).mousedown(I),ya.append(Ia),D(Ia,e.width,!0),E(Ia,e.height,!0))}}}else t(a,b)}function N(){J();Ia&&(Ia.remove(),Ia=null)}function I(a){if(1==a.which&&y("selectable")){S(a);var b;xa.start(function(a,d){N();a&&a.col==d.col&&!v(a)?(d=K(d),a=K(a),b=[d,l(n(d),Ya),a,l(n(a),Ya)].sort(da),A(b[0],b[3])):b=null},
a);c(document).one("mouseup",function(a){xa.stop();b&&(+b[0]==+b[1]&&C(b[0],!1,a),L(b[0],b[3],!1,a))})}}function C(a,b,d){G("dayClick",W[oa(a).col],a,b,d)}var u=this;u.renderAgenda=function(b){Qa=b;T=y("theme")?"ui":"fc";ka=y("isRTL");fb=z(y("minTime"));ma=z(y("maxTime"));va=y("columnFormat");wa=y("weekNumbers");Aa=y("weekNumberTitle");y("weekNumberShortTitle");Ca="iso"!=y("weekNumberCalculation")?"w":"W";Ya=y("snapMinutes")||y("slotMinutes");if(O)f();else{b=T+"-widget-header";var d=T+"-widget-content",
e,g=0==y("slotMinutes")%15;f();Ka=c("<div style='position:absolute; left:0; width:100%'/>").appendTo(a);if(y("allDaySlot")){Na=c("<div class='fc-event-container' style='position:absolute; z-index:8; top:0; left:0'/>").appendTo(Ka);var h="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+y("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>";
La=c(h).appendTo(Ka);Ta=La.find("tr");Ta.find("td").click(k).mousedown(Y);Ka.append("<div class='fc-agenda-divider "+b+"'><div class='fc-agenda-divider-inner'/></div>")}else Na=c([]);sa=c("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(Ka);ya=c("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(sa);Ja=c("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ya);h="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";
var m=p();var B=l(n(m),ma);l(m,fb);for(e=pb=0;m<B;e++){var r=m.getMinutes();h+="<tr class='fc-slot"+e+" "+(r?"fc-minor":"")+"'><th class='fc-agenda-axis "+b+"'>"+(g&&r?"&nbsp;":fa(m,y("axisFormat")))+"</th><td class='"+d+"'><div style='position:relative'>&nbsp;</div></td></tr>";l(m,y("slotMinutes"));pb++}Da=c(h+"</tbody></table>").appendTo(ya);Da.find("td").click(k).mousedown(I)}};u.setWidth=function(a){Fa.clear();Ga.clear();a=pa.find("th:first");La&&(a=a.add(La.find("th:first")));a=a.add(Da.find("th").filter(":visible:first"));
qa=0;D(a.width("").each(function(a,b){qa=Math.max(qa,c(b).outerWidth())}),qa);a=O.find(".fc-agenda-gutter");La&&(a=a.add(La.find("th.fc-agenda-gutter")));var b=sa[0].clientWidth;(Xa=sa.width()-b)?(D(a,Xa),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last");ta=Math.floor((b-qa)/Qa);D(ba.slice(0,-1),ta)};u.setHeight=function(a){a===e&&(a=nb);nb=a;aa={};var b=U.position().top,d=sa.position().top;a=Math.min(a-b,Da.height()+d+1);ia.height(a-R(la));Ka.css("top",b);sa.height(a-d-
1);hb=Da.find("tr:visible:first").height();bb=y("slotMinutes")/Ya;kb=hb/bb};u.afterRender=function(){g()};u.defaultEventEnd=function(a){var b=n(a.start);return a.allDay?b:l(b,y("defaultEventMinutes"))};u.timePosition=H;u.getIsCellAllDay=v;u.allDayRow=function(a){return Ta};u.getCoordinateGrid=function(){return ua};u.getHoverListener=function(){return xa};u.colLeft=function(a){return Fa.left(a)};u.colRight=function(a){return Fa.right(a)};u.colContentLeft=function(a){return Ga.left(a)};u.colContentRight=
function(a){return Ga.right(a)};u.getDaySegmentContainer=function(){return Na};u.getSlotSegmentContainer=function(){return Ja};u.getMinMinute=function(){return fb};u.getMaxMinute=function(){return ma};u.getSlotContainer=function(){return ya};u.getRowCnt=function(){return 1};u.getColCnt=function(){return Qa};u.getColWidth=function(){return ta};u.getSnapHeight=function(){return kb};u.getSnapMinutes=function(){return Ya};u.defaultSelectionEnd=function(a,b){return b?n(a):l(n(a),y("slotMinutes"))};u.renderDayOverlay=
r;u.renderSelection=function(a,b,d){d?y("allDaySlot")&&r(a,h(n(b),1),!0):A(a,b)};u.clearSelection=N;u.reportDayClick=C;u.dragStart=function(a,b,d){xa.start(function(a){J();if(a)if(v(a))w(a.row,a.col,a.row,a.col);else{a=K(a);var b=l(n(a),y("defaultEventMinutes"));t(a,b)}},b)};u.dragStop=function(a,b,d){var c=xa.stop();J();c&&G("drop",a,K(c),v(c),b,d)};na.call(u,a,b,d);ja.call(u);Ea.call(u);Z.call(u);var y=u.opt,G=u.trigger,X=u.renderOverlay,J=u.clearOverlays,L=u.reportSelection,S=u.unselect,Y=u.daySelectionMousedown,
Q=u.slotSegHtml,ra=u.cellToDate,oa=u.dateToCell,F=u.rangeToSegments,fa=b.formatDate,O,pa,ba,U,W,ca,ha,la,ia,Ka,Na,La,Ta,sa,ya,Ja,Da,Ia,nb,qa,ta,Xa,hb,Ya,bb,kb,Qa,pb,aa={},T,ka,fb,ma,va,wa,Aa,Ca;ea(a.addClass("fc-agenda"));var ua=new za(function(a,b){var d;ba.each(function(a,g){e=c(g);f=e.offset().left;a&&(d[1]=f);d=[f];b[a]=d});d[1]=f+e.outerWidth();if(y("allDaySlot")){var e=Ta;var f=e.offset().top;a[0]=[f,f+e.outerHeight()]}for(var g=ya.offset().top,h=sa.offset().top,k=h+sa.outerHeight(),l=0;l<pb*
bb;l++)a.push([Math.max(h,Math.min(k,g+kb*l)),Math.max(h,Math.min(k,g+kb*(l+1)))])});var xa=new Sa(ua);var Fa=new Pa(function(a){return ca.eq(a)});var Ga=new Pa(function(a){return ha.eq(a)})}function Z(){function a(a){var b=p("minDefaultDayStartHour"),d=p("maxDefaultDayEndHour");a&&c.each(a,function(a,c){a=c.start.getHours();c=c.end.getHours();b>a&&(b=a);d<c&&(d=c)});m.minVisibleHour=b;m.maxVisibleHour=d;a="";for(var e=0;e<2*b;e++)a.length&&(a+=", "),a+="tr.fc-slot"+e;for(e=2*d+2;48>e;e++)a.length&&
(a+=", "),a+="tr.fc-slot"+e;c(".fc-agenda-slots tr").show();c(a).hide();la.calcSize();la.setSize()}function b(a){return a.end?n(a.end):l(n(a.start),p("defaultEventMinutes"))}function d(a,b){var d="<",c=a.url,e=va(a,p),f=["fc-event","fc-event-vert"];w(a)&&f.push("fc-event-draggable");b.isStart&&f.push("fc-event-start");b.isEnd&&f.push("fc-event-end");f=f.concat(a.className);a.source&&(f=f.concat(a.source.className||[]));d=c?d+("a href='"+M(a.url)+"'"):d+"div";var g=p("timeFormat");"agendaWeek"===la.getView().name&&
(g=la.option("timeFormat")[""]);d+=" class='"+f.join(" ")+"' style='position:absolute;top:"+b.top+"px;left:"+b.left+"px;"+e+"'><div class='fc-event-inner'><span class='fc-event-time'>"+M(Z(a.start,a.end,g))+"</span><span class='fc-event-title'>"+M(a.title||"")+"</span></div><div class='fc-event-bg'></div>";b.isEnd&&t(a)&&(d+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return d+("</"+(c?"a":"div")+">")}function f(a,b,d){var c=b.find("div.fc-event-time");w(a)&&g(a,b,c);d.isEnd&&t(a)&&
k(a,b,c);D(a,b)}function g(a,b,d){function c(){ca();if(v)if(N&&H)d.hide(),b.draggable("option","grid",null),W(h(n(a.start),y),h(u(a),y));else{var c=fa,e=l(n(a.start),c),f;a.end&&(f=l(n(a.end),c));d.text(Z(e,f,p("timeFormat")));d.css("display","");b.draggable("option","grid",[g,k])}}var e=m.getCoordinateGrid(),f=Y(),g=Ba(),k=ra(),B=oa(),w,t,v,K,H,D,z,E,y,fa,A,N=p("dragBetweenAllDayAndSlots");b.draggable({scroll:!1,grid:[g,k],axis:1==f?"y":!1,opacity:p("dragOpacity"),revertDuration:p("dragRevertDuration"),
start:function(d,c){q("eventDragStart",b,a,d,c);pa(a,b);e.build();w=b.position();t=e.cell(d.pageX,d.pageY);v=K=!0;H=D=P(t);fa=A=y=z=E=0},drag:function(a,d){a=e.cell(a.pageX,a.pageY);if(v=!!a){H=P(a);if(N||!H){if(z=Math.round((d.position.left-w.left)/g),z!=E){a=T(0,t.col);var h=t.col+z;h=Math.max(0,h);h=Math.min(f-1,h);h=T(0,h);y=r(h,a)}}else v=!1;H||(fa=Math.round((d.position.top-w.top)/k)*B)}if(v!=K||H!=D||z!=E||fa!=A)c(),K=v,D=H,E=z,A=fa;b.draggable("option","revert",!v)},stop:function(d,e){ca();
q("eventDragStop",b,a,d,e);v&&(H||y||fa)?ba(this,a,y,H?0:fa,H,d,e):(v=!0,H=!1,fa=y=z=0,c(),b.css("filter",""),b.css(w),O(a,b))}})}function k(a,b,d){var c,e,f=ra(),g=oa();b.resizable({minHeight:f*p("minHeightInSlots"),handles:{s:".ui-resizable-handle"},grid:f,start:function(d,f){c=e=0;pa(a,b);q("eventResizeStart",this,a,d,f)},resize:function(h,k){c=Math.round((Math.max(f,b.height())-k.originalSize.height)/f);c!=e&&(d.text(Z(a.start,c||a.end?l(v(a),g*c):null,p("timeFormat"))),e=c)},stop:function(d,
e){q("eventResizeStop",this,a,d,e);c?U(this,a,0,g*c,d,e):O(a,b)}})}var m=this;m.renderEvents=function(g,h){var k,r=g.length,w=[],t=[],v=c(".fc-agenda-allday, .fc-agenda-divider.fc-widget-header");for(k=0;k<r;k++){var H=g[k];H.allDay?(H.start>=m.start&&H.start<=m.end||H.end>=m.start&&H.end<=m.end||H.start<m.start&&H.end>m.end)&&w.push(H):t.push(H)}p("allDaySlot")&&(0<w.length?(v.show(),aa(w,h)):(aa(w,h),v.hide()),z());k=Y();r=da();w=J();v=c.map(t,b);g=[];for(H=0;H<k;H++){var K=T(0,H);l(K,r);var D;
var u=t;var E=v;var N=K;var O=l(n(K),w-r),C=[],Ma=u.length;for(D=0;D<Ma;D++){K=u[D];var F=K.start;var Ra=E[D];if(Ra>N&&F<O){if(F<N){var lb=n(N);F=!1}else lb=F,F=!0;if(Ra>O){var eb=n(O);Ra=!1}else eb=Ra,Ra=!0;C.push({event:K,start:lb,end:eb,isStart:F,isEnd:Ra,title:K.title,sortKey:K.sortKey})}}K=N=C.sort(xa);D=[];for(N=0;N<K.length;N++){E=K[N];for(u=0;u<D.length&&y(E,D[u]).length;u++);(D[u]||(D[u]=[])).push(E)}u=D;E=u[0];for(C=0;C<u.length;C++)for(O=u[C],D=0;D<O.length;D++)for(K=O[D],K.forwardSegs=
[],N=C+1;N<u.length;N++)y(K,u[N],K.forwardSegs);if(E){for(N=0;N<E.length;N++)A(E[N]);for(N=0;N<E.length;N++)ha(E[N],0,0)}D=[];for(K=0;K<u.length;K++)for(N=u[K],E=0;E<N.length;E++)D.push(N[E]);N=D;for(u=0;u<N.length;u++)E=N[u],E.col=H,g.push(E)}a(g);k=g.length;H="";v=G();u=p("isRTL");for(t=0;t<k;t++)r=g[t],w=r.event,E=l(n(r.start),p("minHeightInSlots")*p("slotMinutes")),r.end<E&&(r.end=E),E=S(r.start,r.start),N=S(r.start,r.end),K=Q(r.col),D=ea(r.col),C=D-K,D-=.025*C,C=D-K,O=C*(r.forwardCoord-r.backwardCoord),
p("slotEventOverlap")&&(O=Math.max(2*(O-10),O)),u?(Ma=D-r.backwardCoord*C,C=Ma-O):(C=K+r.backwardCoord*C,Ma=C+O),C=Math.max(C,K),Ma=Math.min(Ma,D),O=Ma-C,r.top=E,r.left=C,r.outerWidth=O,r.outerHeight=N-E,H+=d(w,r);v[0].innerHTML=H;u=v.children();for(t=0;t<k;t++)r=g[t],w=r.event,H=c(u[t]),E=q("eventRender",w,w,H),!1===E?H.remove():(E&&!0!==E&&(H.remove(),H=c(E).css({position:"absolute",top:r.top,left:r.left}).appendTo(v)),r.element=H,w._id===h?f(w,H,r):H[0]._fci=t,fa(w,H));B(v,g,f);for(t=0;t<k;t++)if(r=
g[t],H=r.element)r.vsides=R(H,!0),r.hsides=I(H,!0),h=H.find(".fc-event-title"),h.length&&(r.contentTop=h[0].offsetTop);for(t=0;t<k;t++)if(r=g[t],H=r.element)H[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",h=Math.max(0,r.outerHeight-r.vsides),H[0].style.height=h+"px",w=r.event,r.contentTop!==e&&10>h-r.contentTop&&(H.find("div.fc-event-time").text(ia(w.start,p("timeFormat"))+" - "+w.title),H.find("div.fc-event-title").remove()),q("eventAfterRender",w,w,H)};m.clearEvents=function(){C().empty();
G().empty()};m.slotSegHtml=d;L.call(m);var p=m.opt,q=m.trigger,w=m.isEventDraggable,t=m.isEventResizable,v=m.eventEnd,D=m.eventElementHandlers,z=m.setHeight,C=m.getDaySegmentContainer,G=m.getSlotSegmentContainer,X=m.getHoverListener,J=m.getMaxMinute,da=m.getMinMinute,S=m.timePosition,P=m.getIsCellAllDay,Q=m.colContentLeft,ea=m.colContentRight,T=m.cellToDate,Y=m.getColCnt,Ba=m.getColWidth,ra=m.getSnapHeight,oa=m.getSnapMinutes,F=m.getSlotContainer,fa=m.reportEventElement,O=m.showEvents,pa=m.hideEvents,
ba=m.eventDrop,U=m.eventResize,W=m.renderDayOverlay,ca=m.clearOverlays,aa=m.renderDayEvents,la=m.calendar,ia=la.formatDate,Z=la.formatDates;m.draggableDayEvent=function(a,b,d){function c(){k||(b.width(f).height("").draggable("option","grid",null),k=!0)}var e=d.isStart,f,g,k=!0,m,l=X(),B=Ba(),w=ra(),t=oa(),H=da(),v=p("dragBetweenAllDayAndSlots");b.draggable({opacity:p("dragOpacity","month"),revertDuration:p("dragRevertDuration"),start:function(d,H){q("eventDragStart",b,a,d,H);pa(a,b);f=b.width();l.start(function(d,
f){ca();if(d){g=!1;f=T(0,f.col);var l=T(0,d.col);m=r(l,f);d.row?v&&e?k&&(b.width(B-10),E(b,w*Math.round((a.end?(a.end-a.start)/6E4:p("defaultEventMinutes"))/t)),b.draggable("option","grid",[B,1]),k=!1):g=!0:(W(h(n(a.start),m),h(u(a),m)),c());g=g||k&&!m}else c(),g=!0;b.draggable("option","revert",g)},d,"drag")},stop:function(d,e){l.stop();ca();q("eventDragStop",b,a,d,e);if(g)c(),b.css("filter",""),O(a,b);else{var f=0;v&&!k&&(f=Math.round((b.offset().top-F().offset().top)/w)*t+H-(60*a.start.getHours()+
a.start.getMinutes()));ba(this,a,m,f,k,d,e)}}})}}function A(a){var b=a.forwardSegs,d=0,c;if(a.forwardPressure===e){for(c=0;c<b.length;c++){var f=b[c];A(f);d=Math.max(d,1+f.forwardPressure)}a.forwardPressure=d}}function ha(a,b,d){var c=a.forwardSegs;if(a.forwardCoord===e)for(c.length?(c.sort(Aa),ha(c[0],b+1,d),a.forwardCoord=c[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-d)/(b+1),b=0;b<c.length;b++)ha(c[b],0,a.forwardCoord)}function y(a,b,d){d=d||[];for(var c=0;c<
b.length;c++){var e=b[c];a.end>e.start&&a.start<e.end&&d.push(b[c])}return d}function Aa(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||xa(a,b)}function xa(a,b){return a.start-b.start||(a.sortKey||0)-(b.sortKey||0)||b.end-b.start-(a.end-a.start)||(a.title||"").localeCompare(b.title)}function na(a,b,d){function f(a,b){a=N[a];return c.isPlainObject(a)?S(a,b||d):a}function g(a,d){return b.trigger.apply(b,[a,d||u].concat(Array.prototype.slice.call(arguments,
2),[u]))}function k(a){return a.end?n(a.end):K(a)}function m(a,b,d){a=C[a._id];var c,e=a.length;for(c=0;c<e;c++)if(!b||a[c][0]!=b[0])a[c][d]()}function p(a,b,d,c){d=d||0;for(var f,g=a.length,k=0;k<g;k++)f=a[k],c!==e&&(f.allDay=c),l(h(f.start,b,!0),d),f.end&&(f.end=l(h(f.end,b,!0),d)),E(f,N)}function B(a,b,d){d=d||0;for(var c,e=a.length,f=0;f<e;f++)c=a[f],c.end=l(h(k(c),b,!0),d),E(c,N)}function w(a,b){var d=u.getColCnt(),c=F?-1:1,e=F?d-1:0;"object"==typeof a&&(b=a.col,a=a.row);return a*d+(b*c+e)}function t(a){var b=
u.visStart.getDay();a+=X[b];return 7*Math.floor(a/G)+J[(a%G+G)%G]-b}function q(a){var b=n(u.visStart);h(b,a);return b}function v(a){return r(a,u.visStart)}function H(a){var b=u.visStart.getDay();a+=b;return Math.floor(a/7)*G+X[(a%7+7)%7]-X[b]}function D(a){var b=u.getColCnt();return{row:Math.floor(a/b),col:(a%b+b)%b*(F?-1:1)+(F?b-1:0)}}var u=this;u.element=a;u.calendar=b;u.name=d;u.opt=f;u.trigger=g;u.isEventDraggable=function(a){var b=a.source||{};return wa(a.startEditable,b.startEditable,f("eventStartEditable"),
a.editable,b.editable,f("editable"))&&!f("disableDragging")};u.isEventResizable=function(a){var b=a.source||{};return wa(a.durationEditable,b.durationEditable,f("eventDurationEditable"),a.editable,b.editable,f("editable"))&&!f("disableResizing")};u.setEventData=function(a){y={};var b,d=a.length;for(b=0;b<d;b++){var c=a[b];y[c._id]?y[c._id].push(c):y[c._id]=[c]}};u.clearEventData=function(){y={};C={};A=[]};u.eventEnd=k;u.reportEventElement=function(a,b){A.push({event:a,element:b});C[a._id]?C[a._id].push(b):
C[a._id]=[b]};u.triggerEventDestroy=function(){c.each(A,function(a,b){u.trigger("eventDestroy",b.event,b.event,b.element)})};u.eventElementHandlers=function(a,b){b.on("click",function(d){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return g("eventClick",this,a,d)}).hover(function(b){g("eventMouseover",this,a,b)},function(b){g("eventMouseout",this,a,b)})};u.showEvents=function(a,b){m(a,b,"show")};u.hideEvents=function(a,b){m(a,b,"hide")};u.eventDrop=function(a,b,d,
c,e,f,h){var k=b.allDay,m=b._id;p(y[m],d,c,e);g("eventDrop",a,b,d,c,e,function(){p(y[m],-d,-c,k);z(m)},f,h);z(m)};u.eventResize=function(a,b,d,c,e,f){var h=b._id,k=b._start,m=b._end;B(y[h],d,c);g("eventResize",a,b,d,c,function(){b.start=k;b.end=m;E(b);z(h)},e,f);z(h)};var K=u.defaultEventEnd,E=b.normalizeEvent,z=b.reportEventChange,y={},C={},A=[],N=b.options;u.isHiddenDay=function(a){"object"==typeof a&&(a=a.getDay());return R[a]};u.skipHiddenDays=function(a,b,d){for(b=b||1;R[(a.getDay()+(d?b:0)+
7)%7];)h(a,b)};u.getCellsPerWeek=function(){return G};u.dateToCell=function(a){a=v(a);a=H(a);return D(a)};u.dateToDayOffset=v;u.dayOffsetToCellOffset=H;u.cellOffsetToCell=D;u.cellToDate=function(){var a=w.apply(null,arguments);a=t(a);return q(a)};u.cellToCellOffset=w;u.cellOffsetToDayOffset=t;u.dayOffsetToDate=q;u.rangeToSegments=function(a,b){var d=u.getRowCnt(),c=u.getColCnt(),e=[];a=v(a);b=v(b);for(var f=H(a),g=H(b)-1,h=0;h<d;h++){var k=h*c,m=Math.max(f,k);k=Math.min(g,k+c-1);if(m<=k){var l=D(m),
n=D(k);l=[l.col,n.col].sort();m=t(m)==a;k=t(k)+1==b;e.push({row:h,leftCol:l[0],rightCol:l[1],isStart:m,isEnd:k})}}return e};var I=f("hiddenDays")||[],R=[],G,X=[],J=[],F=f("isRTL");(function(){!1===f("weekends")&&I.push(0,6);for(var a=0,b=0;7>a;a++)X[a]=b,R[a]=-1!=c.inArray(a,I),R[a]||(J[b]=a,b++);G=b;if(!G)throw"invalid hiddenDays";})()}function L(){function a(a,d,c){a=b([a],!0,!1);var e=[];Q(a,function(a,b){a.row===d&&b.css("top",c);e.push(b[0])});return e}function b(a,b,h){var m=Z(),l=b?c("<div/>"):
m;a=d(a);e(a);var n=f(a);l[0].innerHTML=n;l=l.children();b&&m.append(l);g(a,l);Q(a,function(a,b){a.hsides=I(b,!0)});Q(a,function(a,b){b.width(Math.max(0,a.outerWidth-a.hsides))});Q(a,function(a,b){a.outerHeight=b.outerHeight(!0)});k(a,h);return a}function d(a){for(var b=[],d=0;d<a.length;d++){var c=a[d],e=c.start,f=u(c);e=ha(e,f);for(f=0;f<e.length;f++)e[f].event=c;b.push.apply(b,e)}return b}function e(a){for(var b=v("isRTL"),d=0;d<a.length;d++){var c=a[d],e=(b?c.isStart:c.isEnd)?O:F,f=((b?c.isEnd:
c.isStart)?fa:T)(c.leftCol);e=e(c.rightCol);c.left=f;c.outerWidth=e-f}}function f(a){for(var b="",d=0;d<a.length;d++){var c=a[d],e="",f=v("isRTL"),g=c.event,h=g.url,k=["fc-event","fc-event-hori"];E(g)&&k.push("fc-event-draggable");c.isStart&&k.push("fc-event-start");c.isEnd&&k.push("fc-event-end");k=k.concat(g.className);g.source&&(k=k.concat(g.source.className||[]));var m=va(g,v);e=h?e+("<a href='"+M(h)+"'"):e+"<div";e+=" class='"+k.join(" ")+"' style='position:absolute;left:"+c.left+"px;"+m+"'><div class='fc-event-inner'>";
if(g.allDay||c.isStart)e+="<span class='fc-event-time'>"+M(ba(g.start,g.end,g.allDay&&"month"!=q.name?v("timeFormat","allDay"):v("timeFormat")))+"</span>";e+="<span class='fc-event-title'>"+M(g.title||"")+"</span></div>";c.isEnd&&z(g)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(f?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>");b+=e+("</"+(h?"a":"div")+">")}return b}function g(a,b){for(var d=0;d<a.length;d++){var e=a[d],f=e.event,g=b.eq(d);f=D("eventRender",f,f,g);!1===f?g.remove():(f&&!0!==f&&(f=
c(f).css({position:"absolute",left:e.left}),g.replaceWith(f),g=f),e.element=g)}}function k(a,b){var d=m(a),e=p(),f=[],g=L();if(b)for(b=0;b<e.length;b++){e[b].height(Math.max.apply(Math,d[b].map(function(a){return a.columnHeight})));for(var h=0;h<g;h++)if(c(e[b][h]).nextAll().remove(),0<d[b][h].hiddenSegmentsCount){var k=c("<a class='fc-show-more-link' href='#'>+"+d[b][h].hiddenSegmentsCount+" "+q.calendar.options.eventLimitText+"</a>");k.data("row",b);k.data("column",h);c(e[b][h]).after(k);k.mousedown(function(a){var b=
k.data("row"),d=k.data("column");b=q.calendar.getSegmentsByRowAndColumn(b,d);D("showMoreMousedown",a,a,b)})}}for(b=0;b<e.length;b++)f.push(e[b].position().top);Q(a,function(a,b){b.css("top",f[a.row]+a.top)})}function m(a){var b=q.calendar.options.eventLimit&&"number"!==typeof q.calendar.options.eventLimitt?q.calendar.options.eventLimit:!1;q.calendar.options.hiddenElements=[];var d=da(),e=L(),f=[];a=l(a);for(var g=0;g<d;g++){var h=a[g];f[g]=[];for(p=0;p<e;p++)f[g][p]={columnHeight:0,popupHeight:0,
segmentsCount:0,hiddenSegmentsCount:0};for(p=0;p<h.length;p++){var k=h[p];k.top=Math.max.apply(Math,f[g].map(function(a){return a.popupHeight}).slice(k.leftCol,k.rightCol+1));for(var m=k.top+k.outerHeight,n=k.leftCol;n<=k.rightCol;n++)f[g][n].popupHeight=m,f[g][n].segmentsCount++,b&&f[g][k.leftCol].segmentsCount>=b||(f[g][n].columnHeight=m);b&&f[g][k.leftCol].segmentsCount>=b&&(k.element.hide(),f[g][k.leftCol].hiddenSegmentsCount++,q.calendar.options.hiddenElements[g]||(q.calendar.options.hiddenElements[g]=
[]),q.calendar.options.hiddenElements[g][k.leftCol]||(q.calendar.options.hiddenElements[g][k.leftCol]=[]),q.calendar.options.hiddenElements[g][k.leftCol].push(k.element.get(0)))}}for(g=0;g<d;g++)for(var p=0;p<e;p++)b&&f[g][p].segmentsCount==b&&c(q.calendar.options.hiddenElements[g][p]).show();return f}function l(a){var b=da(),d=[],c;for(c=0;c<a.length;c++){var e=a[c];var f=e.row;e.element&&(d[f]?d[f].push(e):d[f]=[e])}for(f=0;f<b;f++){a=f;var g=d[f]||[];c=[];g.sort(Fa);e=[];for(var h=0;h<g.length;h++){for(var k=
g[h],m=0;m<e.length;m++){a:{var l=e[m];for(var n=0;n<l.length;n++){var p=l[n];if(p.leftCol<=k.rightCol&&p.rightCol>=k.leftCol){l=!0;break a}}l=!1}if(!l)break}e[m]?e[m].push(k):e[m]=[k]}for(g=0;g<e.length;g++)c.push.apply(c,e[g]);d[a]=c}return d}function p(){var a,b=da(),d=[];for(a=0;a<b;a++)d[a]=S(a).find("div.fc-day-content > div");return d}function w(a,b){var d=Z();Q(a,function(a,d,c){var e=a.event;e._id===b?t(e,d,a):d[0]._fci=c});B(d,a,t)}function t(a,b,d){E(a)&&q.draggableDayEvent(a,b,d);d.isEnd&&
z(a)&&q.resizableDayEvent(a,b,d);A(a,b)}var q=this;q.renderDayEvents=function(a,d){a=b(a,!1,!0);Q(a,function(a,b){C(a.event,b)});w(a,d);Q(a,function(a,b){D("eventAfterRender",a.event,a.event,b)});return a};q.draggableDayEvent=function(a,b){var d=aa(),c;b.draggable({delay:50,opacity:v("dragOpacity"),revertDuration:v("dragRevertDuration"),start:function(e,f){D("eventDragStart",b,a,e,f);R(a,b);d.start(function(d,e,f,g){b.draggable("option","revert",!d||!f&&!g);W();d?(e=ia(e),d=ia(d),c=r(d,e),U(h(n(a.start),
c),h(u(a),c))):c=0},e,"drag")},stop:function(e,f){d.stop();W();D("eventDragStop",b,a,e,f);c?X(this,a,c,0,a.allDay,e,f):(b.css("filter",""),G(a,b))}})};q.resizableDayEvent=function(b,d,e){var f=v("isRTL")?"w":"e",g=d.find(".ui-resizable-"+f),k=!1;ea(d);d.mousedown(function(a){a.preventDefault()}).click(function(a){k&&(a.preventDefault(),a.stopImmediatePropagation())});g.mousedown(function(g){if(1==g.which){k=!0;var m=aa();da();L();var l=d.css("top"),n,p,r=c.extend({},b),B=na(ma(b.start));ca();c("body").css("cursor",
f+"-resize").one("mouseup",function(a){D("eventResizeStop",this,b,a);c("body").css("cursor","");m.stop();W();n&&J(this,b,n,0,a);setTimeout(function(){k=!1},0)});D("eventResizeStart",this,b,g);m.start(function(d,g){d&&(g=ja(g),d=ja(d),d=Math.max(d,B),(n=ka(d)-ka(g))?(r.end=h(y(b),n,!0),d=p,p=a(r,e.row,l),p=c(p),p.find("*").css("cursor",f+"-resize"),d&&d.remove(),R(b)):p&&(G(b),p.remove(),p=null),W(),U(b.start,h(u(b),n)))},g)}})};var v=q.opt,D=q.trigger,E=q.isEventDraggable,z=q.isEventResizable,y=q.eventEnd,
C=q.reportEventElement,A=q.eventElementHandlers,G=q.showEvents,R=q.hideEvents,X=q.eventDrop,J=q.eventResize,da=q.getRowCnt,L=q.getColCnt,S=q.allDayRow,T=q.colLeft,F=q.colRight,fa=q.colContentLeft,O=q.colContentRight,Z=q.getDaySegmentContainer,ba=q.calendar.formatDates,U=q.renderDayOverlay,W=q.clearOverlays,ca=q.clearSelection,aa=q.getHoverListener,ha=q.rangeToSegments,ia=q.cellToDate,ja=q.cellToCellOffset,ka=q.cellOffsetToDayOffset,ma=q.dateToDayOffset,na=q.dayOffsetToCellOffset}function Q(a,b){for(var d=
0;d<a.length;d++){var c=a[d],e=c.element;e&&b(c,e,d)}}function Fa(a,b){return b.rightCol-b.leftCol-(a.rightCol-a.leftCol)||b.event.allDay-a.event.allDay||a.event.start-b.event.start||(a.event.sortKey||0)-(b.event.sortKey||0)||(a.event.title||"").localeCompare(b.event.title)}function Ea(){function a(a){m&&(m=!1,k(),f("unselect",null,a))}function b(a,b,d,c){m=!0;f("select",null,a,b,d,c)}var d=this;d.select=function(d,c,e){a();c||(c=g(d,e));h(d,c,e);b(d,c,e)};d.unselect=a;d.reportSelection=b;d.daySelectionMousedown=
function(f){var g=d.cellToDate,m=d.getIsCellAllDay,l=d.getHoverListener(),n=d.reportDayClick;if(1==f.which&&e("selectable")){a(f);var p;l.start(function(a,b){k();a&&m(a)?(p=[g(b),g(a)].sort(da),h(p[0],p[1],!0)):p=null},f);c(document).one("mouseup",function(a){l.stop();p&&(+p[0]==+p[1]&&n(p[0],!0,a),b(p[0],p[1],!0,a))})}};var e=d.opt,f=d.trigger,g=d.defaultSelectionEnd,h=d.renderSelection,k=d.clearSelection,m=!1;e("selectable")&&e("unselectAuto")&&c(document).mousedown(function(b){var d=e("unselectCancel");
d&&c(b.target).closest(d).length||a(b)})}function ja(){this.renderOverlay=function(d,e){var f=b.shift();f||(f=c("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));f[0].parentNode!=e[0]&&f.appendTo(e);a.push(f.css(d).show());return f};this.clearOverlays=function(){for(var d;d=a.shift();)b.push(d.hide().unbind())};var a=[],b=[]}function za(a){var b,d;this.build=function(){b=[];d=[];a(b,d)};this.cell=function(a,c){var e=b.length,f=d.length,g,h=-1,k=-1;for(g=0;g<e;g++)if(c>=b[g][0]&&
c<b[g][1]){h=g;break}for(g=0;g<f;g++)if(a>=d[g][0]&&a<d[g][1]){k=g;break}return 0<=h&&0<=k?{row:h,col:k}:null};this.rect=function(a,c,e,f,g){g=g.offset();return{top:b[a][0]-g.top,left:d[c][0]-g.left,width:d[f][1]-d[c][0],height:b[e][1]-b[a][0]}}}function Sa(a){function b(b){b.pageX===e&&(b.pageX=b.originalEvent.pageX,b.pageY=b.originalEvent.pageY);b=a.cell(b.pageX,b.pageY);if(!b!=!h||b&&(b.row!=h.row||b.col!=h.col))b?(g||(g=b),f(b,g,b.row-g.row,b.col-g.col)):f(b,g),h=b}var d,f,g,h;this.start=function(e,
k,m){f=e;g=h=null;a.build();b(k);d=m||"mousemove";c(document).bind(d,b)};this.stop=function(){c(document).unbind(d,b);return h}}function Pa(a){var b=this,d={},c={},f={};b.left=function(b){return c[b]=c[b]===e?(d[b]=d[b]||a(b)).position().left:c[b]};b.right=function(c){return f[c]=f[c]===e?b.left(c)+(d[c]=d[c]||a(c)).width():f[c]};b.clear=function(){d={};c={};f={}}}var ua={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",
weekNumberShortTitle:"W",weekNumberTitle:"Week",allDayDefault:!0,ignoreTimezone:!0,dragBetweenAllDayAndSlots:!0,minHeightInSlots:1,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",
handleWindowResize:!0,eventLimit:!1,eventLimitText:"more"},Ua={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},aa=c.fullCalendar={version:"1.6.4"},T=aa.views={};c.fn.fullCalendar=function(a){if("string"==typeof a){var b=
Array.prototype.slice.call(arguments,1),d;this.each(function(){var f=c.data(this,"fullCalendar");f&&c.isFunction(f[a])&&(f=f[a].apply(f,b),d===e&&(d=f),"destroy"==a&&c.removeData(this,"fullCalendar"))});return d!==e?d:this}a=a||{};var g=a.eventSources||[];delete a.eventSources;a.events&&(g.push(a.events),delete a.events);a=c.extend(!0,{},ua,a.isRTL||a.isRTL===e&&ua.isRTL?Ua:{},a);this.each(function(b,d){b=c(d);d=new f(b,a,g);b.data("fullCalendar",d);d.render()});return this};aa.sourceNormalizers=
[];aa.sourceFetchers=[];var $a={dataType:"json",cache:!1},db=1;aa.addDays=h;aa.cloneDate=n;aa.parseDate=t;aa.parseISO8601=q;aa.parseTime=z;aa.formatDate=C;aa.formatDates=G;aa.clearTime=m;var cb="sun mon tue wed thu fri sat".split(" "),ob=36E5,Za={s:function(a){return a.getSeconds()},ss:function(a){return J(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return J(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return J(a.getHours()%12||12)},H:function(a){return a.getHours()},
HH:function(a){return J(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return J(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return J(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},
t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return C(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"},w:function(a,b){return b.weekNumberCalculation(a)},W:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));a=b.getTime();b.setMonth(0);b.setDate(1);
return Math.floor(Math.round((a-b)/864E5)/7)+1}};aa.dateFormatters=Za;aa.applyAll=ma;T.month=function(a,b){var d=this;d.render=function(a,b){b&&(g(a,b),a.setDate(1));var l=c("firstDay");a=n(a,!0);a.setDate(1);b=g(n(a),1);var p=n(a);h(p,-((p.getDay()-l+7)%7));f(p);var B=n(b);h(B,(7-B.getDay()+l)%7);f(B,-1,!0);l=k();var q=Math.round(r(B,p)/7);"fixed"==c("weekMode")&&(h(B,7*(6-q)),q=6);d.title=m(a,c("titleFormat"));d.start=a;d.end=b;d.visStart=p;d.visEnd=B;e(q,l,!0)};ka.call(d,a,b,"month");var c=d.opt,
e=d.renderBasic,f=d.skipHiddenDays,k=d.getCellsPerWeek,m=b.formatDate};T.basicWeek=function(a,b){var d=this;d.render=function(a,b){b&&h(a,7*b);a=h(n(a),-((a.getDay()-c("firstDay")+7)%7));b=h(n(a),7);var m=n(a);f(m);var l=n(b);f(l,-1,!0);var p=g();d.start=a;d.end=b;d.visStart=m;d.visEnd=l;d.title=k(m,h(n(l),-1),c("titleFormat"));e(1,p,!1)};ka.call(d,a,b,"basicWeek");var c=d.opt,e=d.renderBasic,f=d.skipHiddenDays,g=d.getCellsPerWeek,k=b.formatDates};T.listWeek=function(a,b){var d=this;d.render=function(a,
b){b&&h(a,7*b);a=h(n(a),-((a.getDay()-c("firstDay")+7)%7));b=h(n(a),7);var m=n(a);f(m);var l=n(b);f(l,-1,!0);var p=g();d.start=a;d.end=b;d.visStart=m;d.visEnd=l;d.title=k(m,h(n(l),-1),c("titleFormat"));e(1,p,!1)};Oa.call(d,a,b,"listWeek");var c=d.opt,e=d.renderList,f=d.skipHiddenDays,g=d.getCellsPerWeek,k=b.formatDates};T.basicDay=function(a,b){var d=this;d.render=function(a,b){b&&h(a,b);f(a,0>b?-1:1);b=n(a,!0);var k=h(n(b),1);d.title=g(a,c("titleFormat"));d.start=d.visStart=b;d.end=d.visEnd=k;e(1,
1,!1)};ka.call(d,a,b,"basicDay");var c=d.opt,e=d.renderBasic,f=d.skipHiddenDays,g=b.formatDate};c.extend(!0,ua,{weekMode:"fixed"});T.agendaWeek=function(a,b){var d=this;d.render=function(a,b){b&&h(a,7*b);a=h(n(a),-((a.getDay()-c("firstDay")+7)%7));b=h(n(a),7);var m=n(a);f(m);var l=n(b);f(l,-1,!0);var p=g();d.title=k(m,h(n(l),-1),c("titleFormat"));d.start=a;d.end=b;d.visStart=m;d.visEnd=l;e(p)};Ca.call(d,a,b,"agendaWeek");var c=d.opt,e=d.renderAgenda,f=d.skipHiddenDays,g=d.getCellsPerWeek,k=b.formatDates};
T.agendaWeekFive=function(a,b){var d=this;d.render=function(a,b){b&&h(a,7*b);a=h(n(a),-((a.getDay()-c("firstDay")+7)%7));b=h(n(a),7);var k=n(a);f(k);var m=n(b);f(m,-1,!0);d.title=g(k,h(n(m),-1),c("titleFormat"));d.start=a;d.end=b;d.visStart=k;d.visEnd=m;e(5)};Ca.call(d,a,b,"agendaWeekFive");var c=d.opt,e=d.renderAgenda,f=d.skipHiddenDays,g=b.formatDates};T.agendaDay=function(a,b){var d=this;d.render=function(a,b){b&&h(a,b);f(a,0>b?-1:1);b=n(a,!0);var k=h(n(b),1);d.title=g(a,c("titleFormat"));d.start=
d.visStart=b;d.end=d.visEnd=k;e(1)};Ca.call(d,a,b,"agendaDay");var c=d.opt,e=d.renderAgenda,f=d.skipHiddenDays,g=b.formatDate};c.extend(!0,ua,{allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,minDefaultDayStartHour:0,maxDefaultDayStartHour:24,slotEventOverlap:!0})})(jQuery);
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).SmartBanner=c()})(function(){return function a(e,f,b){function d(h,l){if(!f[h]){if(!e[h]){var k="function"==typeof require&&require;if(!l&&k)return k(h,!0);if(g)return g(h,!0);k=Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k;}k=f[h]=
{exports:{}};e[h][0].call(k.exports,function(a){var b=e[h][1][a];return d(b?b:a)},k,k.exports,a,e,f,b)}return f[h].exports}for(var g="function"==typeof require&&require,h=0;h<b.length;h++)d(b[h]);return d}({1:[function(e,f,b){var a=e("xtend/mutable"),d=e("component-query"),g=e("get-doc"),h=e("cookie-cutter"),k=e("ua-parser-js"),l=(navigator.language||navigator.userLanguage||navigator.browserLanguage).slice(-2)||"us",m=g&&g.documentElement,n={ios:{appMeta:"apple-itunes-app",iconRels:["apple-touch-icon-precomposed",
"apple-touch-icon"],getStoreLink:function(){return"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"+this.appId}},android:{appMeta:"google-play-app",iconRels:["android-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return"http://play.google.com/store/apps/details?id="+this.appId}},windows:{appMeta:"msApplication-ID",iconRels:["windows-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return"http://www.windowsphone.com/s?appid="+
this.appId}}};e=function(b){var d=k(navigator.userAgent);this.options=a({},{daysHidden:15,daysReminder:90,appStoreLanguage:l,button:"OPEN",store:{ios:"On the App Store",android:"In Google Play",windows:"In the Windows Store"},price:{ios:"FREE",android:"FREE",windows:"FREE"},theme:"",icon:"",force:""},b||{});this.options.force?this.type=this.options.force:"Windows Phone"===d.os.name||"Windows Mobile"===d.os.name?this.type="windows":"iOS"===d.os.name?this.type="ios":"Android"===d.os.name&&(this.type=
"android");b=!this.type;d="ios"===this.type&&"Mobile Safari"===d.browser.name&&6<=parseInt(d.os.version);var e=navigator.standalone,f=h.get("smartbanner-closed"),g=h.get("smartbanner-installed");b||d||e||f||g||(a(this,n[this.type]),this.parseAppId()&&(this.create(),this.show()))};e.prototype={constructor:e,create:function(){var a=this.getStoreLink(),b=this.options.price[this.type]+" - "+this.options.store[this.type];if(this.options.icon)var e=this.options.icon;else for(var f=0;f<this.iconRels.length;f++){var h=
d('link[rel="'+this.iconRels[f]+'"]');if(h){e=h.getAttribute("href");break}}var k=g.createElement("div");k.className="smartbanner smartbanner-"+(this.options.theme||this.type);k.innerHTML='<div class="smartbanner-container"><a href="javascript:void(0);" class="smartbanner-close">&times;</a><span class="smartbanner-icon" style="background-image: url('+e+')"></span><div class="smartbanner-info"><div class="smartbanner-title">'+this.options.title+"</div><div>"+this.options.author+"</div><span>"+b+'</span></div><a href="'+
a+'" class="smartbanner-button"><span class="smartbanner-button-text">'+this.options.button+"</span></a></div>";g.body?g.body.appendChild(k):g&&g.addEventListener("DOMContentLoaded",function(){g.body.appendChild(k)});d(".smartbanner-button",k).addEventListener("click",this.install.bind(this),!1);d(".smartbanner-close",k).addEventListener("click",this.close.bind(this),!1)},hide:function(){m.classList.remove("smartbanner-show")},show:function(){m.classList.add("smartbanner-show")},close:function(){this.hide();
h.set("smartbanner-closed","true",{path:"/",expires:new Date(Number(new Date)+864E5*this.options.daysHidden)})},install:function(){this.hide();h.set("smartbanner-installed","true",{path:"/",expires:new Date(Number(new Date)+864E5*this.options.daysReminder)})},parseAppId:function(){var a=d('meta[name="'+this.appMeta+'"]');if(a)return this.appId="windows"===this.type?a.getAttribute("content"):/app-id=([^\s,]+)/.exec(a.getAttribute("content"))[1]}};f.exports=e},{"component-query":2,"cookie-cutter":3,
"get-doc":4,"ua-parser-js":6,"xtend/mutable":7}],2:[function(e,f,b){function a(a,b){return b.querySelector(a)}b=f.exports=function(b,e){e=e||document;return a(b,e)};b.all=function(a,b){b=b||document;return b.querySelectorAll(a)};b.engine=function(d){if(!d.one)throw Error(".one callback required");if(!d.all)throw Error(".all callback required");a=d.one;b.all=d.all;return b}},{}],3:[function(e,f,b){b=f.exports=function(a){a||(a={});"string"===typeof a&&(a={cookie:a});void 0===a.cookie&&(a.cookie="");
return{get:function(b){for(var d=a.cookie.split(/;\s*/),e=0;e<d.length;e++){var f=d[e].split("=");if(unescape(f[0])===b)return unescape(f[1])}},set:function(b,e,f){f||(f={});b=escape(b)+"="+escape(e);f.expires&&(b+="; expires="+f.expires);f.path&&(b+="; path="+escape(f.path));return a.cookie=b}}};"undefined"!==typeof document&&(e=b(document),b.get=e.get,b.set=e.set)},{}],4:[function(e,f,b){e=e("has-dom");f.exports=e()?document:null},{"has-dom":5}],5:[function(e,f,b){f.exports=function(){return"undefined"!==
typeof window&&"undefined"!==typeof document&&"function"===typeof document.createElement}},{}],6:[function(e,f,b){(function(a,d){var e={extend:function(a,b){var d={},e;for(e in a)d[e]=b[e]&&0===b[e].length%2?b[e].concat(a[e]):a[e];return d},has:function(a,b){return"string"===typeof a?-1!==b.toLowerCase().indexOf(a.toLowerCase()):!1},lowerize:function(a){return a.toLowerCase()},major:function(a){return"string"===typeof a?a.split(".")[0]:d},trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
"")}},h=function(){for(var a,b=0,e,f,g,h,k,m,l=arguments;b<l.length&&!k;){var n=l[b],p=l[b+1];if("undefined"===typeof a)for(g in a={},p)p.hasOwnProperty(g)&&(h=p[g],"object"===typeof h?a[h[0]]=d:a[h]=d);for(e=f=0;e<n.length&&!k;)if(k=n[e++].exec(this.getUA()))for(g=0;g<p.length;g++)m=k[++f],h=p[g],"object"===typeof h&&0<h.length?2==h.length?a[h[0]]="function"==typeof h[1]?h[1].call(this,m):h[1]:3==h.length?a[h[0]]="function"!==typeof h[1]||h[1].exec&&h[1].test?m?m.replace(h[1],h[2]):d:m?h[1].call(this,
m,h[2]):d:4==h.length&&(a[h[0]]=m?h[3].call(this,m.replace(h[1],h[2])):d):a[h]=m?m:d;b+=2}return a},k=function(a,b){for(var f in b)if("object"===typeof b[f]&&0<b[f].length)for(var g=0;g<b[f].length;g++){if(e.has(b[f][g],a))return"?"===f?d:f}else if(e.has(b[f],a))return"?"===f?d:f;return a},l={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2E3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,
/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/(OPiOS)[\/\s]+([\w\.]+)/i],[["name","Opera Mini"],"version"],[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],
["name","version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w\.]+)/i],["name","version"],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],["name","version"],[/(MicroMessenger)\/([\w\.]+)/i],[["name","WeChat"],"version"],[/(qqbrowser)[\/\s]?([\w\.]+)/i],["name","version"],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,
/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[["name","UCBrowser"],"version"],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],"version"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],"version"],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],["version",["name","Android Browser"]],[/FBAV\/([\w\.]+);/i],["version",["name","Facebook"]],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],
["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",k,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,
/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",e.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],
[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",e.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",e.lowerize]]],device:[[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[["vendor",e.trim],["model",e.trim],["type","smarttv"]],[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],["model",
"vendor",["type","tablet"]],[/applecoremedia\/[\w\.]+ \((ipad)/],["model",["vendor","Apple"],["type","tablet"]],[/(apple\s{0,1}tv)/i],[["model","Apple TV"],["vendor","Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],["vendor","model",["type","tablet"]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],
[["model",k,{"Fire Phone":["SD","KF"]}],["vendor","Amazon"],["type","mobile"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],["model","vendor",["type","mobile"]],[/\((ip[honed|\s\w*]+);/i],["model",["vendor","Apple"],["type","mobile"]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],["vendor","model",["type","mobile"]],[/\(bb10;\s(\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],
[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],["model",["vendor","Asus"],["type","tablet"]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[["vendor","Sony"],["model","Xperia Tablet"],["type","tablet"]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[["vendor","Sony"],["model","Xperia Phone"],["type","mobile"]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],["vendor","model",["type","console"]],[/android.+;\s(shield)\sbuild/i],["model",["vendor","Nvidia"],
["type","console"]],[/(playstation\s[34portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/(sprint\s(\w+))/i],[["vendor",k,{HTC:"APA",Sprint:"Sprint"}],["model",k,{"Evo Shift 4G":"7373KT"}],["type","mobile"]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],["vendor","model",["type","tablet"]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],["vendor",["model",/_/g," "],["type","mobile"]],[/(nexus\s9)/i],
["model",["vendor","HTC"],["type","tablet"]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],["model",["vendor","Microsoft"],["type","console"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],["model",["vendor","Motorola"],["type","mobile"]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],["model",["vendor","Motorola"],["type","tablet"]],
[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[["vendor","Samsung"],"model",["type","tablet"]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[["vendor","Samsung"],"model",["type","mobile"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/sie-(\w+)*/i],["model",["vendor",
"Siemens"],["type","mobile"]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[["vendor","Nokia"],"model",["type","mobile"]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],["model",["vendor","Acer"],["type","tablet"]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[["vendor","LG"],"model",["type","tablet"]],[/(lg) netcast\.tv/i],["vendor","model",["type","smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],["model",["vendor","LG"],["type","mobile"]],[/android.+(ideatab[a-z0-9\-\s]+)/i],
["model",["vendor","Lenovo"],["type","tablet"]],[/linux;.+((jolla));/i],["vendor","model",["type","mobile"]],[/((pebble))app\/[\d\.]+\s/i],["vendor","model",["type","wearable"]],[/android.+;\s(glass)\s\d/i],["model",["vendor","Google"],["type","wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/\s(tablet)[;\/]/i,/\s(mobile)[;\/]/i],
[["type",e.lowerize],"vendor","model"]],engine:[[/windows.+\sedge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv:([\w\.]+).*(gecko)/i],["version","name"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],
["name",["version",k,l]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",k,l]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name",
"Firefox OS"],"version"],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],
["name","version"],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[["name","iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]]},n=function(b,d){if(!(this instanceof n))return(new n(b,d)).getResult();var f=
b||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),g=d?e.extend(m,d):m;this.getBrowser=function(){var a=h.apply(this,g.browser);a.major=e.major(a.version);return a};this.getCPU=function(){return h.apply(this,g.cpu)};this.getDevice=function(){return h.apply(this,g.device)};this.getEngine=function(){return h.apply(this,g.engine)};this.getOS=function(){return h.apply(this,g.os)};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),
device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return f};this.setUA=function(a){f=a;return this};return this};n.VERSION="0.7.11";n.BROWSER={NAME:"name",MAJOR:"major",VERSION:"version"};n.CPU={ARCHITECTURE:"architecture"};n.DEVICE={MODEL:"model",VENDOR:"vendor",TYPE:"type",CONSOLE:"console",MOBILE:"mobile",SMARTTV:"smarttv",TABLET:"tablet",WEARABLE:"wearable",EMBEDDED:"embedded"};n.ENGINE={NAME:"name",VERSION:"version"};n.OS={NAME:"name",VERSION:"version"};"undefined"!==typeof b?
("undefined"!==typeof f&&f.exports&&(b=f.exports=n),b.UAParser=n):a.UAParser=n;var p=a.jQuery||a.Zepto;if("undefined"!==typeof p){var r=new n;p.ua=r.getResult();p.ua.get=function(){return r.getUA()};p.ua.set=function(a){r.setUA(a);a=r.getResult();for(var b in a)p.ua[b]=a[b]}}})("object"===typeof window?window:this)},{}],7:[function(e,f,b){f.exports=function(b){for(var d=1;d<arguments.length;d++){var e=arguments[d],f;for(f in e)a.call(e,f)&&(b[f]=e[f])}return b};var a=Object.prototype.hasOwnProperty},
{}]},{},[1])(1)});
(function(c){var e=function(){function e(b,a){var d=this;this.yOffset=0;this.maskId="alternativeChoiceMask";this.dialogMargin=this.triangleSize=10;window[b]=this;this.clientInstanceName=b;this.settings=a;$(function(){d.$dialog=$("#"+d.settings.DialogId);d.$triangle=d.$dialog.find("."+d.settings.Css.Triangle);var a=d.$dialog.find("."+d.settings.Css.Column);d.$firstColumn=a.first();d.$secondColumn=a.eq(1);a=d.$dialog.find("."+d.settings.Css.MobileHeaderLink);d.$firstColumnTitleLink=a.first();d.$secondColumnTitleLink=
a.eq(1);d.$firstColumnTitleLink.click(function(){return d.toggleMobileColumnVisibility(!0)});d.$secondColumnTitleLink.click(function(){return d.toggleMobileColumnVisibility(!1)});d.$closeButton=d.$dialog.find("."+d.settings.Css.CloseButton);d.$mobileCancelButton=d.$dialog.find("."+d.settings.Css.CancelButton);d.$closeButton.click(function(){return d.closeDialog()});d.$mobileCancelButton.click(function(){return d.closeDialog()});d.$dialog.get(0).addEventListener("blur",function(a){a=c.CommonFunctions.isIe()?
$(document.activeElement):$(a.relatedTarget);d.isOpened&&0===a.closest(d.$dialog).length&&d.closeDialog()},!0);var b=new c.CallbackDebouncer(function(){d.isOpened&&d.updatePosition()});$(window).resize(function(){b.invokeCallback(void 0,100)});a=new c.WindowResizeHandler;$(a).on(c.WindowResizeHandler.mediaChangedEventName,function(a,b){d.isOpened&&(d.toggleMobileDesktopView(b),d.updatePosition())})})}e.prototype.openDialog=function(b,a){"undefined"===typeof a&&(a=0);this.isOpened=!0;this.$dialog.toggle(!0);
this.toggleMobileDesktopView(c.CommonFunctions.isPhoneScreenSize());this.$triggerElement=b;this.yOffset=a;this.updatePosition();this.$closeButton.focus();c.AlternativeChoiceManager.setOpenedDialogClientInstanceName(this.clientInstanceName)};e.prototype.closeDialog=function(){this.isOpened=!1;this.$dialog.toggle(!1);$("#"+this.maskId).remove();c.AlternativeChoiceManager.setOpenedDialogClientInstanceName("");return!1};e.prototype.getFirstColumn=function(){return this.$firstColumn};e.prototype.getSecondColumn=
function(){return this.$secondColumn};e.prototype.getMask=function(){return $("#"+this.maskId)};e.prototype.toggleMobileColumnVisibility=function(b){this.$firstColumnTitleLink.toggleClass(this.settings.Css.MobileHeaderLinkActive,b);this.$secondColumnTitleLink.toggleClass(this.settings.Css.MobileHeaderLinkActive,!b);this.$firstColumn.toggle(b);this.$secondColumn.toggle(!b)};e.prototype.updatePosition=function(){if(this.$triggerElement&&this.isOpened){if(c.CommonFunctions.isPhoneScreenSize()){$("#"+
this.maskId).remove();var b=parseInt(this.$dialog.css("z-index"),10);$(c.CommonFunctions.formatString("<div id='{0}' class='{1}'></div>",this.maskId,this.settings.Css.Mask)).css({opacity:"0.5",filter:"alpha(opacity=0)","z-index":b-1}).appendTo("body")}var a=this.$triggerElement.offset();var d=a.left+this.$triggerElement.outerWidth()/2-this.$dialog.outerWidth()/2;d+this.$dialog.outerWidth()>$(window).width()?d=$(window).width()-this.$dialog.outerWidth()-this.dialogMargin:0>d&&(d=this.dialogMargin);
1===this.settings.OpenDirection?(b=a.top+this.$triggerElement.outerHeight()/2-this.triangleSize+this.yOffset-this.$dialog.outerHeight(),0>b?(b=a.top+this.$triggerElement.outerHeight()/2+this.triangleSize-this.yOffset,this.setOpenDirection(!1)):this.setOpenDirection(!0)):(b=a.top+this.$triggerElement.outerHeight()/2+this.triangleSize+this.yOffset,this.setOpenDirection(!1));this.$triangle.css({left:a.left+this.$triggerElement.outerWidth()/2-d-this.triangleSize});this.$dialog.css({top:b,left:d})}};e.prototype.setOpenDirection=
function(b){this.$dialog.toggleClass(this.settings.Css.AboveTargetElement,b).toggleClass(this.settings.Css.BelowTargetElement,!b)};e.prototype.toggleMobileDesktopView=function(b){b?this.toggleMobileColumnVisibility(!0):(this.$firstColumn.toggle(!0),this.$secondColumn.toggle(!0))};return e}();c.AlternativeChoice=e})(CCL||(CCL={}));
(function(c){var e=function(){function c(){}c.setOpenedDialogClientInstanceName=function(b){if(b&&0!==b.length){if(c.openedDialogClientInstanceName&&c.openedDialogClientInstanceName!==b){var a=window[c.openedDialogClientInstanceName];a&&a.closeDialog()}c.openedDialogClientInstanceName=b}else c.openedDialogClientInstanceName=void 0};c.getOpenedDialog=function(){return window[c.openedDialogClientInstanceName]};return c}();c.AlternativeChoiceManager=e})(CCL||(CCL={}));
var __extends=this.__extends||function(c,e){function f(){this.constructor=c}for(var b in e)e.hasOwnProperty(b)&&(c[b]=e[b]);f.prototype=e.prototype;c.prototype=new f};
(function(c){(function(b){var a=function(){function a(){}a.backspace=8;a.tab=9;a.enter=13;a.escape=27;a.space=32;a.end=35;a.home=36;a.arrowLeft=37;a.arrowUp=38;a.arrowRight=39;a.arrowDown=40;a.del=46;a.key0=48;a.key9=57;a.keyA=65;a.keyZ=90;a.numpad0=96;a.numpad9=105;a.decimalPoint=110;a.comma=188;a.period=190;return a}();b.keyCodes=a;a=function(){function a(){}a.mobile=568;a.iPadPortraitMode=768;a.iPadLandscapeMode=1024;return a}();b.mediaScreenSizes=a;a=function(){function a(){}a.ok=200;a.badRequest=
400;a.unauthorized=401;a.methodNotAllowed=405;a.internalServerError=500;return a}();b.httpStatusCodes=a;b.onePixelTransparentImageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCB1jYAAAAAIAAc/INeUAAAAASUVORK5CYII="})(c.CommonConstants||(c.CommonConstants={}));var e=c.CommonConstants;(function(b){function a(a){for(var b=[],d=0;d<arguments.length-1;d++)b[d]=arguments[d+1];var c=Array.prototype.slice.call(b,0);return a.replace(t,
function(a,b){return b in c?c[b]:a})}function d(){return/(iPod|iPhone|iPad)/i.test(navigator.userAgent)}function f(){return/(Android)/i.test(navigator.userAgent)}function h(){return-1!==navigator.userAgent.indexOf("Chrome")}function k(){var a=navigator.userAgent.match(/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:)(\d+)/);if(!a||3!==a.length)return 1;a=parseInt(a[2],10);if(isNaN(a))return 1;if(0!=a){if(11>a)return 4;if(12>a)return 8}return 1}function l(a,b){a.postMessage(JSON.stringify(b),"*")}function m(a,
b){l(a,b);a!==a.top&&m(a.parent,b)}function n(){return b.checkScreenSize(e.mediaScreenSizes.mobile,!1)}function p(){return b.checkScreenSize(e.mediaScreenSizes.iPadPortraitMode+1,!0)}function r(a,b){a=parseInt(a.css(b));return isNaN(a)?0:a}function w(a,b,d){b=d+b.height();var c=a.offset().top;return c+a.height()<=b&&c>=d}var t=/\{(\d+)\}/g,v=/\r?\n/g,q=/<br\s*\/?>/g,z=/<p>\s*<\/p>/g,C=/\r/g,G=/\n/g,u=/\r\n/g;b.base64Encode=function(a){var b="",d,c=0;a=a.replace(u,"\n");var e="";for(d=0;d<a.length;d++){var f=
a.charCodeAt(d);128>f?e+=String.fromCharCode(f):(127<f&&2048>f?e+=String.fromCharCode(f>>6|192):(e+=String.fromCharCode(f>>12|224),e+=String.fromCharCode(f>>6&63|128)),e+=String.fromCharCode(f&63|128))}for(a=e;c<a.length;){var g=a.charCodeAt(c++);e=a.charCodeAt(c++);d=a.charCodeAt(c++);f=g>>2;g=(g&3)<<4|e>>4;var h=(e&15)<<2|d>>6;var k=d&63;isNaN(e)?h=k=64:isNaN(d)&&(k=64);b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)}return b};b.formatString=a;b.replaceLineBreaksWithBrTags=function(a){return a.replace(v,"<br />")};b.replaceLineBreaksWithPTags=function(a){return a?"<p>"+a.replace(v,"</p><p>").replace(z,"<p>&nbsp;</p>")+"</p>":a};b.replaceBrTagsWithPTags=function(a){return a?"<p>"+a.replace(q,"</p><p>").replace(z,"<p>&nbsp;</p>")+"</p>":a};b.replaceBrTagsWithLineBreaks=
function(a){return a.replace(q,"\n")};b.encodeLineBreaks=function(a){a=a.replace(C,"&#13;");return a=a.replace(G,"&#10;")};b.decodeLineBreaks=function(a){a=a.replace("&#13;","\r");return a=a.replace("&#10;","\n")};b.htmlEncode=function(a){return void 0===a?"":$("<div/>").text(a).html()};b.htmlDecode=function(a){return void 0===a?"":$("<div/>").html(a).text()};b.getIdsFromHidden=function(a,b){"undefined"===typeof b&&(b=",");if(!a.length)return[];a=a.val().split(b);a.splice($.inArray("",a),1);return a};
b.addIdToHidden=function(a,b,d){"undefined"===typeof d&&(d=",");0<a.length&&b&&(a=a.get(0),0<=a.value.split(d).indexOf(b)||(0<a.value.length&&-1===a.value.indexOf(d,a.value.length-d.length)&&(a.value+=d),a.value+=b+d))};b.removeIdFromHidden=function(a,b,d){"undefined"===typeof d&&(d=",");if(0<a.length&&b&&(a=a.get(0))&&a.value){for(var c=a.value.split(d),e="",f=0;f<c.length;f++)b!==c[f]&&0<c[f].length&&(e+=c[f]+d);a.value=e}};b.isIosDevice=d;b.isIphone=function(){return/iPhone/i.test(navigator.userAgent)};
b.isAndroidDevice=f;b.isMobileDevice=function(){return d()||f()};b.isMobileSizedDevice=function(){return 768>window.innerWidth};b.isChrome=h;b.isIe=function(){return-1!==navigator.userAgent.indexOf("MSIE")||/rv:11.0/i.test(navigator.userAgent)};b.isEdge=function(){return-1!==navigator.userAgent.indexOf("Edge")};b.isFirefox=function(){return-1!==navigator.userAgent.indexOf("Firefox")};b.isSafari=function(){return!h()&&-1!==navigator.userAgent.indexOf("Safari")};b.getIosVersion=function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
if(void 0===a||null===a)return Number.NaN;a=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)];return parseFloat(a.join("."))};b.iPhoneVersion=function(){var a=window.screen.height,b=window.screen.width;return 320===b&&480===a?"4":375===b&&667===a?"6":414===b&&736===a?"6+":320===b&&568===a?"5":480>=a?"2-3":"none"};(function(a){a[a.NonIe=1]="NonIe";a[a.Ie10=4]="Ie10";a[a.Ie11=8]="Ie11";a[a.Ie=a.Ie10|a.Ie11]="Ie";a[a.IeBelow11=a.Ie10]="IeBelow11"})(b.IeVersion||(b.IeVersion={}));b.getIeVersion=
k;b.isIeBelow11=function(){return 4===k()};b.makePostMessageCall=l;b.makePostMessageCallRecursivelyToTopmostFrame=m;b.makePostMessageCallWithData=function(a,b,d){a.postMessage(JSON.stringify($.extend(b,d)),"*")};b.attachPostMessageEventListener=function(a,b,d){a.on("message",function(a){var c,e=a.originalEvent.source;try{a.originalEvent.data&&(c=JSON.parse(a.originalEvent.data))&&c.messageName&&("string"===typeof b?c.messageName===b:-1!=b.indexOf(c.messageName))&&d(c,e)}catch(da){}})};b.checkScreenSize=
function(b,d){return window.matchMedia&&window.matchMedia(a("({0}-width: {1}px)",d?"min":"max",b)).matches};b.isPhoneScreenSize=n;b.isDesktopScreenSize=p;b.isTabletScreenSize=function(){return!p()&&!n()};b.executeScripts=function(a){if(null!==a){var b=[],d=a.match(/<script[^>]*?>/g);if(null!==d){var c=0,e,f=a.toLowerCase();for(e=0;e<d.length;e++){var g=a.indexOf(d[e],c)+d[e].length;c=f.indexOf("\x3c/script>",g);g=a.substring(g,c);b.push(g)}for(e=0;e<b.length;e++)(new Function(b[e]))()}}};b.safeParseCssValue=
r;b.calculateBottomOffset=function(a){var b=0;a.parentsUntil("html").each(function(a,d){a=$(d);b+=r(a,"padding-bottom")+r(a,"margin-bottom")+r(a,"border-bottom-width")});return b};b.alertAjaxError=function(a,d,e){a.status>=c.CommonConstants.httpStatusCodes.badRequest&&a.responseText&&alert(b.htmlDecode(a.responseText))};b.jAlertAjaxError=function(a,b,d,c){$.alerts.okButton=d;d=null;c&&(d=function(){window.location=window.location});jAlert($("<div/>").html(a).text(),$("<div/>").html(b).text(),d)};
b.jAjaxConfirm=function(a,b,d,c,e){$.alerts.okButton=d;$.alerts.cancelButton=c;jConfirm(a,b,e)};b.jAjaxPrompt=function(a,b,d,c,e,f){$.alerts.okButton=c;$.alerts.cancelButton=e;jPrompt(a,d,b,f)};b.jAjaxMultiButtonConfirm=function(a,b,d,c){jMultiButtonConfirm(a,b,d,c)};b.printAndCloseCurrentPage=function(){function a(){d--;setTimeout(function(){0===b||0===d?(window.print(),window.close()):a()},1E3)}var b=$("iframe").length,d=b+1;$("iframe").load(function(){b--});a()};b.safeParseJson=function(a){try{return JSON.parse(a)}catch(D){return!1}};
b.isOnScreen=function(a,b,c,e){"undefined"===typeof b&&(b=1);"undefined"===typeof c&&(c=1);"undefined"===typeof e&&(e=null);var f=a.outerHeight(),g=a.outerWidth();if(!g||!f)return!1;var h=e?$(e):d()?$(window.parent):$(window),k=h.scrollTop();e=h.scrollLeft();var m=e+h.width();h=k+h.height();a=a.offset();var l=a.left+g,n=a.top+f;if(m<a.left||e>l||h<a.top||k>n)return!1;k=Math.min(1,(n-k)/f);f=Math.min(1,(h-a.top)/f);return Math.min(1,(l-e)/g)*Math.min(1,(m-a.left)/g)>=b&&k*f>=c};b.measureKpi=function(a,
b,d,c){"undefined"===typeof c&&(c=null);try{$.ajax({type:"POST",url:a,data:{measureSection:b,measurement:d,measureContext:c}})}catch(R){}};b.kpiAjax=function(a,d,c){d||(d={});if(c&&!d.crossDomain){var e=d.beforeSend;d.beforeSend=function(a,b){e&&e(a,b);$.each(c,function(b,d){a.setRequestHeader("X-Kpi-"+b,d)})}}if(c&&d.crossDomain){var f="";$.each(c,function(a,d){f+=b.formatString("&{0}{1}={2}","X-Kpi-",a,d)});f=f.substring(1);a+=-1<a.indexOf("?")?"&":"?";a+=f}return $.ajax(a,d)};b.getDataSelector=
function(a,d){5<a.length&&"data-"===a.substring(0,5)&&(a=a.substring(5));return null!=d?b.formatString("[{0}{1}={2}]","data-",a,d):b.formatString("[{0}{1}]","data-",a)};b.isElementFullyShownInContainer=function(a,b){return w(a,b,b.offset().top)};b.isElementFullyShownInWindow=function(a){var b=$(window);return w(a,b,b.scrollTop())};b.preventInputIncorrectCharacters=function(a,b){-1!==$.inArray(a.which,b)||a.which===e.keyCodes.keyA&&(a.ctrlKey||a.metaKey)||a.which>=e.keyCodes.end&&a.which<=e.keyCodes.arrowDown||
(a.shiftKey||a.which<e.keyCodes.key0||a.which>e.keyCodes.key9)&&(a.which<e.keyCodes.numpad0||a.which>e.keyCodes.numpad9)&&a.preventDefault()}})(c.CommonFunctions||(c.CommonFunctions={}));(function(b){function a(a){return 621355968E9+1E4*a.getTime()}function d(a){return new Date(1970,0,1,0,0,0,(a-621355968E9)/1E4)}function c(a,b){a=d(a+6E8*b);return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)}b.convertToTicks=a;b.convertTicksStringToDate=function(a,b){a=parseInt(a);return c(a,b)};b.convertTicksToDateExact=
d;b.convertUtcTicksToLocalClientDate=function(a){return new Date((a-621355968E9)/1E4)};b.convertLocalProfileDateToEndOfDayUtcTicks=function(b,d){b=new Date(Date.UTC(b.getFullYear(),b.getMonth(),b.getDate(),23,59,59));return a(b)+-6E8*d};b.convertUtcTicksToLocalProfileDate=c;b.getItslNow=function(a){var b=new Date,d=6E4*b.getTimezoneOffset();return new Date(b.getTime()+d+1E3*a)}})(c.DateFunctions||(c.DateFunctions={}));(function(b){var a=function(){function a(){}a.maskNavigationBar="maskNavigationBar";
a.unmaskNavigationBar="unmaskNavigationBar";a.registerExtraNavBar="registerExtraNavBar";a.unregisterExtraNavBar="unregisterExtraNavBar";a.collapseContentAreaFrame="collapseContentAreaFrame";a.expandContentAreaFrame="expandContentAreaFrame";a.contentAreaFrameHasCollapsed="contentAreaFrameHasCollapsed";a.contentAreaFrameHasExpanded="contentAreaFrameHasExpanded";a.collapseExtensionIframe="collapseExtensionIframe";a.expandExtensionIframe="expandExtensionIframe";a.collapseLeftMenu="collapseLeftMenu";a.extensionContentSaved=
"extensionContentSaved";a.unreadNotificationCounterChanged="unreadNotificationCounterChanged";a.extensionContentChanged="extensionContentChanged";a.extensionAssignmentAnswerOpened="extensionAssignmentAnswerOpened";a.textEditorInteraction="textEditorInteraction";a.extensionCancelActionPerformed="extensionCancelActionPerformed";a.extensionContentViewed="extensionContentViewed";a.extensionContentOpened="extensionContentOpened";a.nestedCssModalDialogExpanded="nestedCssModalDialogExpanded";a.nestedCssModalDialogCollapsed=
"nestedCssModalDialogCollapsed";a.studentWasAssessed="studentWasAssessed";a.submitIframe="submitIframe";a.closeCssModalDialog="closeCssModalDialog";a.editEmbededContent="editEmbededContent";a.extensionPrintContentFrame="extensionPrintContentFrame";a.getEmbeddedContentData="getEmbeddedContentData";a.getEmbeddedContentSize="getEmbeddedContentSize";a.openPersonProfileCard="openPersonProfileCard";a.changePrintFeatureVisibility="changePrintFeatureVisibility";a.hideSettings="hideSettings";a.showSettings=
"showSettings";a.toggleBreadcrumbs="toggleBreadcrumbs";a.suspendUpdateBreadCrumbsAndNavigation="suspendUpdateBreadCrumbsAndNavigation";a.suspendExpandCollaplseContentAreaFrame="suspendExpandCollaplseContentAreaFrame";a.extensionSettingsChanged="extensionSettingsChanged";a.showBottomNavigationBar="showBottomNavigationBar";a.hideBottomNavigationBar="hideBottomNavigationBar";a.iframeAutoHeight="iframeAutoHeight";a.reloadParentIframe="reloadParentIframe";a.assignmentShowManageRubric="showManageRubricDialog";
a.extensionOnboarding="extensionOnboarding";a.extensionReadyForTelemetryRequests="extensionReadyForTelemetryRequests";a.initialiseTelemetryCampaign="initialiseTelemetryCampaign";a.extensionTelemetryResultAnswer="extensionTelemetryResultAnswer";a.extensionTelemetryResultComment="extensionTelemetryResultComment";a.unreadMessagesCounterChanged="unreadMessagesCounterChanged";a.enableFullScreen="enableFullScreen";a.disableFullScreen="disableFullScreen";a.extensionTitleUpdated="extensionTitleUpdated";a.elementAddedToYourCollection=
"elementAddedToYourCollection";return a}();b.MessageNames=a;var d=function(){return function(a){this.messageName=a}}();b.GenericMessage=d;var c=function(a){function b(b,d){a.call(this,b);this.extendedData=d}__extends(b,a);return b}(d);b.GenericMessageWithData=c;var e=function(b){function d(d,c,e){"undefined"===typeof c&&(c=!1);"undefined"===typeof e&&(e="");b.call(this,a.textEditorInteraction);this.interactionType=d;this.closeDialogAfterPerformingOperation=c;this.editorInstanceId=e}__extends(d,b);
return d}(d);b.TextEditorBaseInteractionMessage=e;c=function(a){function b(b,d,c,e){"undefined"===typeof c&&(c=!1);"undefined"===typeof e&&(e="");a.call(this,b,c,e);this.extendedData=d}__extends(b,a);return b}(e);b.TextEditorBaseInteractionWithDataMessage=c;var f=function(a){function b(){a.call(this,0,!0)}__extends(b,a);return b}(e);b.TextEditorCloseDialogMessage=f;f=function(a){function b(b,d,c,e){"undefined"===typeof d&&(d=!1);"undefined"===typeof c&&(c="");"undefined"===typeof e&&(e=!1);a.call(this,
1,d);this.htmlContent=b;this.editorInstanceId=c;this.isEmbeddedImage=e}__extends(b,a);return b}(e);b.TextEditorInsertHtmlMessage=f;f=function(a){function b(b,d,c){"undefined"===typeof c&&(c=!1);a.call(this,2,c);this.linkUrl=b;this.linkName=d}__extends(b,a);return b}(e);b.TextEditorInsertLinkToFileMessage=f;e=function(a){function b(b){a.call(this,3,!0);this.pluginId=b}__extends(b,a);return b}(e);b.TextEditorUpdateItslPluginListMessage=e;e=function(a){function b(b){a.call(this,4,b)}__extends(b,a);return b}(c);
b.TextEditorSendImageSettingsMessage=e;c=function(a){function b(b){a.call(this,5,b,!0)}__extends(b,a);return b}(c);b.TextEditorInsertImageToSlideshow=c;d=function(a){function b(b){a.call(this,b)}__extends(b,a);return b}(d);b.EmbedContentBaseMessage=d;c=function(b){function d(){b.call(this,a.getEmbeddedContentData)}__extends(d,b);return d}(d);b.EmbeddedContentDataMessage=c;d=function(b){function d(){b.call(this,a.getEmbeddedContentSize)}__extends(d,b);return d}(d);b.EmbeddedContentSizeMessage=d;(function(a){a[a.CloseDialog=
0]="CloseDialog";a[a.InsertHtml=1]="InsertHtml";a[a.InsertLinkToFile=2]="InsertLinkToFile";a[a.UpdateItslPluginsList=3]="UpdateItslPluginsList";a[a.SendImageSettingsToImagePropertiesDialog=4]="SendImageSettingsToImagePropertiesDialog";a[a.InsertImageToSlideshow=5]="InsertImageToSlideshow"})(b.TextEditorInteractionType||(b.TextEditorInteractionType={}))})(c.CommonWindowMessages||(c.CommonWindowMessages={}));(function(b){b.clickInInnerFrame="clickInInnerFrame";b.touchstartInInnerFrame="touchstartInInnerFrame"})(c.CommonTriggers||
(c.CommonTriggers={}));var f=function(){function b(a){var b=this;this.trackFocusHandler=function(a){if(a.keyCode===$.ui.keyCode.TAB&&!a.isDefaultPrevented()){var d=b.$container.find(":tabbable"),c=d.filter(":first"),e=d.filter(":last");a.target!==e[0]&&a.target!==b.$container||a.shiftKey?a.target!==c[0]&&a.target!==b.$container||!a.shiftKey||(setTimeout(function(){e.trigger("focus")},100),a.preventDefault()):(setTimeout(function(){c.trigger("focus")},100),a.preventDefault())}};this.$container=a}b.prototype.startTrackFocus=
function(){this.isFocusTracked()||this.$container.keydown(this.trackFocusHandler)};b.prototype.stopTrackFocus=function(){this.isFocusTracked()&&this.$container.off("keydown",this.trackFocusHandler)};b.prototype.isFocusTracked=function(){var a=this;if(!this.$container.data("events"))return!1;var b=this.$container.data("events").keydown;if(!b)return!1;var c=!1;$.each(b,function(b,d){if(d.handler===a.trackFocusHandler)return c=!0,!1});return c};return b}();c.FocusTracker=f;f=function(){return function(b,
a,d){"undefined"===typeof d&&(d="");this.text=b;this.css=a;this.customId=d}}();c.ConfirmButtonMetaData=f;f=function(){return function(){}}();c.MultiButtonConfirmResult=f})(CCL||(CCL={}));
(function(c){var e=function(){function e(b,a,d){"undefined"===typeof d&&(d=null);var f=this;this.autoResizeIframe=function(){var a=c.CommonFunctions.calculateBottomOffset(f.extensionIframe);a=IframeResizer.getFixedIframeDefaultHeight($(window),f.extensionIframe,a);c.CommonFunctions.isMobileDevice()&&a<e.iframeMobileMinHeight&&(a=e.iframeMobileMinHeight);f.extensionIframe.add(f.extensionContent).height(a)};this.extensionIframe=$("#"+b);this.extensionContent=$("#"+a);this.iosScrollFixClass=d}e.prototype.init=
function(){var b=this;c.CommonFunctions.attachPostMessageEventListener($(window),c.CommonWindowMessages.MessageNames.iframeAutoHeight,function(a){if(!0===a.extendedData.enabled)$(window).on("resize",b.autoResizeIframe);else $(window).off("resize",b.autoResizeIframe);c.CommonFunctions.isIosDevice()&&b.iosScrollFix(a.extendedData.enabled)})};e.prototype.iosScrollFix=function(b){this.autoResizeIframe();this.iosScrollFixClass&&this.extensionContent.toggleClass(this.iosScrollFixClass,b)};e.iframeMobileMinHeight=
200;return e}();c.AutoIframeResizer=e})(CCL||(CCL={}));(function(c){var e=function(){function c(b){this.timeoutId=0;this.throttledCallback=b}c.prototype.invokeCallback=function(b,a){var d=this;0===this.timeoutId&&(this.timeoutId=setTimeout(function(){d.timeoutId=0;d.throttledCallback(b)},a))};return c}();c.CallbackThrottler=e})(CCL||(CCL={}));
(function(c){var e=function(){function e(b){var a=this;this.$container=$("#"+b.Controls.Container);this.$selectionList=$("#"+b.Controls.SelectionList);this.$switcher=$("#"+b.Controls.Switcher);this.$values=$("#"+b.Controls.ValuesHidden);this.$checkboxes=this.$selectionList.find("input:checkbox");this.$selectAll=this.$selectionList.find("input:checkbox[value='"+e.commonSettings.SelectAllValue+"']");this.intitalValues=this.$values.val();this.autoPostback=b.AutoPostback;$(document).on(c.CommonFunctions.isIosDevice()?
"touchend":"click",function(b){a.showHideSelectionList(b)});this.$checkboxes.change(function(b){b=$(b.target);var d=b.prop("checked");b=b.val();b===e.commonSettings.SelectAllValue?(b=d,a.$checkboxes.each(function(b,c){$(c).val()!==e.commonSettings.SelectAllValue&&($(c).prop("checked",d),a.addRemoveSelectedValue($(c).val(),d))})):(a.addRemoveSelectedValue(b,d),b=a.isAllChecked(),a.$selectAll.prop("checked",b));a.$container.toggleClass(e.commonSettings.CssClasses.FilterApplied,!b)})}e.prototype.addRemoveSelectedValue=
function(b,a){a?c.CommonFunctions.addIdToHidden(this.$values,b):c.CommonFunctions.removeIdFromHidden(this.$values,b)};e.prototype.ajustListPosition=function(){var b=this.$switcher.position().left;this.$selectionList.css({left:(0>b?0:b+5)+"px",top:this.$switcher.position().top+this.$switcher.outerHeight()+"px"})};e.prototype.showHideSelectionList=function(b){b.target===this.$switcher[0]||1===this.$switcher.find(b.target).length?this.$selectionList.is(":visible")?this.hideSelectionList():this.showSelectionList():
b.target!==this.$selectionList[0]&&1!==this.$selectionList.find(b.target).length&&this.$selectionList.is(":visible")&&this.hideSelectionList()};e.prototype.showSelectionList=function(){this.ajustListPosition();this.$selectionList.show()};e.prototype.hideSelectionList=function(){this.$selectionList.hide();this.intitalValues!==this.$values.val()&&(this.autoPostback?this.raisePostback():(this.$container.trigger(e.commonSettings.SelectionChangedEventName,[this.getSelectedValues()]),this.intitalValues=
this.$values.val()))};e.prototype.isAllChecked=function(){var b=0===this.$selectAll.length||this.$selectAll.is(":checked");return this.$selectionList.find("input:checked").length===this.$checkboxes.length-(b?0:1)};e.prototype.getSelectedValues=function(){return this.$values.val().split(e.commonSettings.Separator)};e.prototype.raisePostback=function(){alert("raisePostback is not defined (method should be overridden).")};return e}();c.CheckBoxSelector=e})(CCL||(CCL={}));
(function(c){var e=function(){function e(b){var a=this;this.settings=b;this.dialogResultDeferred=null;this.isInMobileMode=!1;this.maskNavigationBarMessage=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.maskNavigationBar);this.unmaskNavigationBarMessage=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.unmaskNavigationBar);this.expandContentIframeMessage=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.expandContentAreaFrame);
this.shrinkContentIframeMessage=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.collapseContentAreaFrame);this.isDialogVisible=function(){return null!==a.dialogResultDeferred};this.enterMobileModeIfNeeded=function(){window.matchMedia("only screen and (max-width: 568px)").matches&&a.enterMobileMode()};this.leaveMobileModeIfNeeded=function(){a.isInMobileMode&&a.leaveMobileMode()};this.enterMobileMode=function(){c.CommonFunctions.makePostMessageCall(window.parent,a.expandContentIframeMessage);
IframeResizer.reportSetIframeDefaultHeight();a.isInMobileMode=!0};this.leaveMobileMode=function(){c.CommonFunctions.makePostMessageCall(window.parent,a.shrinkContentIframeMessage);IframeResizer.reportSetIframeDefaultHeight();a.isInMobileMode=!1};window[b.ConfirmDialogId]=this;this.$confirmDialog=$("#"+b.ConfirmDialogId);this.attachClickHandlers(b);this.cleanupEnvironmentOnUnload()}e.prototype.attachClickHandlers=function(b){var a=this;if(b.ConfirmButtonId)$("#"+b.ConfirmButtonId).on("click",function(){return a.onButtonClick(0)});
if(b.CancelButtonId)$("#"+b.CancelButtonId).on("click",function(){return a.onButtonClick(1)});if(b.AlternativeButtonId)$("#"+b.AlternativeButtonId).on("click",function(){return a.onButtonClick(2)})};e.prototype.cleanupEnvironmentOnUnload=function(){var b=this;$(window).on("unload",function(){b.isDialogVisible()&&(c.CommonFunctions.makePostMessageCall(window.parent,b.unmaskNavigationBarMessage),b.leaveMobileModeIfNeeded())})};e.prototype.onButtonClick=function(b){if(!this.isDialogVisible())return!1;
this.leaveMobileModeIfNeeded();c.CommonFunctions.makePostMessageCall(window.parent,this.unmaskNavigationBarMessage);this.$confirmDialog.hide();this.markDialogAsClosed();this.dialogResultDeferred.resolve(b);this.dialogResultDeferred=null;return!1};e.prototype.show=function(){this.dialogResultDeferred=$.Deferred();c.CommonFunctions.makePostMessageCall(window.parent,this.maskNavigationBarMessage);this.enterMobileModeIfNeeded();this.markDialogAsOpen();this.$confirmDialog.show();return this.dialogResultDeferred.promise()};
e.prototype.showMessage=function(b,a){this.$confirmDialog.find(".ccl-confirm-dialog-header-and-content > h2")[0].innerHTML=b;this.$confirmDialog.find(".ccl-confirm-dialog-header-and-content > p")[0].innerHTML=a;return this.show()};e.prototype.markDialogAsClosed=function(){$("html").removeClass("ccl-confirm-dialog-open")};e.prototype.markDialogAsOpen=function(){$("html").addClass("ccl-confirm-dialog-open")};return e}();c.ConfirmDialog=e;(function(c){c[c.Confirm=0]="Confirm";c[c.Cancel=1]="Cancel";
c[c.Alternative=2]="Alternative"})(c.ConfirmDialogResult||(c.ConfirmDialogResult={}))})(CCL||(CCL={}));
(function(c){var e=function(){return function(){this.aligns=0}}();c.BlinkingDotContext=e;(function(a){a[a.None=0]="None";a[a.WidthCenter=1]="WidthCenter"})(c.BlinkingDotHorizontalAlign||(c.BlinkingDotHorizontalAlign={}));var f=new e;f.containerCssClass="ccl-blinkingdot-container";f.dotCssClass="ccl-blinkingdot-dot";f.pulseCssClass="ccl-blinkingdot-pulse";var b=function(){function a(a){var b=this;this.visible=!0;this.context=this.extendContext(f,a);window[this.context.id]=this;this.$pulseHolder=$("<div />");
this.$pulseHolder.prop("id",this.context.id);this.$pulseHolder.addClass(this.context.containerCssClass);this.context.containerCssExtraClasses&&0<this.context.containerCssExtraClasses.length&&this.$pulseHolder.addClass(this.context.containerCssExtraClasses);this.context.containerCss&&this.$pulseHolder.css(this.context.containerCss);this.context.$targetControl.append(this.$pulseHolder);this.initAlign();this.context.isInitialStateHidden?this.hide():this.show();a=$("<div />");a.addClass(this.context.dotCssClass);
this.context.dotCssExtraClasses&&0<this.context.dotCssExtraClasses.length&&a.addClass(this.context.dotCssExtraClasses);this.context.dotCss&&a.css(this.context.dotCss);this.$pulseHolder.append(a);this.getSupportedTransform()?(a=this.getPulse(),this.$pulseHolder.append(a)):this.timerId=setInterval(this.addCircle.bind(this),1500);this.$pulseHolder.on("click",function(a){return b.onClickHandler(a)})}a.prototype.isVisible=function(){return this.visible};a.prototype.getSupportedTransform=function(){var a=
(document.body||document.documentElement).style;return void 0!==a.transition||void 0!==a.WebkitTransition||void 0!==a.MozTransition||void 0!==a.MsTransition};a.prototype.getPulse=function(){var a=$("<div />");a.addClass(this.context.pulseCssClass);this.context.pulseCssExtraClasses&&0<this.context.pulseCssExtraClasses.length&&a.addClass(this.context.pulseCssExtraClasses);this.context.pulseCss&&a.css(this.context.pulseCss);return a};a.prototype.show=function(){this.visible||(this.$pulseHolder.show(),
this.timerId||this.getSupportedTransform()||(this.timerId=setInterval(this.addCircle.bind(this),1500)),this.visible=!0)};a.prototype.hide=function(){this.visible&&(this.$pulseHolder.hide(),clearInterval(this.timerId),this.timerId=null,this.visible=!1)};a.prototype.onClickHandler=function(a){this.context.onClickAction&&(this.context.onClickAction(a),a.stopPropagation())};a.prototype.addCircle=function(){var a=this.getPulse(),b=this.$pulseHolder.outerHeight(),c=this.$pulseHolder.offset(),e=1.1*b;a.css({left:b/
2-2+c.left+"px",top:b/2-2+c.top+"px",width:"0px",height:"0px","margin-top":"0px","margin-left":"0px",opacity:1,position:"fixed"});a.animate({width:e+"px",height:e+"px","margin-top":-e/2+"px","margin-left":-e/2+"px",opacity:"0"},3E3,"easeOutCirc");this.$pulseHolder.append(a);setTimeout(function(){a.remove()},2800)};a.prototype.initAlign=function(){this.context.aligns&&1==this.context.aligns&&this.moveToWidthCenter()};a.prototype.moveToWidthCenter=function(){var a=Math.round(this.context.$targetControl.width()/
2),b=Math.round(this.$pulseHolder.outerWidth()/2),c=parseInt(this.context.$targetControl.css("margin-left"));isNaN(c)&&(c=0);this.$pulseHolder.css("margin-left",a-b+c)};a.prototype.extendContext=function(a,b){var d=new e;d=$.extend(d,a);a=Object.keys(b);for(var c in a){var f=a[c];b[f]&&(d[f]=b[f])}return d};return a}();c.BlinkingDot=b})(CCL||(CCL={}));
(function(c){var e=function(){function c(){}c.ErrorFeedback={Container:"ccl-error-feedback",Message:"ccl-error-feedback-message",RetryButton:"ccl-error-feedback-retry",SecondButton:"ccl-error-feedback-secondary",CancelButton:"ccl-error-feedback-cancel",IsVisible:"ccl-error-feedback-is-visible",CloseButton:"ccl-error-feedback-close",DismissButton:"ccl-error-feedback-dismiss"};c.InformationFeedback={Container:"ccl-info-feedback",Message:"ccl-info-feedback-message",CloseButton:"ccl-info-feedback-closebutton",
ExtraButton:"ccl-info-feedback-extrabutton",DismissButton:"ccl-info-feedback-dismiss",IsVisible:"ccl-info-feedback-is-visible",ButtonContainer:"ccl-info-feedback-buttons"};c.FullScreenViewer={Opened:"ccl-full-screen-viewer-opened",ContentElement:"ccl-full-screen-viewer-content-element",HeaderOnly:"ccl-full-screen-viewer--header-only"};c.CssModal={Content:"ccl-cssmodal-modal-content"};return c}();c.CommonCssClasses=e})(CCL||(CCL={}));
(function(c){var e=function(){function b(){}b.ShowFeedbackMessage="ShowErrorFeedbackMessage";b.HideFeedbackMessage="HideErrorFeedbackMessage";return b}();c.ErrorFeedbackEvent=e;var f=function(){function b(a,b){var d=this;this.settings=b;this.mode=b.Mode;this.$feedback=a;this.$retryButton=this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.RetryButton);this.$secondButton=this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.SecondButton);this.$cancelButton=this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.CancelButton);
this.$closeButton=this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.CloseButton);this.$dismissButton=this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.DismissButton);a=$("#"+b.MainContainerClientId);a.on(e.ShowFeedbackMessage,function(a,b,c,e,f,g){a.stopPropagation();d.showFeedbackMessage(b,c,e,f,g)});a.on(e.HideFeedbackMessage,function(a,b){a.stopPropagation();d.hideFeedbackMessage(b)});this.$cancelButton.on("click",function(){return d.hideFeedbackMessage(!0)})}b.showFeedback=function(a,
b,c,f){"undefined"===typeof f&&(f=!1);a.trigger(e.ShowFeedbackMessage,[b,c,null,null,f])};b.showFeedbackWithSecondButton=function(a,b,c,f,k,l){"undefined"===typeof l&&(l=!1);a.trigger(e.ShowFeedbackMessage,[b,c,f,k,l])};b.hideFeedback=function(a,b){"undefined"===typeof b&&(b=!0);a.trigger(e.HideFeedbackMessage,b)};b.prototype.showFeedbackMessage=function(a,b,e,f,k){var d=this;this.$feedback.find("."+c.CommonCssClasses.ErrorFeedback.Message).html(a);this.$secondButton.hide();this.$retryButton.hide();
0===this.mode?(this.$retryButton.off("click"),b&&(this.$retryButton.on("click",b),this.$retryButton.show())):1===this.mode&&(c.CommonFunctions.isMobileDevice()?(this.$dismissButton.on("click",function(){return d.hideDismissFeedback(b,!0)}),this.$dismissButton.show()):(this.$closeButton.on("click",function(){return d.hideDismissFeedback(b,!0)}),this.$closeButton.show()));this.$secondButton.off("click");e&&f&&(this.$secondButton.text(e),this.$secondButton.on("click",f),this.$secondButton.show());this.$cancelButton.toggle(k);
$("body").addClass(c.CommonCssClasses.ErrorFeedback.IsVisible);this.$feedback.stop(!0,!0).show()};b.prototype.hideDismissFeedback=function(a,b){"undefined"===typeof b&&(b=!0);this.hideFeedbackMessage(b).then(function(){a&&a()})};b.prototype.hideFeedbackMessage=function(a){"undefined"===typeof a&&(a=!0);var b=$.Deferred();$("body").removeClass(c.CommonCssClasses.ErrorFeedback.IsVisible);a?this.$feedback.stop(!0,!0).fadeOut(500,function(){b.resolve()}):(this.$feedback.hide(),b.resolve());return b.promise()};
return b}();c.ErrorFeedback=f})(CCL||(CCL={}));
(function(c){var e=function(){function c(){}c.prototype.enable=function(){-1===c.instances.indexOf(this)&&c.instances.push(this)};c.prototype.disable=function(){var b=c.instances.indexOf(this);-1<b&&c.instances.splice(b,1)};c.allowDialogWithId=function(b){c.isAllowed(b)||c.allowDialogIds.push(b)};c.isDialogAllowed=function(b){var a={isAllowed:!0,deniedByInstances:[]};c.isAllowed(b)||c.instances.forEach(function(b){a.isAllowed=!1;a.deniedByInstances.push(b);!a.confirmationMessage&&b.confirmationMessage&&
0<b.confirmationMessage.length&&(a.confirmationMessage=b.confirmationMessage)});return a};c.isAllowed=function(b){return-1<c.allowDialogIds.indexOf(b)};c.instances=[];c.allowDialogIds=[];return c}();c.DialogWhiteList=e})(CCL||(CCL={}));
(function(c){var e=function(){return function(c){var b=this;this.readMetadata=function(a){a=$(a).parents("["+b.options.metadataAttrName+"]").first().attr(b.options.metadataAttrName);return JSON.parse(a)};this.readExtendedMetadata=function(a){return $(a).parents("["+b.options.metadataAttrName+"]").first().data(b.options.extendedMetadataAttrName)};this.options=c;this.options.legacyFileList.settings=this.options.settings;this.options.legacyFileList.controls={title:""};var a=c.container.find("["+c.metadataAttrName+
"]");a.each(function(a,b){a=JSON.parse($(b).attr(c.metadataAttrName));a=c.extendedMetadatas[a.id];$(b).data(c.extendedMetadataAttrName,a)});c.callbacks&&c.callbacks.init&&c.callbacks.init(a);a.find(c.fileItemSelector).click(function(a){var d=b.readMetadata(a.currentTarget);a=b.readExtendedMetadata(a.currentTarget);c.callbacks&&c.callbacks.itemClick&&c.callbacks.itemClick(d,a,b.options.legacyFileList);return!1});a.find(c.downloadSelector).click(function(a){if(a.currentTarget instanceof HTMLAnchorElement&&
a.currentTarget.href)return!0;if(b.options.callbacks&&b.options.callbacks.downloadClick){var d=b.readMetadata(a.currentTarget);a=b.readExtendedMetadata(a.currentTarget);return b.options.callbacks.downloadClick(d,a,b.options.legacyFileList)}return!0})}}();c.FileListMvc=e})(CCL||(CCL={}));
(function(c){var e=function(){function e(b){var a=this;this.onEscape=function(b){b.which===c.CommonConstants.keyCodes.escape&&a.toggleDialog(!1)};this.closeTooltip=function(b){setTimeout(function(){a.toolTip.isTooltipOpened()&&a.toolTip.closeTooltip()},b)};this.openTooltip=function(b,c,e){setTimeout(function(){a.toolTip.isTooltipOpened()||(a.$tooltipContentLabel.html(c),a.toolTip.openTooltip(b,a.tooltipPositionSettings))},e)};this.settings=b;window[e.clientInstanceName]=this;$(function(){a.$body=
$("body");a.$bodyWrapper=$("."+a.settings.Css.BodyWrapper);a.$dialog=$("#"+a.settings.Controls.Dialog);a.$closeButton=a.$dialog.find("."+a.settings.Css.CloseButton);a.$errorLabel=$("#"+a.settings.Controls.ErrorLabel);a.$tooltipContentLabel=$("#"+a.settings.Controls.TooltipContentLabel);a.$contentContainer=$("#"+a.settings.Controls.ContentContainer);a.$loadingIndicator=$("#"+a.settings.Controls.LoadingIndicator);a.focusTracker=new c.FocusTracker(a.$dialog);a.$closeButton.click(function(){$(a).trigger(e.onCloseEvent);
a.toggleDialog(!1)});a.initTooltip();a.settings.Terms.CloseToolTip&&a.toggleToolTip(a.$closeButton,a.settings.Terms.CloseToolTip,!0)})}e.getInstance=function(){return window[e.clientInstanceName]};e.openDialog=function(b){e.getInstance().openDialog(b)};e.prototype.isOpened=function(){return this.$dialog.is(":visible")};e.prototype.openDialog=function(b){var a=this;b?(this.$contentContainer.empty(),this.$loadingIndicator.show(),$.get(b).done(function(b){a.$contentContainer.html(b)}).always(function(){return a.$loadingIndicator.hide()}),
this.toggleDialog(!0)):console.error("Url to load not set")};e.prototype.toggleDialog=function(b){this.suspendUpdateBreadCrumbsAndNavigation(b);this.toggleEscapeHandler(b);this.adjustDialogPositionOnIosDevice(b);this.$body.css("overflow",b?"hidden":"");this.$dialog.toggle(b);b?(c.CommonFunctions.makePostMessageCall(window.top,{messageName:c.CommonWindowMessages.MessageNames.expandContentAreaFrame}),this.suspendExpandCollaplseContentAreaFrame(!0),this.$startLink=$(":focus"),this.$closeButton.focus(),
this.focusTracker.startTrackFocus()):(this.suspendExpandCollaplseContentAreaFrame(!1),c.CommonFunctions.makePostMessageCall(window.top,{messageName:c.CommonWindowMessages.MessageNames.collapseContentAreaFrame}),this.focusTracker.stopTrackFocus(),this.$startLink.focus())};e.prototype.suspendUpdateBreadCrumbsAndNavigation=function(b){c.CommonFunctions.makePostMessageCall(window.top,new c.CommonWindowMessages.GenericMessageWithData(c.CommonWindowMessages.MessageNames.suspendUpdateBreadCrumbsAndNavigation,
{suspend:b}))};e.prototype.suspendExpandCollaplseContentAreaFrame=function(b){c.CommonFunctions.makePostMessageCall(window.top,new c.CommonWindowMessages.GenericMessageWithData(c.CommonWindowMessages.MessageNames.suspendExpandCollaplseContentAreaFrame,{suspend:b}))};e.prototype.toggleEscapeHandler=function(b){if(b)this.$body.on("keyup",this.onEscape);else this.$body.off("keyup",this.onEscape)};e.prototype.adjustDialogPositionOnIosDevice=function(b){if(c.CommonFunctions.isIosDevice()){var a=$(window.top).height()-
this.$closeButton.height();this.$bodyWrapper.css("overflow",b?"hidden":"");this.$bodyWrapper.height(b?a.toString():"auto")}};e.prototype.showErrorMessage=function(b){this.$errorLabel.text(b);this.$errorLabel.show()};e.prototype.initTooltip=function(){this.tooltipPositionSettings={my:"right+23 top",at:"center bottom+10",arrow:"bottom"};this.$toolTipContainer=this.$dialog.find("."+this.settings.Css.ToolTipContentConatiner);this.toolTip=new c.CustomToolTip("fullScreenDialogToolTip",{contentContainer:this.$toolTipContainer,
zIndex:10},this.settings.Css.CustomTooltipCssClasses);this.$toolTipContainer.show()};e.prototype.toggleToolTip=function(b,a,d){var e=this;if(!c.CommonFunctions.isMobileDevice())if(d)b.on("mouseover",function(){return e.openTooltip(b,a,0)}).on("mouseleave",function(){return e.closeTooltip(0)});else this.closeTooltip(0),b.off("mouseover mouseleave")};e.clientInstanceName="fullScreenDialogClientInstanceName";e.onCloseEvent="fullScreenDialog:close";return e}();c.FullScreenDialog=e})(CCL||(CCL={}));
(function(c){var e=function(){function e(){var b=this;this.contentHeight=0;this.reportContentHeightIfChanged();var a=new c.CallbackDebouncer(function(){return b.reportContentHeight(b.calculateDocumentHeight())});$(window).on("resize",function(){a.invokeCallback(void 0,250)});$(document).on("cssmodal:show",function(){b.reportContentHeight(e.useDefaultHeight)})}e.prototype.calculateDocumentHeight=function(){var b=$(document.body),a=$(document.documentElement),d=e.calculateSelectorsHeight();return Math.max(b.outerHeight(),
a.outerHeight(),d)};e.calculateSelectorsHeight=function(){var b=0;this.selectorsToListenHeight.forEach(function(a){$(a+":not(:hidden)").each(function(a,c){a=$(c).offset().top+$(c).outerHeight(!0);a>b&&(b=a)})});return b};e.addSelectorToListenHeight=function(b){this.selectorsToListenHeight.push(b);return this};e.prototype.reportContentHeight=function(b){c.CommonFunctions.makePostMessageCall(window.parent,new c.CommonWindowMessages.GenericMessageWithData(c.CommonWindowMessages.MessageNames.extensionContentOpened,
{iframeHeight:b}))};e.prototype.reportContentHeightIfChanged=function(){this.contentHeight!==this.calculateDocumentHeight()&&(this.contentHeight=this.calculateDocumentHeight(),this.reportContentHeight(this.contentHeight))};e.prototype.setUpMutationObserver=function(){var b=this;(new MutationObserver(function(a){0<a.length&&(new c.CallbackDebouncer(function(){return b.reportContentHeightIfChanged()})).invokeCallback(void 0,100)})).observe(document.body,{childList:!0,attributes:!0,attributeFilter:["style",
"src","height","width","class"],characterData:!0,subtree:!0})};e.prototype.setUpTimerObserver=function(){var b=this;this.reportContentHeightIfChanged();this.onContentHeightChangeTimer&&clearTimeout(this.onContentHeightChangeTimer);this.onContentHeightChangeTimer=setTimeout(function(){return b.setUpTimerObserver()},200)};e.prototype.setUpChangeObservation=function(){"MutationObserver"in window?this.setUpMutationObserver():this.setUpTimerObserver()};e.setUpIframeContentHeightReporter=function(){(new e).setUpChangeObservation()};
e.attachExtensionContentOpenedListenerForIframe=function(b){$(function(){var a=!1;c.CommonFunctions.attachPostMessageEventListener($(window),c.CommonWindowMessages.MessageNames.extensionContentOpened,function(d){var f=$("#"+b);d=d.extendedData.iframeHeight;var h=c.CommonFunctions.calculateBottomOffset(f);h=IframeResizer.getFixedIframeDefaultHeight($(window),f,h);f.height(d===e.useDefaultHeight?h:Math.max(d,h));a||(f.attr("scrolling","no"),a=!0)})})};e.useDefaultHeight=-1;e.selectorsToListenHeight=
[];return e}();c.IframeContentHeightReporter=e})(CCL||(CCL={}));
(function(c){var e=function(){function b(){}b.ShowFeedbackMessage="ShowInformationFeedbackMessage";b.HideFeedbackMessage="HideInformationFeedbackMessage";return b}();c.InformationFeedbackEvent=e;var f=function(){function b(a,b){var d=this;this.settings=b;this.$feedback=a;this.$closeButton=this.$feedback.find("."+c.CommonCssClasses.InformationFeedback.CloseButton);this.$dismissButton=this.$feedback.find("."+c.CommonCssClasses.InformationFeedback.DismissButton);this.$extraButton=this.$feedback.find("."+
c.CommonCssClasses.InformationFeedback.ExtraButton);this.$buttonContainer=this.$feedback.find("."+c.CommonCssClasses.InformationFeedback.ButtonContainer);this.$closeButton.on("click",function(){d.hideFeedbackMessage()});this.$dismissButton.on("click",function(){d.hideFeedbackMessage()});this.$buttonContainer.hide();a=$("#"+b.MainContainerClientId);a.on(e.ShowFeedbackMessage,function(a,b,c,e,f){a.stopPropagation();d.showFeedbackMessage(b,c,e,f)});a.on(e.HideFeedbackMessage,function(a,b){a.stopPropagation();
d.hideFeedbackMessage(b)})}b.prototype.showFeedbackMessage=function(a,b,e,f){var d=this;clearTimeout(this.hidingAnimation);this.$feedback.find("."+c.CommonCssClasses.InformationFeedback.Message).html(a);a=!1;this.$extraButton.off("click");b&&e?(this.$extraButton.text(b),this.$extraButton.removeAttr("disabled"),this.$extraButton.on("click",function(){clearTimeout(d.hidingAnimation);d.$extraButton.attr("disabled","disabled");e()}),this.$extraButton.show(),a=!0):(this.$extraButton.hide(),a=!1);this.settings.HideDismissButton||
a?(this.$dismissButton.hide(),this.$closeButton.show()):(this.$dismissButton.show(),this.$closeButton.hide());this.$buttonContainer.toggle(a||!this.settings.HideDismissButton);$("body").addClass(c.CommonCssClasses.InformationFeedback.IsVisible);this.$feedback.stop(!0,!0).show();f||(this.hidingAnimation=setTimeout(function(){return d.hideFeedbackMessage()},15E3))};b.prototype.hideFeedbackMessage=function(a){"undefined"===typeof a&&(a=!0);clearTimeout(this.hidingAnimation);$("body").removeClass(c.CommonCssClasses.InformationFeedback.IsVisible);
this.$feedback.stop(!0,!0);a?this.$feedback.fadeOut():this.$feedback.hide()};b.showFeedback=function(a,b,c){"undefined"===typeof c&&(c={});a.trigger(e.ShowFeedbackMessage,[b,c.extraButtonName,c.extraButtonCallback,c.disableAutomaticHiding])};b.showFeedbackWithextraButton=function(a,b,c,f){a.trigger(e.ShowFeedbackMessage,[b,c,f,!1])};b.hideFeedback=function(a,b){"undefined"===typeof b&&(b=!0);a.trigger(e.HideFeedbackMessage,b)};return b}();c.InformationFeedback=f})(CCL||(CCL={}));
(function(c){var e=function(){function e(b){var a=this;this.settings=b;b=this.settings.ContentSelector+" a"+c.CommonFunctions.getDataSelector(e.dataAttributes.expanderLink);this.visibleTextLengthCalculator=new c.VisibleTextLengthCalculator(this.settings.NumberOfCharactersToShow,this.settings.NumberOfLineBreaks,c.CommonFunctions.isEdge());$(document).on("click",b,function(b){var d=$(b.currentTarget);a.setExpanderLinkState(d,!d.data(e.dataAttributes.textIsExpanded));d=d.parent();d.find("."+e.commonSettings.CssClasses.VisibleText).toggleClass(e.commonSettings.CssClasses.ShowEllipsis);
d=d.find("."+e.commonSettings.CssClasses.HiddenText).toggle();c.CommonFunctions.isFirefox()&&"block"===d.css("display")&&d.css("display","inline");b.preventDefault()});this.settings.RunScanningDocumentAfterInitialization&&this.scanDocumentAndAppend()}e.prototype.scanDocumentAndAppend=function(){var b=this;$(this.settings.ContentSelector+":not([data-"+e.dataAttributes.processedIndicator+"])").each(function(a,d){b.scanItemAndAppend($(d))})};e.prototype.scanItemAndAppend=function(b){var a=$.trim(b.html());
if(this.visibleTextLengthCalculator.shouldCalculateRealLength(b[0])){var d=this.visibleTextLengthCalculator.calculateRealLength(b[0]);if(0!==d&&d<a.length){var c=a.substr(0,d);a=a.substr(d);b.empty().attr("data-"+e.dataAttributes.processedIndicator,"").append($("<span>").addClass(e.commonSettings.CssClasses.VisibleText).addClass(e.commonSettings.CssClasses.ShowEllipsis).html(c)).append($("<span>").addClass(e.commonSettings.CssClasses.HiddenText).html(a).hide()).append(this.setExpanderLinkState($("<a>").prop("href",
"#").addClass(e.commonSettings.CssClasses.ExpanderLink).attr("data-"+e.dataAttributes.expanderLink,"")))}}};e.prototype.setExpanderLinkState=function(b,a){"undefined"===typeof a&&(a=!1);return b.text(a?this.settings.Resources.ShowLess:this.settings.Resources.ShowMore).data(e.dataAttributes.textIsExpanded,a)};e.dataAttributes={processedIndicator:"inline-text-expander-processed",textIsExpanded:"inlinetextexpander-expanded",expanderLink:"inlinetextexpander-show-more-link"};return e}();c.InlineTextExpander=
e})(CCL||(CCL={}));
(function(c){var e=function(){function c(){this.skipUrls=[]}c.prototype.getFirstLink=function(b){b=this.parseFirstLink(this.getTextWithoutSkippedUrls(this.getEmbedCodeWithoutStyles(b)));return""===b?"":c.ensureUrlScheme(b)};c.prototype.getDomain=function(b){var a=document.createElement("a");a.href=b;return a.hostname};c.prototype.skipUrl=function(b){this.skipUrls.push(b)};c.prototype.removeFromSkipUrl=function(b){b=this.skipUrls.indexOf(b);-1<b&&this.skipUrls.splice(b,1)};c.prototype.isEmail=function(b){for(var a=
b.length-1;0<=a&&!b.charAt(a).match(c.lettersRegex);)a--;return null!==b.substr(0,a+1).match(c.emailRegex)};c.ensureUrlScheme=function(b){c.urlWithFirstAtSignRegex.test(b)&&(b=b.substr(b.indexOf("@")+1));return c.schemeDefinedUrlRegex.test(b)?b:c.protocolRelativeUrlRegex.test(b)?"http:"+b:"http://"+b};c.prototype.getEmbedCodeWithoutStyles=function(b){return b.replace(c.stylesRegex,"")};c.prototype.getTextWithoutSkippedUrls=function(b){var a=this;return this.skipUrls.reduce(function(b,e){var d=a.parseFirstLink(b);
return c.ensureUrlScheme(d)===e?b.replace(d," "):b},b)};c.prototype.getDataAttribute=function(b){var a=null;b.match(c.dataAttributesRegex)&&(a=b.replace(c.dataAttributesRegex,c.dataAttributesTemplate));return a};c.prototype.parseFirstLink=function(b){for(var a=this.getDataAttribute(b),d=b.match(c.urlRegex);""!==b&&null!==d&&(this.isEmail(d[0])||0===d[0].trim().indexOf("@"));)b=b.replace(d[0]," ").trim(),d=b.match(c.urlRegex);return null===d?"":a?d[0]+(-1<d[0].indexOf("?")?"&":"?")+a:d[0]};c.wholeUrlRegex=
/^(https?:\/\/)?((((?!-))(xn--)?[a-z0-9-_@]{0,61}[a-z0-9]{1,1}\.)*(xn--)?([a-z0-9\-@]{1,61}|[a-z0-9-]{1,30}\.[a-z]{2,})\.)([a-zZ-Z0-9\.\-\/\\_%,!:\+@=]{2,})(\?([^#\s>"]*))?(#(\S*))?$/i;c.urlRegex=/(https?:\/\/)?((((?!-))(xn--)?[a-z0-9-_@]{0,61}[a-z0-9]{1,1}\.)*(xn--)?([a-z0-9\-@]{1,61}|[a-z0-9-]{1,30}\.[a-z]{2,})\.)([a-zZ-Z0-9\.\-\/\\_%,!:\+@=]{2,})(\?([^#"'\s>"]*))?(#([^"'\s]*))?/i;c.emailRegex=/(mailto:([^\?]*))?([a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$)/i;c.schemeDefinedUrlRegex=/^(https?:\/\/)/i;
c.protocolRelativeUrlRegex=/^(\/\/)/;c.urlWithFirstAtSignRegex=/^((https?:)?\/\/)?@/i;c.lettersRegex=/^[a-z]$/i;c.stylesRegex=/(style\s*=\s*)(?:(?:[^>']([^>"]*))|(?:[^>"]([^>']*)))/ig;c.dataAttributesRegex=/(<div.+?data-nrk-id="([\d]+)".+)|(<div.+?data-sample-id="([\d]+)".+)/i;c.dataAttributesTemplate="data-id=$2$4";return c}();c.LinkParser=e})(CCL||(CCL={}));
(function(c){var e=function(){function c(b,a,d){"undefined"===typeof d&&(d=!1);this.maxLength=b;this.maxLineBreaks=a;this.isEdge=d;this.anchorTagName="A";this.breakLineTagName="BR"}c.prototype.shouldCalculateRealLength=function(b){return b.getElementsByTagName(this.breakLineTagName).length>=this.maxLineBreaks||b.innerHTML.trim().length>this.maxLength};c.prototype.calculateRealLength=function(b){for(var a=this.maxLength,d=0,c=0,e,f=0;e=b.childNodes[c];){var l=e.length||e.outerHTML.length;if(d+l>a){e.nodeType===
Node.ELEMENT_NODE&&(l=this.isEdge?l+1:l,a=e.tagName===this.anchorTagName?d+l:d);break}if(e.nodeType===Node.ELEMENT_NODE&&e.tagName===this.breakLineTagName&&(f++,f===this.maxLineBreaks)){a=d;break}d+=l;c++}return a};return c}();c.VisibleTextLengthCalculator=e})(CCL||(CCL={}));
(function(c){var e=function(){function c(b,a){this.cssClasses=b;this.dataAttributes=a}c.prototype.toggleTextError=function(b,a,d){b=b.find("."+this.cssClasses.EditorTextarea);b.find("[data-"+this.dataAttributes.TextValidationErrorMessage+"]").text(d?a:"").toggle(d);b.toggleClass(this.cssClasses.TextIsValid,!d)};c.prototype.getErrorAppendTarget=function(){return $("<span data-"+this.dataAttributes.TextValidationErrorMessage+">").hide()};return c}();c.ModernInput=e})(CCL||(CCL={}));
(function(c){var e=function(){function e(b,a){window[b]=this;this._settings=a;this._container=$("#"+this._settings.Container);this.initialize()}e.prototype.activateItem=function(b){var a=this._container.find("."+this._settings.ButtonCssClass);b=this._container.find("."+this._settings.ButtonCssClass+"[data-"+this._settings.KeyDataName+'= "'+b+'"]');a.removeClass(this._settings.ActiveCssClass);b.addClass(this._settings.ActiveCssClass)};e.prototype.toggleEnableSwitcher=function(b){this._container.find("."+
this._settings.ButtonCssClass).toggleClass(this._settings.DisabledCssClass,!b)};e.prototype.initialize=function(){var b=this,a=$("#"+this._settings.Container).find("."+this._settings.ButtonCssClass);a.each(function(d,e){var f=$(e);f.click(function(){if(f.hasClass(b._settings.DisabledCssClass))return!1;var d=f.data(b._settings.KeyDataName).toString(),e;$.each(b._settings.ItemSettings,function(a,b){return d===b.Key?(e=b,!1):!0});c.CommonFunctions.makePostMessageCall(window,new c.CommonWindowMessages.GenericMessageWithData(c.MultipleSwitcher.onClickEventName,
e));a.removeClass(b._settings.ActiveCssClass);f.addClass(b._settings.ActiveCssClass);return!1})})};e.onClickEventName="MultipleSwitcher:onclick";return e}();c.MultipleSwitcher=e})(CCL||(CCL={}));
(function(c){var e=function(){function c(b,a){this.settings=b;this.controls=a}c.prototype.validate=function(b,a){b=$("#"+this.controls.id).val();if(""!==b){var d=this.settings.delimiter;"."===d&&(d="\\.");(new RegExp("^\\d+("+d+"\\d+)?$")).test(b)?(b=b.replace(d,"."),parseFloat(b)>this.settings.maxValue&&(a.IsValid=!1)):a.IsValid=!1}};return c}();c.FloatNumberValidator=e})(CCL||(CCL={}));
(function(c){c=c.FeedbackType||(c.FeedbackType={});c[c.Information=0]="Information";c[c.Error=1]="Error";c[c.Warning=2]="Warning";c[c.Tip=3]="Tip";c[c.Functionality=4]="Functionality"})(CCL||(CCL={}));
(function(c){var e=function(){function b(a){var b=this;this.settings=a;this.onCloseClick=function(){b.close();return!1};this.onKeyDown=function(a){a.keyCode===c.CommonConstants.keyCodes.escape&&b.close()};window[a.FullScreenViewerId]=this;this.viewer=$("#"+a.FullScreenViewerId);this.icon=$("#"+a.IconId);this.title=$("#"+a.TitleId);this.content=$("#"+a.ContentId);this.contentContainer=$("#"+a.ContentContainerId);this.loader=new f(a);this.attachCloseHandlers();$(window).on("beforeunload",function(){b.viewer.is(":visible")&&
b.close()})}b.prototype.open=function(a){this.icon.attr("src",a.iconUrl);this.title.text(a.title);this.viewer.show();this.contentElement=a.contentElement;this.hideScrollbar();this.loadContent(a);c.CommonFunctions.makePostMessageCall(window,new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.enableFullScreen))};b.prototype.attachCloseHandlers=function(){$("#"+this.settings.CloseButtonId).on("click",this.onCloseClick);$(document).keydown(this.onKeyDown)};b.prototype.close=
function(){null!=this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null);this.viewer.hide();this.restoreScrollbar();this.contentElement=null;c.CommonFunctions.makePostMessageCall(window,new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.disableFullScreen))};b.prototype.hideScrollbar=function(){$("body").addClass(c.CommonCssClasses.FullScreenViewer.Opened);this.contentElement&&this.contentElement.addClass(c.CommonCssClasses.FullScreenViewer.ContentElement)};
b.prototype.restoreScrollbar=function(){$("body").removeClass(c.CommonCssClasses.FullScreenViewer.Opened);this.contentElement&&this.contentElement.removeClass(c.CommonCssClasses.FullScreenViewer.ContentElement)};b.prototype.loadContent=function(a){a.contentElement?this.enableHeaderOnlyMode():a.contentUrl?this.loadContentFromUrl(a.contentUrl):this.loader.showError()};b.prototype.enableHeaderOnlyMode=function(){this.viewer.addClass(c.CommonCssClasses.FullScreenViewer.HeaderOnly)};b.prototype.loadContentFromUrl=
function(a){var b=this;this.viewer.removeClass(c.CommonCssClasses.FullScreenViewer.HeaderOnly);this.contentContainer.hide();this.loader.showLoader();this.currentRequest=$.get(a).done(function(a){b.loader.hide();b.contentContainer.html(a);b.contentContainer.show();b.currentRequest=null}).fail(function(){b.loader.showError();b.currentRequest=null})};return b}();c.FullScreenViewer=e;var f=function(){function b(a){this.settings=a;this.container=$("#"+a.LoaderId);this.loadingWheel=this.container.find("> .ccl-ajaxloadingwheel");
this.status=this.container.find("> .ccl-full-screen-viewer-content-loader-status")}b.prototype.showLoader=function(){var a=this;this.container.show();this.loadingWheel.show();this.status.css("visibility","hidden");this.status.text(this.settings.LoadingInProgressText);clearTimeout(this.timer);this.timer=setTimeout(function(){a.status.css("visibility","visible")},3E3)};b.prototype.showError=function(){this.container.show();this.loadingWheel.hide();this.status.text(this.settings.LoadingErrorText);this.status.css("visibility",
"visible");clearTimeout(this.timer)};b.prototype.hide=function(){this.container.hide();this.loadingWheel.hide();this.status.css("visibility","hidden");clearTimeout(this.timer)};return b}()})(CCL||(CCL={}));
(function(c){var e=function(){function c(){}c.setMaxLength=function(b,a){var d=this;b.attr("maxlength",a);b.on("input change",function(){return d.ensureTextIsShorterThanMaxLength(b,a)})};c.ensureTextIsShorterThanMaxLength=function(b,a){var d=b.val();a=d.replace(/(\r\n|\n|\r)/g,"  ").length-a;0<a&&(d=d.slice(0,-a),b.val(d))};return c}();c.TextAreaExtensions=e})(CCL||(CCL={}));
(function(c){var e=function(){function e(b){this.settings=b;this.numberOfTries=0;b&&this.pingInTimeout(b.intervalInSeconds)}e.prototype.pingInTimeout=function(b){var a=this;setTimeout(function(){a.ping()},1E3*b)};e.prototype.ping=function(){var b=this;this.settings&&this.settings.webMethodUrl&&$.ajax({type:"POST",data:this.settings.postData,url:this.settings.webMethodUrl,contentType:"application/json; charset=utf-8"}).done(function(a,d){if(d&&(a=d.hasOwnProperty("d")?d.d:d,a.ErrorCode&&0>a.ErrorCode&&
a.StopPolling&&!0===a.StopPolling))return;b.numberOfTries=0;b.pingInTimeout(b.settings.intervalInSeconds)}).fail(function(a){a.status===c.CommonConstants.httpStatusCodes.unauthorized?$(document).trigger(e.unauthorisedEventName):(b.numberOfTries++,b.numberOfTries<b.settings.maxNumberOfTries&&b.pingInTimeout(b.settings.errorTimeoutInSeconds*b.numberOfTries))})};e.unauthorisedEventName="keepalive:unauthorised";return e}();c.KeepAlive=e})(CCL||(CCL={}));
(function(c){var e=function(){function c(b){this.ogpImageMaxWidthForCompactView=150;this.ogpImageMaxHeight=200;this.ogpImageMaxHeightForCompactView=350;this.settings=b}c.prototype.loadImage=function(b,a,d,c){var e=this;a&&d&&b&&c||(b=$("#"+this.settings.PlaceholderId),a=b.find("."+this.settings.CssClasses.EmbedOgpContainer),d=a.find("."+this.settings.CssClasses.EmbedOgpImagePreview),c=d.find("img"));if(0!==c.length){c.removeAttr("width height");var f=new Image;$(f).one("load",function(){var b=f.width,
g=f.height,h=g>e.ogpImageMaxHeight?b*e.ogpImageMaxHeight/g:b,k=Math.min(g,e.ogpImageMaxHeight);e.settings.IgnoreImageDimensions&&h<k||h<=e.ogpImageMaxWidthForCompactView?(b=e.calculateSize(b,g,e.ogpImageMaxWidthForCompactView,e.ogpImageMaxHeightForCompactView),g=b.height+"px",d.css({width:b.width+"px",height:g,position:"absolute"}).addClass(e.settings.CssClasses.AlignVertically),a.find("."+e.settings.CssClasses.EmbedOgpTextContainer).css("margin-left",b.width+10+"px"),a.css({position:"relative","min-height":g})):
(d.css({height:"auto","max-height":e.ogpImageMaxHeight+"px"}),c.css({"max-height":e.ogpImageMaxHeight+"px"}));c.addClass(e.settings.CssClasses.EmbedOgpImage)});var g=function(){c.on("load",function(){f.src=c.prop("src")})};c.attr("src")?$("<img/>").on("load",function(){f.src=c.prop("src")}).on("error",function(){g()}).attr("src",c.attr("src")):g()}};c.prototype.calculateSize=function(b,a,d,c){if(b<=d&&a<=c)return{width:b,height:a};b*=c;a*=d;var e=Math.max(b,a);return{width:Math.max(1,Math.min(d,Math.floor(b*
d/e))),height:Math.max(1,Math.min(c,Math.floor(a*c/e)))}};return c}();c.OgpImageLoader=e})(CCL||(CCL={}));
(function(c){var e=function(){function b(){}b.auto=0;b.centerBottom=1;b.centerCenter=2;b.rightBottom=3;b.rightCenter=4;b.bottomLeft=5;b.leftTop=6;return b}(),f=function(){function b(a,b){var d=this;this.blockHighlightZone=this.closedThroughX=this.gotItClicked=!1;this.resizeHandler=function(){d.isOpen&&d.$mask&&d.isMobileView()&&(d.removeMask(),$(d.onboardingDialog.mainContainer).fadeTo(500,0,function(){d.closeContainer()}),$(window).off("resize",d.resizeHandler))};this.clickOutsideHandler=function(a){0===
$(a.target).closest("."+d.settings.DialogCssClass).length&&d.closeDialog(!1,!1)};this.$container=a;this.settings=b;window[this.settings.DialogClientId]=this;this.addGotItClickHandler(a.find("."+b.CloseButtonCssClass));this.onboardingDialog=new ContextDialog("#"+this.$container[0].id,{footerContent:this.settings.FooterClientId,closeWithOutsideClick:!1,allowAccessToParentWindow:!1,showArrow:this.settings.ShowArrow,cssClass:this.settings.DialogCssClass,zIndex:this.settings.ZIndex,closeCssClass:this.settings.CloseLinkCssClass,
marginTop:0,marginBottom:0,marginLeft:0,marginRight:0});this.onboardingDialog.toggleCloseLink(this.settings.ShowCloseLink);this.onboardingDialog.hideHeader();this.closeContainer=this.onboardingDialog.closeDialog;this.onboardingDialog.setCloseFunction(function(){d.closeDialog(!1)});this.onboardingDialog.setCloseLinkFunction(function(){d.closeDialog(!0)});this.onboardingDialog.onEscape=function(){};this.settings.StartOpened&&this.openDialog()}b.prototype.openDialog=function(a){var b=this;"undefined"===
typeof a&&(a=null);if(this.settings.AllowMobileView||!this.isMobileView())if(this._closeCallback=a,!this.isOpen){var f=$(this.settings.TargetSelector);if(f[0]){this.isOpen=!0;this.settings.ShowMask&&(this.createMask(),$(window).on("resize",this.resizeHandler));if(this.settings.CloseAfterClickOutside)$(document).on("click "+c.CommonTriggers.clickInInnerFrame,this.clickOutsideHandler);this.closedThroughX=this.gotItClicked=!1;this.settings.PutAfterElementInDomSelector&&(a=$(this.settings.PutAfterElementInDomSelector),
a[0]&&$(a[0]).after(this.onboardingDialog.mainContainer));this.onboardingDialog.openDialogAt(0,0);$(this.onboardingDialog.mainContainer).removeAttr("style").css("opacity",0).css("display","block").css("z-index",this.settings.ZIndex).css("max-width",this.settings.MaxWidth);this.settings.Alignment===e.centerBottom?($(this.onboardingDialog.mainContainer).addClass("bottom"),this.positionMainContainer(f,"center top+15","center bottom","fit"),this.positionArrowContainer(f,"center top","center top")):this.settings.Alignment===
e.rightCenter?($(this.onboardingDialog.mainContainer).addClass("right"),this.positionMainContainer(f,"left+15 top","right top")):this.settings.Alignment===e.centerCenter?this.positionMainContainer(f,"center center","center center"):this.settings.Alignment===e.rightBottom?($(this.onboardingDialog.mainContainer).addClass("bottom"),this.positionMainContainer(f,"right top+15","right bottom","fit",function(a){$(b.onboardingDialog.mainContainer).css("top",a.top).css("left","auto").css("right",0)}),this.positionArrowContainer(f,
"center top","center top")):this.settings.Alignment===e.bottomLeft?($(this.onboardingDialog.mainContainer).addClass("bottom"),this.positionMainContainer(f,"left top+20","left bottom"),this.positionArrowContainer($(this.onboardingDialog.mainContainer),"center","center")):this.settings.Alignment===e.leftTop&&($(this.onboardingDialog.mainContainer).addClass("left"),this.positionMainContainer(f,"right-15 top","left top"));$(this.onboardingDialog.mainContainer).fadeTo(500,1);this.settings.ScrollIntoViewOnShow&&
$(this.onboardingDialog.mainContainer).get(0).scrollIntoView(!1);if(this.settings.RepositionArrowOnResize){var h=new c.CallbackThrottler(function(){b.positionArrowContainer(f,"center top","center top")});this.repositionArrowCallback=function(){h.invokeCallback(null,100)};$(window).resize(this.repositionArrowCallback)}this.settings.ExtraGotItSelector&&this.addGotItClickHandler($(this.settings.ExtraGotItSelector));$("body").keyup(this,this.onKeyup)}}};b.prototype.positionMainContainer=function(a,b,
c,e,f){"undefined"===typeof e&&(e="none");"undefined"===typeof f&&(f=null);$(this.onboardingDialog.mainContainer).position({of:a,my:b,at:c,collision:e,using:f})};b.prototype.positionArrowContainer=function(a,b,e){(c.CommonFunctions.isIosDevice()||c.CommonFunctions.isSafari())&&$(this.onboardingDialog.arrowContainer).css("left","1px");$(this.onboardingDialog.arrowContainer).position({of:a,my:b,at:e,collision:"none"})};b.prototype.closeDialog=function(a,b){var d=this;"undefined"===typeof a&&(a=!1);
"undefined"===typeof b&&(b=!0);$(window).off("resize",this.resizeHandler);this.settings.CloseAfterClickOutside&&$(document).off("click "+c.CommonTriggers.clickInInnerFrame,this.clickOutsideHandler);this.isOpen&&(this.isOpen=!1,a&&(this.closedThroughX=!0),this.settings.RegisterOnboardingCompletion&&b&&this.registerOnboardingCompletion(),this.settings.RepositionArrowOnResize&&$(window).off("resize",this.repositionArrowCallback),$("body").off("keyup",this.onKeyup),$(this.onboardingDialog.mainContainer).fadeTo(500,
0,function(){d.closeContainer()}),this.removeMask(),this._closeCallback&&this._closeCallback(a))};b.prototype.registerOnboardingCompletion=function(){var a=this.settings.OnboardingServiceUrl;a=a.replace("{featureId}",this.settings.OnboardingFeatureId.toString());$.ajax({url:a,type:"PUT"})};b.prototype.onKeyup=function(a){if(a.data.isOpen)switch(a.which){case c.CommonConstants.keyCodes.escape:a.stopImmediatePropagation(),a.data.closeDialog()}};b.prototype.addGotItClickHandler=function(a){var b=this;
a.on("click",function(){b.closeDialog();b.gotItClicked=!0})};b.prototype.createMask=function(){this.settings.HighlightInMaskSelector&&($(this.settings.HighlightInMaskSelector).css("z-index",this.settings.ZIndex),!0===this.blockHighlightZone?($(this.settings.HighlightInMaskSelector).css("pointer-events","none"),$(this.settings.HighlightInMaskSelector).addClass("ccl-onboarding-highlight-in-mask__clean-border")):$(this.settings.HighlightInMaskSelector).addClass("ccl-onboarding-highlight-in-mask"));var a=
$("body");this.settings.AppendMaskToSelector&&(a=$(this.settings.AppendMaskToSelector),a.css("overflow-y","hidden"));this.$mask=$("<div></div>").appendTo(a).addClass("ccl-onboarding-dialog-mask").css({opacity:"0",filter:"alpha(opacity=0)","z-index":this.settings.ZIndex-1});this.settings.AllowMobileView&&this.$mask.addClass("ccl-onboarding-dialog-mobile");this.$mask.fadeTo(400,1);a.addClass("il-has-onboarding-mask");window.top&&window!==window.top&&(c.CommonFunctions.makePostMessageCall(window.top,
new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.registerExtraNavBar)),c.CommonFunctions.makePostMessageCall(window.top,new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.maskNavigationBar)))};b.prototype.removeMask=function(){var a=this;this.$mask&&(this.settings.HighlightInMaskSelector&&($(this.settings.HighlightInMaskSelector).removeClass("ccl-onboarding-highlight-in-mask"),$(this.settings.HighlightInMaskSelector).css("z-index","")),!0===
this.blockHighlightZone&&($(".ccl-onboarding-highlight-in-mask__clean-border").css("pointer-events",""),$(this.settings.HighlightInMaskSelector).removeClass("ccl-onboarding-highlight-in-mask__clean-border")),this.settings.AppendMaskToSelector&&$(this.settings.AppendMaskToSelector).css("overflow-y",""),this.$mask.fadeTo(400,0,function(){a.$mask.parent().removeClass("il-has-onboarding-mask");a.$mask.remove();a.$mask=null}),window.top&&window!==window.top&&(c.CommonFunctions.makePostMessageCall(window.top,
new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.unregisterExtraNavBar)),c.CommonFunctions.makePostMessageCall(window.top,new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.unmaskNavigationBar))))};b.prototype.isMobileView=function(){return!c.CommonFunctions.checkScreenSize(c.CommonConstants.mediaScreenSizes.iPadPortraitMode,!0)};return b}();c.OnboardingDialog=f})(CCL||(CCL={}));
(function(c){(function(e){(function(e){var b=function(){function a(a,b,c,e){var d=this;this.handleFeatureState=function(a){if(1===a.type&&a.featureId===d.featureId)!0===a.IsCompleted?d.completedHandler():d.notCompletedHandler();else throw Error("Can't handle onboarding post message. Check correctness featureId and MessageType");};this.completedHandler=c;this.notCompletedHandler=e;this.listenPostMessageFrom=$(window);this.featureId=a;this.nextFeatureId=b;this.attachMessageHandlers()}a.prototype.attachMessageHandlers=
function(){c.CommonFunctions.attachPostMessageEventListener(this.listenPostMessageFrom,c.CommonWindowMessages.MessageNames.extensionOnboarding,this.handleFeatureState)};a.prototype.next=function(){var a=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.extensionOnboarding);c.CommonFunctions.makePostMessageCallWithData(window.parent,a,{featureId:this.nextFeatureId,type:2})};a.prototype.complete=function(a){"undefined"===typeof a&&(a=null);var b=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.extensionOnboarding),
d={type:3,features:[]};d.features.push(this.featureId);a&&Array.prototype.push.apply(d.features,a);c.CommonFunctions.makePostMessageCallWithData(window.parent,b,d)};a.prototype.start=function(){var a=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.extensionOnboarding);c.CommonFunctions.makePostMessageCallWithData(window.parent,a,{featureId:this.featureId,type:0})};a.prototype.overlay=function(a){a={type:a?4:5};var b=new c.CommonWindowMessages.GenericMessage(c.CommonWindowMessages.MessageNames.extensionOnboarding);
c.CommonFunctions.makePostMessageCallWithData(window.parent,b,a)};return a}();e.OnboardingPostMessageController=b})(e.Extensions||(e.Extensions={}))})(c.Onboarding||(c.Onboarding={}))})(CCL||(CCL={}));
(function(c){c=c.Onboarding||(c.Onboarding={});c=c.Extensions||(c.Extensions={});c=c.MessageType||(c.MessageType={});c[c.RequestFeatureState=0]="RequestFeatureState";c[c.ReceiveFeatureState=1]="ReceiveFeatureState";c[c.TriggerOnboardingFeature=2]="TriggerOnboardingFeature";c[c.CompleteFeature=3]="CompleteFeature";c[c.ShowOverlay=4]="ShowOverlay";c[c.HideOverlay=5]="HideOverlay"})(CCL||(CCL={}));
(function(c){c=c.Onboarding||(c.Onboarding={});c=c.Extensions||(c.Extensions={});c=c.OnboardingFeatures||(c.OnboardingFeatures={});c[c.AddElementToLibraryFromCourse=23]="AddElementToLibraryFromCourse";c[c.AssignmentEdit=27]="AssignmentEdit";c[c.AssignmentLearningToolOptions=28]="AssignmentLearningToolOptions";c[c.AssignmentReminders=29]="AssignmentReminders";c[c.AssignmentAddNote=34]="AssignmentAddNote";c[c.AssignmentGetStarted=35]="AssignmentGetStarted";c[c.AssignmentAnnotateAnswerFiles=36]="AssignmentAnnotateAnswerFiles"})(CCL||
(CCL={}));(function(c){var e={},f=function(){function b(a,b){"undefined"===typeof b&&(b="");this._elem=$("#"+a);this._eventsPrefix=b;e[a]=this}b.GetInstanceForElement=function(a){return e[a]};b.prototype.Trigger=function(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];this._elem.trigger(this._eventsPrefix+a,b)};return b}();c.DomElementClass=f})(CCL||(CCL={}));
(function(c){c.PickerEvent={Initialized:"PickerInitialized",Added:"PickerFilesAdded",Started:"PickerUploadStarted",Stopped:"PickerUploadStopped",ResultsChanged:"PickerResultsChanged",LoadingDependencyFailed:"LoadingDependencyFailed"};c.PickerDependencyLoadTimeoutInMs=3E4;var e=function(c){function b(a,b){c.call(this,a);this._settings=b}__extends(b,c);b.prototype.ToggleOkButton=function(a){$(".ccl-button-ok, .ccl-button-pause").each(function(){var b=$(this);a?(void 0===this.previouslyDisabled&&(b.attr("disabled")?
this.previouslyDisabled=!0:this.previouslyDisabled=!1),b.prop("disabled",a)):b.prop("disabled",this.previouslyDisabled)})};b.prototype.ClearResults=function(a){};b.prototype.AllowHide=function(){};b.prototype.isSecure=function(){return"https:"==window.location.protocol};b.prototype.trimStart=function(a,b){if(!a||0==a.length)return a;b=b?b:" ";for(var d=0;d<a.length&&a.charAt(d)==b;d++);return a.substring(d)};b.prototype.trimEnd=function(a,b){if(!a||0==a.length)return a;b=b?b:" ";for(var d=a.length-
1;0<=d&&a.charAt(d)==b;d--);return a.substring(0,d+1)};b.prototype.trim=function(a,b){return a&&0!=a.length?this.trimEnd(this.trimStart(a,b),b):a};return b}(c.DomElementClass);c.ItemPickerBase=e})(CCL||(CCL={}));
(function(c){var e=function(e){function b(a,b){e.call(this,a,b);this._stateHidden=$("#"+this._settings.StateHiddenFieldClientId);this._resultsTable=$("#"+this._settings.FileListTableClientId);this._fileListItemTemplate=$("#"+this._settings.FileListItemTemplateId).html();this.Init();this.Trigger(c.PickerEvent.Initialized);0<this.GetFiles().length&&this.Trigger(c.PickerEvent.ResultsChanged,{results:this.GetFiles()})}__extends(b,e);b.prototype.Init=function(){};b.prototype.getParameterValue=function(a,
b){for(var d=[],c=a.slice(a.indexOf("?")+1).split("&"),e=0;e<c.length;e++)a=c[e].split("="),d.push(a[0]),d[a[0]]=a[1];return d[b]};b.prototype.removeParameter=function(a,b){var d=a.split("#"),c=d[0].split("?");if(2<=c.length){a=c.shift();c=c.join("?");b=encodeURIComponent(b)+"=";c=c.split(/[&;]/g);for(var e=c.length;0<e--;)-1!==c[e].lastIndexOf(b,0)&&c.splice(e,1);a=a+"?"+c.join("&");d[1]&&(a+="#"+d[1])}return a};b.prototype.ReplaceUrlToken=function(a,b,c){var d="{"+b+"}";null!=c&&""!=c?-1!=a.indexOf(d)&&
(a=a.replace(d,c)):a=this.removeParameter(a,b);return a};b.prototype.ReplaceUrlTokens=function(a,b,c){a=this.ReplaceUrlToken(a,this._settings.FileRepoFileNameToken,encodeURIComponent(b));return a=this.ReplaceUrlToken(a,this._settings.FileRepoFileIdToken,encodeURIComponent(c))};b.prototype.GetFullFileRepoUrl=function(){return this.trimEnd(this._settings.FileRepoProxy,"/")};b.prototype.ProcessFileName=function(a){if(/^\.([^\.]+)$/.test(a)){var b=new Date,c=b.getFullYear(),e=b.getMonth()+1;e=10>e?"0"+
e.toString():e.toString();b=b.getDate();a=c+"-"+e+"-"+(10>b?"0"+b.toString():b.toString())+a}return a};b.prototype.GetFileRepoUrlForFileName=function(a){a=this.ReplaceUrlTokens(this.GetFullFileRepoUrl(),a,"");a+=-1<a.indexOf("?")?"&":"?";return a+="ts="+(new Date).getTime()};b.prototype.GetFileRepoUrl=function(a){a=this.ReplaceUrlTokens(this.GetFullFileRepoUrl(),"",a);a+=-1<a.indexOf("?")?"&":"?";return a+="ts="+(new Date).getTime()};b.prototype.ValidateSelectedFiles=function(a,b){for(var d=a.length-
1;0<=d;d--)null!=b&&0<b.length&&(-1===a[d].name.indexOf(".")||-1===$.inArray(a[d].name.split(".").pop().toLowerCase(),b))&&(a[d].error=this._settings.ErrorTextNotAllowedFileType),a[d].error||(0<this._settings.MaxNumberOfFiles&&d>=this._settings.MaxNumberOfFiles?a[d].error=this._settings.MaxNumberOfFilesExceededText:a[d].size>this._settings.MaxFileSize?a[d].error=this._settings.FileSizeExceededText:a[d].size<this._settings.MinFileSize&&(a[d].error=this._settings.FileSizeTooSmallText));this.SetFiles(a);
return a};b.prototype.SetFiles=function(a){this._stateHidden.val(JSON.stringify(a))};b.prototype.GetFiles=function(){return JSON.parse(this._stateHidden.val()||"[]")};b.prototype.UpdateFileList=function(a){var b=this;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);0===a.find(".error").length&&a.remove()});if(a.length){this._settings.ReadOnly||this._chooseButton.hide();for(var e=0;e<a.length;e++){var f=a[e],k=this._fileListItemTemplate.replace("{file.name}",c.CommonFunctions.htmlEncode(f.name)).replace("{file.bytes}",
c.Utils.FormatFileSize(f.size||0,this._settings.KbText,this._settings.MbText));k=$(k);var l=k.find("td.preview img");k.find("td.delete button").click(function(a){a=$(a.target).closest("tr");var d=a.find("td.name > span").text();b.RemoveFile(d,a);return!1});f.thumbnailUrl?l.attr("src",f.thumbnailUrl):l.attr("src",f.icon).attr("height","24").attr("width","24");this._resultsTable.append(k)}}else this._settings.ReadOnly||this._resultsTable.find("tbody").find("tr").length||this._chooseButton.show()};b.prototype.GetSelectedFile=
function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].name===a)return this._selectedFiles[b]};b.prototype.GetSelectedFileByFileId=function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].fileId===a)return this._selectedFiles[b]};b.prototype.RemoveSelectedFile=function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].name===a)return this._selectedFiles.splice(b,
1)[0]};b.prototype.RemoveSelectedFileByFileId=function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].id===a)return this._selectedFiles.splice(b,1)[0]};b.prototype.RemoveFile=function(a,b){for(var d=this.GetFiles(),e=0===b.siblings().length,f=d.length;f--;)if(d[f].name===a){d[f].deleteUrl&&$.ajax({url:d[f].deleteUrl+"&"+this._settings.MethodOverrideQueryStringParam+"=delete",type:"GET",xhrFields:{withCredentials:!0}});d.splice(f,1);break}d=this.ValidateSelectedFiles(d,
null);b.remove();this.RemoveSelectedFile(a);this.Trigger(c.PickerEvent.ResultsChanged,{results:d});a=!d.length&&!this._settings.MultiselectAllowed;e=e&&this._settings.MultiselectAllowed&&this.AllUploadsFinished();if(a||e)this._settings.ReadOnly||this._chooseButton.show(),this.HandleStopped({results:[]})};b.prototype.AllUploadsFinished=function(){var a=!0;this._selectedFiles&&this._selectedFiles.forEach(function(b){b.error||(a=!1)});return a};b.prototype.HandleStopped=function(a){this.stopPolling();
this.Trigger(c.PickerEvent.Stopped,a);this.ToggleOkButton(!1)};b.prototype.SetFileErrorText=function(a,b){a.error=b;this.SetFileStatusText(a,b);this.GetRowInResultsTableByText(a.name).find("td.status").addClass("error");this.GetRowInResultsTableByText(a.name).find("td.status span").addClass("label").addClass("label-important")};b.prototype.SetFileStatusText=function(a,b){this.GetRowInResultsTableByText(a.name).find("td.status > span").text(b)};b.prototype.UpdateFileSize=function(a){this.GetRowInResultsTableByText(a.name).find("td.size").text(c.Utils.FormatFileSize(a.size||
0,this._settings.KbText,this._settings.MbText))};b.prototype.UpdateFileName=function(a,b){for(var d=this.GetFiles(),c=d.length;c--;)if(d[c].name===b){d[c].name=a.name;break}this.SetFiles(d);this.GetFileNameElement(b).text(a.name)};b.prototype.GetRowInResultsTableByText=function(a){return this.GetFileNameElement(a).closest("tr")};b.prototype.GetFileNameElement=function(a){return this._resultsTable.find("td.name > span").filter(function(){return $(this).text()===a})};b.prototype.HandleRequestError=
function(){var a=this;this.stopPolling();this._selectedFiles.forEach(function(b){a.SetFileErrorText(b,a._settings.UploadErrorText)});this.HandleStopped({results:this._uploadedFiles})};b.prototype.HandleError=function(a){this.SetFileErrorText(a,this._settings.UploadErrorText);this.AllUploadsFinished()&&0<this._uploadedFiles.length&&this.HandleStopped({results:this._uploadedFiles})};b.prototype.CheckFileDownloadsComplete=function(){var a=this;if(!this._isPolling){this._isPolling=!0;var b=[],c=0;this._selectedFiles.forEach(function(a){!a.error&&
a.signedId&&a.isNew&&(b.push(a.signedId),c++)});if(1===b.length)var e=this.GetFileRepoUrl(b[0]);else if(1<=b.length){e=this.GetFileRepoUrl("batch");var f=b.join()}else this.CompleteFileDownloads();if(e){var l={};f&&(l[this._settings.FileRepoHeaderFileBatch]=f);$.ajax({url:e+"&"+this._settings.FileRepoInfoParam+"=true",type:"get",dataType:"json",headers:l,xhrFields:{withCredentials:!0},success:function(b){var d=!1;b?(b=[].concat(b),b.forEach(function(b){if(b&&b.status)if("DownloadCompleted"===b.status||
"Available"===b.status){var c=a.RemoveSelectedFileByFileId(b.fileId);c&&(c.id=b.fileId,c.signedId=b.signature,c.name=b.fileName,c.type=b.mimeType,c.size=b.fileSize,c.fileUrl=a.GetFileRepoUrl(b.signature),c.deleteUrl=a.GetFileRepoUrl(b.signature),a._uploadedFiles.push(c),a.SetFileStatusText(c,""))}else"Error"===b.status?(c=a.RemoveSelectedFileByFileId(b.fileId),a.SetFileErrorText(c,b.statusMessage)):"Downloading"===b.status&&(c=a.GetSelectedFile(b.fileName),a.SetFileStatusText(c,a._settings.FileIsBeingDownloadedText+
" "+b.statusProgress+"%"));else d=!0})):d=!0;d?a.HandleRequestError():a.AllUploadsFinished()?a.CompleteFileDownloads():a._checkFileDownloadsCompleteTask=setTimeout(function(){a._isPolling=!1;a.CheckFileDownloadsComplete()},1E3)},error:function(){a.HandleRequestError()}})}}};b.prototype.CompleteFileDownloads=function(){this.stopPolling();var a=this.ValidateSelectedFiles(this._uploadedFiles,null);this.UpdateFileList(a);this.Trigger(c.PickerEvent.ResultsChanged,{results:a});this.HandleStopped({results:a});
this._resultsTable.find("tbody").find("tr").length&&this._settings.MultiselectAllowed&&this.Trigger(c.PickerEvent.ResultsChanged,{results:[{}]})};b.prototype.StartUploadFiles=function(a){var b=this;this.ToggleOkButton(!0);this.Trigger(c.PickerEvent.Started);this.Trigger(c.PickerEvent.Added,{files:a});this._selectedFiles=a;this._uploadedFiles=[];var e=!1;this._selectedFiles.forEach(function(a){if(a.error)b.SetFileErrorText(a,a.error);else if(a.fileUrl){b.SetFileStatusText(a,b._settings.FileIsBeingDownloadedText+
" 0%");var d=b.GetFileRepoUrlForFileName(a.name);d+="&"+b._settings.FileRepoHeaderDownloadFrom+"=1";var c=b.buildDownloadRequestData(a);e=!0;$.ajax({url:d,type:"post",dataType:"json",data:c,xhrFields:{withCredentials:!0},success:function(d){d&&d.fileId&&d.signature?(a.id=d.fileId,a.signedId=d.signature,a.isNew=!0,b.CheckFileDownloadsComplete()):b.HandleError(a)},error:function(){b.HandleError(a)}})}});a&&a.length&&!e&&this._settings.MultiselectAllowed&&(this.SetFiles([]),this.HandleStopped({results:[]}),
this.Trigger(c.PickerEvent.ResultsChanged,{results:[{}]}))};b.prototype.buildDownloadRequestData=function(a){};b.prototype.AddAdditionalHeadersToDownloadFile=function(a,b){};b.prototype.ClearResults=function(a){if(a){var b=this.GetFiles();a.forEach(function(a){for(var d=b.length;d--;)if(b[d].id===a.id){b.splice(d,1);break}});this.SetFiles(b)}};b.prototype.stopPolling=function(){this._checkFileDownloadsCompleteTask&&clearTimeout(this._checkFileDownloadsCompleteTask);this._checkFileDownloadsCompleteTask=
null;this._isPolling=!1};return b}(c.ItemPickerBase);c.FilePickerBase=e})(CCL||(CCL={}));(function(c){var e=function(){function c(){}c.FormatFileSize=function(b,a,d){return 1048576<=b?(b/1048576).toFixed(2)+" "+d:(b/1024).toFixed(2)+" "+a};return c}();c.Utils=e})(CCL||(CCL={}));var Utils;
(function(c){var e=function(){return function(){this.newGuid=function(){function c(b){var a=(Math.random().toString(16)+"000000000").substr(2,8);return b?"-"+a.substr(0,4)+"-"+a.substr(4,4):a}return c()+c(!0)+c(!0)+c()}}}();c.GuidFactory=e;e=function(){return function(c){var b=this;this.value=c;this.getParamValue=function(a){for(var d=[],c=b.value.slice(b.value.indexOf("?")+1).split("&"),e=0;e<c.length;e++){var f=c[e].split("=");d.push(f[0]);d[f[0]]=f[1]}return d[a]};this.appendOrUpdateParam=function(a,
d){var c=new RegExp("([?&])"+a+"=.*?(&|$)","i"),e=-1!==b.value.indexOf("?")?"&":"?";b.value.match(c)?b.value=b.value.replace(c,"$1"+a+"="+d+"$2"):b.value=b.value+e+a+"="+d}}}();c.Url=e})(Utils||(Utils={}));var UrlUtilities=Utils;
(function(c){var e=function(e){function b(a,b){e.call(this,a,b);this.uploaderWindowWidth=660;this.uploaderWindowHeight=552;this.pickerWindow=null;this.oneDrivePickerActions={fileSelected:0}}__extends(b,e);b.prototype.Init=function(){var a=this;this._settings.ReadOnly||(window.addEventListener("message",function(b){if(b.origin===a._settings.PickerDomain&&b.data.isOneDriveForBusinessPickerResult&&b.data.action===a.oneDrivePickerActions.fileSelected)a.onFileSelected(b.data)}),this._chooseButton=$("#"+
this._settings.ButtonId),this._chooseButton.on("click",function(){a.pickerWindowIsAlreadyOpened()?a.pickerWindow.focus():a.pickerWindow=window.open(a.getPickerUrl(),"OneDrivePicker",a.getOnedriveFilePickerWindowSettings())}),this._elem.append(this._chooseButton));this.UpdateFileList(this.GetFiles())};b.prototype.getPickerUrl=function(){var a=new UrlUtilities.Url(this._settings.PickerUrl);a.appendOrUpdateParam("mode",encodeURIComponent(JSON.stringify({allowToSelectMultipleFiles:this._settings.MultiselectAllowed})));
return a.value};b.prototype.onFileSelected=function(a){if(!(this._elem.hasClass("disabled")||0<this._resultsTable.find("tr").length)){a=this.ConvertSelectedFiles(a);for(var b=a.length-1;0<=b;b--)a[b].name=this.ProcessFileName(a[b].name);this.ValidateSelectedFiles(a,null);this.UpdateFileList(a);0<a.length&&this.StartUploadFiles(a)}};b.prototype.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-this.uploaderWindowWidth)/2};b.prototype.getWindowTopCoordinate=function(){return(window.screenY+
window.outerHeight-this.uploaderWindowHeight)/2};b.prototype.getWindowPositionAndSizeSettingString=function(a,b){var d=this.getWindowLeftCoordinate(),c=this.getWindowTopCoordinate();return"width = "+a+", height = "+b+", left = "+d+", top = "+c};b.prototype.getOnedriveFilePickerWindowSettings=function(){return this.getWindowPositionAndSizeSettingString(this.uploaderWindowWidth,this.uploaderWindowHeight)+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};b.prototype.pickerWindowIsAlreadyOpened=
function(){return this.pickerWindow&&!this.pickerWindow.closed};b.prototype.ConvertSelectedFiles=function(a){var b=this,c=a.files;return c?$.map(c,function(d,c){return{name:d.name,size:d.size,thumbnailUrl:b._settings.DefaultThumbnailUrl,fileUrl:d.url,icon:b._settings.DefaultThumbnailUrl,authToken:a.authToken}}):[]};b.prototype.ClearResults=function(a){var b=!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(b=
!1,a.addClass("clearme"))});b&&this._chooseButton.show();e.prototype.ClearResults.call(this,a);this.Trigger(c.PickerEvent.ResultsChanged,{results:[]})};b.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};b.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoHeaderDownloadFrom+"="+encodeURIComponent(a.fileUrl)+"&"+this._settings.FileRepoHeaderSourceType+"="+this._settings.SourceType+"&"+this._settings.FileRepoFileSizeParam+
"="+a.size};return b}(c.FilePickerBase);c.OneDrivePicker=e})(CCL||(CCL={}));
(function(c){var e=function(){return function(){}}();c.OptionCheckboxState=e;var f=function(){function b(){}b.stateChanged="ifChanged";b.toggled="ifToggled";return b}();e=function(){function b(a,b){var d=this;this.temprorarySuppressCheckboxEvents=!1;window[a]=this;this._settings=b;$(document).ready(function(){d._settings.ContainerId&&(d.$container=$("#"+d._settings.ContainerId));d.$checkbox=$("#"+d._settings.CheckboxId);d.$checkbox.iCheck({checkboxClass:d._settings.CheckboxCssClass});d.$checkbox.off(f.stateChanged).on(f.stateChanged,
function(a){d.temprorarySuppressCheckboxEvents||b.StateChangedEventName&&d.$checkbox.trigger(b.StateChangedEventName,d.getState())});d.$checkbox.off(f.toggled).on(f.toggled,function(a){b.ToggledEventName&&d.$checkbox.trigger(b.ToggledEventName)});d.$checkbox.on(d._settings.StateChangedEventName,function(a){if(d.onChangeCallBack)d.onChangeCallBack(a,d.getState())})})}b.prototype.toggle=function(a){this.$checkbox.prop("checked")&&a||this.$checkbox.iCheck(a?"check":"uncheck")};b.prototype.toggleWithSuppressEvents=
function(a){this.temprorarySuppressCheckboxEvents=!0;this.toggle(a);this.temprorarySuppressCheckboxEvents=!1};b.prototype.enable=function(a){this.$checkbox.iCheck(a?"enable":"disable")};b.prototype.getState=function(){var a={};a.Checked=this.$checkbox.prop("checked");a.Enabled=!this.$checkbox.prop("disabled");return a};b.prototype.isChecked=function(){return this.$checkbox.prop("checked")};b.prototype.setOnChangeCallback=function(a){this.onChangeCallBack=a};b.prototype.ontoggle=function(a){this.$checkbox.on(this._settings.ToggledEventName,
a)};b.prototype.show=function(){this.$container&&this.$container.show()};b.prototype.hide=function(){this.$container&&this.$container.hide()};b.prototype.isVisible=function(){return this.$container.is(":visible")};b.prototype.isEnabled=function(){return this.$checkbox.getIfHyperLinkEnabled()};b.prototype.getContainer=function(){return this.$container};return b}();c.OptionCheckbox=e})(CCL||(CCL={}));
(function(c){var e=function(){function a(){}a.show="overlayModal:show";a.hide="overlayModal:hide";return a}();c.OverlayModalEvents=e;var f=function(){return function(){}}();c.OverlayModalCloseContext=f;var b=function(){function b(a,d,c){this.id=a;this.controls=c;this._$document=$(document);this._$window=$(window);this.Params={};a=c.container.data(b.settingsAttribute)||{IsIos:!1,ResizeTimeoutInMilliseconds:10};"string"===typeof d?this._settings={}:$.extend(a,d);this._settings=a;this.Params.Url=this._settings.Url;
this._contentLoader=this.GetContentLoader(this._settings.Mode);this.initialize(c);this._activeElement=c.container.get(0);this._settings.PreferredWidth=this._settings.PreferredWidth||800;this.renderHeader();c.container.data(b.settingsAttribute,this._settings)}b.prototype.renderHeader=function(){if(this._settings.Title){this.controls.container.find("."+c.OverlayModal.CssClasses.Header).length||(this._titleTemplate="<div class='"+c.OverlayModal.CssClasses.Header+"'><h2>"+(this._settings.Title||"")+'</h2><a class="'+
c.OverlayModal.CssClasses.Close+'">Close</a></div>',this.controls.contentContainer.before($(this._titleTemplate)));var a=this.controls.container.find("."+c.OverlayModal.CssClasses.Close);a.off("click");a.click(function(){this.close(1)}.bind(this))}};b.prototype.setParams=function(a){a&&$.extend(this.Params,a)};b.prototype.setContentMinSize=function(a,b){this._settings.MinContentWidth=a;this._settings.MinContentHeight=b;this.adjustWindowSize()};b.prototype.setPreferredSize=function(a,b){0<a&&(this._settings.PreferredWidth=
a);0<b&&(this._settings.PreferredHeight=b);this.adjustWindowSize()};b.prototype.clearContent=function(){this.controls.contentContainer.empty()};b.prototype.getId=function(){return this.id};b.prototype.onModalKeyUp=function(a){a.which===c.CommonConstants.keyCodes.escape&&c.OverlayModal.instance&&c.OverlayModal.instance.close(2)};b.prototype.initialize=function(a){this._$document.on("keyup",this.onModalKeyUp);this._$window.on("resize",this.adjustWindowSizeWithTimeout.bind(this));this._activeElement=
this.controls.container.get(0);if(this._contentLoader)this._contentLoader.onInit(this.controls.contentContainer,this.adjustWindowSize.bind(this),this.Params);null==navigator.userAgent.match(/iPod/)&&$(this.controls.contentContainer).perfectScrollbar({suppressScrollX:!0})};b.prototype.getIsOpened=function(){return this._isOpened};b.prototype.adjustWindowSizeWithTimeout=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=setTimeout(this.adjustWindowSize.bind(this),this._settings.ResizeTimeoutInMilliseconds)};
b.prototype.adjustWindowSize=function(){var a=this._settings,b=this.controls;this.controls.wrapperContainer.removeAttr("style");this.controls.contentContainer.removeAttr("style");var d=0;b.wrapperContainer.children().not(b.contentContainer).each(function(){d+=$(this).outerHeight()});if(this._$window.width()>c.CommonConstants.mediaScreenSizes.mobile){a.PreferredWidth&&0<a.PreferredWidth&&b.wrapperContainer.width(Math.min(a.PreferredWidth,this._$window.width()-40));var e=b.contentContainer.outerHeight(!0)-
b.contentContainer.height();if(a.PreferredHeight&&0<a.PreferredHeight){var f=b.wrapperContainer.outerHeight()-b.contentContainer.height();b.contentContainer.outerHeight(a.PreferredHeight-f+e,!0)}else b.contentContainer.height(b.wrapperContainer.outerHeight()-d-e);b.contentContainer.css({width:a.MinContentWidth&&0<a.MinContentWidth?a.MinContentWidth:void 0,minWidth:a.MinContentWidth&&0<a.MinContentWidth?a.MinContentWidth:void 0,minHeight:a.MinContentHeight&&0<a.MinContentHeight?a.MinContentHeight:
void 0});a=b.wrapperContainer.outerHeight()-b.headerContainer.outerHeight();b.contentContainer.outerHeight()-1>a&&b.contentContainer.outerHeight(a);a=b.wrapperContainer.height()/2;e=b.wrapperContainer.width()/2;b.wrapperContainer.css({left:"50%","margin-left":-1*e,"margin-top":-1*a,top:"50%"})}else b.contentContainer.outerHeight(b.wrapperContainer.height()-d);null==navigator.userAgent.match(/iPod/)&&$(b.contentContainer).perfectScrollbar("update")};b.prototype.toggleContentAreaFrame=function(a){c.CommonFunctions.makePostMessageCall(window.top,
new c.CommonWindowMessages.GenericMessage(a?c.CommonWindowMessages.MessageNames.expandContentAreaFrame:c.CommonWindowMessages.MessageNames.collapseContentAreaFrame));IframeResizer.reportSetIframeDefaultHeight()};b.prototype.open=function(){b.instance=this;this.toggleContentAreaFrame(!0);!this._isOpened&&this._settings.IsTopFrame&&(this.adjustWindowSize(),this.openModal())};b.prototype.openModal=function(){var a=this.controls;this._activeElement&&$(this._activeElement).removeClass(c.OverlayModal.CssClasses.IsActive);
if(this._contentLoader)this._contentLoader.onOpen(this.controls.contentContainer,this.adjustWindowSize.bind(this),this.Params);else this.adjustWindowSizeWithTimeout();this._lastWindowScroll=this._$window.scrollTop();$("html").addClass(c.OverlayModal.CssClasses.Overlay);this.controls.container.addClass(c.OverlayModal.CssClasses.IsActive);this.setFocus();this._$document.trigger(c.OverlayModalEvents.show,[this._activeElement,this.id]);a.contentContainer.toggleClass(c.OverlayModal.CssClasses.WebkitOverflow)};
b.prototype.close=function(a){if(b.instance){a||(a=0);b.instance=null;this.controls.contentContainer.removeClass(c.OverlayModal.CssClasses.WebkitOverflow);this._$window.scrollTop(this._lastWindowScroll);$("html").removeClass(c.OverlayModal.CssClasses.Overlay);if(this._activeElement){$(this._activeElement).removeClass(c.OverlayModal.CssClasses.IsActive);var d=new f;d.closeType=a;d.activeElement=this._activeElement;d.id=this.id;this._$document.trigger(c.OverlayModalEvents.hide,d);this._activeElement=
null}this.toggleContentAreaFrame(!1);this.removeFocus();this._$document.off("keyup",this.onModalKeyUp)}};b.prototype.setFocus=function(){this._activeElement&&(this._lastActive=document.activeElement,this._activeElement.focus())};b.prototype.removeFocus=function(){this._lastActive&&this._lastActive.focus()};b.prototype.GetContentLoader=function(b){var d;1==b&&(d=new a);return d};b.settingsAttribute="settings";b.CssClasses={Container:"ccl-overlay-modal",IsActive:"is-active",WebkitOverflow:"ccl-modal-webkit-overflow",
Content:"ccl-overlay-modal-content",Wrapper:"ccl-overlay-modal-wrapper",Overlay:"ccl-overlay-modal-has-overlay",OverlayIos:"ccl-overlay-modal-has-overlay-ios",Close:"ccl-overlay-modal-close",Header:"ccl-overlay-modal-header"};return b}();c.OverlayModal=b;e=function(){function a(){}a.prototype.onInit=function(a,b,d){};a.prototype.onOpen=function(a,b,d){};return a}();c.BaseContentLoader=e;var a=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.onInit=function(a,b,d){d&&d.Url&&
$.ajax({type:"POST",url:d.Url,data:d,success:function(d){a.html($(d).text());b()},error:function(a,b,d){alert(d)}})};return b}(e);c.StaticAjaxContentLoader=a;(function(a){a[a.FunctionExecuted=0]="FunctionExecuted";a[a.CloseButtonClicked=1]="CloseButtonClicked";a[a.EscapeKeyPressed=2]="EscapeKeyPressed"})(c.OverlayModalCloseType||(c.OverlayModalCloseType={}));e=function(){function a(){c.CommonFunctions.attachPostMessageEventListener($(window),[c.CommonWindowMessages.MessageNames.contentAreaFrameHasExpanded],
function(a){c.OverlayModal.instance&&!c.OverlayModal.instance.getIsOpened()&&setTimeout(c.OverlayModal.instance.openModal(),20)})}a._initEventListener=new a;return a}();c.OverlayModalListener=e;(function(a){a.fn.overlayModal=function(d,c){var e={container:this,contentContainer:this.find("."+b.CssClasses.Content),wrapperContainer:this.find("."+b.CssClasses.Wrapper),headerContainer:this.find("."+b.CssClasses.Header)};d instanceof Object&&a.extend(void 0,d);e=new b(e.container.get(0).id,d,e);e.Params=
c;switch(d){case "open":e.open();break;case "close":e.close()}return this}})(jQuery)})(CCL||(CCL={}));var PopupInitFailureReason;(function(c){c[c.BrowserNotSupported=1]="BrowserNotSupported";c[c.ExternalServiceNotAvailable=2]="ExternalServiceNotAvailable"})(PopupInitFailureReason||(PopupInitFailureReason={}));
var PopupInitFailureEventArgs=function(){return function(c,e){this.failureReason=c;this.translation=e}}(),PopupCallback=function(){return function(c,e){this.onMessageReceived=c;this.onPopupClosed=e}}(),Popup=function(){function c(e,f){var b=this;this.settings=e;this.browserSniffer=f;this.popupWidth=660;this.popupHeight=552;this.popupWindow=null;this.subscriberCallbacks=[];this.windowOpenCheckIntervalInMilliseconds=1E3;this.open=function(){b.popupWindowIsAlreadyOpened()?b.popupWindow.focus():(b.popupWindow=
window.open(b.getPopupUrlWithTarget(),b.getInitialPopupTitle(),b.getPopupWindowSettings()),b.timerForCheckingOpenWindow=setInterval(b.notifyIfWindowWasClosed,b.windowOpenCheckIntervalInMilliseconds))};this.subscribe=function(a){b.subscriberCallbacks.push(a)};this.popupWindowIsAlreadyOpened=function(){return b.popupWindow&&!b.popupWindow.closed};this.getPopupUrlWithTarget=function(){var a=new Utils.Url(b.getPopupUrl());if(a.getParamValue(c.target))throw"You cannot set query parameter: ["+c.target+
"] in popupUrl.";a.appendOrUpdateParam(c.target,encodeURI(b.popupIdentifier));return a.value};this.listenForPostMessages=function(){window.addEventListener("message",b.onPostMessageReceived)};this.getPopupWindowSettings=function(){var a=b.getPopupCoordinates();return"width="+a[0]+", height="+a[1]+", left="+a[2]+", top="+a[3]+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};this.getPopupCoordinates=function(){return[b.popupWidth,b.popupHeight,b.getWindowLeftCoordinate(),
b.getWindowTopCoordinate()]};this.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-b.popupWidth)/2};this.getWindowTopCoordinate=function(){return(window.screenY+window.outerHeight-b.popupHeight)/2};this.isProxyIframeRequired=function(){return b.settings.crossCommunicationProxyUrl&&b.browserSniffer.isInternetExplorerAnyVersion()};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("cross_communication_proxy")){var a=b.prepareIframe("cross_communication_proxy");
document.body.appendChild(a)}};this.prepareIframe=function(a){var d=document.createElement("iframe");d.id=a;d.style.display="none";d.src=b.settings.crossCommunicationProxyUrl;return d};this.notifyIfWindowWasClosed=function(){b.popupWindow&&b.popupWindow.closed&&(b.timerForCheckingOpenWindow=clearInterval(b.timerForCheckingOpenWindow),b.popupWindow=null,b.notifyAboutClosing())};this.notifyAboutClosing=function(){for(var a=0;a<b.subscriberCallbacks.length;a++){var d=b.subscriberCallbacks[a];if(d.onPopupClosed)d.onPopupClosed()}};
this.onPostMessageReceived=function(a){b.isPostMessageForUs(a)&&b.processPostMessage(a)};this.isPostMessageForUs=function(a){return a&&a.origin===b.settings.popupDomain&&a.data&&a.data[c.target]===b.popupIdentifier};this.popupIdentifier=(new Utils.GuidFactory).newGuid();if(objectState.isNullOrUndefined(this.settings))throw"Popup requires settings to be passed. Please provide them.";if(objectState.isNullOrUndefined(this.browserSniffer))throw"Popup requires browserSniffer to be passed. Please provide it.";
this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered();this.listenForPostMessages()}c.prototype.getPopupUrl=function(){return this.settings.popupUrl};c.prototype.getInitialPopupTitle=function(){return"Title"};c.prototype.processPostMessage=function(c){for(var e=0;e<this.subscriberCallbacks.length;e++){var b=this.subscriberCallbacks[e];if(b.onMessageReceived)b.onMessageReceived(c.data)}};c.target="target";return c}();
(function(c){var e=function(){function c(){this.lastPromise=$.Deferred().resolve()}c.prototype.enqueue=function(b){var a=$.Deferred();this.lastPromise.always(function(){b().always(function(){a.resolve()})});this.lastPromise=a};return c}();c.PromiseQueue=e})(CCL||(CCL={}));
(function(c){(function(c){c.toDate=function(c){return c?new Date(c.Year,c.Month-1,c.Day,c.Hour,c.Minute):void 0};c.toDateWithSeconds=function(c){return c?new Date(c.Year,c.Month-1,c.Day,c.Hour,c.Minute,c.Second):void 0};c.fromDate=function(c){return c?{Year:c.getFullYear(),Month:c.getMonth()+1,Day:c.getDate(),Hour:c.getHours(),Minute:c.getMinutes()}:void 0};c.fromDateWithSeconds=function(c){return c?{Year:c.getFullYear(),Month:c.getMonth()+1,Day:c.getDate(),Hour:c.getHours(),Minute:c.getMinutes(),
Second:c.getSeconds()}:void 0}})(c.SerializableDateTimeConverter||(c.SerializableDateTimeConverter={}))})(CCL||(CCL={}));
(function(c){var e=function(){function e(b,a){this._id=b;this._settings=a}e.prototype.toggleContentAreaFrame=function(b){c.CommonFunctions.makePostMessageCall(window.top,new c.CommonWindowMessages.GenericMessage(b?c.CommonWindowMessages.MessageNames.expandContentAreaFrame:c.CommonWindowMessages.MessageNames.collapseContentAreaFrame));IframeResizer.reportSetIframeDefaultHeight()};e.prototype.init=function(){this._settings.OpenOnClick&&this.fancyboxInit();this.imageClickInit();this.slideshowInit()};
e.prototype.fancyboxInit=function(){var b=this;$("#ad-gallery_"+b._id).on("click",".ad-image",function(){var a=$(this).find("img").attr("src"),c=null,e=null;a.split("/");if($(this).parent().find(".ad-image-description")){c=$(this).parent().find(".ad-description-title");var f=c.text();c&&(c=c.html());""!=f&&(c="<big>"+c+"</big>");e=$(this).parent().find(".ad-image-description span");var k=e.text();e&&(e=e.html());e&&0<=e.indexOf("IMAGE_LINK_")&&(k=e="");""!=k&&(""!=f&&(c+="<br>"),e="<i>"+e+"</i>")}$.fancybox.open({href:a,
beforeLoad:function(){b.toggleContentAreaFrame(!0);this.title=b._settings.ShowTitle?(c||"")+(e||""):""},beforeClose:function(){b.toggleContentAreaFrame(!1)},lang:{error_request_cannot_be_loaded:b._settings.Terms.FancyboxErrorRequestCannotBeLoaded,error_try_again_later:b._settings.Terms.FancyboxErrorTryAgainLater,close:b._settings.Terms.FancyboxClose,next:b._settings.Terms.FancyboxNext,previous:b._settings.Terms.FancyboxPrevious,start_slideshow:b._settings.Terms.FancyboxStartSlideshow,toggle_size:b._settings.Terms.FancyboxToggleSize,
pause_slideshow:b._settings.Terms.FancyboxPauseSlideshow}})})};e.prototype.imageClickInit=function(){$("#ad-gallery_"+this._id).on("click",".ad-image",function(){$(this).find("img").attr("src");var b;if($(this).find(".ad-image-description")&&((b=$(this).find(".ad-description-title"))&&b.text(),(b=$(this).find("span"))&&(b=b.text()),""!=b)){var a=window.location.href.trim();0<=b.indexOf("IMAGE_LINK_TAB:")?(b=b.substring(15).trim(),a!=b&&window.open(b,"_blank")):0<=b.indexOf("IMAGE_LINK_PAR:")&&(b=
b.substring(15).trim(),a!=b&&window.open(b,"_self"))}})};e.prototype.slideshowInit=function(){$("#ad-gallery_"+this._id).adGallery({loader_image:this._settings.LoaderImageUrl,width:this._settings.Width,height:this._settings.Hight,start_at_index:this._settings.StartAtIndex,animation_speed:this._settings.AnimationSpeed,update_window_hash:this._settings.UpdateWindowHash,hooks:{displayDescription:this._settings.ShowTitle?null:function(b){b.css("display","none")}},effect:this._settings.TransitionType,
slideshow:{enable:this._settings.Enable,autostart:this._settings.Autostart,start_label:this._settings.Terms.StartLabel,stop_label:this._settings.Terms.StopLabel,speed:this._settings.Speed}})};return e}();c.Slideshow=e})(CCL||(CCL={}));
(function(c){var e=function(e){function b(a,b){e.call(this,a);this.collapsedDataAttribute="data-collapsed";this.scrollTopAnimationTimeMilliseconds=200;this.settings=b}__extends(b,e);b.prototype.renderShowMoreTextSection=function(a,b,e,f){var d=this;0<this.settings.MaxTextHeight&&0<this.settings.CollapsedTextHeight&&setTimeout(function(){var g=d.settings.CollapsedTextHeight;if(d.hasEnoughHeightForRenderingShowMore(e)){a.addClass(d.settings.CssClasses.Container).empty();d.addLineToShowMoreTextSection(a);
var h=$('<a href="#">').click(function(f){d.expandText({clickablePlaceholder:a,link:h,collapsibleContainer:b,collapseHeight:g,collapse:!d.isCollapsed(a),contentPanel:e});c.CommonFunctions.isOnScreen(b,1,1)||(d.settings.EnableAnimation?$("html, body").animate({scrollTop:b.offset().top},d.scrollTopAnimationTimeMilliseconds):$("html, body").scrollTop(b.offset().top));f.preventDefault()}).appendTo(a);d.expandText({clickablePlaceholder:a,link:h,collapsibleContainer:b,collapseHeight:g,collapse:!f,contentPanel:e});
a.show()}else a.hide(),b.css("max-height","");e.show()})};b.prototype.hasEnoughHeightForRenderingShowMore=function(a){return a.height()>this.settings.MaxTextHeight};b.prototype.expand=function(a,b){a.css("max-height","");b.removeAttr(this.collapsedDataAttribute);b.find("a").text(this.settings.Resources.ShowLess)};b.prototype.isCollapsed=function(a){return!!a.attr(this.collapsedDataAttribute)};b.prototype.addLineToShowMoreTextSection=function(a){a.append($("<span>").addClass(this.settings.CssClasses.Line)).append($("<span>").addClass(this.settings.CssClasses.Line)).append($("<div>").addClass(this.settings.CssClasses.ClearFix))};
b.prototype.expandText=function(a){a.collapse?(a.clickablePlaceholder.attr(this.collapsedDataAttribute,1),a.link.text(this.settings.Resources.ShowMore)):(a.clickablePlaceholder.removeAttr(this.collapsedDataAttribute),a.link.text(this.settings.Resources.ShowLess));this.settings.EnableAnimation?a.collapsibleContainer.animate({"max-height":(a.collapse?a.collapseHeight:a.contentPanel.outerHeight())+"px"},{duration:this.scrollTopAnimationTimeMilliseconds,complete:a.collapse?void 0:function(){return a.collapsibleContainer.css("max-height",
"")}}):a.collapsibleContainer.css("max-height",a.collapse?a.collapseHeight+"px":"")};return b}(c.DomElementClass);c.TextExpander=e})(CCL||(CCL={}));
(function(c){var e=function(){function c(b,a){this._controls={link:$(),label:$(),hidden:$()};this._settings=b;this._controls.link=$("#"+b.LinkClientId);this._controls.label=this._controls.link.prev();this._controls.hidden=this._controls.link.next();this.changeStateFunction=a;this._isActive=b.IsInitiallyActive;var c=this;this._controls.link.click(function(a){c._controls.link.getIfHyperLinkEnabled()&&(c.changeStateFunction?(c._controls.link.toggleHyperlink(!1),c.changeStateFunction({isActive:!c._isActive,
changeSuccess:!0},function(a){a.changeSuccess&&(c._isActive=a.isActive,c.applyState(c._isActive));c._controls.link.toggleHyperlink(!0)})):(c._isActive=!c._isActive,c.applyState(c._isActive)));a.preventDefault()})}c.prototype.applyState=function(b){var a=b?this._settings.ActiveState:this._settings.InactiveState;this._controls.link.text(a.ActionText);this._controls.label.removeClass().addClass(a.CssClass).text(a.Title);this._controls.hidden.val(b?"1":"0")};return c}();c.ToggleActivation=e})(CCL||(CCL=
{}));(function(c){var e=function(){function c(){}c.GetFunctionByName=function(b,a){if(void 0!==b&&null!==b){if(void 0===a||null===a)a=window;b=b.split(".");for(var c=b.pop(),e=0;e<b.length;e++)a=a[b[e]];return a[c]}};return c}();c.Callbacks=e})(CCL||(CCL={}));(function(c){var e=function(){function e(b){this.settings=b;this.inlineTextExpander=new c.InlineTextExpander(this.settings.InlineTextExpanderSettings)}e.prototype.init=function(){};return e}();c.CommentModuleManager=e})(CCL||(CCL={}));
(function(c){var e=function(e){function b(a){e.call(this,a.DomElementClientId);this._stringToDateRegex=/-?\d+/;this._addCommentInputArea=$();this._furtherCommentsAreDisabledInfoPanel=$();this._animationSpeed=200;this._wasControlsCreated=this._wasDataSourceFetchedAtLeastOnce=!1;this._settings=a;this._userData=this._settings.UserData;this._initData=this._settings.DataSource;this._cmm=window[this._settings.CommentModuleManagerName];this._oldestCommentId=this._newestCommentId=-1;this._sending=!1;this._elem.data("CommentModule",
this)}__extends(b,e);b.prototype.initCallbacks=function(a,b,c,e,f){this._onAddCommentFunction=a;this._onEditCommentFunction=b;this._onDeleteCommentFunction=c;this._onLoadOldCommentsFunction=e;this._onDeleteConfirmationFunction=f};b.prototype.createControls=function(a){"undefined"===typeof a&&(a=!1);this._wasControlsCreated||!this._settings.IsInitiallyVisible&&!a||(this._wasControlsCreated=!0,this._elem.empty().append(this.createLoadMoreLink()).append(this.createCommentList(this._initData.Items)),
this._elem.append(this._addCommentInputArea=this.createInputArea().hide()),this._cmm.settings.Resources.FurtherCommentsAreDisabled&&(this._elem.after(this._furtherCommentsAreDisabledInfoPanel=$("<div>").addClass(this._cmm.settings.CssClasses.Inactive).text(this._cmm.settings.Resources.FurtherCommentsAreDisabled).hide()),this._furtherCommentsAreDisabledInfoPanel.addClass(this._cmm.settings.CssClasses.FurtherCommentsDisabled)),0<this._initData.Items.length&&(this._wasDataSourceFetchedAtLeastOnce=!0),
this._settings.IsInitiallyVisible&&this.updateLoadMoreLink(this,this._initData.VirtualCount-this._initData.Items.length),this.setVisibility())};b.prototype.show=function(){var a=this;this._elem.slideDown(this._animationSpeed,function(){0===a.getCommentsCount()&&a._settings.SetFocusOnShow&&a.focusInputArea()})};b.prototype.loadAndShow=function(){var a=this;this.createControls(!0);this.loadOldComments(function(){return a.show()})};b.prototype.isDataSourceFetchedAtLeastOnce=function(){return this._wasDataSourceFetchedAtLeastOnce};
b.prototype.isVisible=function(){return this._elem.is(":visible")};b.prototype.hide=function(){this._elem.slideUp(this._animationSpeed)};b.prototype.getCommentsCount=function(){return this._list?this._list.children(":data(commentId)").length:0};b.prototype.getCommentsCountWithoutDeleted=function(){return this._list?this._list.children(":data(commentId):visible").length:0};b.prototype.loadOldComments=function(a){var b=this;"undefined"===typeof a&&(a=function(){});if(this._onLoadOldCommentsFunction){var c=
this._wasDataSourceFetchedAtLeastOnce?0:this._settings.NumberOfPreviouslyReadItemsToDisplay;this._wasDataSourceFetchedAtLeastOnce=!0;this._onLoadOldCommentsFunction(this,this._userData,this._oldestCommentId,this._settings.PageSize,c,this._settings.UsePersonNameFormatLastFirst,function(c,d){b.loadOldCommentsSuccess(c,d);a()},this.loadOldCommentsFault)}};b.prototype.togglePossibilityToAddComments=function(a){this._settings.AllowAddComments=a;this.setVisibility()};b.prototype.setVisibility=function(){var a=
0<this.getCommentsCount()||this._loadMoreLinkContainer.is(":visible");this._elem.toggle(this._settings.AllowAddComments||a);this._addCommentInputArea.toggle(this._settings.AllowAddComments);this._furtherCommentsAreDisabledInfoPanel.toggle(!this._settings.AllowAddComments&&a)};b.prototype.createLoadMoreLink=function(){var a=this;this._loadMoreLinkContainer=$("<div>").addClass(this._cmm.settings.CssClasses.LoadMoreCommentsLink).hide();this._loadMoreLink=$('<a href="#">').click(function(b){a._loadMoreLink.getIfHyperLinkEnabled()&&
(a._loadMoreLink.toggleHyperlink(!1),a.loadOldComments(function(){return a._loadMoreLink.toggleHyperlink(!0)}));b.preventDefault()}).appendTo(this._loadMoreLinkContainer);this._pageInfoLabel=this._settings.ShowPageInfoLabel?$("<span>").addClass(this._cmm.settings.CssClasses.PageInfoLabel).appendTo(this._loadMoreLinkContainer).hide():$();return this._loadMoreLinkContainer};b.prototype.createCommentList=function(a){this._list=$("<ul>").addClass(this._cmm.settings.CssClasses.CommentList);this.fillCommentList(a,
!0);return this._list};b.prototype.fillCommentList=function(a,b){var c=this;a&&(b||(a=a.reverse()),$.each(a,function(a,d){c.renderComment(d,b,!1);if(-1===c._newestCommentId||d.Id>c._newestCommentId)c._newestCommentId=d.Id;if(-1===c._oldestCommentId||d.Id<c._oldestCommentId)c._oldestCommentId=d.Id}));this._list.toggle(!this._list.is(":empty"))};b.prototype.renderComment=function(a,b,e){var d=this,f=$("<li>"),g=$("<div>"),m=$("<img>"),n=$("<div>"),p=$("<div>"),r=$(a.ProfileHyperlinkControl?a.ProfileHyperlinkControl:
c.CommonFunctions.formatString("<span>{0}</span>",a.UserName)),w=$("<span>"),t=$("<div>"),v=$("<span>"),q=$("<textarea>"),z=$("<div>"),C=$("<span>"),G=a.PictureUrl&&0<a.PictureUrl.length;this._settings.HidePersonPictures||f.append(g.append(m));f.append(n,t,v).data("commentId",a.Id);this._settings.HidePersonPictures?f.addClass(this._cmm.settings.CssClasses.CommentListItemNoPersonPicture):f.addClass(this._cmm.settings.CssClasses.CommentListItem);(this._settings.AllowDeleteComments&&a.AllowDeleteComment||
this._settings.AllowEditComments&&a.AllowEditComment)&&this.renderCommentMenu(a,f,q,z,w,t);a.IsRead||f.addClass(this._cmm.settings.CssClasses.UnreadItem);n.append(p).addClass(this._cmm.settings.CssClasses.CommentContent);p.append(r,$("<span>:</span>").addClass(this._cmm.settings.CssClasses.MarginRight5).addClass(this._cmm.settings.CssClasses.ColonAfterPersonName),w);var u=this.encodeText(a.CommentText);this._settings.HidePersonPictures||(g.addClass(this._cmm.settings.CssClasses.PersonImgWrapper),
m.addClass(this._cmm.settings.CssClasses.PersonImg).prop("src",G?a.PictureUrl:this._cmm.settings.DefaultPersonImageUrl).prop("alt","").prop("width",this._cmm.settings.ImageWidth).prop("height",this._cmm.settings.ImageHeight));r.addClass(this._cmm.settings.CssClasses.PersonName);w.addClass(this._cmm.settings.CssClasses.CommentText).data("originalText",u).html(linkifyHtml(u));t.addClass(this._cmm.settings.CssClasses.ShowMoreTextContainer);p.hide();this._cmm.inlineTextExpander.scanItemAndAppend(w);n.find("div").first().show();
v.addClass(this._cmm.settings.CssClasses.CommentDate).text(a.DateTimeString);a.DateTimeTooltip&&0<a.DateTimeTooltip.length&&v.prop("title",a.DateTimeTooltip);this._settings.AllowEditComments&&a.AllowEditComment&&(q.data("originalText",a.CommentText).attr("aria-label",this._cmm.settings.Resources.PostCommentTextAreaWatermark).val(a.CommentText).keydown(function(a){a.which===c.CommonConstants.keyCodes.escape&&(q.val(q.data("originalText")).trigger("input"),d.toggleEditing(!1,q,z,w,t));return!0}).on("input paste",
function(){d.validateTextArea(q,C,f)}).hide(),this.makeTextAreaAutoResizable(q),this.updatePlaceholder(q),this.renderPostOrEditButtonPanel(z,!1,C,function(){d.tryEditComment(a.Id,q,C,z,w,t)}).hide(),C.hide().addClass(this._cmm.settings.CssClasses.ErrorText),f.append(q,z,C));e?this.getCommentPnlById(this._list,a.Id).replaceWith(f):b?this._list.append(f):this._list.prepend(f);return f};b.prototype.tryEditComment=function(a,b,c,e,f,l){var d;!c.is(":visible")&&0<(d=b.val()).trim().length&&(d!==b.data("originalText")&&
this._onEditCommentFunction?this._sending?alert(this._cmm.settings.Resources.TooManyRequestError):(this._sending=!0,this._onEditCommentFunction(this,this._userData,a,d,this._settings.UsePersonNameFormatLastFirst,this.editCommentSuccess,this.editCommentFault)):this.toggleEditing(!1,b,e,f,l))};b.prototype.renderCommentMenu=function(a,b,c,e,f,l){var d=$('<a href="#">').addClass(this._cmm.settings.CssClasses.ShowMenuLink).attr("aria-label",this._cmm.settings.Resources.ShowMenuLinkAccessibilityText).click(function(a){a.preventDefault()}).appendTo(b);
this.renderMenuItems(a,b,d,c,e,f,l)};b.prototype.renderMenuItems=function(a,b,c,e,f,l,m){var d=$("<div>").addClass(this._cmm.settings.CssClasses.Menu).hide().appendTo(b),g=$("<ul>").appendTo(d);this._settings.AllowEditComments&&a.AllowEditComment&&this.renderCommentEditButton(e,f,l,m).appendTo(g);this._settings.AllowDeleteComments&&a.AllowDeleteComment&&this.renderCommentDeleteButton(a,b).appendTo(g);this.createDropDownMenu(a,c,d)};b.prototype.createDropDownMenu=function(a,b,c){a=new DropDownMenu("CommentMenu"+
a.Id,!1);a.settings={showMenuOnHover:this._settings.ShowMenuOnHover,isIos:this._cmm.settings.IsIos,closeMenuWhenClickingOnLink:!0,closeMenuWhenClickingInside:!0,appendToBody:!1,selectedHolderCssClass:"",useTargetPosition:!0,setMinWidthByTarget:!1,horizontalPosition:this._cmm.settings.DropDownMenuPosition,useFixedPosition:!1,zIndex:1E3,autofitHeight:!1};a.initializeControls(c,b,b)};b.prototype.renderCommentEditButton=function(a,b,e,f){var d=this,g=$("<li>");$('<a href="#">').addClass(this._cmm.settings.CssClasses.MenuItemLink).click(function(c){d.toggleEditing(!0,
a,b,e,f);c.preventDefault()}).append($("<img>").prop("src",c.CommonConstants.onePixelTransparentImageSource).prop("alt","").addClass(this._cmm.settings.CssClasses.EditButton)).append($("<span>").text(this._cmm.settings.Resources.EditComment)).appendTo(g);return g};b.prototype.toggleEditing=function(a,b,c,e,f){b.add(c).toggle(a);e.toggle(!a);a&&b.focus().trigger("input");f.children().toggle(!a)};b.prototype.renderCommentDeleteButton=function(a,b){var d=this,e=$("<li>");$('<a href="#">').addClass(this._cmm.settings.CssClasses.MenuItemLink).click(function(c){d.deleteComment(a.Id,
b);c.preventDefault()}).append($("<img>").prop("src",c.CommonConstants.onePixelTransparentImageSource).prop("alt","").addClass(this._cmm.settings.CssClasses.DeleteButton)).append($("<span>").text(this._cmm.settings.Resources.DeleteComment)).appendTo(e);return e};b.prototype.createInputArea=function(){var a=this,b=$("<div>");this._settings.HidePersonPictures?b.addClass(this._cmm.settings.CssClasses.InputAreaNoPersonPicture):b.addClass(this._cmm.settings.CssClasses.InputArea);b.addClass(this._cmm.settings.CssClasses.InputArea);
var e=this._cmm.settings.CurrentPersonImageUrl&&0<this._cmm.settings.CurrentPersonImageUrl.length,f=null;this._settings.HidePersonPictures||(f=$("<img>").addClass(this._cmm.settings.CssClasses.PersonImg).prop("src",e?this._cmm.settings.CurrentPersonImageUrl:this._cmm.settings.DefaultPersonImageUrl).prop("alt",c.CommonFunctions.formatString(this._settings.UsePersonNameFormatLastFirst?"{1}, {0}":"{0} {1}",this._cmm.settings.CurrentPersonFirstName,this._cmm.settings.CurrentPersonLastName)).prop("width",
this._cmm.settings.ImageWidth).prop("height",this._cmm.settings.ImageHeight));var k=$("<span>").hide().addClass(this._cmm.settings.CssClasses.ErrorText);this._addCommentTextArea=$("<textarea>").prop("rows",1).attr("aria-label",this._cmm.settings.Resources.PostCommentTextAreaWatermark).on("input paste",function(){a.validateTextArea(a._addCommentTextArea,k,b)});this.makeTextAreaAutoResizable(this._addCommentTextArea);this.updatePlaceholder(this._addCommentTextArea);e=this.renderPostOrEditButtonPanel($("<div>"),
!0,k,function(){a.tryAddNewComment(k)});this._settings.HidePersonPictures||b.append(f);b.append(this._addCommentTextArea,e,k);return b};b.prototype.renderPostOrEditButtonPanel=function(a,b,c,e){return a.addClass(this._cmm.settings.CssClasses.PostButtonPanel).toggle(!this._settings.HidePostButtonWhileEmpty).append($("<input />").prop("type","submit").addClass(this._cmm.settings.CssClasses.PostButton).val(b?this._cmm.settings.Resources.PostCommentButtonText:this._cmm.settings.Resources.EditCommentButtonText).click(function(a){e();
a.preventDefault()}))};b.prototype.tryAddNewComment=function(a){a.is(":visible")||(a=this._addCommentTextArea.val(),0<a.trim().length&&(this.addNewComment(a),this._addCommentTextArea.val("").trigger("change"),this._settings.HidePostButtonWhileEmpty&&this.getPostButtonPanelForTextArea(this._addCommentTextArea).hide()))};b.prototype.validateTextArea=function(a,b,e){var d=a.val().length;d>this._cmm.settings.CommentMaxLength?(b.text(c.CommonFunctions.formatString(this._cmm.settings.Resources.TextTooLongError,
this._cmm.settings.CommentMaxLength,d)),b.show(),e.addClass(this._cmm.settings.CssClasses.ErrorArea)):(this._settings.HidePostButtonWhileEmpty&&this.getPostButtonPanelForTextArea(a).toggle(0<d),e.removeClass(this._cmm.settings.CssClasses.ErrorArea),b.hide())};b.prototype.getPostButtonPanelForTextArea=function(a){return a.next("."+this._cmm.settings.CssClasses.PostButtonPanel.replace(" ","."))};b.prototype.focusInputArea=function(){this._addCommentTextArea&&this._addCommentTextArea.focus()};b.prototype.updateLoadMoreLink=
function(a,b){if(0<b){var d=a._settings.ShowPageInfoLabel;if(!a._settings.PageSize||0>=a._settings.PageSize||(a._wasDataSourceFetchedAtLeastOnce||0===a._settings.NumberOfPreviouslyReadItemsToDisplay?a._settings.PageSize:Math.min(a._settings.NumberOfPreviouslyReadItemsToDisplay,a._settings.PageSize))>=b){var e=1===b?a._cmm.settings.Resources.ShowOneMoreComment:c.CommonFunctions.formatString(a._cmm.settings.Resources.ShowXMoreComments,b);d=!1}else e=a._cmm.settings.Resources.ShowMoreComments;a._loadMoreLink.text(e);
d?(e=this.getCommentsCount(),a._pageInfoLabel.text(c.CommonFunctions.formatString(a._cmm.settings.Resources.ViewingXofYCommentsFormat,e,b+e))):a._pageInfoLabel.text("");a._pageInfoLabel.toggle(d);a._loadMoreLinkContainer.show()}};b.prototype.addNewComment=function(a){this._onAddCommentFunction&&(this._sending?alert(this._cmm.settings.Resources.TooManyRequestError):(this._sending=!0,this._onAddCommentFunction(this,this._userData,a,this._newestCommentId,this._settings.UsePersonNameFormatLastFirst,this.addNewCommentSuccess,
this.addNewCommentFault)))};b.prototype.addNewCommentSuccess=function(a,b){a._sending=!1;b&&a.fillCommentList(b.Items,!0);a.afterAddingCommentFunction&&a.afterAddingCommentFunction({commentModule:a,userData:a._userData})};b.prototype.addNewCommentFault=function(a,b){a._sending=!1;alert(a._cmm.settings.Resources.AddCommentError)};b.prototype.editCommentSuccess=function(a,b){a._sending=!1;b&&a.renderComment(b,!1,!0)};b.prototype.editCommentFault=function(a,b,c){a._sending=!1;alert(a._cmm.settings.Resources.EditCommentError);
b&&(b=a.getCommentPnlById(a._list,b))&&(a=b.find("."+a._cmm.settings.CssClasses.CommentText),a.html(a.data("originalText")),a=b.find("textarea"),a.val(a.data("originalText")))};b.prototype.deleteComment=function(a,b){var c=this,d=function(){c._onDeleteCommentFunction&&(c._sending?alert(c._cmm.settings.Resources.TooManyRequestError):(c._sending=!0,c._onDeleteCommentFunction(c,c._userData,a,c.deleteCommentSuccess,c.deleteCommentFault),b.hide()))};this._onDeleteConfirmationFunction?this._onDeleteConfirmationFunction(this,
this._userData,a,this._cmm.settings.Resources.DeleteConfirmation,d):confirm(this._cmm.settings.Resources.DeleteConfirmation)&&d()};b.prototype.deleteCommentSuccess=function(a,b,c){a._sending=!1;b&&(b=a.getCommentPnlById(a._list,b))&&(b.remove(),a._list.toggle(!a._list.is(":empty")),a.setVisibility())};b.prototype.deleteCommentFault=function(a,b,c){a._sending=!1;alert(a._cmm.settings.Resources.DeleteCommentError);b&&(a=a.getCommentPnlById(a._list,b))&&a.show()};b.prototype.loadOldCommentsSuccess=function(a,
b){b&&(a.fillCommentList(b.Items,!1),a._loadMoreLinkContainer.hide(),a.updateLoadMoreLink(a,b.VirtualCount-b.Items.length))};b.prototype.loadOldCommentsFault=function(a,b){a._sending=!1};b.prototype.makeTextAreaAutoResizable=function(a){setTimeout(function(){a.autogrow()},0)};b.prototype.updatePlaceholder=function(a){var b=this;setTimeout(function(){a.prop("placeholder",b._cmm.settings.Resources.PostCommentTextAreaWatermark)},0)};b.prototype.stringToDate=function(a){return new Date(parseInt(this._stringToDateRegex.exec(a)[0]))};
b.prototype.encodeText=function(a){return c.CommonFunctions.replaceLineBreaksWithBrTags(c.CommonFunctions.htmlEncode(a))};b.prototype.getCommentPnlById=function(a,b){var c=null;a.children(":data(commentId)").each(function(a,d){a=$(d);if(a.data("commentId")==b)return c=a,!1});return c};return b}(c.DomElementClass);c.CommentModule=e})(CCL||(CCL={}));jQuery.fn.extend({getCommentModuleObject:function(){return this.data("CommentModule")}});
(function(c){var e=function(){function e(){this.managedContainers=new Map;this.temporaryUnmanagedMenus=new Map}e.getInstance=function(){void 0===e.instance&&(e.instance=new e);return e.instance};e.prototype.registerContainer=function(b,a){this.managedContainers.has(b)||(a=new c.DropDownMenuManagedContainer(a),this.managedContainers.set(b,a),this.putUnmanagedMenusToContainer(b,a))};e.prototype.containerAddOrReplaceInstance=function(b,a){this.managedContainers.has(b)?this.managedContainers.get(b).addOrReplaceInstance(a):
this.addInstanceToTemporaryUnmanagedMenus(b,a)};e.prototype.addInstanceToTemporaryUnmanagedMenus=function(b,a){this.temporaryUnmanagedMenus.has(b)||this.temporaryUnmanagedMenus.set(b,[]);this.temporaryUnmanagedMenus.get(b).push(a)};e.prototype.putUnmanagedMenusToContainer=function(b,a){this.temporaryUnmanagedMenus.has(b)&&(this.temporaryUnmanagedMenus.get(b).forEach(function(b){return a.addOrReplaceInstance(b)}),this.temporaryUnmanagedMenus.delete(b))};return e}();c.DropDownMenuManager=e})(CCL||(CCL=
{}));
(function(c){var e=function(){function e(b){var a=this;this.dropDownMenuList=[];this.settings=b;this.$window=$(window);$(document).on((this.settings.IsIos?"touchend":"click")+" "+c.CommonTriggers.clickInInnerFrame,function(b){b=$(b.target).closest("["+a.settings.TargetLinkDataAttributeName+"]");if(0<b.length){var c=window[b.attr(a.settings.TargetLinkDataAttributeName)];c.toggleManagedMenu();a.startTrackingResize(c);a.dropDownMenuList.forEach(function(b){b!==c&&(b.hideMenu(),a.stopTrackingResize(b))})}else a.dropDownMenuList.forEach(function(a){return a.hideMenu()})})}e.prototype.addOrReplaceInstance=
function(b){var a=this.dropDownMenuList.filter(function(a){return a.name!==b.name});a.push(b);this.dropDownMenuList=a};e.prototype.startTrackingResize=function(b){var a=this;if(void 0===b.onResizeHandler){var c=function(){a.stopTrackingResize(b);b.hideMenu()};this.$window.resize(c);b.onResizeHandler=c}};e.prototype.stopTrackingResize=function(b){void 0!==b.onResizeHandler&&(this.$window.off("resize",b.onResizeHandler),b.onResizeHandler=void 0)};return e}();c.DropDownMenuManagedContainer=e})(CCL||
(CCL={}));
(function(c){var e=function(e){function b(a,b){this._scope=b.Scope;this._clientId=b.ClientId;this._applicationKey=b.ApplicationKey;this._multiselectAllowed=b.MultiselectAllowed;this._allowedFileTypeExtensions=b.AllowedFileTypeExtensions;this._interFrameMessageName=b.InterFrameMessageName;this._downloadUrlTemplate="https://www.googleapis.com/drive/v2/files/{fileid}?key={appkey}";this.googleSheetMimeType="application/vnd.google-apps.spreadsheet";this._language=b.Language;e.call(this,a,b)}__extends(b,
e);b.prototype.Init=function(){var a=this;this._settings.ReadOnly||(this._chooseButton=this._loader=this._elem.children("."+this._settings.LoaderCssClass),$(window).load(function(){return a.initializeDependencies()}));this.UpdateFileList(this.GetFiles())};b.prototype.initializeDependencies=function(){var a=this;this._settings.UseProxyIframe&&$("."+this._settings.PickerControlCssClass).attr("src",this._settings.ProxyIframeSrc);asyncDependenciesResolver.loadScriptAsync({url:a._settings.ApiScriptUrl,
timeoutInMilliseconds:c.PickerDependencyLoadTimeoutInMs}).pipe(function(){return asyncDependenciesResolver.loadScriptAsync({url:a._settings.ClientScriptUrl,timeoutInMilliseconds:c.PickerDependencyLoadTimeoutInMs})}).always(function(){a._loader.remove()}).done(function(){a._chooseButton=$("."+a._settings.PickerControlCssClass);"none"!==a._loader.css("display")&&a._chooseButton.show();a._settings.UseProxyIframe?a.listenToProxyPickerFileSelected():a.displayRegularPickerOnButtonClick()}).fail(function(){a._settings.ReadOnly=
!0;a._chooseButton=$();a.Trigger(c.PickerEvent.LoadingDependencyFailed)})};b.prototype.listenToProxyPickerFileSelected=function(){var a=this;$(document).on(this._settings.ProxyUploadFilesSelectedEventName,function(b,c){b=c.files;b.forEach(function(a){a.fileUrl=a.url;a.isNew=!0});a._selectedFiles=b;a.UpdateFileList(a._selectedFiles);a.ValidateSelectedFiles(a._selectedFiles,a._allowedFileTypeExtensions);a.StartUploadFiles(a._selectedFiles)})};b.prototype.displayRegularPickerOnButtonClick=function(){var a=
this;this._chooseButton.on("click",function(b){gapi.auth.getToken()?a.showPicker():a.doAuth(!1,function(b){a.showPicker()}.bind(a))});this._chooseButton.on("keydown",function(b){if(13===b.which||32===b.which)b.preventDefault(),a._chooseButton.click()});c.CommonFunctions.attachPostMessageEventListener($(window),this._interFrameMessageName,function(b,c){window!=c||b.origin?(a._origin=b.origin,a._chooseButton.prop("disabled",!1)):a._origin=window.location.protocol+"//"+window.location.host}.bind(this));
gapi.load("picker",{callback:function(){b.prototype.pickerApiLoad.call(this)}.bind(this)})};b.prototype.pickerApiLoad=function(){this.doAuth(!0,function(){c.CommonFunctions.makePostMessageCall(window.top,{messageName:this._interFrameMessageName.toString()})}.bind(this))};b.prototype.doAuth=function(a,b){gapi.auth.authorize({client_id:this._clientId,scope:this._scope,immediate:a},b)};b.prototype.showPicker=function(){var a=gapi.auth.getToken().access_token;a=(new google.picker.PickerBuilder).addViewGroup((new google.picker.ViewGroup(this.preparePickerView(google.picker.ViewId.DOCS))).addView(this.preparePickerView(google.picker.ViewId.DOCS_IMAGES)).addView(this.preparePickerView(google.picker.ViewId.DOCS_VIDEOS)).addView(this.preparePickerView(google.picker.ViewId.DOCUMENTS)).addView(this.preparePickerView(google.picker.ViewId.DRAWINGS)).addView(this.preparePickerView(google.picker.ViewId.FOLDERS)).addView(this.preparePickerView(google.picker.ViewId.PDFS)).addView(this.preparePickerView(google.picker.ViewId.PHOTOS)).addView(this.preparePickerView(google.picker.ViewId.PRESENTATIONS)).addView(this.preparePickerView(google.picker.ViewId.SPREADSHEETS))).setOAuthToken(a).setDeveloperKey(this._applicationKey).setOrigin(this._origin).setCallback(function(a){this.pickerCallback(a)}.bind(this)).setLocale(this._language);
this._multiselectAllowed&&a.enableFeature(google.picker.Feature.MULTISELECT_ENABLED);a.build().setVisible(!0)};b.prototype.preparePickerView=function(a){a=new google.picker.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a};b.prototype.pickerCallback=function(a){var b=this;if(a[google.picker.Response.ACTION]==google.picker.Action.PICKED){this._selectedFiles=this.ConvertSelectedFiles(a[google.picker.Response.DOCUMENTS]);for(a=this._selectedFiles.length-1;0<=a;a--)this._selectedFiles[a].name=
this.ProcessFileName(this._selectedFiles[a].name);this.UpdateFileList(this._selectedFiles);var c=[];if(0<this._selectedFiles.length){var e={};e.Authorization="Bearer "+gapi.auth.getToken().access_token;this._selectedFiles.forEach(function(a){var d=b.ComposeDownloadUrl(a.fileId);$.support.cors||(d=b._settings.GoogleDriveProxy+encodeURIComponent(d));c.push($.ajax({url:d,type:"GET",data:"",headers:e,success:function(c){var d=!1;if(c.downloadUrl)a.fileUrl=c.downloadUrl+"&"+b._settings.TokenPlaceholderInQuerystring+
"="+gapi.auth.getToken().access_token;else if(c.exportLinks&&c.exportLinks[Object.keys(c.exportLinks)[0]]){d=a.type===b.googleSheetMimeType;a.type=c.exportLinks["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":c.exportLinks["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":c.exportLinks["image/png"]?"image/png":c.exportLinks["application/vnd.openxmlformats-officedocument.presentationml.presentation"]?
"application/vnd.openxmlformats-officedocument.presentationml.presentation":c.exportLinks["application/pdf"]?"application/pdf":Object.keys(c.exportLinks)[0];a.fileUrl=c.exportLinks[a.type]+"&"+b._settings.TokenPlaceholderInQuerystring+"="+gapi.auth.getToken().access_token;var e=b.getParameterValue(a.fileUrl,"exportFormat");if(e){var f=a.name;e="."+e;a.name.substr(-e.length)!==e&&(a.name+=e);b.UpdateFileName(a,f)}}else a.error=b._settings.UnsupportedDownloadTypeErrorText;a.thumbnailUrl=c.thumbnailLink;
b.checkFileSize(a,d)},error:function(){a.error=b._settings.UploadErrorText}}))});$.when.apply($,c).done(function(){b.ValidateSelectedFiles(b._selectedFiles,b._allowedFileTypeExtensions);b.StartUploadFiles(b._selectedFiles)})}}};b.prototype.checkFileSize=function(a,b){0==a.size&&(a.size=this.getFileSize(a,b),this.UpdateFileSize(a))};b.prototype.getFileSize=function(a,b){var c=0;b=this.getFileUrl(a.fileUrl,b);try{c=this.getContentLength(b)}catch(h){a.error=this._settings.UploadErrorText}return c};b.prototype.getFileUrl=
function(a,b){return b?this._settings.GoogleDriveProxy+encodeURIComponent(a):a};b.prototype.getContentLength=function(a){var b=0,e=new XMLHttpRequest;e.open("HEAD",a,!1);e.send();e.status==c.CommonConstants.httpStatusCodes.ok&&(b=parseInt(e.getResponseHeader("Content-Length")));return b};b.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoHeaderDownloadFrom+"="+a.fileUrl+"&"+this._settings.FileRepoFileSizeParam+"="+a.size};b.prototype.AddAdditionalHeadersToDownloadFile=
function(a,b){a[this._settings.FileRepoHeaderGoogleDriveFileSize]=b.size};b.prototype.ConvertSelectedFiles=function(a){return a?$.map(a,function(a,b){return{fileId:a[google.picker.Document.ID],name:a[google.picker.Document.NAME],type:a[google.picker.Document.MIME_TYPE],icon:a[google.picker.Document.ICON_URL],size:a.sizeBytes}}):[]};b.prototype.ComposeDownloadUrl=function(a){return this._downloadUrlTemplate.replace("{fileid}",a).replace("{appkey}",this._applicationKey)};b.prototype.ClearResults=function(a){var b=
!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(b=!1,a.addClass("clearme"))});b&&this._chooseButton.show();e.prototype.ClearResults.call(this,a);this.Trigger(c.PickerEvent.ResultsChanged,{results:[]})};b.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};b.prototype.HandleStopped=function(a){e.prototype.HandleStopped.call(this,a);this._settings.UseProxyIframe&&
$(document).trigger(this._settings.ProxyUploadFinishedEventName)};return b}(c.FilePickerBase);c.GoogleDrivePicker=e})(CCL||(CCL={}));
(function(c){c.ControlTabsEvent={Initialized:"ControlTabsInitialized",TabIndexChanged:"ControlTabsSelectedIndexChanged"};var e=function(e){function b(a,b){e.call(this,a);this._settings=b;this.InitControls();this.RunControlInitializationCallback()}__extends(b,e);b.prototype.SetCurrentTab=function(a){this.GetCurrentTab()!==a&&$(this._tabItemLinks[a]).click()};b.prototype.GetCurrentTab=function(){return parseInt(this._selectedTabIndexHolder.val())};b.prototype.GetTabsCount=function(){return this._tabItemLinks.length};
b.prototype.SetTabEnabled=function(a,b){(a=a&&this.IsTabAvailable(b))?($(this._tabItemLinks[b]).removeClass("disabled"),$(this._mobileSelect.find("> option")[b]).prop("disabled",!1)):($(this._tabItemLinks[b]).addClass("disabled"),$(this._mobileSelect.find("> option")[b]).prop("disabled",!0))};b.prototype.SetTabNotAvailable=function(a){$(this._tabItemLinks[a]).addClass("tabIsNotAvailable");this.SetTabEnabled(!1,a)};b.prototype.UpdateTabImageUrl=function(a,b){$(this._tabItemLinks[a]).find("img").attr("src",
b)};b.prototype.IsTabAvailable=function(a){return!$(this._tabItemLinks[a]).hasClass("tabIsNotAvailable")};b.prototype.SetTabToolTip=function(a,b){$(this._tabs[a]).attr("title",b)};b.prototype.InitControls=function(){var a=this;this._tabsList=this._elem.find("ul."+this._settings.TabsCssClass);this._mobileSelect=this._elem.find("select."+this._settings.TabsCssClass);this._selectedTabIndexHolder=this._elem.find("#"+this._settings.TabIndexHolderClientId);this._tabs=this._elem.find("ul > li > h2");this._tabItemLinks=
this._elem.find("ul > li > h2 > a");this._tabItemLinks.each(function(b,c){a.InitTabItem(b,c)});$(this._tabItemLinks[this._settings.CurrentlySelectedTabIndex]).click();this.Trigger(c.ControlTabsEvent.Initialized)};b.prototype.RunControlInitializationCallback=function(){var a=c.Callbacks.GetFunctionByName(this._settings.OnControlInitialization,null);void 0!==a&&null!==a&&a(this)};b.prototype.InitTabItem=function(a,b){var c=this;a=$(b);$(a.data("contentid")).addClass(this._settings.TabContentCssClass).addClass(this._settings.ClearLeftCssClass).hide();
a.on("click",function(a){c.OnTabChanged(a)})};b.prototype.OnTabChanged=function(a){a=$(a.currentTarget);if(a.hasClass("disabled"))return!1;var b=a.closest("li"),e=$(a.data("contentid"));a=b.data("tabitemindex");this._tabsList.find("> li").removeClass(this._settings.ActiveTabCssClass);b.addClass(this._settings.ActiveTabCssClass);this._scrollPosition=$(window).scrollTop();this._tabItemLinks.each(function(a,b){$($(b).data("contentid")).hide()});e.show();$(window).scrollTop(this._scrollPosition);this._mobileSelect.prop("selectedIndex",
a);b=this._selectedTabIndexHolder.val();this._selectedTabIndexHolder.val(a);e=this._selectedTabIndexHolder.val();this.Trigger(c.ControlTabsEvent.TabIndexChanged,{selectedTab:a,previousTabString:b,currentTabString:e});return!1};return b}(c.DomElementClass);c.ControlTabs=e})(CCL||(CCL={}));
(function(c){var e=function(e){function b(a,b){e.call(this,a,b)}__extends(b,e);b.prototype.Init=function(){var a=this;this._settings.ReadOnly||(this._chooseButton=this._loader=this._elem.children("."+this._settings.LoaderCssClass),$(window).load(function(){return a.initializeWithScripts()}));this.UpdateFileList(this.GetFiles())};b.prototype.initializeWithScripts=function(){var a=this;asyncDependenciesResolver.loadScriptAsync({url:a._settings.ScriptUrl,attributes:{"data-app-key":a._settings.ApplicationKey,
id:"dropboxjs"},timeoutInMilliseconds:c.PickerDependencyLoadTimeoutInMs}).always(function(){a._loader.remove()}).done(function(){a._chooseButton=$(Dropbox.createChooseButton({success:function(b){if(!(a._elem.hasClass("disabled")||0<a._resultsTable.find("tr").length)){b=a.ConvertSelectedFiles(b);for(var c=b.length-1;0<=c;c--)b[c].name=a.ProcessFileName(b[c].name);a.ValidateSelectedFiles(b,null);a.UpdateFileList(b);0<b.length&&a.StartUploadFiles(b)}},linkType:"direct",multiselect:a._settings.MultiselectAllowed,
extensions:a._settings.AllowedFileTypeExtensions}));a._chooseButton.attr("tabindex","0");"none"===a._loader.css("display")&&a._chooseButton.hide();a._elem.append(a._chooseButton)}).fail(function(){a._settings.ReadOnly=!0;a._chooseButton=$();a.Trigger(c.PickerEvent.LoadingDependencyFailed)})};b.prototype.ConvertSelectedFiles=function(a){return a?$.map(a,function(a,b){return{name:a.name,size:a.bytes,thumbnailUrl:a.thumbnailLink,fileUrl:a.link,icon:a.icon}}):[]};b.prototype.ClearResults=function(a){var b=
!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(b=!1,a.addClass("clearme"))});b&&this._chooseButton.show();e.prototype.ClearResults.call(this,a);this.Trigger(c.PickerEvent.ResultsChanged,{results:[]})};b.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};b.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoHeaderDownloadFrom+"="+a.fileUrl};
return b}(c.FilePickerBase);c.DropboxPicker=e})(CCL||(CCL={}));
(function(c){var e=function(e){function b(a,c){this._chooseButton=$(".ccl-fileuploader-button").children("input");this.fileUploaderContainer=$(".ccl-fileuploader-container");b.confirmReplaceMessage=c.ConfirmReplaceMessageText;e.call(this,a,c)}__extends(b,e);b.ConfirmReplaceFile=function(){return confirm(b.confirmReplaceMessage)};b.prototype.Init=function(){var a=this;this._chooseButton.focusin(function(b){a._chooseButton.parent().toggleClass("ccl-button-color-green-highlight")}).focusout(function(b){a._chooseButton.parent().toggleClass("ccl-button-color-green-highlight")});this._elem.on("fileuploadstarted",
function(){a.ToggleOkButton(!0);a.Trigger(c.PickerEvent.Started)}).on("fileuploadadd",function(b){for(var d=[],e=0;e<arguments.length-1;e++)d[e]=arguments[e+1];a.Trigger(c.PickerEvent.Added,d[0])}).on("fileuploadstopped",function(b){for(var d=[],e=0;e<arguments.length-1;e++)d[e]=arguments[e+1];d[0].results=a.fileUploaderContainer.fileupload("getUploadedFiles");a.Trigger(c.PickerEvent.Stopped,d[0]);a.ToggleOkButton(!1)}).on("fileuploadresultschanged",function(b){for(var d=[],e=0;e<arguments.length-
1;e++)d[e]=arguments[e+1];a.Trigger(c.PickerEvent.ResultsChanged,d[0])}).on("fileuploadsubmit",function(b){for(var c=[],d=0;d<arguments.length-1;d++)c[d]=arguments[d+1];c=c[0];c.url=a.GetFileRepoUrlForFileName(a.ProcessFileName(c.files[0].name));c.xhrFields={withCredentials:!0}}).on("fileuploaddestroy",function(b){for(var c=[],d=0;d<arguments.length-1;d++)c[d]=arguments[d+1];c=c[0];c.url&&(c.url+="&"+a._settings.MethodOverrideQueryStringParam+"=delete");c.type="GET";c.xhrFields={withCredentials:!0}}).on("fileuploaddone",
function(b){for(var c=[],d=0;d<arguments.length-1;d++)c[d]=arguments[d+1];(c=c[0])&&c.result&&c.result.fileId&&c.result.signature&&(d={deleteUrl:a.GetFileRepoUrl(c.result.signature),fileUrl:a.GetFileRepoUrl(c.result.signature),id:c.result.fileId,signedId:c.result.signature,name:c.result.fileName,size:c.result.fileSize,type:c.result.mimeType,thumbnailUrl:a._settings.DefaultThumbnailUrl,isNew:!0},c.result.files=[d])})};b.prototype.ClearResults=function(){this.fileUploaderContainer.fileupload("clearResults")};
b.prototype.AllowHide=function(){return this.fileUploaderContainer.fileupload("allowHide")};return b}(c.FilePickerBase);c.FilePicker=e})(CCL||(CCL={}));var tmpl,FileRepoUploaderInstance;
(function(c){c.FileRepoUploaderEvent={PickerChanged:"FileRepoUploaderPickerChanged",ResultsChanged:"FileRepoUploaderResultsChanged"};var e=function(e){function b(a,b){var d=this;e.call(this,a);this._pickers=[];this._inlineModeFileList=[];this._inlineModeFileKeys={};this._removedFiles=[];this._changedFiles={};this._settings=b;this._currentTabIndex=-1;FileRepoUploaderInstance=this;$("#"+this._settings.ControlTabsClientId).on(c.ControlTabsEvent.TabIndexChanged,function(a){for(var b=[],e=0;e<arguments.length-
1;e++)b[e]=arguments[e+1];d._currentTabIndex!==b[0].selectedTab&&(d._currentTabIndex=b[0].selectedTab,(b=d._pickers[d._currentTabIndex])&&d.Trigger(c.FileRepoUploaderEvent.PickerChanged,{selectedPicker:b}))});this._elem.on(c.PickerEvent.Initialized,function(a){a=c.DomElementClass.GetInstanceForElement(a.target.id);d._pickers.push(a);1==d._pickers.length&&d._settings.IsEmpty&&d.Trigger(c.FileRepoUploaderEvent.PickerChanged,{selectedPicker:d._pickers[0]})});this._elem.on(c.PickerEvent.ResultsChanged,
function(a){for(var b=[],e=0;e<arguments.length-1;e++)b[e]=arguments[e+1];e=c.DomElementClass.GetInstanceForElement(a.target.id);b=b[0].results;var f=d._settings.ReadOnly?d.GetControlTabs().GetCurrentTab():d._pickers.indexOf(e);d.GetControlTabs().SetCurrentTab(f);d.HandleResultsChanges(b,f);d.Trigger(c.FileRepoUploaderEvent.ResultsChanged,{results:b,picker:e})});this._elem.on(c.PickerEvent.Started,function(a){for(var b=0;b<arguments.length-1;b++);b=c.DomElementClass.GetInstanceForElement(a.target.id);
b=d._settings.ReadOnly?d.GetControlTabs().GetCurrentTab():d._pickers.indexOf(b);d.HandleResultsChanges([{}],b)});if(b.InlineMode)this._elem.on(c.PickerEvent.Added,function(a){for(var c=[],e=0;e<arguments.length-1;e++)c[e]=arguments[e+1];(b.UniqueFileNamesOnly||d.CanCheckFileNames())&&c[0].files.forEach(function(a){b.UniqueFileNamesOnly&&d._filesContainer.find("td.name").toArray().forEach(function(c){if(c.innerText===a.name)if(confirm(b.FileAlreadyExistsDialogText.replace("{0}",a.name))){c=$(c).closest("."+
b.FileListRowCssClass);var e=c.find("a."+b.RemoveActionCssClass);e=$(e).data("filekey");e=d.GetFileByKey(e);d.RemoveFile(e,c)}else a.error=b.FileAlreadyExistsErrorMessage});!a.error&&d.CanCheckFileNames()&&(a.error=d.GetFileNameValidation(a.name))})}),this._elem.on(c.PickerEvent.Stopped,function(a){for(var b=[],e=0;e<arguments.length-1;e++)b[e]=arguments[e+1];d.UpdateFileList(b[0].results,!0,null);d.UpdateFileListState(d._inlineModeFileList);e=b[0].results&&0<b[0].results.length&&d._expandableContainer.getIsExpandedState();
var f=c.DomElementClass.GetInstanceForElement(a.target.id);f.ClearResults(b[0].results);e&&f.AllowHide()&&d._expandableContainer.toggle()}),this._elem.on("hybrideditoritemtextupdated",function(a){for(var e=[],f=0;f<arguments.length-1;f++)e[f]=arguments[f+1];f=$(a.target).closest("."+b.FileListRowCssClass);var g=f.find("a."+b.RemoveActionCssClass);g=$(g).data("filekey");g=d.GetFileByKey(g);e=e[0].value;e||(e="(empty)",f.find("."+b.FileNameContainerCssClass).text(e));g.rawFilename=e;g.name=g.rawFilename;
g.extension&&(g.name+=g.extension);d._changedFiles[g.id]=g;d._changedFilesStateHidden.val(JSON.stringify(d._changedFiles));d.UpdateFileListState(d._inlineModeFileList);e=d._pickers[d.GetControlTabs().GetCurrentTab()];d.Trigger(c.FileRepoUploaderEvent.ResultsChanged,{results:d._inlineModeFileList,picker:e})}),this._expandableContainer=new ExpandableContainer(this._elem,{expander:$("#"+this._settings.ExpandableHeaderClientId),target:$("#"+this._settings.ExpandableContentClientId)}),this._filesContainer=
$("#"+b.FileListContainerId),this._filesContainer.on("click","."+this._settings.RemoveActionCssClass,function(a){var b=$(a.target).data("filekey");b=d.GetFileByKey(b);a=$(a.target).closest("."+d._settings.FileListRowCssClass);d.RemoveFile(b,a)}),this._filesContainer.on("click","."+this._settings.ViewActionCssClass,function(a){a=$(a.target).data("filekey");a=d.GetFileByKey(a);d.OpenFile(a,!0)}),this._filesContainer.on("click","."+this._settings.EditActionCssClass,function(a){a=$(a.target).data("filekey");
a=d.GetFileByKey(a);d.OpenFile(a,!1)}),this._filesContainer.on("click","."+this._settings.DownloadActionCssClass,function(a){a=$(a.target).data("filekey");a=d.GetFileByKey(a);d.DownloadFile(a)}),$("#"+this._settings.ViewDialogId).on("click",".ccl-button-ok",function(a){d._openedForEditing&&(a=$(".ccl-cssmodal-modal-iframe").attr("src"),$(".ccl-cssmodal-modal-iframe").attr("src",a))}),this._templatesContainer=document.createElement(this._filesContainer.prop("nodeName")),tmpl&&(this._fileListItemTemplate=
tmpl(b.FileListItemTemplateId)),this._fileListStateHidden=$("#"+this._settings.FileListHiddenStateClientId),a=this.ReadFileList(),0<a.length&&this.UpdateFileList(a,!1,null),this._changedFilesStateHidden=$("#"+this._settings.ChangedFilesHiddenStateClientId),this._removedFilesStateHidden=$("#"+this._settings.RemovedFilesHiddenStateClientId);else this._elem.on(c.PickerEvent.Added,function(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];b=b[0];d.CanCheckFileNames()&&b.files.forEach(function(a){a.error||
(a.error=d.GetFileNameValidation(a.name))})})}__extends(b,e);b.prototype.CanCheckIllegalCharacters=function(){return this._settings.IllegalCharacters&&0<this._settings.IllegalCharacters.length?!0:!1};b.prototype.CanCheckIllegalFileNames=function(){return this._settings.IllegalFileNames&&0<this._settings.IllegalFileNames.length?!0:!1};b.prototype.CanCheckFileNames=function(){return this.CanCheckIllegalCharacters||this.CanCheckIllegalFileNames};b.prototype.GetFileNameValidation=function(a){var b=[];
if(this.CanCheckIllegalCharacters())for(var c=this._settings.IllegalCharacters.length,e=0;e<c;e++)this._settings.IllegalCharacters[e]&&-1<a.indexOf(this._settings.IllegalCharacters[e])&&b.push(this._settings.IllegalCharacters[e]);if(this.CanCheckIllegalFileNames())for(a=a.split(".")[0],c=this._settings.IllegalFileNames.length,e=0;e<c;e++)this._settings.IllegalFileNames[e]&&a.toUpperCase()===this._settings.IllegalFileNames[e].toUpperCase()&&b.push(this._settings.IllegalFileNames[e]);return 0<b.length?
(c=b.filter(function(a,c){return b.indexOf(a)==c}),this._settings.FileNameInvalidErrorMessage.replace("{0}",c.join(" "))):null};b.prototype.AddExternalFile=function(a){var b=[];b.push(JSON.parse(JSON.stringify(a)));this.UpdateFileList(b,!0,null);this.UpdateFileListState(this._inlineModeFileList)};b.prototype.ReplaceExternalFile=function(a,b){var c=[];b=JSON.parse(JSON.stringify(b));c.push(b);b=this._filesContainer.find("[id$="+a+"]").closest("."+this._settings.FileListRowCssClass);this.UpdateFileList(c,
!0,b);this.UpdateFileListState(this._inlineModeFileList);a=this.GetFileByKey(a);this.RemoveFile(a,b)};b.prototype.GetUploadResults=function(){return this._fileListStateHidden&&this._fileListStateHidden.val()?this._fileListStateHidden.val():""};b.prototype.RemoveFile=function(a,b){a.deleteUrl?$.ajax({url:a.deleteUrl+"&"+this._settings.MethodOverrideQueryStringParam+"=delete",type:"GET",xhrFields:{withCredentials:!0}}):(this._removedFiles.push(a.id),this._removedFilesStateHidden.val(JSON.stringify(this._removedFiles)));
this.RemoveFileFromList(a,b)};b.prototype.RemoveFileFromList=function(a,b){b.remove();this._changedFiles[a.id]&&(delete this._changedFiles[a.id],this._changedFilesStateHidden.val(JSON.stringify(this._changedFiles)));this._inlineModeFileList.splice(this._inlineModeFileList.indexOf(a),1);this.UpdateFileListState(this._inlineModeFileList);a=this._pickers[this.GetControlTabs().GetCurrentTab()];this.Trigger(c.FileRepoUploaderEvent.ResultsChanged,{results:this._inlineModeFileList,picker:a})};b.prototype.OpenFile=
function(a,b){if(!b&&this.ShouldBeEditedUsingDirectEdit(a)){var c=this._settings.DirectEditUrl;c=c.replace("{fileName}",encodeURIComponent(a.name));c=c.replace("{fileId}",encodeURIComponent(a.id));window.open(c,"","height = 300, width = 500, toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes")}else{c=this._settings.ViewEditUrl;c=c.replace("{fileName}",encodeURIComponent(a.name));c=c.replace("{viewOnly}",b.toString());c=c.replace("{fileRepoId}",encodeURIComponent(a.signedId));
var d=a.modified?new Date(a.modified):new Date;this._openedForEditing=!b;c=c.replace("{uniqueId}",this.convertToTicks(d).toString());this.ShouldBeOpenedInPopup(a.type)?this.OpenInWindow(c):(d=b=0,this.isEmbeddedVideo(a.type)&&(b=400,d=300),this.OpenInModalDialog(b,d,a.name,c,!1))}};b.prototype.ShouldBeOpenedInPopup=function(a){return this.IsOwasFileType(a)||0<=this._settings.AdditionalMimeTypesOpenedInPopup.indexOf(a)};b.prototype.OpenInWindow=function(a){var b=window.open(a,"","width="+.8*screen.width+
", height="+.8*screen.height+",location = 0, directories = 0, toolbar = 0, scrollbars = 0, status = 0, menubars = 0, resizable = 1");this.CheckIfBrowserIsOldIE()&&this.AttachEventForOldIE(b,"onload",function(){$("head",b.document).append('<style type="text/css">html,body{height:100%}html{width:auto;margin-top:-8px;}</style>')})};b.prototype.CheckIfBrowserIsOldIE=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?10>=parseInt(a.split("msie")[1])?!0:!1:!1};b.prototype.AttachEventForOldIE=
function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent(b,c):a[b]=c};b.prototype.OpenInModalDialog=function(a,b,c,e,f){var d=this.GetDialog();d.setContentMinSize(a,b);d.setTitle(c);d.setAjaxUrl(e);d.openDialog(f)};b.prototype.IsOwasFileType=function(a){return 0<=this._settings.OWASMimeTypes.indexOf(a)};b.prototype.ShouldBeEditedUsingDirectEdit=function(a){return this._settings.UseDirectEdit&&!this.IsEditableOwasFile(a)};b.prototype.IsEditableOwasFile=function(a){return 0<=
this._settings.OWASMimeTypes.indexOf(a.type)&&0<=this._settings.EditableMimeTypes.indexOf(a.type)};b.prototype.convertToTicks=function(a){return 621355968E9+1E4*a.getTime()};b.prototype.DownloadFile=function(a){a=this._settings.DownloadRedirectUrl.replace(this._settings.FileRepoFileIdToken,encodeURIComponent(a.signedId));window.open(a)};b.prototype.IsViewSupported=function(a){return a?0<=this._settings.ViewMimeTypes.indexOf(a):!1};b.prototype.IsEditingAllowed=function(a){return a?0<=this._settings.EditableMimeTypes.indexOf(a)&&
this._settings.IsFileEditingAllowed:!1};b.prototype.isEmbeddedVideo=function(a){return a?0<=this._settings.EmbedVideoMimeTypes.indexOf(a):!1};b.prototype.GetDialog=function(){return window[this._settings.ViewDialogId]};b.prototype.HandleResultsChanges=function(a,b){var c=this.GetControlTabs(),d=c.GetTabsCount();a=a&&0<a.length;for(var e=0;e<d;e++){var f=c.IsTabAvailable(e);c.SetTabEnabled(a?e==b:f,e);c.SetTabToolTip(e,this.GetTooltipForTab(a?b:e,e))}};b.prototype.GetTooltipForTab=function(a,b){return this._settings.DisabledTabTextForPickers.filter(function(b){return b.PickerIndex===
a})[0].Tooltips.filter(function(a){return a.PickerIndex===b})[0].Tooltip};b.prototype.GetControlTabs=function(){this._controlTabsControl||(this._controlTabsControl=c.DomElementClass.GetInstanceForElement(this._settings.ControlTabsClientId));return this._controlTabsControl};b.prototype.ReadFileList=function(){return this._fileListStateHidden&&this._fileListStateHidden.val()?JSON.parse(this._fileListStateHidden.val()):JSON.parse("[]")};b.prototype.GetRemovedFileIds=function(){return this._removedFilesStateHidden&&
this._removedFilesStateHidden.val()?JSON.parse(this._removedFilesStateHidden.val()):JSON.parse("[]")};b.prototype.GetChangedFilesDictionary=function(){return this._changedFilesStateHidden&&this._changedFilesStateHidden.val()?JSON.parse(this._changedFilesStateHidden.val()):JSON.parse("{}")};b.prototype.UpdateFileListState=function(a){this._fileListStateHidden.val(JSON.stringify(a));this._fileListStateHidden.trigger("change")};b.prototype.UpdateFileList=function(a,b,c){var d=this,e=this;a.forEach(function(a){a.thumbnailUrl=
e.GetFileIcon(a.name);d._inlineModeFileList.push(a);d._inlineModeFileKeys[a.id]=a;var b=a.name.split(".");if(1<b.length){a.rawFilename=b[0];if(2<b.length)for(var c=1;c<=b.length-2;c++)a.rawFilename+="."+b[c];a.extension="."+b[b.length-1]}else a.rawFilename=a.name});a&&0<a.length&&(a=this.RenderTemplate(this._fileListItemTemplate,a,b),c&&0<c.length?c.after(a):a.appendTo(this._filesContainer),b&&DropDownMenu.initialize(),a.find("."+this._settings.ViewActionCssClass).filter(function(){var a=e.GetFileByKey($(this).data("filekey"));
return!e.IsViewSupported(a.type)}).closest("li").hide(),this._settings.UseDirectEdit||a.find("."+this._settings.EditActionCssClass).filter(function(){var a=e.GetFileByKey($(this).data("filekey"));return!e.IsEditingAllowed(a.type)}).closest("li").hide());var f=this;$(".ccl-hybrideditoritem").each(function(){f.fixSize($(this))})};b.prototype.fixSize=function(a){a.css("width","0px");setTimeout(function(){a.css("width","auto")},10)};b.prototype.RenderTemplate=function(a,b,c){if(!a)return $();a=a({files:b,
delayMenuInit:c});return a instanceof $?a:$(this._templatesContainer).html(a).children()};b.prototype.GetFileIcon=function(a){a=this.GetFileExtension(a);if(this._settings.FileTypeIcons)return this._settings.FileTypeIcons[a]||this._settings.DefaultFileIcon};b.prototype.GetFileExtension=function(a){a=a.split(".");return 1>=a.length?"":a.pop().toLowerCase()};b.prototype.GetFileByKey=function(a){return this._inlineModeFileKeys[a]};b.prototype.GetFilenameEditorItemSettings=function(){return{editModeEnabled:"inline",
inlineEditorOptions:{blockedCharacters:this._settings.IllegalCharacters,editFieldAutoWidth:!1,editFieldDisplayInline:!0,editFieldCssClass:this._settings.FileNameEditorCssClass,forceContainerSize:!0,maxLength:255}}};return b}(c.DomElementClass);c.FileRepoUploader=e})(CCL||(CCL={}));
(function(c){var e=function(){function e(b,a,c){"undefined"===typeof c&&(c=null);this.form=b;this.warningMessage=a;this.options=c;this.textInputs=b.find("input[type=text], input[type=numeric],textarea");this.hybridEditors=b.find("div.ccl-hybrideditoritem > input[type=hidden]");this.checkboxesRadios=b.find("input[type=checkbox],input[type=radio]");this.selects=b.find("select");this.textInputs.each(function(a,b){a=$(b);a.data(e.initialValueDataKey,a.val())});this.hybridEditors.each(function(a,b){a=
$(b);a.data(e.initialValueDataKey,a.val())});this.checkboxesRadios.each(function(a,b){a=$(b);a.data(e.initialValueDataKey,a.is(":checked"))});this.selects.each(function(a,b){a=$(b);a.data(e.initialValueDataKey,a.find(":selected").val())});this.AttachHandler();b.submit($.proxy(this.DetachHandler,this));this.initOptions(a);e.instances.push(this)}e.prototype.initOptions=function(b){if(this.options){this.options.cancelButtonId&&$(document.getElementById(this.options.cancelButtonId)).click($.proxy(this.DetachHandler,
this));this.options.$cancelButtons&&this.options.$cancelButtons.length&&this.options.$cancelButtons.click($.proxy(this.DetachHandler,this));var a=this.options.whiteList;a&&a.enabled&&(this.dialogWhiteList=new c.DialogWhiteList,this.dialogWhiteList.clearStateCallback=a.clearStateCallback,this.dialogWhiteList.confirmationMessage=b)}};e.prototype.IsDirty=function(){return 1==this.form.data(e.dirtyFormDataKey)};e.prototype.SetDirty=function(b){var a=b?1:0;this.toggleWhiteListEnabled(b);this.form.data(e.dirtyFormDataKey,
a);this.form.trigger("dirtyChanged",a)};e.prototype.AttachHandler=function(){if(!this.isAttached){var b=$.proxy(this.onBeforeUnloadHandler,this);$(window).on(e.eventBeforeunload,b);this.isAttached=!0}};e.prototype.DetachHandler=function(){if(this.isAttached){var b=$.proxy(this.onBeforeUnloadHandler,this);$(window).off(e.eventBeforeunload,b);this.isAttached=!1}this.toggleWhiteListEnabled(!1)};e.manuallyRunBeforeUnloadHandler=function(){e.instances.forEach(function(b){b.onBeforeUnloadHandler()})};e.prototype.onBeforeUnloadHandler=
function(){var b=this.IsDirty();b||this.textInputs.each(function(a,c){a=$(c);if(a.is(":visible")&&a.val()!=a.data(e.initialValueDataKey))return b=!0,!1});b||this.hybridEditors.each(function(a,c){a=$(c);if(a.val()!=a.data(e.initialValueDataKey))return b=!0,!1});b||this.checkboxesRadios.each(function(a,c){a=$(c);if(a.is(":visible")&&a.is(":checked")!=a.data(e.initialValueDataKey))return b=!0,!1});b||this.selects.each(function(a,c){a=$(c);if(a.is(":visible")&&a.find(":selected").val()!=a.data(e.initialValueDataKey))return b=
!0,!1});if(!b&&window.CKEDITOR&&CKEDITOR.instances)for(var a in CKEDITOR.instances)if(isTextEditorDirty(a)){b=!0;break}this.options&&this.options.callback&&(b=this.options.callback());this.SetDirty(b);if(b)return this.warningMessage};e.prototype.toggleWhiteListEnabled=function(b){this.dialogWhiteList&&(b?this.dialogWhiteList.enable():this.dialogWhiteList.disable())};e.instances=[];e.eventBeforeunload="beforeunload";e.initialValueDataKey="InitialValue";e.dirtyFormDataKey="IsDirty";return e}();c.FormCheckBeforeUnload=
e})(CCL||(CCL={}));
(function(c){var e=function(e){function b(a,b){var d=this;e.call(this,a,b);this._inputControl=$("#"+b.InputClientId);this._inputLabel=$("#"+b.LabelClientId);this._inputControl.on("keydown keyup change input propertychange",function(){d._inputControl.is(":visible")&&d.NotifyResultChanged()});this.determineVisibilityOfEmbedCheckbox(this.GetResults());this.Trigger(c.PickerEvent.Initialized);this.NotifyResultChanged()}__extends(b,e);b.prototype.GetResults=function(){return this._inputControl.val()||this._inputLabel.text()};
b.prototype.determineVisibilityOfEmbedCheckbox=function(a){a?this.isSecure?this.isUrlUnsecure(a)||8>=a.trim().length?$(".checkbox-embed-link-target").hide():$(".checkbox-embed-link-target").show():$(".checkbox-embed-link-target").show():$(".checkbox-embed-link-target").hide()};b.prototype.NotifyResultChanged=function(){var a=[],b=this.GetResults();this.determineVisibilityOfEmbedCheckbox(b);b&&a.push({fileUrl:b});this.Trigger(c.PickerEvent.ResultsChanged,{results:a})};b.prototype.isUrlUnsecure=function(a){a=
a.trim();var b=!0;8<a.length&&(a=this.parseUrl(a)[1],b=!a||"https:"!==a.toLowerCase());return b};b.prototype.parseUrl=function(a){return/^(?:(?:(?:([^:\/#\?]+:)?(?:(?:\/\/)((?:((?:[^:@\/#\?]+)(?::(?:[^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?::([0-9]+))?))?)?)?((?:\/?(?:[^\/\?#]+\/+)*)(?:[^\?#]*)))?(\?[^#]+)?)(#.*)?/.exec(a)};return b}(c.ItemPickerBase);c.LinkPicker=e})(CCL||(CCL={}));
(function(c){var e;(function(c){c[c.Horizontal=0]="Horizontal";c[c.Vertical=1]="Vertical"})(e||(e={}));e=function(){function c(b,a,d){this.settings=a;this.cssClasses=d;this.$mainContainer=this.settings.contentContainer.wrap("<div class='"+this.cssClasses.TooltipWrapper+"'></div>").parent();this.$arrowContainer=$("<div class='"+this.cssClasses.TooltipArrow+"'></div>").prependTo(this.$mainContainer);this.$mainContainer.data("CustomToolTip",this);$.ui.position[c.tooltipCollisionName]!==c.tooltipCollision&&
($.ui.position[c.tooltipCollisionName]=c.tooltipCollision)}c.prototype.openTooltip=function(b,a){var d=this;this.isOpened||(this.isOpened=!0,this.dialogArrow=a.arrow,this.$targetElement=b,this.$mainContainer.removeAttr("style"),this.clearArrowClassesFromMainContainer(),this.$mainContainer.css({display:"block","z-index":this.settings.zIndex}),this.$mainContainer.position({of:b,my:a.my,at:a.at,collision:c.tooltipCollisionName+" "+c.tooltipCollisionName,within:a.within}),this.setArrowPosition(),this.$mainContainer.fadeIn(250,
function(){d.$mainContainer.show()}))};c.prototype.closeTooltip=function(){this.$mainContainer.hide();this.isOpened=!1};c.prototype.isTooltipOpened=function(){return this.isOpened};c.prototype.setArrowPosition=function(){var b="",a="";switch(this.dialogArrow){case this.cssClasses.Bottom:a="center top";b="center bottom";break;case this.cssClasses.Top:a="center bottom";b="center top";break;case this.cssClasses.Left:a="right center";b="left center";break;case this.cssClasses.Right:a="left center",b=
"right center"}""!==b&&""!==a&&(this.clearArrowClassesFromMainContainer(),this.$mainContainer.addClass(this.dialogArrow),this.$arrowContainer.position({of:this.$targetElement,my:a,at:b,collision:"none none"}))};c.prototype.clearArrowClassesFromMainContainer=function(){this.$mainContainer.removeClass(this.cssClasses.Top+" "+this.cssClasses.Bottom+" "+this.cssClasses.Left+" "+this.cssClasses.Right)};c.prototype.invertArrow=function(b){switch(b){case 0:switch(this.dialogArrow){case this.cssClasses.Right:this.dialogArrow=
this.cssClasses.Left;break;case this.cssClasses.Left:this.dialogArrow=this.cssClasses.Right}break;case 1:switch(this.dialogArrow){case this.cssClasses.Bottom:this.dialogArrow=this.cssClasses.Top;break;case this.cssClasses.Top:this.dialogArrow=this.cssClasses.Bottom}}this.setArrowPosition()};c.tooltipCollisionName="flipWithArrow";c.tooltipCollision={left:function(b,a){var c=b.left;$.ui.position.flip.left(b,a);$.ui.position.fit.left(b,a);c!==b.left&&a.elem.data("CustomToolTip").invertArrow(0)},top:function(b,
a){var c=b.top;$.ui.position.flip.top(b,a);$.ui.position.fit.top(b,a);c!==b.top&&a.elem.data("CustomToolTip").invertArrow(1)}};return c}();c.CustomToolTip=e})(CCL||(CCL={}));
(function(c){var e=function(){function c(b,a,d,e){"undefined"===typeof d&&(d=null);"undefined"===typeof e&&(e=500);this.loadingIndicatorClass=a;this.$element=$(b);this.$elementsToDisable=d;this.timeout=e;var f=this;$(function(){f.$element.on("click",f.handler.bind(f)).each(function(){var a=$._data(this,"events").click,b=a.pop();a.unshift(b)}).on(c.eventRemoveLoadingIndicator,function(a,b){return f.removeLoadingIndicatorClass(b)})})}c.prototype.handler=function(){var b=this;this.timer=setTimeout(function(){b.$element.addClass(b.loadingIndicatorClass);
b.toggleDisabled(!0)},this.timeout)};c.prototype.removeLoadingIndicatorClass=function(b){"undefined"===typeof b&&(b=!1);clearTimeout(this.timer);this.$element.removeClass(this.loadingIndicatorClass);b||this.toggleDisabled()};c.prototype.toggleDisabled=function(b){"undefined"===typeof b&&(b=!1);this.$element.prop("disabled",b);void 0!==this.$elementsToDisable&&null!==this.$elementsToDisable&&$.each(this.$elementsToDisable,function(a,c){$(c).prop("disabled",b)})};c.eventRemoveLoadingIndicator="removeLoadingIndicator";
return c}();c.ButtonLoadingIndicator=e})(CCL||(CCL={}));(function(c){var e=function(){function c(b){this.delayedCallback=b}c.prototype.invokeCallback=function(b,a){var c=this;this.timeoutId&&clearTimeout(this.timeoutId);this.timeoutId=setTimeout(function(){c.delayedCallback(b)},a)};return c}();c.CallbackDebouncer=e})(CCL||(CCL={}));
(function(c){var e=function(){function e(){var b=this;this.lastState=c.CommonFunctions.isPhoneScreenSize();var a=new c.CallbackDebouncer(function(){var a=c.CommonFunctions.isPhoneScreenSize();a!==b.lastState&&($(b).trigger(e.mediaChangedEventName,a),b.lastState=a)});$(window).resize(function(){a.invokeCallback(void 0,200)})}e.mediaChangedEventName="mediaTypeChanged";return e}();c.WindowResizeHandler=e})(CCL||(CCL={}));
__extends=this&&this.__extends||function(c,e){function f(){this.constructor=c}for(var b in e)e.hasOwnProperty(b)&&(c[b]=e[b]);c.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)};var PickerInitFailureReason;(function(c){c[c.BrowserNotSupported=1]="BrowserNotSupported";c[c.ExternalServiceNotAvailable=2]="ExternalServiceNotAvailable"})(PickerInitFailureReason||(PickerInitFailureReason={}));
var PickerInitFailureEventArgs=function(){return function(c,e,f){this.failureReason=c;this.failureMessage=e;this.pickerName=f}}(),PickerCallback=function(){return function(c,e,f,b){this.onPickerInitSuccess=c;this.onPickerInitFailure=e;this.onFileSelected=f;this.onFileSelectionCanceled=b}}(),SourceType;
(function(c){c[c.Dropbox=1]="Dropbox";c[c.Google=2]="Google";c[c.OneDriveForBusiness=3]="OneDriveForBusiness";c[c.Local=4]="Local";c[c.OneDrivePersonal=5]="OneDrivePersonal"})(SourceType||(SourceType={}));(function(c){c.isOneDrive=function(e){return e===c.OneDrivePersonal||e===c.OneDriveForBusiness};c.isCloud=function(e){return e===c.Dropbox||e===c.Google||c.isOneDrive(e)}})(SourceType||(SourceType={}));var Uploaders;
(function(c){(function(c){(function(c){var b=function(){return function(a){this.buttonComponents=a}}();c.CollaborationViewModel=b})(c.Components||(c.Components={}))})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(c){var b=function(){return function(a){this.buttonComponents=a;this.name="collaboration-control";this.viewModel={instance:new c.CollaborationViewModel(this.buttonComponents)};this.template='\n\x3c!-- ko foreach: buttonComponents --\x3e\n<div data-bind="component: {name: name}"></div>\n\x3c!-- /ko --\x3e\n<file-list-collaboration></file-list-collaboration>\n'}}();c.CollaborationComponent=b})(c.Components||(c.Components={}))})(c.Collaboration||(c.Collaboration={}))})(Uploaders||
(Uploaders={}));
(function(c){(function(c){(function(c){var b=function(){function a(a,b,c){contract.require(!objectState.isNullOrUndefined(a),"This class requires 'name' to be passed. Please, provide it.");-1===a.lastIndexOf(".")||void 0!==b||c?(this._name=a,this._extension=objectState.isNullOrUndefined(b)?null:b):(this._name=a.substring(0,a.lastIndexOf(".")+1),this._extension=a.substring(a.lastIndexOf(".")+1))}a.prototype.getName=function(){return this._name};a.prototype.getExtension=function(){return this._extension};return a}();
c.FileName=b})(c.Model||(c.Model={}))})(c.FileList||(c.FileList={}))})(Uploaders||(Uploaders={}));
var LocalFileInputHandle=function(){function c(c){this.fileInput=c}c.prototype.get=function(){return this.fileInput};return c}(),LocalFileHandle=function(){function c(c){this.file=c}c.prototype.get=function(){return this.file};return c}(),ExternalSourceFileHandle=function(){function c(c,f){this.url=c;this.id=f}c.prototype.get=function(){return objectState.isNullOrUndefined(this.id)?this.url:{url:this.url,id:this.id}};return c}(),PickerFileResult=function(){function c(c,f,b,a,d,g){this.fileHandle=
c;this.name=f;this.size=b;this.sourceType=a;this.relativePath=d;this.mimeType=g}c.prototype.getFileHandle=function(){return this.fileHandle.get()};c.createExternalSourcePickerFileResult=function(e,f,b,a,d,g){return new c(new ExternalSourceFileHandle(e,g),f,b,a,null,d)};c.createLocalPickerFileResultWithInput=function(e,f){return new c(new LocalFileInputHandle(e),f,null,SourceType.Local)};c.createLocalPickerFileResult=function(e){return new c(new LocalFileHandle(e),e.name,e.size,SourceType.Local,null,
e.type)};c.createFolderPickerFileResultWithRelativePath=function(e,f){return new c(new LocalFileHandle(e),e.name,e.size,SourceType.Local,f,e.type)};return c}(),UploadMetadata=function(){function c(c,f,b,a,d,g){this.id=c;this.name=f;this.sourceType=b;this.signature=a;this.signedFileRepoId=d;this.mimetype=g}c.create=function(e,f){var b=e.name,a=e.sourceType;e=e.mimeType;var d=null,g=null,h=null;f&&(f.fileGuid&&(d=f.fileGuid),f.signedGuid&&(g=f.signedGuid),f.signedFileRepoId&&(h=f.signedFileRepoId),
f.mimeType&&(e=f.mimeType));return new c(d,b,a,g,h,e)};return c}(),FileInCloudMetadata=function(){function c(c,f,b,a){this.name=c;this.sourceType=f;this.viewUrl=b;this.mimeType=a}c.clone=function(e){var f=new c(e.name,e.sourceType,e.viewUrl,e.mimeType);f.id=e.id;f.oAuthContext=e.oAuthContext;return f};c.create=function(e,f){var b=e.name,a=e.sourceType,d=c.getViewUrl(e);b=new c(b,a,d,e.mimeType);b.oAuthContext=f;b.id=c.getId(e);return b};c.getViewUrl=function(c){c=c.getFileHandle();return"string"===
typeof c||c instanceof String?c:c.url};c.getId=function(e){e=e.getFileHandle();return c.isIdAvailable(e)?e.id:null};c.isIdAvailable=function(c){return!objectState.isNullOrUndefined(c)&&!objectState.isNullOrUndefined(c.id)};return c}(),UploadControlTranslation=function(){return function(){}}();
(function(c){c=c.FileList||(c.FileList={});c=c.Model||(c.Model={});c=c.FileItemState||(c.FileItemState={});c[c.New=0]="New";c[c.Ready=1]="Ready";c[c.InProgress=2]="InProgress";c[c.Aborting=3]="Aborting";c[c.Error=4]="Error";c[c.Success=5]="Success"})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(c){var b=function(){function a(){this.currentState=c.FileItemState.New}a.prototype.getCurrentState=function(){return this.currentState};a.prototype.isFinalState=function(){return this.currentState===c.FileItemState.Success||this.currentState===c.FileItemState.Error};a.prototype.prepareUpload=function(){if(this.currentState===c.FileItemState.New)this.currentState=c.FileItemState.Ready;else throw Error("You can only prepare upload if it is in status 'New'");};a.prototype.startUpload=
function(){if(this.currentState===c.FileItemState.Ready)this.currentState=c.FileItemState.InProgress;else throw Error("You can only start upload if it is in status 'Ready'");};a.prototype.abortUpload=function(){if(this.currentState===c.FileItemState.InProgress)this.currentState=c.FileItemState.Aborting;else throw Error("You can only abort upload if it is in status 'InProgress'");};a.prototype.finishUpload=function(){if(this.currentState===c.FileItemState.Ready||this.currentState===c.FileItemState.InProgress||
this.currentState===c.FileItemState.Aborting)this.currentState=c.FileItemState.Success;else throw Error("You can only finish upload if it is in status 'InProgress' or 'Ready' or 'Aborting'");};a.prototype.failUpload=function(){if(this.currentState===c.FileItemState.Ready||this.currentState===c.FileItemState.InProgress||this.currentState===c.FileItemState.Aborting)this.currentState=c.FileItemState.Error;else throw Error("You can only fail upload if it is in status 'Ready' or 'InProgress' or 'Aborting'");
};return a}();c.FileItemStateMachine=b})(c.Model||(c.Model={}))})(c.FileList||(c.FileList={}))})(Uploaders||(Uploaders={}));
var GapiDocType=function(){function c(){}c.word="application/vnd.openxmlformats-officedocument.wordprocessingml.document";c.excel="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";c.powerpoint="application/vnd.openxmlformats-officedocument.presentationml.presentation";c.png="image/png";c.pdf="application/pdf";c.googleSpreadsheet="application/vnd.google-apps.spreadsheet";c.googleDocument="application/vnd.google-apps.document";c.googlePresentation="application/vnd.google-apps.presentation";
c.googleApps=[c.googleSpreadsheet,c.googleDocument,c.googlePresentation];c.getDocumentType=function(e){return e[c.word]?c.word:e[c.excel]?c.excel:e[c.powerpoint]?c.powerpoint:e[c.png]?c.png:e[c.pdf]?c.pdf:Object.keys(e)[0]};return c}();
(function(c){(function(c){(function(c){var b=function(){function a(a){var b=this;contract.require(!objectState.isNullOrUndefined(a.fileName),"This class requires 'fileName' to be passed. Please, provide it.");contract.require(!objectState.isNullOrUndefined(a.stateMachine),"This class requires 'stateMachine' to be passed. Please, provide it.");this.fileName=ko.observable(a.fileName.getName());this.fileExtension=ko.observable(a.fileName.getExtension());this.mimeType=ko.observable("");this.stateMachine=
a.stateMachine;this.isRemoveAllowed=ko.observable(objectState.isNullOrUndefined(a.isRemoveAllowed)?!0:a.isRemoveAllowed);this.onRemoveCallback=a.onRemoveCallback;this.errorMessage=ko.observable(objectState.isNullOrUndefined(a.errorMessage)?null:a.errorMessage);this.warningMessage=ko.observable(objectState.isNullOrUndefined(a.warningMessage)?null:a.warningMessage);this.isCompleted=ko.observable(!1);this.getItemCss=ko.pureComputed(function(){return b.errorMessage()||b.warningMessage()?"ccl-fl-item-error":
""});this.getFileItemCss=ko.pureComputed(function(){var c=["ccl-fl-item-details"];b.isCompleted()||c.push("ccl-fl-item-details-file-icon-faded");a.iconCssClass&&c.push(a.iconCssClass);return c.join(" ")});this.getFileNameCss=ko.pureComputed(function(){var a=[];b.errorMessage()||b.warningMessage()?a.push("ccl-fl-item-details-text-file-name-error"):b.isCompleted()?a.push("ccl-fl-item-details-text-file-name-uploaded"):a.push("ccl-fl-item-details-text-file-name-faded");return a.join(" ")});this.getFileExtensionCss=
ko.pureComputed(function(){return b.errorMessage()||b.warningMessage()?"ccl-fl-item-details-text-file-extension-error":b.isCompleted()?"ccl-fl-item-details-text-file-extension-uploaded":"ccl-fl-item-details-text-file-extension-faded"});this.progress=ko.observable(0);this.stateMachine.prepareUpload();this.isExtraOperationAvailable=ko.pureComputed(function(){return b.isCompleted()})}a.prototype.setProgress=function(a){var b=this.progress();if(100<a)throw"Progress can't exceed 100";b>=a||(0===b&&0<a&&
this.stateMachine.startUpload(),this.progress(a))};a.prototype.markAsCompleted=function(){this.isCompleted()||this.stateMachine.finishUpload();this.progress(100);this.isCompleted(!0)};a.prototype.setFolderError=function(){this.setError(UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};a.prototype.setError=function(a){this.errorMessage(a);this.progress(100);this.stateMachine.failUpload();this.isRemoveAllowed(!0)};a.prototype.setFolderWarning=function(){this.warningMessage(UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};
a.prototype.getState=function(){return this.stateMachine.getCurrentState()};a.buildItemForUpload=function(b,e){b=new c.FileName(b);b=new a({fileName:b,stateMachine:new c.FileItemStateMachine,iconCssClass:a.getCssIconForFile(a.getFilePurpose(b.getExtension()))});b.metadata=e;return b};a.buildItemForFolder=function(b){return new a({fileName:new c.FileName(b,void 0,!0),stateMachine:new c.FileItemStateMachine,iconCssClass:"ccl-fl-item-details-folder-icon"})};a.buildItemForFileInCloud=function(b){var d=
new a({fileName:new c.FileName(b.name),stateMachine:new c.FileItemStateMachine,iconCssClass:a.getCssIconForFileInCloud(b)});d.metadata=b;return d};a.getCssIconForFileInCloud=function(b){return b.sourceType===SourceType.Google?a.getCssIconForGoogleDriveFile(b.mimeType):SourceType.isOneDrive(b.sourceType)?"ccl-fl-item-details-one-drive-file-icon":a.defaultIconCssClass};a.getCssIconForGoogleDriveFile=function(a){switch(a){case GapiDocType.googleDocument:return"ccl-fl-item-details-google-document-icon";
case GapiDocType.googlePresentation:return"ccl-fl-item-details-google-presentation-icon";case GapiDocType.googleSpreadsheet:return"ccl-fl-item-details-google-spreadsheet-icon";default:return"ccl-fl-item-details-google-drive-file-icon"}};a.getFilePurpose=function(a){return-1!==["docx","doc","docm","odt","rtf"].indexOf(a)?"document":-1!==["pptx","ppt","pptm","odp"].indexOf(a)?"presentation":-1!==["pdf"].indexOf(a)?"pdf":-1!==["xlsx","xls","xlsb, xlsm","ods"].indexOf(a)?"table":-1!=="mov wmv flv swf mp4 m4v webm".split(" ").indexOf(a)?
"video":-1!=="mp3 m4a wav fla acc ogg".split(" ").indexOf(a)?"audio":-1!==["bmp","gif","jpg","jpeg","png"].indexOf(a)?"image":-1!==["zip","rar","7z"].indexOf(a)?"archive":"generic"};a.getCssIconForFile=function(a){return"ccl-fl-item-details-"+a+"-file-icon"};a.defaultIconCssClass="ccl-fl-item-details-generic-file-icon";return a}();c.FileItem=b})(c.Model||(c.Model={}))})(c.FileList||(c.FileList={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(c){var b=function(){return function(a){var b=this;this.settings=a;this.addFile=function(a){b.files.push(a)};this.removeFile=function(a){b.files.remove(a);if(a.onRemoveCallback)a.onRemoveCallback()};this.getFiles=function(){return b.files()};this.isVisible=ko.observable(!0);this.files=ko.observableArray()}}();c.FileListViewModel=b})(c.Components||(c.Components={}))})(c.FileList||(c.FileList={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(c){var b=function(){function a(a,b){var c=this;this.fileList=a;this.name=b;this.viewModel={instance:this.fileList};this.renderContextMenuMarkupIfNeeded=function(){return null!=c.fileList.settings&&c.fileList.settings.EnableContextMenu?'<file-item-context-menu params="file: $data, settings: $parent.settings"></file-item-context-menu>':""};this.template=this.getHtmlTemplate()}a.prototype.getHtmlTemplate=function(){return'\n                    <div data-bind="foreach: files, visible: isVisible">\n                        <div class="ccl-fl-item-container">\n                            <div data-bind="css: getItemCss()" class="ccl-fl-item">\n                                <div data-bind="style: {width: progress() + \'%\'},\n                                    css: isCompleted() ? \'ccl-fl-item-uploaded\' : \'ccl-fl-item-progress-animate\',\n                                    visible: !errorMessage()"></div>\n                                <div class="ccl-fl-item-content">\n                                    <div data-bind="css: getFileItemCss()">\n                                        <span data-bind="text: fileName, css: getFileNameCss()"></span>\n                                        <span data-bind="visible: fileExtension(), text: fileExtension, css: getFileExtensionCss()"></span>\n                                    </div>\n                                    <div class="ccl-fl-item-actions">\n                                        '+
this.renderContextMenuMarkupIfNeeded()+'\n                                        <button class="ccl-fl-item-remove-enabled" data-bind="click: function() { $parent.removeFile($data) },\n                                            visible: isRemoveAllowed()"></button>\n                                    </div>\n                                    <div class="ccl-fl-item-remove-disabled" data-bind="visible: !isRemoveAllowed()"></div>\n                                </div>\n                            </div>\n                            <div class="ccl-fl-error" data-bind="visible: errorMessage()">\n                                <div class="ili ili-exclamation-circle" aria-hidden="true"></div>\n                                <div class="ccl-fl-error-message" data-bind="text: errorMessage"></div>\n                            </div>\n                            <div class="ccl-fl-warning" data-bind="visible: warningMessage()">\n                                <div class="ili ili-exclamation-circle ccl-fl-warning-exclamation-circle" aria-hidden="true"></div>\n                                <div class="ccl-fl-warning-message" data-bind="text: warningMessage"></div>\n                            </div>\n                        </div>\n                    </div>'};
return a}();c.FileListComponent=b})(c.Components||(c.Components={}))})(c.FileList||(c.FileList={}))})(Uploaders||(Uploaders={}));(function(c){c=c.FeedbackType||(c.FeedbackType={});c[c.Information=0]="Information";c[c.Error=1]="Error";c[c.Warning=2]="Warning";c[c.Tip=3]="Tip";c[c.Functionality=4]="Functionality"})(CCL||(CCL={}));
var FeedbackManager=function(){return function(c){var e=this;this.feedbackControl=c;this.messages=[];this.showFeedback=function(c){e.messages.push(c);c=e.messages.join("<br />");e.feedbackControl.showMessage(CCL.FeedbackType.Information,c)}}}(),FolderMetadata=function(){return function(c){this.name=c;this.files=[];this.folders=[]}}(),MetadataArrays=function(){return function(){}}(),HiddenMetadataManager=function(){return function(c){var e=this;this.metadataField=c;this.replaceFileItems=function(c){for(var b=
[],a=[],d=[],f=0;f<c.length;f++){var h=c[f];if(h.getState()===Uploaders.FileList.Model.FileItemState.Success)if(h=h.metadata,h instanceof UploadMetadata)b.push(h);else if(h instanceof FileInCloudMetadata)a.push(h);else if(h instanceof FolderMetadata)d.push(h);else throw Error("Serialization error: Unknown type of Metadata!");}e.metadataField.val(JSON.stringify({uploadMetadataArray:b,fileInCloudMetadataArray:a,folderMetadataArray:d}))};this.getFileItems=function(){var c=e.metadataField.val();if(objectState.isNullOrWhitespace(c))return[];
var b=[],a=JSON.parse(c);if(a.uploadMetadataArray)for(var d=0,g=a.uploadMetadataArray;d<g.length;d++){var h=g[d];c=Uploaders.FileList.Model.FileItem.buildItemForUpload(h.name);c.metadata=new UploadMetadata(h.id,h.name,h.sourceType,h.signature,h.signedFileRepoId,h.mimetype);c.mimeType(h.mimetype);b.push(c)}if(a.fileInCloudMetadataArray)for(d=0,g=a.fileInCloudMetadataArray;d<g.length;d++)c=FileInCloudMetadata.clone(g[d]),c=Uploaders.FileList.Model.FileItem.buildItemForFileInCloud(c),b.push(c);if(a.folderMetadataArray)for(d=
0,a=a.folderMetadataArray;d<a.length;d++)g=a[d],c=Uploaders.FileList.Model.FileItem.buildItemForFolder(g.name),c.metadata=e.getFolderMetadataInstance(g),b.push(c);return b};this.getFolderMetadataInstance=function(c){var b=new FolderMetadata(c.name);b.files=c.files;b.folders=c.folders;return b}}}(),UploadStatus;
(function(c){c[c.Awaiting=0]="Awaiting";c[c.InProgress=1]="InProgress";c[c.Succeeded=2]="Succeeded";c[c.SucceededWithErrors=3]="SucceededWithErrors";c[c.Failed=4]="Failed"})(UploadStatus||(UploadStatus={}));
var FileItemState=Uploaders.FileList.Model.FileItemState,FileItem=Uploaders.FileList.Model.FileItem,UploadStatusCalculator=function(){function c(){var c=this;this.calculate=function(e){var b=c.countFileItemsInGivenStates(e,[FileItemState.New,FileItemState.Ready,FileItemState.InProgress,FileItemState.Aborting]),a=c.countFileItemsInGivenStates(e,[FileItemState.Success]);e=c.countFileItemsInGivenStates(e,[FileItemState.Error]);return c.determineStatus(b,a,e)}}c.prototype.countFileItemsInGivenStates=
function(c,f){return c.filter(function(b){b=b.getState();return-1!==f.indexOf(b)}).length};c.prototype.determineStatus=function(c,f,b){return 0<c?UploadStatus.InProgress:0<f&&0<b?UploadStatus.SucceededWithErrors:0<f?UploadStatus.Succeeded:0<b?UploadStatus.Failed:UploadStatus.Awaiting};return c}();
(function(c){(function(c){var e=function(){return function(b,a,c,e,f,k){var d=this;this.controller=b;this.callbacks=a;this.feedbackManager=c;this.fileList=e;this.statusCalculator=f;this.metadataManager=k;this.subscribeToController=function(a){a.subscribe({onInitializationFailure:d.presentInitializationFailure,onFilesSelected:d.signalFilesSelection,onActionSuccess:d.signalSuccess,onActionError:d.signalError,onActionAborted:d.signalAbort,onFileRemoved:d.signalFileRemoval})};this.handleStateChange=function(){var a=
d.fileList.getFiles();d.metadataManager.save(a);d.callbacks.onStatusChanged&&(a=d.statusCalculator.calculate(a),d.callbacks.onStatusChanged(a))};this.presentInitializationFailure=function(a){d.feedbackManager.showFeedback(a.failureMessage)};this.signalFilesSelection=function(a){for(var b=0;b<a.length;b++)d.fileList.addFile(a[b]);d.handleStateChange();d.callbacks.onFilesSelected&&(a=a.map(function(a){return a.metadata}),d.callbacks.onFilesSelected(a))};this.signalSuccess=function(a){d.handleStateChange();
if(d.callbacks.onActionSuccess)d.callbacks.onActionSuccess(a)};this.signalError=function(a,b){d.handleStateChange();if(d.callbacks.onActionError)d.callbacks.onActionError(a,b)};this.signalAbort=function(a){d.handleStateChange();if(d.callbacks.onActionAborted)d.callbacks.onActionAborted(a)};this.signalFileRemoval=function(a){d.handleStateChange();if(d.callbacks.onFileRemoved)d.callbacks.onFileRemoved(a)};this.showFileItemsFromHiddenMetadataField=function(){for(var a=function(a){a.markAsCompleted();
d.fileList.addFile(a);a.onRemoveCallback=function(){d.signalFileRemoval(a.metadata);d.handleStateChange()}},b=0,c=d.metadataManager.get();b<c.length;b++)a(c[b]);d.handleStateChange()};contract.require(!objectState.isNullOrUndefined(this.controller),"'controller' is not defined");contract.require(!objectState.isNullOrUndefined(this.callbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.feedbackManager),"'feedbackManager' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),
"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.statusCalculator),"'statusManager' is not defined");contract.require(!objectState.isNullOrUndefined(this.metadataManager),"'metadataManager' is not defined");this.subscribeToController(this.controller);this.showFileItemsFromHiddenMetadataField()}}();c.CollaborationControl=e})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(c){var b=function(){return function(a,b,e,f){this.name=a;this.title=b;this.description=e;this.picker=f;this.viewModel={instance:new c.ButtonViewModel(this.title,this.description,this.picker)};this.template='\n<div>\n    <button class="ccl-gcc-source-container" data-bind="click: onClick">\n        <span data-bind="text: title" class="ccl-gcc-source-content-text"></span>\n    </button>\n    <span data-bind="text: description" class="ccl-gcc-source-content-description"></span>\n</div>\n'}}();
c.ButtonComponent=b})(c.Components||(c.Components={}))})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));(function(c){(function(c){(function(c){var b=function(){return function(a,b,c){var d=this;this.title=a;this.description=b;this.picker=c;this.onClick=function(){d.picker.open()}}}();c.ButtonViewModel=b})(c.Components||(c.Components={}))})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(c){(function(e){(function(f){var b=function(){function a(a,b,c,f,l,m){var d=this;this.collaborationContainerId=a;this.settings=b;this.callbackFinder=c;this.translations=f;this.feedbackManager=l;this.metadataField=m;this.initializePickers=function(){var a=[],b=[];if(d.settings.EnableCollaborationFromGoogle){var c=d.buildGooglePicker(),e=c[0];c=c[1];a.push(e);b.push(c)}d.settings.EnableCollaborationFromOffice&&(c=d.buildOfficePicker(),e=c[0],c=c[1],a.push(e),b.push(c));return[a,b]};this.buildGooglePicker=
function(){var a=d.getGooglePickerInitSettings();a=new GooglePickerInPopup(a,BrowserSniffer(),d.translations.GoogleBrowserNotSupported,new CloudPickerModeSerializer,d.getLinkToCloudPickerMode());var b=new e.Components.ButtonComponent("google-collaboration",d.translations.CollaborateWithGoogleTitle,d.translations.CollaborateWithGoogleDescription,a);ko.components.register(b.name,b);return[a,b]};this.getGooglePickerInitSettings=function(){return{pickerDomain:d.settings.GoogleDriveUploadSettings.PickerDomain,
pickerUrl:d.settings.GoogleDriveUploadSettings.PickerUrl,crossCommunicationProxyUrl:d.settings.GoogleDriveUploadSettings.CrossCommunicationProxyUrl}};this.getLinkToCloudPickerMode=function(){return{allowToSelectMultipleFiles:!0,purpose:PickerPurpose.LinkToCloud,allowCollaboration:!0}};this.buildOfficePicker=function(){var a=OneDrivePicker.create(d.getOneDriveInitSettings(),BrowserSniffer(),new CloudPickerModeSerializer,d.getLinkToCloudPickerMode()),b=new e.Components.ButtonComponent("office-collaboration",
d.translations.CollaborateWithOfficeTitle,d.translations.CollaborateWithOfficeDescription,a);ko.components.register(b.name,b);return[a,b]};this.getOneDriveInitSettings=function(){return{pickerUrl:d.settings.OneDriveUploadSettings.OneDrivePickerUrl,pickerDomain:d.settings.OneDriveUploadSettings.OneDrivePickerDomain,crossCommunicationProxyUrl:d.settings.OneDriveUploadSettings.CrossCommunicationProxyUrl}};this.initializeCollaborationComponent=function(a){a=new e.Components.CollaborationComponent(a);
ko.components.register(a.name,a)}}a.prototype.build=function(){this.initializeTranslations();var a=this.initializeFileList(),b=this.initializePickers(),f=b[0];this.initializeCollaborationComponent(b[1]);ko.applyBindings(null,window.document.getElementById(this.collaborationContainerId));b=new PickerFileResultValidatorLiterals(this.translations);b=PickerFileResultValidatorFactory.createValidatorForCollaborationFiles(this.settings.ValidationSettings.MaxFileNameLength,b);f=new FilesInCloudController(f,
b);b=this.callbackFinder.getCallbacks();var k=new UploadStatusCalculator,l=new e.MetadataManager(this.metadataField);return new c.Collaboration.CollaborationControl(f,b,this.feedbackManager,a,k,l)};a.prototype.initializeTranslations=function(){e.Translations.collaborateWithGoogleTitle=this.translations.CollaborateWithGoogleTitle;e.Translations.collaborateWithGoogleDescription=this.translations.CollaborateWithGoogleDescription;e.Translations.collaborateWithOfficeTitle=this.translations.CollaborateWithOfficeTitle;
e.Translations.collaborateWithOfficeDescription=this.translations.CollaborateWithOfficeDescription;e.Translations.fileExtensionNotAllowed=this.translations.FileExtensionNotAllowed;e.Translations.unableToOpenFile=this.translations.UnableToOpenFile;e.Translations.invalidFirstPartOfFileName=this.translations.InvalidFirstPartOfFileName;e.Translations.invalidCharactersXInFileName=this.translations.InvalidCharactersXInFileName;e.Translations.fileIsEmpty=this.translations.FileIsEmpty;e.Translations.fileTooBig=
this.translations.FileTooBig;e.Translations.fileTooSmall=this.translations.FileTooSmall;e.Translations.fileNameIsTooLong=this.translations.FileNameIsTooLong;e.Translations.kb=this.translations.Kb;e.Translations.mb=this.translations.Mb;e.Translations.googleBrowserNotSupported=this.translations.GoogleBrowserNotSupported};a.prototype.initializeFileList=function(){var a=new c.FileList.Components.FileListViewModel,b=new c.FileList.Components.FileListComponent(a,"file-list-collaboration");ko.components.register(b.name,
b);return a};return a}();f.CollaborationControlFactory=b})(e.Initialization||(e.Initialization={}))})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(c){(function(e){var f=function(){return function(b){var a=this;this.metadataField=b;this.save=function(b){for(var d=[],e=0;e<b.length;e++){var f=b[e];if(f.getState()===c.FileList.Model.FileItemState.Success)if(f=f.metadata,f instanceof FileInCloudMetadata)d.push(f);else throw Error("Serialization error: Unknown type of Metadata!");}a.metadataField.val(JSON.stringify(d))};this.get=function(){var b=a.metadataField.val();if(objectState.isNullOrWhitespace(b))return[];var e=[];if(b=JSON.parse(b))for(var f=
0;f<b.length;f++){var k=FileInCloudMetadata.clone(b[f]);k=c.FileList.Model.FileItem.buildItemForFileInCloud(k);e.push(k)}return e}}}();e.MetadataManager=f})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));(function(c){(function(c){var e=function(){return function(){}}();c.Translations=e})(c.Collaboration||(c.Collaboration={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(c){var b=function(){return function(a){var b=this;this.settings=a;this.getDownloadUrl=function(a){a=a.metadata;if(a instanceof UploadMetadata){var c=b.settings.DownloadEndpointUrl;return c=c.replace(b.settings.TemplateTokens.FileRepoId,encodeURIComponent(a.signedFileRepoId))}if(a instanceof FileInCloudMetadata||a instanceof FolderMetadata)return"";throw Error("Download error: Unknown type of Metadata!");};this.getEditUrl=function(a){var c=a.metadata,d=b.settings.EditEndpointUrl;
d=d.replace(b.settings.TemplateTokens.FileRepoId,encodeURIComponent(c.signedFileRepoId));d=d.replace(b.settings.TemplateTokens.FileName,encodeURIComponent(a.fileName()+a.fileExtension()));d=d.replace(b.settings.TemplateTokens.UniqueId,c.id);return d=d.replace(b.settings.TemplateTokens.ViewOnly,(!1).toString())}}}();c.FileItemActions=b})(c.Model||(c.Model={}))})(c.FileList||(c.FileList={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(e){(function(b){var a=function(){function a(a,b){var d=this;this.fileItem=a;this.settings=b;this.isEditEnabled=function(){return!d.settings.DisableEdit};this.isViewEnabled=function(){return!d.settings.DisableView};this.isFileEditable=function(){return Array.isArray(d.settings.MimeTypeToEdit)?d.settings.MimeTypeToEdit.some(function(a){return a===d.fileItem.mimeType()}):!1};this.isFileViewable=function(){return Array.isArray(d.settings.MimeTypeToView)?d.settings.MimeTypeToView.some(function(a){return a===
d.fileItem.mimeType()}):!1};this.isDownloadPossible=function(){return null===d.settings.DownloadEndpointUrl?!1:d.fileItem.metadata instanceof UploadMetadata};this.isContextMenuDisplayed=ko.observable(!1);this.isAnyOperationAvailable=ko.pureComputed(function(){return d.shouldDisplayEdit()||d.shouldDisplayDownload()||d.shouldDisplayRename()||d.shouldDisplayView()});this.shouldDisplayEdit=ko.pureComputed(function(){return d.isEditEnabled()&&d.isFileEditable()&&a.isCompleted()});this.shouldDisplayView=
ko.pureComputed(function(){return d.isViewEnabled()&&d.isFileViewable()&&a.isCompleted()});this.shouldDisplayDownload=ko.pureComputed(function(){return!b.DisableDownload&&a.isCompleted()&&d.isDownloadPossible()});this.shouldDisplayRename=ko.pureComputed(function(){return!b.DisableRename&&a.isCompleted()});this.fileActions=new c.Model.FileItemActions(b)}a.prototype.displayContexMenu=function(){this.isContextMenuDisplayed(!0)};a.prototype.doSomeAction=function(a){alert("Super alert "+a);this.isContextMenuDisplayed(!1)};
a.prototype.onDownloadClick=function(){var a=this.fileActions.getDownloadUrl(this.fileItem);window.open(a);this.isContextMenuDisplayed(!1)};a.prototype.onEditClick=function(){var a=this.fileActions.getEditUrl(this.fileItem);window.open(a);this.isContextMenuDisplayed(!1)};return a}();b.ContextMenuViewModel=a})(e.ContextMenu||(e.ContextMenu={}))})(c.Components||(c.Components={}))})(c.FileList||(c.FileList={}))})(Uploaders||(Uploaders={}));
(function(c){(function(c){(function(e){(function(b){var a=function(){return function(){this.name="file-item-context-menu";this.viewModel=function(a){return new c.Components.ContextMenu.ContextMenuViewModel(a.file,a.settings)};this.template='\n            <div class="ccl-fl-context-menu" data-bind="visible: isAnyOperationAvailable"> \n                <a href="#" class="ccl-fl-context-menu-ellipsis" data-bind="click: displayContexMenu, css: { \'ccl-fl-context-menu-ellipsis-active\': isContextMenuDisplayed }">\n                    <span class="ili ili-h-ellipsis"></span>\n                </a>\n                <div tabindex="1" class="ccl-fl-context-menu-dialog" data-bind="visible: isContextMenuDisplayed , hasFocus: isContextMenuDisplayed">\n                    <ul class="ccl-fl-context-menu-dialog-content" >\n                        <li class="ccl-fl-context-menu-dialog-content-item" data-bind="click: function() { doSomeAction(1) }, visible: shouldDisplayView, text: UploadControlTranslation.view"></li>\n                        <li class="ccl-fl-context-menu-dialog-content-item" data-bind="click: onEditClick, visible: shouldDisplayEdit, text: UploadControlTranslation.edit"></li>\n                        <li class="ccl-fl-context-menu-dialog-content-item" data-bind="click: onDownloadClick, visible: shouldDisplayDownload, text:UploadControlTranslation.download"></li>\n                        <li class="ccl-fl-context-menu-dialog-content-item" data-bind="click: function() { doSomeAction(4) }, visible: shouldDisplayRename, text: UploadControlTranslation.rename"></li>\n                    </ul>\n                </div>\n            </div>\n        '}}();
b.ContextMenuComponent=a})(e.ContextMenu||(e.ContextMenu={}))})(c.Components||(c.Components={}))})(c.FileList||(c.FileList={}))})(Uploaders||(Uploaders={}));
var GoogleAppExportInfo=function(){function c(){}c.getExportedTypesMap=function(){var c={};c[GapiDocType.googleDocument]={mimeType:GapiDocType.word,extension:"docx"};c[GapiDocType.googleSpreadsheet]={mimeType:GapiDocType.excel,extension:"xlsx"};c[GapiDocType.googlePresentation]={mimeType:GapiDocType.powerpoint,extension:"pptx"};return c};c.exportedMimeTypes=c.getExportedTypesMap();c.getExportedTypeForGoogleApp=function(e){return c.exportedMimeTypes[e]};c.getGoogleAppForExportedExtension=function(e){for(var f in c.exportedMimeTypes)if(c.exportedMimeTypes.hasOwnProperty(f)&&
c.exportedMimeTypes[f].extension===e)return f};return c}(),PickerInitStatus;(function(c){c[c.InProgress=0]="InProgress";c[c.Success=1]="Success";c[c.Error=2]="Error"})(PickerInitStatus||(PickerInitStatus={}));var FileUploadState;(function(c){c[c.New=0]="New";c[c.Ready=1]="Ready";c[c.InProgress=2]="InProgress";c[c.Aborting=3]="Aborting";c[c.Error=4]="Error";c[c.Success=5]="Success"})(FileUploadState||(FileUploadState={}));
var FileInFolder=function(){return function(c){this.result=c;this.error=null}}(),Folder=function(){return function(c,e){var f=this;this.name=c;this.path=e;this.error=null;this.getFolderMetadata=function(){for(var b=new FolderMetadata(f.name),a=0,c=f.files;a<c.length;a++){var e=c[a];null===e.error&&b.files.push(e.metadata)}a=0;for(c=f.folders;a<c.length;a++)e=c[a],null===e.error&&0!==e.getFilesWithoutValidationErrors().length&&(e=e.getFolderMetadata(),b.folders.push(e));return b};this.getFilesWithoutValidationErrors=
function(){return f.getFiles().filter(function(b){return!b.error})};this.isAnyErrorInFolder=function(){if(f.error)return!0;for(var b=0,a=f.files;b<a.length;b++)if(a[b].error)return!0;b=0;for(a=f.folders;b<a.length;b++)if(a[b].isAnyErrorInFolder())return!0;return!1};this.getFiles=function(){if(f.error)return[];var b=f.files;f.folders.forEach(function(a){a=a.getFiles();b=b.concat(a)});return b};this.folders=[];this.files=[]}}(),ActionQueue=function(){return function(c){var e=this;this.maxNumberOfConcurrentActions=
c;this.queue=[];this.numberOfActionsInProgress=0;this.register=function(c){e.maxNumberOfConcurrentActionsNotReached()?(c(),e.numberOfActionsInProgress++):e.queue.push(c)};this.remove=function(c){e.queue=e.queue.filter(function(b){return b!==c})};this.signalDone=function(){0!==e.numberOfActionsInProgress&&(e.numberOfActionsInProgress--,e.elementsWaiting()&&e.maxNumberOfConcurrentActionsNotReached()&&e.startNextAction())};this.clear=function(){e.queue=[]};this.startNextAction=function(){e.numberOfActionsInProgress++;
e.queue.shift()()};this.elementsWaiting=function(){return 0<e.queue.length};this.maxNumberOfConcurrentActionsNotReached=function(){return e.numberOfActionsInProgress<e.maxNumberOfConcurrentActions}}}(),GenericUploader;
(function(c){(function(c){(function(c){var b=function(){return function(a){var b=this;this.jq=a;this.jqueryUploadControl=null;this.startUpload=function(a,c){b.jqueryUploadControl||(b.jqueryUploadControl=b.jq('<input type="file" />'),b.jqueryUploadControl.fileupload(a));b.jqueryUploadControl.fileupload("add",c)};contract.require(!objectState.isNullOrUndefined(a),"argument 'jq' is not defined")}}();c.HtmlUploadInputHandler=b})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||
(c.Sender={}))})(GenericUploader||(GenericUploader={}));(function(c){(function(c){(function(c){var b=function(){return function(){}}();c.Callbacks=b})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){function a(a,b,c,d){var e=this;this.isIe9=a;this.validationHeader=b;this.token=c;this.callbacks=d;this.add=function(a,b){e.isIe9||(b.headers=e.getHeadersForFileRepo(),b.crossDomain=!0);e.callbacks.onFileSelected(function(){b.abort()});b.submit()};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'validationHeader' is not defined");
contract.require(!objectState.isNullOrUndefined(c),"argument 'token' is not defined");contract.require(!objectState.isNullOrUndefined(d),"argument 'callbacks' is not defined")}a.prototype.getHeadersForFileRepo=function(){return{"X-Public-Upload":"1","X-Customer-Validations":this.validationHeader,"X-Authorization-FileRepoToken":"Bearer "+this.token}};return a}();a.Add=b})(b.Action||(b.Action={}))})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||
(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){return function(a){var b=this;this.callbacks=a;this.progress=function(a,c){b.callbacks.onUploadProgress(c.loaded/c.total*100)};contract.require(!objectState.isNullOrUndefined(a),"argument 'callbacks' is not defined")}}();a.ProgressAll=b})(b.Action||(b.Action={}))})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader=
{}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){return function(a,b){var c=this;this.errorResponseTranslator=a;this.callbacks=b;this.done=function(a,b){if(c.isDoneReallyAFail(b))a=c.errorResponseTranslator.getErrorMessageFromErrorCode(b.result.Error),c.callbacks.onSendFailure(a);else c.callbacks.onSendSuccess(c.file,b.result)};this.isDoneReallyAFail=function(a){return c.isIframeTransportUsed(a)&&"undefined"!==typeof a.result&&null!=a.result.Error?!0:!1};this.isIframeTransportUsed=function(a){return a.dataType&&
"iframe"===a.dataType.substr(0,6)};contract.require(!objectState.isNullOrUndefined(a),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'callbacks' is not defined")}}();a.Done=b})(b.Action||(b.Action={}))})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){function a(a,b){var c=this;this.errorResponseTranslator=a;this.callbacks=b;this.fail=function(a,b){if(c.isFileUploadAborted(b.errorThrown)){if(c.callbacks.onAbortSuccess)c.callbacks.onAbortSuccess()}else a=c.getErrorMessageFromResponse(b),c.callbacks.onSendFailure(a)};contract.require(!objectState.isNullOrUndefined(a),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(b),
"argument 'callbacks' is not defined")}a.prototype.isFileUploadAborted=function(a){return"abort"===a};a.prototype.getErrorMessageFromResponse=function(a){var b=this.errorResponseTranslator.getErrorMessageFromResponse(a);null==b&&a.xhr&&(b=this.getErrorMesageFromXhr(a.xhr()));return b};a.prototype.getErrorMesageFromXhr=function(a){if(a.responseText)try{var b=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(b.errorMessage))return b.errorMessage}catch(l){}return a.statusText};return a}();
a.Fail=b})(b.Action||(b.Action={}))})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){var a=function(){return function(a,b,c,e){this.addAction=a;this.progressAction=b;this.doneAction=c;this.failAction=e;contract.require(!objectState.isNullOrUndefined(a),"argument 'addAction' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'progressAllAction' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'doneAction' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'failAction' is not defined")}}();
b.Actions=a})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){var a=function(){function a(a,b,c,d,e,f){var g=this;this.isIe9=a;this.endpoint=b;this.validationHeader=c;this.token=d;this.redirectUrl=e;this.actions=f;this.build=function(a){var b={};contract.require(!objectState.isNullOrUndefined(a),"argument 'file' is not defined");g.actions.doneAction.file=a;b.url=g.createUrl();b.dataType="json";b.add=g.actions.addAction.add;b.progressall=g.actions.progressAction.progress;b.fail=g.actions.failAction.fail;b.done=
g.actions.doneAction.done;b.dropZone=null;return b};this.createUrl=function(){return g.isIe9?g.getUrlWithValidationParamsInQueryString(g.endpoint,g.getIframeUploadQueryStringParameters()):g.endpoint};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'endpoint' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'validationHeader' is not defined");contract.require(!objectState.isNullOrUndefined(d),
"argument 'token' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'actions' is not defined")}a.prototype.getIframeUploadQueryStringParameters=function(){return{"X-Public-Upload":"1","X-Customer-Validations":this.validationHeader,"X-Authorization-FileRepoToken":"Bearer "+this.token,redirectUrl:this.redirectUrl}};a.prototype.getUrlWithValidationParamsInQueryString=function(a,b){b=$.param(b);var c=-1===a.indexOf("?");return a+(c?"?":"&")+b};return a}();b.ConfigurationBuilder=
a})(c.FileInput||(c.FileInput={}))})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));(function(c){var e=function(){return function(){}}();c.SenderCallbacks=e})(GenericUploader||(GenericUploader={}));(function(c){var e=function(){return function(c,b){this.file=c;this.uploadStateChannelId=b}}();c.RequestToSender=e})(GenericUploader||(GenericUploader={}));
var UploaderSenderOptions=function(){return function(c){var e=this;this.editableOptions=c;this.dictionary={};this.hasChanged=!1;this.addParameter=function(c,b){e.hasChanged=!0;e.url.addSearch(c,b)};this.addDictionaryParameter=function(c,b){e.dictionary[c]=b};this.getDictionaryParameter=function(c){return e.dictionary[c]};this.getProcessedOptions=function(){return{url:e.url.normalizeSearch().toString()}};contract.require(!objectState.isNullOrUndefined(c),"argument 'editableOptions' is not defined");
this.url=URI(this.editableOptions.url).normalizeSearch()}}();
(function(c){(function(c){(function(c){var b=function(){function a(a,b,c,e){var d=this;this.isIe9=a;this.inputHandler=b;this.callbacks=c;this.configurationBuilder=e;this.send=function(a,b,c,e){d.callbacks.onFileSelected=d.fileSelected;d.callbacks.onSendSuccess=c;d.callbacks.onSendFailure=e;d.callbacks.onUploadProgress=b;b=d.configurationBuilder.build(a.file);a=d.createRequestContent(a.file);d.inputHandler.startUpload(b,a);return{abort:d.abort}};this.createRequestContent=function(a){var b={};d.isIe9?
b.fileInput=a.getFileHandle():b.files=[a.getFileHandle()];return b};this.fileSelected=function(a){d.abortUpload=a};this.abort=function(a){d.callbacks.onAbortSuccess=a;d.abortUpload()};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'localFileInputHander' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(e),
"argument 'optionsBuilder' is not defined")}a.prototype.getOptions=function(){return null};return a}();c.Sender=b})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){var b=c.FileInput.Action.Add,a=c.FileInput.Action.ProgressAll,d=c.FileInput.Action.Done,e=c.FileInput.Action.Fail,f=c.FileInput.Actions,k=c.FileInput.ConfigurationBuilder,l=function(){return function(g,h,l){var m=this;this.errorResponseTranslator=h;this.fileRepoData=l;this.build=function(){var g=new c.HtmlUploadInputHandler($),h=new c.Callbacks,l=new b(m.isIe9,m.fileRepoData.ValidationHeader,m.fileRepoData.Token,h),n=new a(h),p=new d(m.errorResponseTranslator,
h),r=new e(m.errorResponseTranslator,h);l=new f(l,n,p,r);l=new k(m.isIe9,m.fileRepoData.Endpoint,m.fileRepoData.ValidationHeader,m.fileRepoData.Token,m.fileRepoData.RedirectUrl,l);return new c.Sender(m.isIe9,g,h,l)};contract.require(!objectState.isNullOrUndefined(g),"argument 'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(h),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(l),"argument 'fileRepoData' is not defined");
this.isIe9=g.isInternetExplorer9()}}();c.Factory=l})(c.FileRepoSenderForLocalFiles||(c.FileRepoSenderForLocalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(e){(function(e){var b=function(){function a(a,b){var d=this;this.actionQueue=a;this.senderFactory=b;this.abortActions=[];this.send=function(a,b,c){d.onUploadProgress=b;d.onSendCompleted=c;d.folder=a;d.filesToUpload=a.getFilesWithoutValidationErrors();d.numberOfFilesToUpload=d.filesToUpload.length;d.uploadedFiles=0;d.filesToUpload.forEach(function(a){d.actionQueue.register(function(){d.sendFile(a)})});return{abort:d.abort}};this.sendFile=function(a){var b=new c.RequestToSender(a.result),
e=d.senderFactory.build().send(b,function(){},function(b,c){d.fileSendingSuccess(a,b,c)},function(b){d.fileSendingFailure(a,b)});d.addAbortAction(a,function(){e.abort()})};this.createRequestContent=function(a){var b={};b.files=a.map(function(a){return a.getFileHandle()});return b};this.fileSendingSuccess=function(a,b,c){a.metadata=UploadMetadata.create(b,c);d.fileUploadEnded(a)};this.fileSendingFailure=function(a,b){a.error=b;d.fileUploadEnded(a)};this.fileUploadEnded=function(a){d.uploadedFiles++;
d.updateProgress();d.removeAbortAction(a);d.actionQueue.signalDone();if(d.allFilesUploaded())d.onSendCompleted(d.folder)};this.removeAbortAction=function(a){d.abortActions=d.abortActions.filter(function(b){return b.file!==a})};this.addAbortAction=function(a,b){d.abortActions.push({file:a,action:b})};this.allFilesUploaded=function(){return d.uploadedFiles===d.numberOfFilesToUpload};this.updateProgress=function(){d.onUploadProgress(d.uploadedFiles/d.numberOfFilesToUpload*100)};this.abort=function(a){d.actionQueue.clear();
d.abortActions.forEach(function(a){a.action()});a()};contract.require(!objectState.isNullOrUndefined(this.actionQueue),"argument 'actionQueue' is not defined");contract.require(!objectState.isNullOrUndefined(this.senderFactory),"argument 'senderFactory' is not defined")}a.prototype.getOptions=function(){return null};return a}();e.FolderSender=b})(e.FileRepoSenderForLocalFolders||(e.FileRepoSenderForLocalFolders={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){var b=function(){return function(a){var b=this;this.fileRepoForLocalFilesFactory=a;this.build=function(){var a=new ActionQueue(2);return new c.FolderSender(a,b.fileRepoForLocalFilesFactory)}}}();c.Factory=b})(c.FileRepoSenderForLocalFolders||(c.FileRepoSenderForLocalFolders={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));var ValidationStatus;
(function(c){c[c.Ok=0]="Ok";c[c.Inconclusive=1]="Inconclusive";c[c.FileIsUnavailable=2]="FileIsUnavailable";c[c.FileSizeIsTooSmall=3]="FileSizeIsTooSmall";c[c.FileSizeIsTooBig=4]="FileSizeIsTooBig";c[c.FileExtensionIsNotAllowed=5]="FileExtensionIsNotAllowed";c[c.FilenameContainsIllegalCharacters=6]="FilenameContainsIllegalCharacters";c[c.FileNameIsIllegal=7]="FileNameIsIllegal";c[c.FileIsEmpty=8]="FileIsEmpty";c[c.FileNameIsTooLong=9]="FileNameIsTooLong"})(ValidationStatus||(ValidationStatus={}));
var ValidationResult=function(){function c(c,f){this.status=c;this.data=f}c.prototype.isValid=function(){return this.status===ValidationStatus.Ok||this.status===ValidationStatus.Inconclusive};c.prototype.getStatus=function(){return this.status};c.prototype.getData=function(){return this.data};return c}(),FileExtensionValidator=function(){function c(c,f){this.allowedExtensions=c;this.forbiddenExtensions=f}c.prototype.validateFile=function(e){if(objectState.isNullOrUndefined(e))throw Error("Argument 'file' cannot be null or undefined");
if(objectState.isNullOrUndefined(e.name))return new ValidationResult(ValidationStatus.Inconclusive);e=c.getFileExtension(e.name);return!this.isAllowed(e)||this.isForbidden(e)?new ValidationResult(ValidationStatus.FileExtensionIsNotAllowed):new ValidationResult(ValidationStatus.Ok)};c.prototype.isAllowed=function(c){var e=this;return this.isAllowedFileValidationEnabled()?this.allowedExtensions.some(function(b){return e.equalsIgnoreCase(b,c)}):!0};c.prototype.isAllowedFileValidationEnabled=function(){return Array.isArray(this.allowedExtensions)&&
0<this.allowedExtensions.length};c.prototype.isForbidden=function(c){var e=this;return this.isForbiddenFileValidationEnabled()?this.forbiddenExtensions.some(function(b){return e.equalsIgnoreCase(b,c)}):!1};c.prototype.isForbiddenFileValidationEnabled=function(){return Array.isArray(this.forbiddenExtensions)&&0<this.forbiddenExtensions.length};c.prototype.equalsIgnoreCase=function(c,f){return c.toLowerCase()===f.toLowerCase()};c.getFileExtension=function(c){return c&&(c=c.split("."),1<c.length)?c.pop():
""};return c}(),FileInCloudTypeValidator=function(c){function e(e,b){c.call(this,e,b);this.allowedGoogleAppMimeTypes=this.mapFileExtensionsToGoogleAppMimeTypes(e);this.forbiddenGoogleAppMimeTypes=this.mapFileExtensionsToGoogleAppMimeTypes(b)}__extends(e,c);e.prototype.validateFile=function(e){if(objectState.isNullOrUndefined(e))throw Error("Argument 'file' cannot be null or undefined");return this.isGoogleAppFileFromGoogle(e)?this.validateGoogleApp(e):c.prototype.validateFile.call(this,e)};e.prototype.mapFileExtensionsToGoogleAppMimeTypes=
function(c){if(!Array.isArray(c))return[];for(var b=[],a=0;a<c.length;a++){var d=GoogleAppExportInfo.getGoogleAppForExportedExtension(c[a]);d&&b.push(d)}return b};e.prototype.isGoogleAppFileFromGoogle=function(c){return c.sourceType===SourceType.Google&&c.mimeType&&-1!==GapiDocType.googleApps.indexOf(c.mimeType)};e.prototype.validateGoogleApp=function(c){return!this.isAllowedGoogleApp(c)||this.isForbiddenGoogleApp(c)?new ValidationResult(ValidationStatus.FileExtensionIsNotAllowed):new ValidationResult(ValidationStatus.Ok)};
e.prototype.isAllowedGoogleApp=function(c){return this.isAllowedFileValidationEnabled()?-1!==this.allowedGoogleAppMimeTypes.indexOf(c.mimeType):!0};e.prototype.isForbiddenGoogleApp=function(c){return this.isForbiddenFileValidationEnabled()?-1!==this.forbiddenGoogleAppMimeTypes.indexOf(c.mimeType):!1};return e}(FileExtensionValidator),FolderValidator=function(){function c(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'validators' cannot be null or undefined");this.validators=c}c.prototype.validateFolder=
function(c){for(var e=0,b=this.validators;e<b.length;e++){var a=b[e];if(!objectState.isNullOrUndefined(a)&&(a=a.validateFolder(c),!a.isValid()))return a}return new ValidationResult(ValidationStatus.Ok)};return c}(),IllegalCharactersValidator=function(){function c(c){this.illegalCharacters=c}c.prototype.validateFile=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");if(objectState.isNullOrUndefined(c.name))return new ValidationResult(ValidationStatus.Inconclusive);
if(objectState.isNullOrUndefined(this.illegalCharacters)||0===this.illegalCharacters.length)return new ValidationResult(ValidationStatus.Ok);c=this.getInvalidCharactersFromFilename(c.name);return 0<c.length?new ValidationResult(ValidationStatus.FilenameContainsIllegalCharacters,c):new ValidationResult(ValidationStatus.Ok)};c.prototype.getInvalidCharactersFromFilename=function(c){for(var e=[],b=0,a=this.illegalCharacters;b<a.length;b++){var d=a[b];d&&-1<c.indexOf(d)&&e.push(d)}return e.filter(function(a,
b){return e.indexOf(a)===b})};return c}(),RestrictedFileNameValidator=function(){function c(c){this.restrictedFileNames=c}c.prototype.validateFile=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");if(objectState.isNullOrUndefined(c.name))return new ValidationResult(ValidationStatus.Inconclusive);if(objectState.isNullOrUndefined(this.restrictedFileNames)||0===this.restrictedFileNames.length)return new ValidationResult(ValidationStatus.Ok);c=
c.name.split(".")[0];for(var e=0,b=this.restrictedFileNames;e<b.length;e++){var a=b[e];if(a&&c.toUpperCase()===a.toUpperCase())return new ValidationResult(ValidationStatus.FileNameIsIllegal,a)}return new ValidationResult(ValidationStatus.Ok)};return c}(),FolderValidatorFactory=function(){function c(){}c.prototype.createFileValidator=function(c){c=[new NameLengthValidator(c.maxFileNameLength)];return new FolderValidator(c)};c.prototype.createFileValidatorWithLocalizedMessages=function(c,f){c=this.createFileValidator(c);
return new LocalizedFolderValidator(c,f)};return c}(),LocalizedFolderValidator=function(){function c(c,f){this.validator=c;this.literals=f}c.prototype.validateFolder=function(c){c=this.validator.validateFolder(c);return c.isValid()?new ValidationResult(c.getStatus()):this.createLocalizedValidationResult(c)};c.prototype.createLocalizedValidationResult=function(c){var e=c.getStatus();c=this.getErrorMessage(c);return new ValidationResult(e,c)};c.prototype.getErrorMessage=function(c){switch(c.getStatus()){case ValidationStatus.FileNameIsTooLong:return this.literals.fileNameIsTooLong.replace("{0}",
c.getData());default:return"-"}};return c}(),Components;(function(c){c=c.ComponentName||(c.ComponentName={});c.dialog="uc-dialog";c.uploadArea="upload-area";c.dropzonePicker="dropzone-picker";c.dropboxPicker="dropbox-picker";c.folderPicker="folder-picker";c.googlePicker="google-picker";c.linkToGoogleDrivePicker="link-to-google-drive-picker";c.linkToOnedrivePicker="link-to-onedrive-picker";c.localPicker="local-picker";c.onedrivePicker="onedrive-picker"})(Components||(Components={}));
(function(c){(function(e){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.linkToOnedrivePicker;this.viewModel=function(b){return new e.PickerViewModel(a.picker,b.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-onedrive-icon" aria-hidden="true"></div> \n        <span data-bind="text: UploadControlTranslation.oneDrive" class="ccl-uc-source-content-text"></span>')}}();e.LinkToOneDrivePickerComponent=
f})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(c){var e=function(){function b(){}b.create=function(a,b){return'\n<div class="ccl-uc-source-container">\n    <button class="ccl-uc-source-content" id="'+a+'" data-bind="click: onClick, disable: isLoading() || isLoadingFailed()">\n        <span>\n'+b+'\n        </span>\n    </button>\n    <div class="ccl-uc-source-status">\n        <span aria-hidden="true" class="ili ili-spinner ili-pulse-linear" data-bind="visible: isLoading"></span>\n        <span aria-hidden="true" class="ili ili-exclamation-circle" data-bind="visible: isLoadingFailed"></span>\n    </div>\n</div>'};return b}();
c.Template=e})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){var e=function(){function c(){}c.isMobile=function(){return window.matchMedia&&window.matchMedia("only screen and (max-width: 568px)").matches};c.toggleTopFrameAndMobileOverlay=function(b){c.sendMessageToTopFrame(window.parent,b?"collapseContentAreaFrame":"expandContentAreaFrame");c.sendMessageToTopFrame(window.parent,"setIframeDefaultHeight");$("html").toggleClass($("body").hasClass("h-ios")?"ccl-overlay-modal-has-overlay-ios":"ccl-overlay-modal-has-overlay",!b)};c.sendMessageToTopFrame=
function(b,a){b.postMessage(JSON.stringify({messageName:a}),"*")};return c}();c.UploadControlUtils=e})(Components||(Components={}));
var PickerResult=function(){function c(c,f){this.files=c;this.authToken=f}c.prototype.setOAuthContext=function(c){this.oAuthContext=c};c.prototype.getOAuthContext=function(){return this.oAuthContext};return c}(),FolderBuilder=function(){return function(c,e){var f=this;this.validator=c;this.folderValidator=e;this.buildFolder=function(b){var a=null,c=[];b.forEach(function(b){var d=f.getFolderFromRelativePath(b.relativePath,c);null===a&&(a=c[0]);!objectState.isNullOrUndefined(d)&&objectState.isNullOrUndefined(d.error)&&
f.processFile(b,d)});return a};this.getFolderFromRelativePath=function(b,a){b=f.getPathOfParentFolder(b);var c=f.getFolderForPath(b,a);c||(c=f.createNewFolder(b,a));return c};this.createNewFolder=function(b,a){var c=f.getFolderName(b);c=new Folder(c,b);f.validateFolder(c);(b=f.getParentFolder(b,a))&&b.folders.push(c);a.push(c);return c};this.getParentFolder=function(b,a){b=f.getPathOfParentFolder(b);if(!b)return null;var c=f.getFolderForPath(b,a);c||(c=f.createNewFolder(b,a));return c};this.processFile=
function(b,a){b=new FileInFolder(b);f.validateFile(b);a.files.push(b)};this.getFolderForPath=function(b,a){return(a=a.filter(function(a){return a.path===b}))&&0!==a.length?a[0]:null};this.getFolderName=function(b){var a=b.lastIndexOf("/");return b.substring(a+1,b.length)};this.getPathOfParentFolder=function(b){var a=b.lastIndexOf("/");return-1===a?null:b.substring(0,a)};this.validateFile=function(b){var a=f.validator.validateFile(b.result);a.isValid()||(b.error=a.getData())};this.validateFolder=function(b){var a=
f.folderValidator.validateFolder(b);a.isValid()||(b.error=a.getData())};contract.require(!objectState.isNullOrUndefined(this.validator),"'fileResultValidator' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderValidator),"'folderValidator' is not defined")}}(),FolderController=function(){return function(c,e,f,b){var a=this;this.pickers=c;this.folderSenderFactory=e;this.folderBuilder=f;this.actionQueue=b;this.subscribe=function(b){a.callbacks=b};this.initializePickers=function(){a.pickers.forEach(function(b){a.initPickerCallback(b)})};
this.initPickerCallback=function(b){var c=function(){};c=new PickerCallback(c,c,a.folderSelected,c);b.subscribe(c)};this.uploadCompleted=function(b,c){b.markAsCompleted();b.onRemoveCallback=function(){a.fileRemoved(b)};b.isRemoveAllowed(!0);a.allFilesinFolderInvalid(c)?a.signalError(b):(a.showWarningIfFolderContainsAnyError(b,c),b.metadata=c.getFolderMetadata(),a.callbacks.onActionSuccess(b.metadata))};this.fileRemoved=function(b){a.callbacks.onFileRemoved(b.metadata)};this.allFilesinFolderInvalid=
function(a){return 0===a.getFilesWithoutValidationErrors().length};this.signalError=function(b){b.setFolderError();a.callbacks.onActionError({},UploadControlTranslation.someFilesInThatFolderCannotBeUploaded)};this.showWarningIfFolderContainsAnyError=function(a,b){b.isAnyErrorInFolder()&&a.setFolderWarning()};this.uploadProgressed=function(a,b){a.setProgress(b)};this.abortSucceeded=function(b){a.callbacks.onActionAborted(b.metadata)};this.folderSelected=function(b){var c=a.folderBuilder.buildFolder(b.files),
d=Uploaders.FileList.Model.FileItem.buildItemForFolder(c.name);a.callbacks.onFilesSelected([d]);if(a.allFilesinFolderInvalid(c))a.signalError(d);else{a.showWarningIfFolderContainsAnyError(d,c);var e=function(){a.send(d,c)};d.onRemoveCallback=function(){a.actionQueue.remove(e);a.fileRemoved(d)};a.actionQueue.register(e)}};this.send=function(b,c){var d=a.folderSenderFactory.build().send(c,function(c){return a.uploadProgressed(b,c)},function(c){a.actionQueue.signalDone();a.uploadCompleted(b,c)});b.onRemoveCallback=
function(){a.actionQueue.signalDone();d.abort(function(){return a.abortSucceeded(b)})}};contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderSenderFactory),"'senderFactory' is not defined");contract.require(!objectState.isNullOrUndefined(this.folderBuilder),"'folderBuilder' is not defined");contract.require(!objectState.isNullOrUndefined(this.actionQueue),"'actionQueue' is not defined");this.initializePickers()}}(),
PickerFileResultValidatorLiterals=function(){function c(c){this.fileExtensionNotAllowed=c.FileExtensionNotAllowed;this.fileTooBig=c.FileTooBig;this.fileTooSmall=c.FileTooSmall;this.invalidCharactersXInFileName=c.InvalidCharactersXInFileName;this.unableToOpenFile=c.UnableToOpenFile;this.invalidFirstPartOfFileName=c.InvalidFirstPartOfFileName;this.fileNameIsTooLong=c.FileNameIsTooLong;this.mb=c.Mb;this.kb=c.Kb;this.fileIsEmpty=c.FileIsEmpty}c.prototype.getExcededSizeLimitTranslation=function(c){return this.fileTooBig.replace("{0}",
this.getFormattedFileSize(c))};c.prototype.getBelowSizeLimitTranslation=function(c){return this.fileTooSmall.replace("{0}",this.getFormattedFileSize(c))};c.prototype.getFormattedFileSize=function(c){return"number"!==typeof c?"":1048576<=c?(c/1048576).toFixed(2)+" "+this.mb:(c/1024).toFixed(2)+" "+this.kb};return c}(),LocalFilePicker=function(){function c(c,f,b,a){var d=this;this.mode=c;this.browserSniffer=f;this.fileNameExtractor=b;this.jq=a;this.subscriberCallbacks=[];this.open=function(){var a=
d.jq(d.getInputMarkup());a.on("change",function(){d.handleFileSelectedInInput(a,a[0])});a.click()};this.subscribe=function(a){if(a.onPickerInitSuccess)a.onPickerInitSuccess();d.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){d.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){d.mode.allowToSelectMultipleFiles=!1};this.handleFileSelectedInInput=function(a,b){a=d.browserSniffer.isInternetExplorer9()?d.createResultWithInputElement(a,b):d.createResultWithFileList(a,
b);b=0;for(var c=d.subscriberCallbacks;b<c.length;b++){var e=c[b];if(e.onFileSelected)e.onFileSelected(new PickerResult(a))}};contract.require(!objectState.isNullOrUndefined(c),"This picker requires mode to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(f),"This picker requires browserSniffer to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(b),"This picker requires fileNameExtractor to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(a),
"This picker requires jquery to be passed. Please provide it.")}c.prototype.getInputMarkup=function(){return'<input type="file" '+this.getMultipleAttributeForInput()+" "+this.getAcceptAttributeForInput()+" />"};c.prototype.getMultipleAttributeForInput=function(){return this.mode.allowToSelectMultipleFiles?'multiple="multiple"':""};c.prototype.getAcceptAttributeForInput=function(){return this.mode.allowedFileExtensions?'accept="'+this.getFileExtensionsForAcceptAttribute()+'"':""};c.prototype.getFileExtensionsForAcceptAttribute=
function(){return this.mode.allowedFileExtensions.map(function(c){return"."+c}).join(",")};c.prototype.createResultWithInputElement=function(c,f){f=this.fileNameExtractor.getFileName(f.value);return[PickerFileResult.createLocalPickerFileResultWithInput(c,f)]};c.prototype.createResultWithFileList=function(c,f){return[].slice.call(f.files).map(function(b){return PickerFileResult.createLocalPickerFileResult(b)})};return c}(),DropzonePicker=function(){function c(c,f){var b=this;this.mode=c;this.fileValidator=
f;this.subscriberCallbacks=[];this.currentDragEnterCount=0;this.enableMultipleFilesSelecting=function(){b.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){b.mode.allowToSelectMultipleFiles=!1};this.onFilesDropped=function(a){b.mode.allowDragAndDrop&&(b.browserSupportsFileAndDirectoryEntriesApi(a)?b.preparePickerFileResultsUsingFileAndDirectoryEntriesApiAsync(a.items):b.preparePickerFileResultsUsingFileListAsync(a.files)).then(b.handlePickerFileResults)};this.open=
function(){};this.isEnabled=function(){return b.mode.allowDragAndDrop};this.browserSupportsFileAndDirectoryEntriesApi=function(a){return a.items&&0<a.items.length&&(a.items[0].webkitGetAsEntry||a.items[0].getAsEntry)};this.preparePickerFileResultsUsingFileAndDirectoryEntriesApiAsync=function(a){if(!b.mode.allowToSelectMultipleFiles&&1<a.length)return $.Deferred().resolve([]).promise();for(var c=[],e=0;e<a.length;e++)c.push(b.getEntry(a[e]));if(c.some(function(a){return a.isDirectory}))return $.Deferred().resolve([]).promise();
var f=[];c.forEach(function(a){return f.push(b.getFileFromEntryAsync(a))});return $.when.apply($,f).pipe(b.mapFilesToPickerFileResults)};this.getEntry=function(a){return a.webkitGetAsEntry?a.webkitGetAsEntry():a.getAsEntry()};this.getFileFromEntryAsync=function(a){var b=$.Deferred();a.file(function(a){return b.resolve(a)},function(a){return b.reject(a)});return b.promise()};this.mapFilesToPickerFileResults=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return a.map(function(a){return PickerFileResult.createLocalPickerFileResult(a)})};
this.preparePickerFileResultsUsingFileListAsync=function(a){if(null===a||void 0===a||!b.mode.allowToSelectMultipleFiles&&1<a.length)return $.Deferred().resolve([]).promise();var c=[],e=[].slice.call(a);e.forEach(function(a){c.push(b.fileValidator.isFile(a))});return $.when.apply($,c).pipe(function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return a.some(function(a){return!1===a})?[]:b.mapFilesToPickerFileResults.apply(b,e)})};this.handlePickerFileResults=function(a){if(0!==a.length)for(var c=
0,e=b.subscriberCallbacks;c<e.length;c++){var f=e[c];if(f.onFileSelected)f.onFileSelected(new PickerResult(a))}};contract.require(!objectState.isNullOrUndefined(c),"This picker requires mode to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(f),"This picker requires fileValidator to be passed. Please provide it.")}c.prototype.subscribe=function(c){if(c.onPickerInitSuccess)c.onPickerInitSuccess();this.subscriberCallbacks.push(c)};return c}(),FileValidator=function(){function c(){var c=
this;this.isFile=function(e){return c.attemptToReadFile(e)}}c.prototype.attemptToReadFile=function(c){var e=$.Deferred(),b=new FileReader;b.onprogress=function(){b.abort();e.resolve(!0)};b.onerror=function(){e.resolve(!1)};b.readAsArrayBuffer(c.slice(0,5));return e.promise()};return c}(),FolderPicker=function(){function c(c){var e=this;this.jq=c;this.subscriberCallbacks=[];this.open=function(){var b=e.jq('<input type="file" webkitdirectory="" directory="" />');b.on("change",function(){e.fileSelectedInInput(b,
b[0])});b.click()};this.subscribe=function(b){if(b.onPickerInitSuccess)b.onPickerInitSuccess();e.subscriberCallbacks.push(b)};this.enableMultipleFilesSelecting=function(){e.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){e.allowToSelectMultipleFiles=!1};this.fileSelectedInInput=function(b,a){b=e.createResultWithFileList(b,a);if(0!==b.length){a=0;for(var c=e.subscriberCallbacks;a<c.length;a++){var f=c[a];if(f.onFileSelected)f.onFileSelected(new PickerResult(b))}}};contract.require(!objectState.isNullOrUndefined(c),
"This picker requires jquery to be passed. Please provide it.")}c.prototype.createResultWithFileList=function(c,f){var b=this;return[].slice.call(f.files).map(function(a){return PickerFileResult.createFolderPickerFileResultWithRelativePath(a,b.getRelativePath(a,""))})};c.prototype.getRelativePath=function(c,f){return c.webkitRelativePath||c.relativePath||f||""};return c}(),FileNameFromPathExtractor=function(){function c(){}c.prototype.getFileName=function(c){if(null===c)return null;if("undefined"!==
typeof c){if("string"!==typeof c)throw"Argument filePath is of type other than string";return c.replace(/[\s\S]*[\\/]/,"")}};return c}(),PickerPurpose;(function(c){c[c.Upload=0]="Upload";c[c.LinkToCloud=1]="LinkToCloud"})(PickerPurpose||(PickerPurpose={}));
var DropboxPicker=function(){return function(c,e,f,b){var a=this;void 0===b&&(b={purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:!1,allowCollaboration:!1});this.settings=c;this.dropbox=e;this.dropboxNotAvailableErrorTranslation=f;this.mode=b;this.subscriberCallbacks=[];this.subscribe=function(b){a.attemptToRaiseInitCallback(b);a.subscriberCallbacks.push(b)};this.enableMultipleFilesSelecting=function(){a.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){a.mode.allowToSelectMultipleFiles=
!1};this.open=function(){if(a.isInitializationSuccessful()){var b=a.getDropboxOptions();a.dropbox.choose(b)}};this.initializeWithScript=function(){asyncDependenciesResolver.loadScriptAsync({url:"https://www.dropbox.com/static/api/2/dropins.js",attributes:{id:"dropboxjs","data-app-key":a.settings.dropboxAppKey},timeoutInMilliseconds:3E4}).done(function(){return a.initStatus=PickerInitStatus.Success}).fail(function(){return a.initStatus=PickerInitStatus.Error}).always(a.notifySubscribersAboutInitialization)};
this.notifySubscribersAboutInitialization=function(){for(var b=0,c=a.subscriberCallbacks;b<c.length;b++)a.attemptToRaiseInitCallback(c[b])};this.attemptToRaiseInitCallback=function(b){if(a.isInitializationSuccessful()&&b.onPickerInitSuccess)b.onPickerInitSuccess();if(a.initStatus===PickerInitStatus.Error&&b.onPickerInitFailure)b.onPickerInitFailure(new PickerInitFailureEventArgs(PickerInitFailureReason.ExternalServiceNotAvailable,a.dropboxNotAvailableErrorTranslation,UploadControlTranslation.dropbox))};
this.isInitializationSuccessful=function(){return a.initStatus===PickerInitStatus.Success};this.getDropboxOptions=function(){return{success:a.onDropboxFileSelected,cancel:a.onDropboxFileSelectionCanceled,linkType:"direct",multiselect:a.mode.allowToSelectMultipleFiles,extensions:a.getAllowedFileExtensionsWithDots()}};this.getAllowedFileExtensionsWithDots=function(){return a.mode.allowedFileExtensions?a.mode.allowedFileExtensions.map(function(a){return"."+a}):null};this.onDropboxFileSelected=function(b){b=
b.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.link,a.name,a.bytes,SourceType.Dropbox)});for(var c=0,d=a.subscriberCallbacks;c<d.length;c++){var e=d[c];if(e.onFileSelected)e.onFileSelected(new PickerResult(b))}};this.onDropboxFileSelectionCanceled=function(){for(var b=0,c=a.subscriberCallbacks;b<c.length;b++){var e=c[b];if(e.onFileSelectionCanceled)e.onFileSelectionCanceled()}};if(objectState.isNullOrUndefined(this.settings))throw"DropboxPicker requires settings to be passed. Please provide them.";
if(objectState.isNullOrUndefined(this.dropbox))throw"DropboxPicker requires dropbox api to be passed. Please provide a handle to it.";if(objectState.isNullOrUndefined(this.dropboxNotAvailableErrorTranslation))throw"DropboxPicker requires error translation to be passed. Please provide it.";window.addEventListener("load",this.initializeWithScript)}}(),DropboxWrapper=function(){function c(){this.isAvailable=function(){try{return!objectState.isNullOrUndefined(Dropbox)}catch(e){return!1}}}c.prototype.choose=
function(c){Dropbox.choose(c)};return c}(),Url=function(){return function(c){var e=this;this.value=c;this.getParamValue=function(c){for(var b=[],a,d=e.value.slice(e.value.indexOf("?")+1).split("&"),f=0;f<d.length;f++)a=d[f].split("="),b.push(a[0]),b[a[0]]=a[1];return b[c]};this.appendOrUpdateParam=function(c,b){var a=new RegExp("([?&])"+c+"=.*?(&|$)","i"),d=-1!==e.value.indexOf("?")?"&":"?";e.value.match(a)?e.value=e.value.replace(a,"$1"+c+"="+b+"$2"):e.value=e.value+d+c+"="+b}}}();
function GuidFactory(){return{newGuid:function(){function c(c){var e=(Math.random().toString(16)+"000000000").substr(2,8);return c?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return c()+c(!0)+c(!0)+c()}}}
var guidFactory=GuidFactory(),PickerInPopup=function(){function c(){var e=this;this.popupWidth=660;this.popupHeight=552;this.pickerWindow=null;this.open=function(){e.pickerWindowIsAlreadyOpened()?e.pickerWindow.focus():e.pickerWindow=window.open(e.getPickerUrlWithTarget(),e.getInitialPopupTitle(),e.getPopupWindowSettings())};this.listenForPostMessages=function(){window.addEventListener("message",e.onPostMessageReceived)};this.pickerWindowIsAlreadyOpened=function(){return e.pickerWindow&&!e.pickerWindow.closed};
this.getPickerUrlWithTarget=function(){var f=new Url(e.getPickerUrl());if(f.getParamValue(c.target))throw"You cannot set query parameter: ["+c.target+"] in getPickerUrl function.";f.appendOrUpdateParam(c.target,encodeURI(e.pickerIdentifier));return f.value};this.getPopupWindowSettings=function(){var c=e.getPopupCoordinates();return"width="+c[0]+", height="+c[1]+", left="+c[2]+", top="+c[3]+", toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes"};this.getPopupCoordinates=function(){return[e.popupWidth,
e.popupHeight,e.getWindowLeftCoordinate(),e.getWindowTopCoordinate()]};this.getWindowLeftCoordinate=function(){return window.screenX+(window.outerWidth-e.popupWidth)/2};this.getWindowTopCoordinate=function(){return(window.screenY+window.outerHeight-e.popupHeight)/2};this.onPostMessageReceived=function(c){e.isPostMessageForUs(c)&&e.processPostMessage(c)};this.isPostMessageForUs=function(f){return f&&f.data&&f.data[c.target]===e.pickerIdentifier};this.pickerIdentifier=guidFactory.newGuid();this.listenForPostMessages()}
c.target="target";return c}(),CloudPickerModeSerializer=function(){function c(){}c.prototype.serialize=function(c){return encodeURI(JSON.stringify(c))};c.prototype.deserialize=function(c){return JSON.parse(decodeURI(c))};return c}(),GooglePickerInPopup=function(c){function e(e,b,a,d,g){var f=this;c.call(this);this.settings=e;this.browserSniffer=b;this.browserNotSupportedErrorTranslation=a;this.pickerModeSerializer=d;this.mode=g;this.subscriberCallbacks=[];this.subscribe=function(a){f.raiseInitCallback(a);
f.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!1};this.isProxyIframeRequired=function(){return f.browserSniffer.isInternetExplorerAnyVersion()};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("cross_communication_proxy")){var a=f.prepareIframe("cross_communication_proxy");document.body.appendChild(a)}};this.prepareIframe=function(a){var b=
document.createElement("iframe");b.id=a;b.style.display="none";b.src=f.settings.crossCommunicationProxyUrl;return b};this.raiseInitCallback=function(a){if(f.browserSniffer.isInternetExplorer9()){var b=new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,f.browserNotSupportedErrorTranslation,UploadControlTranslation.googleDrive);a.onPickerInitFailure(b)}else a.onPickerInitSuccess()};this.shouldProcessPostMessage=function(a){return a.origin===f.settings.pickerDomain};if(objectState.isNullOrUndefined(this.settings))throw"GooglePickerInPopup requires settings to be passed. Please provide them.";
if(objectState.isNullOrUndefined(this.browserSniffer))throw"GooglePickerInPopup requires browserSniffer to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.browserNotSupportedErrorTranslation))throw"GooglePickerInPopup requires browserNotSupportedErrorTranslation to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.pickerModeSerializer))throw"GooglePickerInPopup requires modeSerializer to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.mode))throw"GooglePickerInPopup requires mode to be passed. Please provide it.";
this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered()}__extends(e,c);e.prototype.processPostMessage=function(c){if(this.shouldProcessPostMessage(c)){var b=c.data.files.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.url,a.name,a.size,SourceType.Google,a.mimeType,a.id)});b=new PickerResult(b);c=this.getOAuthContext(c);objectState.isNullOrUndefined(c)||b.setOAuthContext(c);c=0;for(var a=this.subscriberCallbacks;c<a.length;c++){var d=a[c];if(d.onFileSelected)d.onFileSelected(b)}}};
e.prototype.getOAuthContext=function(c){return objectState.isNullOrUndefined(c.data.oAuthContext)?null:c.data.oAuthContext};e.prototype.getPickerUrl=function(){var c=new Url(this.settings.pickerUrl);c.appendOrUpdateParam("mode",this.pickerModeSerializer.serialize(this.mode));return c.value};e.prototype.getInitialPopupTitle=function(){return"Google Drive"};return e}(PickerInPopup),OneDrivePicker=function(c){function e(e,b,a,d,g){var f=this;void 0===g&&(g={purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:!1,
allowCollaboration:!1});c.call(this);this.settings=e;this.browserSniffer=b;this.browserNotSupportedErrorTranslation=a;this.modeSerializer=d;this.mode=g;this.subscriberCallbacks=[];this.subscribe=function(a){f.raiseInitCallback(a);f.subscriberCallbacks.push(a)};this.enableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!0};this.disableMultipleFilesSelecting=function(){f.mode.allowToSelectMultipleFiles=!1};this.isProxyIframeRequired=function(){return f.browserSniffer.isInternetExplorerAnyVersion()&&
f.settings.crossCommunicationProxyUrl};this.ensureProxyIframeIsRendered=function(){if(!document.getElementById("onedrive_proxy")){var a=f.prepareIframe("onedrive_proxy");document.body.appendChild(a)}};this.prepareIframe=function(a){var b=document.createElement("iframe");b.id=a;b.style.display="none";b.src=f.settings.crossCommunicationProxyUrl;return b};this.raiseInitCallback=function(a){if(f.browserSniffer.isInternetExplorer9()){var b=new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,
f.browserNotSupportedErrorTranslation,UploadControlTranslation.oneDrive);a.onPickerInitFailure(b)}else a.onPickerInitSuccess()};if(objectState.isNullOrUndefined(this.settings))throw"OneDrivePicker requires settings to be passed. Please provide them.";if(objectState.isNullOrUndefined(this.browserSniffer))throw"OneDrivePicker requires browserSniffer to be passed. Please provide a handle to it.";if(objectState.isNullOrUndefined(this.browserNotSupportedErrorTranslation))throw"OneDrivePicker requires browserNotSupportedErrorTranslation to be passed. Please provide it.";
if(objectState.isNullOrUndefined(this.modeSerializer))throw"OneDrivePicker requires modeSerializer to be passed. Please provide it.";this.isProxyIframeRequired()&&this.ensureProxyIframeIsRendered()}__extends(e,c);e.prototype.processPostMessage=function(c){if(c.origin===this.settings.pickerDomain){var b=c.data.files.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.url,a.name,a.size,a.sourceType,a.mimeType,a.id)});b=new PickerResult(b);b.setOAuthContext(c.data.oAuthContext);
c=0;for(var a=this.subscriberCallbacks;c<a.length;c++){var d=a[c];if(d.onFileSelected)d.onFileSelected(b)}}};e.prototype.getPickerUrl=function(){var c=new Url(this.settings.pickerUrl);c.appendOrUpdateParam("mode",this.modeSerializer.serialize(this.mode));return c.value};e.prototype.getInitialPopupTitle=function(){return"OneDrive"};e.create=function(c,b,a,d){return new e(c,b,"",a,d)};return e}(PickerInPopup);
(function(c){(function(c){var e=function(){return function(b,a){var c=this;this.picker=b;this.onPickerOpen=a;this.onClick=function(){c.onPickerOpen();c.picker.open()};this.handlePickerInitialization=function(){c.isLoading=ko.observable(!0);c.isLoadingFailed=ko.observable(!1);c.picker.subscribe(new PickerCallback(c.onPickerInitSuccess,c.onPickerInitFailure,function(){},function(){}))};this.onPickerInitSuccess=function(){c.isLoading(!1)};this.onPickerInitFailure=function(){c.isLoading(!1);c.isLoadingFailed(!0)};
contract.require(!objectState.isNullOrUndefined(b),"This ViewModel requires picker to be passed. Please provide it.");contract.require(!objectState.isNullOrUndefined(a),"This ViewModel requires onPickerOpen to be passed. Please provide it.");this.handlePickerInitialization()}}();c.PickerViewModel=e})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(e){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.localPicker;this.viewModel=function(b){return new e.PickerViewModel(a.picker,b.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ili ili-laptop" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.computerOrDevice" class="ccl-uc-source-content-text"></span>')}}();e.LocalPickerComponent=f})(c.Picker||
(c.Picker={}))})(Components||(Components={}));
(function(c){(function(c){(function(c){var b=function(){function a(a){var b=this;this.picker=a;this.css=ko.observable("");this.title=UploadControlTranslation.addFiles;this.caption=UploadControlTranslation.orSimplyDropThemHere;this.currentDragEnterCount=0;this.showCaption=function(){return BrowserSniffer().isAnyMobile()||!b.picker.isEnabled()?!1:!0};this.dropzoneDragOver=function(a,c){a=c.originalEvent;if(!b.isDraggingFiles(a))return!1;a.stopPropagation();a.preventDefault();b.picker.isEnabled()?a.dataTransfer.dropEffect=
"copy":a.dataTransfer.dropEffect="none";return!0};this.dropzoneDrop=function(a,c){a=c.originalEvent;if(!b.isDraggingFiles(a)||!b.picker.isEnabled())return!1;b.picker.onFilesDropped(a.dataTransfer);return!0};this.documentDragEnter=function(a){b.isDraggingFiles(a)&&(a.preventDefault(),b.currentDragEnterCount++,b.picker.isEnabled()&&b.css("highlight"))};this.documentDragOver=function(a){b.isDraggingFiles(a)&&(a.preventDefault(),a.dataTransfer.dropEffect="none")};this.documentDrop=function(a){b.isDraggingFiles(a)&&
(a.preventDefault(),b.currentDragEnterCount=0,b.css(""))};this.documentDragLeave=function(a){b.isDraggingFiles(a)&&(b.currentDragEnterCount--,0===b.currentDragEnterCount&&b.css(""))};this.isDraggingFiles=function(a){if(a.dataTransfer.types)for(var b=0;b<a.dataTransfer.types.length;b++)if("Files"===a.dataTransfer.types[b])return!0;return!1};contract.require(!objectState.isNullOrUndefined(a),"This ViewModel requires picker to be passed. Please provide them.");this.eventHandlers={drop:this.dropzoneDrop,
dragover:this.dropzoneDragOver};this.subscribeToDocumentDragDropEvents()}a.prototype.subscribeToDocumentDragDropEvents=function(){document.addEventListener("dragenter",this.documentDragEnter,!1);document.addEventListener("dragover",this.documentDragOver,!1);document.addEventListener("drop",this.documentDrop,!1);document.addEventListener("dragleave",this.documentDragLeave,!1)};return a}();c.DropzoneViewModel=b})(c.Dropzone||(c.Dropzone={}))})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(e){(function(e){var b=function(){return function(a){this.picker=a;this.name=c.ComponentName.dropzonePicker;this.viewModel={instance:new e.DropzoneViewModel(this.picker)};this.template='\n<button class="ccl-uc-dropzone-container" data-bind="event: eventHandlers">\n    <div class="ccl-uc-dropzone" data-bind="css: css">\n        <div id="ccl-uc-dropzone-text-container">\n            <div aria-hidden="true" class="ili ili-file"></div>\n            <span id="ccl-uc-dropzone-text" data-bind="text: title"></span>\n        </div>\n        <span id="ccl-uc-dropzone-caption" data-bind="text: caption, visible: showCaption()"></span>\n    </div>\n</button>'}}();
e.DropzonePickerComponent=b})(e.Dropzone||(e.Dropzone={}))})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(e){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.dropboxPicker;this.viewModel=function(b){return new e.PickerViewModel(a.picker,b.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-dropbox-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.dropbox" class="ccl-uc-source-content-text"></span>')}}();e.DropboxPickerComponent=f})(c.Picker||
(c.Picker={}))})(Components||(Components={}));
(function(c){(function(e){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.googlePicker;this.viewModel=function(b){return new e.PickerViewModel(a.picker,b.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-google-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.googleDrive" class="ccl-uc-source-content-text"></span>')}}();e.GooglePickerComponent=f})(c.Picker||
(c.Picker={}))})(Components||(Components={}));
(function(c){(function(e){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.onedrivePicker;this.viewModel=function(b){return new e.PickerViewModel(a.picker,b.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-onedrive-icon" aria-hidden="true"></div> \n        <span data-bind="text: UploadControlTranslation.oneDrive" class="ccl-uc-source-content-text"></span>')}}();e.OneDrivePickerComponent=f})(c.Picker||
(c.Picker={}))})(Components||(Components={}));
(function(c){(function(e){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.linkToGoogleDrivePicker;this.viewModel=function(b){return new e.PickerViewModel(a.picker,b.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-uc-google-icon" aria-hidden="true"></div>\n        <span data-bind="text: UploadControlTranslation.googleDrive" class="ccl-uc-source-content-text"></span>')}}();e.LinkToGoogleDrivePickerComponent=
f})(c.Picker||(c.Picker={}))})(Components||(Components={}));
(function(c){(function(e){var f=function(){return function(b){var a=this;this.picker=b;this.name=c.ComponentName.folderPicker;this.viewModel=function(b){return new e.PickerViewModel(a.picker,b.onPickerOpen)};this.template=e.Template.create(this.name,'\n        <div class="ccl-uc-source-content-image ccl-fl-item-details-folder-icon" aria-hidden="true"></div> \n        <span data-bind="text: UploadControlTranslation.folder" class="ccl-uc-source-content-text"></span>')}}();e.FolderPickerComponent=f})(c.Picker||
(c.Picker={}))})(Components||(Components={}));
var PickerObjectsFactory=function(){function c(c,f){var b=this;this.settings=c;this.translations=f;this.initializeDropzonePicker=function(a){var c=b.getDropzonePickerMode();c=new DropzonePicker(c,new FileValidator);a.push(c);a=new Components.Picker.Dropzone.DropzonePickerComponent(c);ko.components.register(a.name,a)};this.initializeLocalFilePicker=function(a,c){if(b.settings.EnableLocalUpload){var d=b.getPickerMode();d=new LocalFilePicker(d,BrowserSniffer(),new FileNameFromPathExtractor,$);a.push(d);
a=new Components.Picker.LocalPickerComponent(d);ko.components.register(a.name,a);c.push(b.getUploadPickerComponentInfo(a.name))}};this.initializeFolderPicker=function(a,c){if(b.isFolderUploadingAllowed()){var d=new FolderPicker($);a.push(d);a=new Components.Picker.FolderPickerComponent(d);ko.components.register(a.name,a);c.push(b.getUploadPickerComponentInfo(a.name))}};this.isFolderUploadingAllowed=function(){return b.settings.EnableLocalUpload&&b.settings.AllowToUploadFolders&&browserSniffer.isDirectoryUploadSupported()&&
!browserSniffer.isAnyMobile()};this.initializeDropboxPicker=function(a,c){if(b.settings.EnableUploadFromDropbox){var d=b.getDropboxPickerInitSettings();d=new DropboxPicker(d,new DropboxWrapper,b.translations.DropboxApiNotAvailable,b.getUploadCloudPickerMode());a.push(d);a=new Components.Picker.DropboxPickerComponent(d);ko.components.register(a.name,a);c.push(b.getUploadPickerComponentInfo(a.name))}};this.initializeGoogleDriveUploadPicker=function(a,c){if(b.settings.EnableUploadFromGoogleDrive){var d=
b.getGooglePickerInitSettings();d=new GooglePickerInPopup(d,BrowserSniffer(),b.translations.GoogleBrowserNotSupported,new CloudPickerModeSerializer,b.getUploadCloudPickerMode());a.push(d);a=new Components.Picker.GooglePickerComponent(d);ko.components.register(a.name,a);c.push(b.getUploadPickerComponentInfo(a.name))}};this.getGooglePickerInitSettings=function(){return{pickerDomain:b.settings.GoogleDriveUploadSettings.PickerDomain,pickerUrl:b.settings.GoogleDriveUploadSettings.PickerUrl,crossCommunicationProxyUrl:b.settings.GoogleDriveUploadSettings.CrossCommunicationProxyUrl}};
this.getUploadCloudPickerMode=function(){return{purpose:PickerPurpose.Upload,allowToSelectMultipleFiles:b.settings.AllowToSelectMultipleFiles,allowedFileExtensions:b.settings.ValidationSettings.AllowedFileExtensions,allowCollaboration:!1}};this.initializeOneDriveUploadPicker=function(a,c){if(b.settings.EnableUploadFromOneDrive){var d=new OneDrivePicker(b.getOneDrivePickerInitSettings(),BrowserSniffer(),b.translations.OneDriveBrowserNotSupported,new CloudPickerModeSerializer,b.getUploadCloudPickerMode());
a.push(d);a=new Components.Picker.OneDrivePickerComponent(d);ko.components.register(a.name,a);c.push(b.getUploadPickerComponentInfo(a.name))}};this.initializeGoogleDriveLinkingPicker=function(a,c){if(b.settings.EnableLinkingToGoogleDrive){var d=b.getGooglePickerInitSettings();d=new GooglePickerInPopup(d,BrowserSniffer(),b.translations.GoogleBrowserNotSupported,new CloudPickerModeSerializer,b.getLinkToCloudPickerMode());a.push(d);a=new Components.Picker.LinkToGoogleDrivePickerComponent(d);ko.components.register(a.name,
a);c.push(b.getLinkPickerComponentInfo(a.name))}};this.getLinkToCloudPickerMode=function(){return{allowToSelectMultipleFiles:b.settings.AllowToSelectMultipleFiles,purpose:PickerPurpose.LinkToCloud,allowedFileExtensions:b.settings.ValidationSettings.AllowedFileExtensions,allowCollaboration:!1}};this.initializeOneDriveLinkingPicker=function(a,c){if(b.settings.EnableLinkingFromOneDrive){var d=b.getOneDrivePickerInitSettings();d=new OneDrivePicker(d,BrowserSniffer(),b.translations.OneDriveBrowserNotSupported,
new CloudPickerModeSerializer,b.getLinkToCloudPickerMode());a.push(d);a=new Components.Picker.LinkToOneDrivePickerComponent(d);ko.components.register(a.name,a);c.push(b.getLinkPickerComponentInfo(a.name))}}}c.prototype.build=function(){var c=[],f=[],b=[],a=[];this.initializeDropzonePicker(c);this.initializeLocalFilePicker(c,a);this.initializeFolderPicker(b,a);this.initializeDropboxPicker(c,a);this.initializeGoogleDriveUploadPicker(c,a);this.initializeOneDriveUploadPicker(c,a);this.initializeGoogleDriveLinkingPicker(f,
a);this.initializeOneDriveLinkingPicker(f,a);return[c,f,b,a]};c.prototype.getDropzonePickerMode=function(){return{allowToSelectMultipleFiles:this.settings.AllowToSelectMultipleFiles,allowDragAndDrop:this.settings.EnableLocalUpload&&this.settings.LocalUploadSettings.AllowDragAndDrop}};c.prototype.getPickerMode=function(){return{allowToSelectMultipleFiles:this.settings.AllowToSelectMultipleFiles,allowedFileExtensions:this.settings.ValidationSettings.AllowedFileExtensions}};c.prototype.getUploadPickerComponentInfo=
function(c){return{componentName:c,purpose:PickerPurpose.Upload}};c.prototype.getDropboxPickerInitSettings=function(){return{dropboxAppKey:this.settings.DropboxUploadSettings.DropboxAppKey}};c.prototype.getOneDrivePickerInitSettings=function(){return{pickerDomain:this.settings.OneDriveUploadSettings.OneDrivePickerDomain,pickerUrl:this.settings.OneDriveUploadSettings.OneDrivePickerUrl,crossCommunicationProxyUrl:this.settings.OneDriveUploadSettings.CrossCommunicationProxyUrl}};c.prototype.getLinkPickerComponentInfo=
function(c){return{componentName:c,purpose:PickerPurpose.LinkToCloud}};return c}(),LegacyGenericUploaderLiterals=function(){function c(c){this.maxFileSizeForUpload=c.MaxFileSizeForUpload;this.files=c.Files;this.fileExtensionNotAllowed=c.FileExtensionNotAllowed;this.fileTooBig=c.FileTooBig;this.fileTooSmall=c.FileTooSmall;this.invalidCharactersXInFileName=c.InvalidCharactersXInFileName;this.unableToOpenFile=c.UnableToOpenFile;this.invalidFirstPartOfFileName=c.InvalidFirstPartOfFileName;this.mb=c.Mb;
this.kb=c.Kb;this.fileIsEmpty=c.FileIsEmpty;this.fileNameIsTooLong=c.FileNameIsTooLong}c.prototype.getExcededSizeLimitTranslation=function(c){return this.fileTooBig.replace("{0}",this.getFormattedFileSize(c))};c.prototype.getBelowSizeLimitTranslation=function(c){return this.fileTooSmall.replace("{0}",this.getFormattedFileSize(c))};c.prototype.getFormattedFileSize=function(c){return"number"!==typeof c?"":1048576<=c?(c/1048576).toFixed(2)+" "+this.mb:(c/1024).toFixed(2)+" "+this.kb};return c}(),uploaderFileStatus;
(function(c){c[c.added=1]="added";c[c.inProgress=2]="inProgress";c[c.success=3]="success";c[c.error=4]="error"})(uploaderFileStatus||(uploaderFileStatus={}));function AjaxUploaderCommon(){return{getRelativePath:function(c,e){return browserSniffer.isFirefox()?c.relativePath||e||"":c.webkitRelativePath||c.relativePath||e||""}}}
var auCommon=AjaxUploaderCommon(),UploaderFileItem=function(){function c(c,f){var b=this;this.fileData=c;this.literals=f;this.getProgressSafe=function(a){return a||0};this.hasAction=ko.observable(!1);this.preview=ko.observable(null);this.progress=ko.observable(null);this.progressText=ko.pureComputed(function(){var a=String(100*b.getProgressSafe(b.progress()));return parseInt(a,10)+"%"});this.status=ko.observable(uploaderFileStatus.added);this.isActionEnabled=ko.observable(!0);this.isActionVisible=
ko.observable(!0);this.errorMessage=ko.observable(null);this.messageColumnCss=ko.pureComputed(function(){switch(b.status()){case uploaderFileStatus.error:return"error";case uploaderFileStatus.inProgress:return"progress";default:return"empty-col"}});this.buttonColumnCss=ko.pureComputed(function(){var a="";switch(b.status()){case uploaderFileStatus.success:a+="delete";break;default:a+="cancel"}b.isActionEnabled()||(a+=" transparent");return a});this.isError=ko.pureComputed(function(){return b.status()===
uploaderFileStatus.error});this.isInProgress=ko.pureComputed(function(){return b.status()===uploaderFileStatus.inProgress});this.isProgressSet=ko.pureComputed(function(){return objectState.isNumber(b.progress())});this.useDefaultPreview=ko.pureComputed(function(){return null===b.preview()});this.name=this.fileData.name;this.size=this.fileData.size;this.fileId=this.fileData.fileId;this.sizeText=this.literals.getFormattedFileSize(c.size);this.action=null}c.prototype.emptyAction=function(){return!1};
return c}(),UploaderFileList=function(){return function(c,e,f){var b=this;this.fileListElement=c;this.fileItemFactory=e;this.literals=f;this.findFileById=function(a){return ko.utils.arrayFirst(b.files(),function(b){return b.fileId===a})};this.setFileStatus=function(a,c,e){a=b.findFileById(a);objectState.isNullOrUndefined(a)||(a.status(c),b.prepareActionCallback(a,e))};this.prepareActionCallback=function(a,b){b?(a.action=function(){b(a.fileId)},a.hasAction(!0)):null===b&&(a.action=null,a.hasAction(!1))};
this.setErrorMessage=function(a,c){a=b.findFileById(a);objectState.isNullOrUndefined(a)||(objectState.isNullOrWhitespace(c)&&(c=b.literals.unknown),a.errorMessage(c))};this.addFile=function(a,c){b.removeFiles();a=b.fileItemFactory.create(a,b.literals);b.prepareActionCallback(a,c);b.files.push(a)};this.removeFile=function(a){b.files.remove(function(b){return b.fileId===a})};this.removeFiles=function(){b.files.removeAll()};this.setDefaultFileProgress=function(a){b.updateFileProgress(a,null)};this.updateFileProgress=
function(a,c){a=b.findFileById(a);objectState.isNullOrUndefined(a)||a.progress(c)};this.setFileStatusToInProgress=function(a){b.setFileStatus(a,uploaderFileStatus.inProgress)};this.setFileStatusToSuccess=function(a,c){b.setFileStatus(a,uploaderFileStatus.success,c)};this.setFileStatusToError=function(a,c,e){b.setFileStatus(a,uploaderFileStatus.error,e);b.setErrorMessage(a,c)};this.updateFilePreview=function(a,c){a=b.findFileById(a);objectState.isNullOrUndefined(a)||a.preview(c)};this.setActionCallback=
function(a,c){a=b.findFileById(a);objectState.isNullOrUndefined(a)||b.prepareActionCallback(a,c)};this.disableAction=function(a){a=b.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionEnabled(!1)};this.enableAction=function(a){a=b.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionEnabled(!0)};this.hideAction=function(a){a=b.findFileById(a);objectState.isNullOrUndefined(a)||a.isActionVisible(!1)};contract.require(!objectState.isNullOrUndefined(c),"argument 'fileListElement' is not defined");
contract.require(!objectState.isNullOrUndefined(e),"argument 'fileItemFactory' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'literals' is not defined");this.files=ko.observableArray([]);ko.applyBindings(this,this.fileListElement[0])}}();
function UploadStateServiceClient(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'options' is not defined");contract.require(!objectState.isNullOrUndefined(c.client),"'options.client' is not defined");contract.require(!objectState.isNullOrUndefined(c.hub),"'options.hub' is not defined");var e={usePreExistingChannel:null,openChannel:function(b){e.usePreExistingChannel=!1;null!==c.hub&&"undefined"!==typeof c.hub.id&&(e.usePreExistingChannel=!0);c.client.UpdateUploadProgress=function(a){e.onProgress(a)};
c.client.UploadCompleted=function(a){e.onSuccess(JSON.parse(a));e.usePreExistingChannel||c.hub.stop()};c.client.UploadError=function(a){e.onFail(a);e.usePreExistingChannel||c.hub.stop()};c.client.uploadAborted=function(){e.onAbort();e.usePreExistingChannel||c.hub.stop()};e.usePreExistingChannel?(b.channelId=c.hub.id,e.onChannelOpened(b)):e.openNewChannel(b)},openNewChannel:function(b){var a=!1;c.hub.start({transport:"longPolling"}).done(function(){a||(a=!0,b.channelId=c.hub.id,e.onChannelOpened(b))}).fail(function(){a||
(a=!0,console.log("Could not connect to UploadProgressNotificationHub!"),e.onChannelOpenFailure())});c.openTimeoutPeriodInMs&&setTimeout(function(){a||(a=!0,console.log("Connecting to UploadProgressNotificationHub timed out!"),e.onChannelOpenFailure())},c.openTimeoutPeriodInMs)},onProgress:function(b){if(c.onProgress)c.onProgress(b)},onSuccess:function(b){if(c.onSuccess)c.onSuccess(b)},onFail:function(b){if(c.onFail)c.onFail(b)},onAbort:function(){if(c.onAbort)c.onAbort()},onChannelOpened:function(b){if(c.onChannelOpened)c.onChannelOpened(b)},
onChannelOpenFailure:function(){if(c.onChannelOpenFailure)c.onChannelOpenFailure()},initialize:function(b){e.openChannel(b)}},f={channelId:null,abort:function(){}};e.initialize(f);return f}
var UploadStateService=function(){return function(){var c=this;this.uploadStateServiceClient=this.server=this.hub=this.client=null;this.specifyServiceUrl=function(c){objectState.isNullOrUndefined(c.endpoint)||($.connection.hub.url=c.endpoint)};this.openChannelWithoutSignalRLoaded=function(c){if(c&&c.onChannelOpenFailure)c.onChannelOpenFailure()};this.openChannelWithSignalRLoaded=function(e){e=e||{};c.uploadStateServiceClient=UploadStateServiceClient({client:c.client,hub:c.hub,onProgress:e.onProgress,
onSuccess:e.onSuccess,onFail:e.onFail,onChannelOpened:e.onChannelOpened,onAbort:e.onAbort,onChannelOpenFailure:e.onChannelOpenFailure,openTimeoutPeriodInMs:3E3})};this.abortUploadWithoutSignalRLoaded=function(c){safeConsoleLogger.log("Request to abort failed. Script with signalr hub definition has not come yet.");c&&c()};this.abortUploadWithSignalRLoaded=function(e){c.server.abortUpload().fail(function(c){safeConsoleLogger.log("Request to abort failed, probably because SignalR is unavailable. "+c);
e&&e()})};this.signalrHubScriptLoaded=function(e){contract.require(!objectState.isNullOrUndefined(e),"argument 'options' is not defined");contract.require(!objectState.isNullOrUndefined(e.signalR),"'options.signalR' is not defined");contract.require(!objectState.isNullOrUndefined(e.signalR.uploadProgressNotificationHub),"could not find progress notification hub");c.specifyServiceUrl(e);c.client=e.signalR.uploadProgressNotificationHub.client;c.server=e.signalR.uploadProgressNotificationHub.server;
c.hub=e.signalR.hub;c.openChannel=c.openChannelWithSignalRLoaded;c.abortUpload=c.abortUploadWithSignalRLoaded};this.openChannel=this.openChannelWithoutSignalRLoaded;this.abortUpload=this.abortUploadWithoutSignalRLoaded}}();
(function(c){var e=function(){function c(){this.resetState()}c.prototype.getCurrentState=function(){return this.currentState};c.prototype.getFileId=function(){return this.fileId};c.prototype.isFinalState=function(){return this.currentState===FileUploadState.Success||this.currentState===FileUploadState.Error};c.prototype.prepareUpload=function(b){contract.require(!objectState.isNullOrUndefined(b),"'fileId' is not defined");if(this.currentState===FileUploadState.New)this.fileId=b,this.currentState=
FileUploadState.Ready;else throw Error("You can only prepare upload if it is in status 'New'");};c.prototype.startUpload=function(){if(this.currentState===FileUploadState.Ready)this.currentState=FileUploadState.InProgress;else throw Error("You can only start upload if it is in status 'Ready'");};c.prototype.abortUpload=function(){if(this.currentState===FileUploadState.InProgress)this.currentState=FileUploadState.Aborting;else throw Error("You can only abort upload if it is in status 'InProgress'");
};c.prototype.finishUpload=function(){if(this.currentState===FileUploadState.Ready||this.currentState===FileUploadState.InProgress||this.currentState===FileUploadState.Aborting)this.currentState=FileUploadState.Success;else throw Error("You can only finish upload if it is in status 'InProgress' or 'Ready' or 'Aborting'");};c.prototype.failUpload=function(){if(this.currentState===FileUploadState.Ready||this.currentState===FileUploadState.InProgress||this.currentState===FileUploadState.Aborting)this.currentState=
FileUploadState.Error;else throw Error("You can only fail upload if it is in status 'Ready' or 'InProgress' or 'Aborting'");};c.prototype.resetState=function(){this.currentState=FileUploadState.New;this.fileId=null};return c}();c.FileUploadStateHandler=e})(GenericUploader||(GenericUploader={}));var LegacyGenericUploaderControlFailureReason;(function(c){c[c.AllPickersFailed=0]="AllPickersFailed"})(LegacyGenericUploaderControlFailureReason||(LegacyGenericUploaderControlFailureReason={}));
var LegacyGenericUploaderControlFailureEventArgs=function(){return function(c){this.failureReason=c}}(),LegacyGenericUploaderCallbacks=function(){return function(c,e){c&&e&&(this.controlInitialized=e.getFunctionByName(c?c.OnControlInitialization:void 0),this.fileSelected=e.getFunctionByName(c?c.OnFileSelected:void 0),this.fileSelectionCanceled=e.getFunctionByName(c?c.OnFileSelectionCanceled:void 0),this.fileUploadSuccess=e.getFunctionByName(c?c.OnFileUploadSuccess:void 0),this.fileUploadError=e.getFunctionByName(c?
c.OnFileUploadError:void 0),this.controlInitializationError=e.getFunctionByName(c?c.OnControlInitializationError:void 0),this.pickerInitFailure=e.getFunctionByName(c?c.OnPickerInitFailure:void 0),this.fileUploadAborted=e.getFunctionByName(c?c.OnFileUploadAborted:void 0),this.fileRemoved=e.getFunctionByName(c?c.fileRemoved:void 0))}}(),LegacyGenericUploaderControl=function(){function c(c,f,b,a,d,g,h,k,l){var e=this;this.settings=c;this.literals=f;this.pickers=b;this.sender=a;this.fileList=d;this.fileMetadataFactory=
g;this.uploaderCallbacks=h;this.uploadStateHandler=k;this.fileResultValidator=l;this.shouldAllowToCancelUpload=!1;this.initPickerInitializationDfds=function(a){e.pickerInitializationDfds=a.map(function(){return $.Deferred()})};this.initialize=function(){e.pickers.forEach(function(a,b){e.initPickerCallback(a,b)});e.controlInitializedDfd.done(e.uploaderCallbacks.controlInitialized);e.controlInitializedDfd.fail(e.uploaderCallbacks.controlInitializationError)};this.initPickerCallback=function(a,b){var c=
new PickerCallback(function(){return e.onPickerInitialized(b)},function(a){return e.onPickerInitializationError(b,a)},e.onFileSelected,function(){});a.subscribe(c);e.pickerInitializationDfds[b].fail(e.uploaderCallbacks.pickerInitFailure)};this.onPickerInitialized=function(a){e.pickerInitializationDfds[a].resolve();e.checkPickersInitStateAndRaiseControlInit()};this.onPickerInitializationError=function(a,b){e.pickerInitializationDfds[a].reject(e,b);e.checkPickersInitStateAndRaiseControlInit()};this.checkPickersInitStateAndRaiseControlInit=
function(){e.pickerInitializationDfds.every(function(a){return"rejected"===a.state()})?e.controlInitializedDfd.reject(e,new LegacyGenericUploaderControlFailureEventArgs(LegacyGenericUploaderControlFailureReason.AllPickersFailed)):e.pickerInitializationDfds.every(function(a){return"pending"!==a.state()})&&e.controlInitializedDfd.resolve(e)};this.onUploadError=function(a){e.fileList.setFileStatusToError(e.uploadStateHandler.getFileId(),a,e.removeFromList);e.uploadStateHandler.failUpload();e.fileList.enableAction(e.uploadStateHandler.getFileId());
e.enablePickerButton();e.uploaderCallbacks.fileUploadError&&e.uploaderCallbacks.fileUploadError(a)};this.onUploadSuccess=function(a,b){e.fileList.setFileStatusToSuccess(e.uploadStateHandler.getFileId(),e.removeFromList);e.uploadStateHandler.finishUpload();e.settings.disableDeletePostBackAfterUpload?e.doNotAllowToCancelUpload():e.fileList.enableAction(e.uploadStateHandler.getFileId());e.uploaderCallbacks.fileUploadSuccess&&e.uploaderCallbacks.fileUploadSuccess(a,b||{})};this.removeFromList=function(a){e.fileList.removeFile(a);
e.enablePickerButton();e.uploaderCallbacks.fileRemoved&&e.uploaderCallbacks.fileRemoved()};this.disablePickerButton=function(){e.pickers.forEach(function(a){return a.disable()})};this.enablePickerButton=function(){e.pickers.forEach(function(a){return a.enable()})};this.addFilesToFileList=function(a){a=e.fileMetadataFactory.create(a);e.fileList.addFile(a);e.uploadStateHandler.prepareUpload(a.fileId);e.fileList.setFileStatusToInProgress(e.uploadStateHandler.getFileId())};this.onUploadProgress=function(a){a/=
100;e.shouldAllowToCancelUpload&&(e.fileList.enableAction(e.uploadStateHandler.getFileId()),e.shouldAllowToCancelUpload=!1);e.fileList.updateFileProgress(e.uploadStateHandler.getFileId(),a);e.settings.disableDeletePostBackAfterUpload&&a>=e.disableDeletePostbackThreshold&&e.doNotAllowToCancelUpload()};this.onAbortSuccess=function(){e.uploadStateHandler.abortUpload();e.removeFromList(e.uploadStateHandler.getFileId());e.uploaderCallbacks.fileUploadAborted&&e.uploaderCallbacks.fileUploadAborted()};this.onAbortFailure=
function(){e.uploadStateHandler.isFinalState()?safeConsoleLogger.log("Abort request failed, but upload has already ended."):(e.doNotAllowToCancelUpload(),e.fileList.updateFileProgress(e.uploadStateHandler.getFileId(),"-"),e.fileList.setFileStatusToInProgress(e.uploadStateHandler.getFileId()))};this.onFileSelected=function(a){e.uploadStateHandler.resetState();e.disablePickerButton();var b=e.sender.getOptions();e.uploaderCallbacks.fileSelected&&e.uploaderCallbacks.fileSelected(a.files[0],b);e.addFilesToFileList(a.files);
if(e.validate(a)){e.shouldAllowToCancelUpload=!0;e.fileList.disableAction(e.uploadStateHandler.getFileId());a=new GenericUploader.RequestToSender(a.files[0]);var c=e.sender.send(a,e.onUploadProgress,e.onUploadSuccess,e.onUploadError,b);e.fileList.setActionCallback(e.uploadStateHandler.getFileId(),function(){c.abort(e.onAbortSuccess,e.onAbortFailure)});e.uploadStateHandler.startUpload()}};this.validate=function(a){if(1<a.files.length)return!0;a=e.fileResultValidator.validateFile(a.files[0]);return a.isValid()?
!0:(e.onUploadError(a.getData()),!1)};this.doNotAllowToCancelUpload=function(){e.shouldAllowToCancelUpload=!1;e.fileList.disableAction(e.uploadStateHandler.getFileId())};this.hidePicker=function(){e.pickers.forEach(function(a){return a.hide()})};this.showPicker=function(){e.pickers.forEach(function(a){return a.show()})};this.enableMultipleFilesMode=function(){e.pickers.forEach(function(a){return a.enableMultipleFilesSelecting()})};this.disableMultipleFilesMode=function(){e.pickers.forEach(function(a){return a.disableMultipleFilesSelecting()})};
this.subscribe=function(a){e.uploaderCallbacks=a;e.controlInitializedDfd.done(e.uploaderCallbacks.controlInitialized);e.controlInitializedDfd.fail(e.uploaderCallbacks.controlInitializationError);e.pickerInitializationDfds.forEach(function(a){return a.fail(e.uploaderCallbacks.pickerInitFailure)})};contract.require(!objectState.isNullOrUndefined(this.settings),"'settings' is not defined");contract.require(!objectState.isNullOrUndefined(this.literals),"'literals' is not defined");contract.require(!objectState.isNullOrUndefined(this.pickers),
"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileMetadataFactory),"'fileMetadataFactory' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploaderCallbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploadStateHandler),"'uploadStateHandler' is not defined");
contract.require(!objectState.isNullOrUndefined(this.fileResultValidator),"'fileResultValidator' is not defined");this.controlInitializedDfd=$.Deferred();this.initPickerInitializationDfds(b);this.disableDeletePostbackThreshold=.99;this.initialize()}c.prototype.setCurrentFileStatusToError=function(c){var e=this.uploadStateHandler.getFileId();this.fileList.setFileStatusToError(e,c,this.removeFromList);this.fileList.enableAction(e)};c.prototype.setFileRemovedCallback=function(c){var e=this;this.fileList.setActionCallback(this.uploadStateHandler.getFileId(),
function(b){e.removeFromList(b);"function"===typeof c&&c()})};c.prototype.displayFileInFileList=function(c,f,b){var a=this.fileMetadataFactory.generateFileId();this.uploadStateHandler.prepareUpload(a);this.uploadStateHandler.finishUpload();c={name:c,size:f,fileId:this.uploadStateHandler.getFileId()};this.fileList.addFile(c);b?(this.fileList.setFileStatusToSuccess(this.uploadStateHandler.getFileId(),this.removeFromList),this.disablePickerButton()):this.fileList.setFileStatusToSuccess(this.uploadStateHandler.getFileId());
this.settings.readOnlyMode?this.fileList.hideAction(this.uploadStateHandler.getFileId()):this.settings.disableDeletePostBackAfterUpload?this.doNotAllowToCancelUpload():this.fileList.enableAction(this.uploadStateHandler.getFileId())};return c}(),LegacyGenericUploaderSettings=function(){function c(c){this.redirectUrl=c.RedirectUrl;this.pickerUrl=c.PickerUrl;this.uploadUrl=c.UploadUrl;this.disableDeletePostBackAfterUpload=this.getBoolean(c.DisableDeletePostBackAfterUpload);this.readOnlyMode=this.getBoolean(c.ReadOnlyMode);
this.uploadStateServiceEndpoint=c.UploadStateServiceEndpoint;this.minFileSize=parseInt(c.MinFileSize);this.maxFileSize=parseInt(c.MaxFileSize);this.forbiddenFileExtensions=this.getArray(c.ForbiddenFileExtensions);this.illegalCharacters=this.getArray(c.IllegalCharacters);this.restrictedFileNames=this.getArray(c.IllegalFileNames);this.maxFileNameLength=parseInt(c.MaxFileNameLength)}c.prototype.getBoolean=function(c){return/^true$/i.test(c)};c.prototype.getArray=function(c){return"undefined"===typeof c||
null==c?null:JSON.parse(c)};return c}();function UploaderSenderOptionsFactory(){return{create:function(c){return new UploaderSenderOptions(c)}}}
function ExternalUploadersFileMetadataFactory(c,e){contract.require(!objectState.isNullOrUndefined(c),"");contract.require(!objectState.isNullOrUndefined(e),"");return{create:function(f){if(void 0==f)throw Error("Files are undefined");if(!(f instanceof Array))throw Error("Files are not an array");var b={fileId:null,size:null,name:null};b.fileId=c.newGuid();b.size=f.reduce(function(a,b){return a+b.size},0);b.name=1===f.length?f[0].name:e;return b},generateFileId:function(){return c.newGuid()}}}
var PickerFileResultValidator=function(){function c(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'validators' cannot be null or undefined");this.validators=c}c.prototype.validateFile=function(c){for(var e=0,b=this.validators;e<b.length;e++){var a=b[e];if(!objectState.isNullOrUndefined(a)&&(a=a.validateFile(c),!a.isValid()))return a}return new ValidationResult(ValidationStatus.Ok)};return c}(),FileReaderErrorValidator=function(){function c(){}c.prototype.validateFile=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");
c=c.getFileHandle();return objectState.isFileError(c)||objectState.isDomError(c)?new ValidationResult(ValidationStatus.FileIsUnavailable,c):new ValidationResult(ValidationStatus.Ok)};return c}(),FileSizeValidator=function(){function c(c,f){if(0>c)throw Error("Minimal file size cannot be negative");if(0>f)throw Error("Maximal file size cannot be negative");if(c>f)throw Error("Maximal file size must be greater than minimal file size");this.minFileSize=c;this.maxFileSize=f}c.prototype.validateFile=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");
return objectState.isNullOrUndefined(c.size)?new ValidationResult(ValidationStatus.Inconclusive):0===c.size?new ValidationResult(ValidationStatus.FileIsEmpty):c.size<this.minFileSize?new ValidationResult(ValidationStatus.FileSizeIsTooSmall,this.minFileSize):c.size>this.maxFileSize?new ValidationResult(ValidationStatus.FileSizeIsTooBig,this.maxFileSize):new ValidationResult(ValidationStatus.Ok)};return c}(),NameLengthValidator=function(){function c(c){this.maxAllowedFileNameLength=c;contract.require(!objectState.isNullOrUndefined(c),
"'MaxAllowedFileNameLength' is not provided");if(!objectState.isNumber(c)||0>=c)throw Error("'maxAllowedFileNameLength' cannot be 0 or negative");}c.prototype.validateFile=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");return this.validate(c.name)};c.prototype.validateFolder=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file' cannot be null or undefined");return this.validate(c.name)};c.prototype.validate=function(c){if(objectState.isNullOrUndefined(c))throw Error("Argument 'file.name' cannot be null or undefined");
return c.length>this.maxAllowedFileNameLength?new ValidationResult(ValidationStatus.FileNameIsTooLong,this.maxAllowedFileNameLength):new ValidationResult(ValidationStatus.Ok)};return c}(),LocalizedPickerFileResultValidator=function(){function c(c,f){this.validator=c;this.literals=f}c.prototype.validateFile=function(c){c=this.validator.validateFile(c);return c.isValid()?new ValidationResult(c.getStatus()):this.createLocalizedValidationResult(c)};c.prototype.createLocalizedValidationResult=function(c){var e=
c.getStatus();c=this.getErrorMessage(c);return new ValidationResult(e,c)};c.prototype.getErrorMessage=function(c){switch(c.getStatus()){case ValidationStatus.FileExtensionIsNotAllowed:return this.literals.fileExtensionNotAllowed;case ValidationStatus.FileIsUnavailable:return this.literals.unableToOpenFile;case ValidationStatus.FileNameIsIllegal:return this.literals.invalidFirstPartOfFileName.replace("{0}",c.getData());case ValidationStatus.FileSizeIsTooBig:return this.literals.getExcededSizeLimitTranslation(c.getData());
case ValidationStatus.FileSizeIsTooSmall:return this.literals.getBelowSizeLimitTranslation(c.getData());case ValidationStatus.FileIsEmpty:return this.literals.fileIsEmpty;case ValidationStatus.FilenameContainsIllegalCharacters:return this.literals.invalidCharactersXInFileName.replace("{0}",c.getData().join(" "));case ValidationStatus.FileNameIsTooLong:return this.literals.fileNameIsTooLong.replace("{0}",c.getData());default:return"-"}};return c}(),PickerFileResultValidatorFactory=function(){function c(){}
c.prototype.createFileValidatorWithLocalizedMessages=function(c,f){c=[new FileExtensionValidator(null,c.forbiddenFileExtensions),new FileReaderErrorValidator,new FileSizeValidator(c.minFileSize,c.maxFileSize),new IllegalCharactersValidator(c.illegalCharacters),new RestrictedFileNameValidator(c.restrictedFileNames),new NameLengthValidator(c.maxFileNameLength)];c=new PickerFileResultValidator(c);return new LocalizedPickerFileResultValidator(c,f)};c.create=function(c,f){c=[new FileExtensionValidator(c.AllowedFileExtensions,
c.ForbiddenFileExtensions),new FileReaderErrorValidator,new FileSizeValidator(c.MinFileSize,c.MaxFileSize),new IllegalCharactersValidator(c.IllegalCharacters),new RestrictedFileNameValidator(c.IllegalFileNames),new NameLengthValidator(c.MaxFileNameLength)];c=new PickerFileResultValidator(c);return new LocalizedPickerFileResultValidator(c,f)};c.createValidatorForLinkedFilesInCloud=function(c,f,b,a){c=[new NameLengthValidator(c),new FileInCloudTypeValidator(f,b)];c=new PickerFileResultValidator(c);
return new LocalizedPickerFileResultValidator(c,a)};c.createValidatorForCollaborationFiles=function(c,f){c=new NameLengthValidator(c);return new LocalizedPickerFileResultValidator(c,f)};return c}(),LegacyGenericUploaderControlFactory=function(){return function(c,e,f,b,a,d){var g=this;this.settings=c;this.literals=e;this.callbacks=f;this.pickers=b;this.fileList=a;this.sender=d;this.create=function(){return new LegacyGenericUploaderControl(g.settings,g.literals,g.pickers,g.sender,g.fileList,g.fileMetadataFactory,
g.callbacks,g.uploadStateHandler,g.fileResultValidator)};contract.require(!objectState.isNullOrUndefined(this.settings),"'settings' is not defined");contract.require(!objectState.isNullOrUndefined(this.literals),"'literals' is not defined");contract.require(!objectState.isNullOrUndefined(this.callbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");
contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");this.fileMetadataFactory=ExternalUploadersFileMetadataFactory(window.guidFactory,this.literals.files);this.uploadStateHandler=new GenericUploader.FileUploadStateHandler;this.fileResultValidator=(new PickerFileResultValidatorFactory).createFileValidatorWithLocalizedMessages(c,this.literals)}}(),FileInGoogleDriveHandle=function(){function c(c){this.metadata=c}c.prototype.get=function(){return this.metadata};return c}(),
CloudPickerWithButton=function(){function c(c,f){this.picker=c;this.button=f;if(objectState.isNullOrUndefined(this.picker))throw"This picker requires picker to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.button))throw"This picker requires button to be passed. Please provide it.";}c.prototype.show=function(){this.button.show()};c.prototype.hide=function(){this.button.hide()};c.prototype.enable=function(){this.button.removeAttr("disabled")};c.prototype.disable=function(){this.button.attr("disabled",
"disabled")};c.prototype.subscribe=function(c){var e=this,b=new PickerCallback(function(){e.button.unbind("click",e.picker.open);e.button.click(e.picker.open);c.onPickerInitSuccess()},function(a){e.disable();c.onPickerInitFailure(a)},c.onFileSelected,c.onFileSelectionCanceled);this.picker.subscribe(b)};c.prototype.enableMultipleFilesSelecting=function(){this.picker.enableMultipleFilesSelecting()};c.prototype.disableMultipleFilesSelecting=function(){this.picker.disableMultipleFilesSelecting()};c.prototype.open=
function(){"disabled"!==this.button.attr("disabled")&&this.picker.open()};return c}(),LocalFilePickerWrapper=function(){function c(c,f){this.localFilePicker=c;this.button=f;if(objectState.isNullOrUndefined(this.localFilePicker))throw"This picker requires localFilePicker to be passed. Please provide it.";if(objectState.isNullOrUndefined(this.button))throw"This picker requires button to be passed. Please provide it.";this.button.subscribeToFileSelectedEvent(this.localFilePicker.handleFileSelectedInInput)}
c.prototype.show=function(){this.button.show()};c.prototype.hide=function(){this.button.hide()};c.prototype.enable=function(){this.button.enable()};c.prototype.disable=function(){this.button.disable()};c.prototype.subscribe=function(c){this.localFilePicker.subscribe(c)};c.prototype.enableMultipleFilesSelecting=function(){this.localFilePicker.enableMultipleFilesSelecting();this.button.enableMultipleFilesSelecting()};c.prototype.disableMultipleFilesSelecting=function(){this.localFilePicker.disableMultipleFilesSelecting();
this.button.disableMultipleFilesSelecting()};c.prototype.open=function(){this.button.open()};return c}();(function(c){(function(c){(function(c){var b=function(){return function(){}}();c.Callbacks=b})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));var FileRepoError;(function(c){c[c.AbortedByUser=0]="AbortedByUser"})(FileRepoError||(FileRepoError={}));
(function(c){c.toString=function(e){return c[e]}})(FileRepoError||(FileRepoError={}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){function a(a,b){var c=this;this.errorResponseTranslator=a;this.callbacks=b;this.success=function(a,b,d){if(c.isSuccessReallyAFail(a))if(c.isErrorCodeAborted(a.error))c.callbacks.onAbortSuccess();else a=c.errorResponseTranslator.getErrorMessageFromErrorCode(a.error),c.callbacks.onSendFailure(a);else c.callbacks.onSendSuccess(c.file,a)};this.isSuccessReallyAFail=function(a){return!a||null!=a.error};contract.require(!objectState.isNullOrUndefined(a),
"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'callbacks' is not defined")}a.prototype.isErrorCodeAborted=function(a){return a===FileRepoError.toString(FileRepoError.AbortedByUser)};return a}();a.Success=b})(b.Action||(b.Action={}))})(c.Ajax||(c.Ajax={}))})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){(function(a){var b=function(){function a(a,b){var c=this;this.errorResponseTranslator=a;this.callbacks=b;this.error=function(a,b,d){if(c.wasUploadAborted(a))c.callbacks.onAbortSuccess();else a=c.getErrorMesage(a,d),c.callbacks.onSendFailure(a)};contract.require(!objectState.isNullOrUndefined(a),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'callbacks' is not defined")}a.prototype.getErrorMesage=
function(a,b){var c=this.errorResponseTranslator.getErrorMessageFromXhr(a);null==c&&(c=this.attemptToGetErrorMessageFromXhr(a));null==c&&(c=b);return c};a.prototype.attemptToGetErrorMessageFromXhr=function(a){if(a.responseText)try{var b=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(b.errorMessage))return b.errorMessage}catch(l){}return null};a.prototype.wasUploadAborted=function(a){if(!a||!a.responseText)return!1;try{var b=JSON.parse(a.responseText)}catch(l){return!1}return b&&b.error?
b.error===FileRepoError.toString(FileRepoError.AbortedByUser):!1};return a}();a.Error=b})(b.Action||(b.Action={}))})(c.Ajax||(c.Ajax={}))})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){(function(b){var a=function(){function a(a,b,c,d){var e=this;this.isIe9=a;this.fileRepoData=b;this.errorAction=c;this.successAction=d;this.build=function(a){contract.require(!objectState.isNullOrUndefined(a),"argument 'request' is not defined");var b={};e.successAction.file=a.file;e.isIe9?b.url=e.getUrlWithValidationParamsInQueryString(e.fileRepoData.Endpoint,e.getHeadersForFileRepo()):(b.url=e.fileRepoData.Endpoint,b.headers=e.getHeadersForFileRepo());b.type=
"POST";b.dataType="json";b.success=e.successAction.success;b.error=e.errorAction.error;b.data=JSON.stringify({Url:e.getUrlForFile(a.file),Name:a.file.name,Size:a.file.size,UploadStateChannelId:a.uploadStateChannelId,SourceType:a.file.sourceType});return b};contract.require(!objectState.isNullOrUndefined(a),"argument 'isIe9' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'fileRepoData' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'errorAction' is not defined");
contract.require(!objectState.isNullOrUndefined(d),"argument 'successAction' is not defined")}a.prototype.getUrlWithValidationParamsInQueryString=function(a,b){b=$.param(b);var c=-1===a.indexOf("?");return a+(c?"?":"&")+b};a.prototype.getHeadersForFileRepo=function(){return{"X-Public-Upload-From-External-Source":"1","X-Customer-Validations":this.fileRepoData.ValidationHeader,"X-Authorization-FileRepoToken":"Bearer "+this.fileRepoData.Token}};a.prototype.getUrlForFile=function(a){return(a=a.getFileHandle())&&
a.url?a.url:a};return a}();b.AjaxSettingsBuilder=a})(c.Ajax||(c.Ajax={}))})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
var UploadController=function(){function c(e,f,b,a){var d=this;this.pickers=e;this.sender=f;this.validator=b;this.actionQueue=a;this.subscribe=function(a){d.callbacks=a;d.pickerInitializationDfds.forEach(function(a){return a.fail(d.callbacks.onInitializationFailure)})};this.initializePickers=function(){d.pickerInitializationDfds=d.pickers.map(function(){return $.Deferred()});d.pickers.forEach(function(a,b){d.initPickerCallback(a,b)})};this.initPickerCallback=function(a,b){var c=new PickerCallback(function(){return d.resolvePickerInitialization(b)},
function(a){return d.rejectPickerInitialization(b,a)},d.filesSelected,function(){});a.subscribe(c)};this.resolvePickerInitialization=function(a){d.pickerInitializationDfds[a].resolve()};this.rejectPickerInitialization=function(a,b){d.pickerInitializationDfds[a].reject(d,b)};this.uploadFailed=function(a,b){a.setError(b);a.onRemoveCallback=function(){d.fileRemoved(a)};a.isRemoveAllowed(!0);d.callbacks.onActionError(a.metadata,a.errorMessage())};this.uploadSucceeded=function(a,b,c){a.markAsCompleted();
a.onRemoveCallback=function(){d.fileRemoved(a)};a.isRemoveAllowed(!0);a.metadata=UploadMetadata.create(b,c);a.mimeType(c.mimeType);d.callbacks.onActionSuccess(a.metadata)};this.fileRemoved=function(a){d.callbacks.onFileRemoved(a.metadata)};this.uploadProgressed=function(a,b){a.isCompleted()||(a.isRemoveAllowed(b<c.progressThresholdAfterWhichRemoveActionIsDisallowed),a.setProgress(b))};this.abortSucceeded=function(a){d.callbacks.onActionAborted(a.metadata)};this.abortFailed=function(a){a.isCompleted()?
safeConsoleLogger.warn("Abort request failed because upload already finished"):a.isRemoveAllowed(!1)};this.filesSelected=function(a){a=d.prepareFileItemsWithResult(a);d.callbacks.onFilesSelected(a.map(function(a){return a.fileItem}));a.forEach(function(a){return d.prepareFileForSending(a.fileItem,a.result)})};this.prepareFileItemsWithResult=function(a){return a.files.map(function(a){return{result:a,fileItem:d.prepareFileItem(a)}})};this.prepareFileItem=function(a){return Uploaders.FileList.Model.FileItem.buildItemForUpload(a.name,
UploadMetadata.create(a))};this.prepareFileForSending=function(a,b){if(d.handleValidation(a,b)){var c=new GenericUploader.RequestToSender(b),e=function(){d.send(a,c)};a.onRemoveCallback=function(){d.actionQueue.remove(e);d.fileRemoved(a)};d.actionQueue.register(e)}};this.handleValidation=function(a,b){b=d.validator.validateFile(b);if(b.isValid())return!0;d.uploadFailed(a,b.getData());return!1};this.send=function(a,b){var c=d.sender.send(b,function(b){return d.uploadProgressed(a,b)},function(b,c){d.actionQueue.signalDone();
d.uploadSucceeded(a,b,c)},function(b){d.actionQueue.signalDone();d.uploadFailed(a,b)});a.onRemoveCallback=function(){d.actionQueue.signalDone();c.abort(function(){return d.abortSucceeded(a)},function(){return d.abortFailed(a)})}};contract.require(!objectState.isNullOrUndefined(this.pickers),"'pickers' is not defined");contract.require(!objectState.isNullOrUndefined(this.sender),"'sender' is not defined");contract.require(!objectState.isNullOrUndefined(this.validator),"'fileResultValidator' is not defined");
contract.require(!objectState.isNullOrUndefined(this.actionQueue),"'actionQueue' is not defined");this.initializePickers()}c.progressThresholdAfterWhichRemoveActionIsDisallowed=99;return c}();
(function(c){(function(c){(function(c){var b=function(){function a(a,b,c,e){var d=this;this.uploadStateService=a;this.jQuery=b;this.callbacks=c;this.ajaxSettingsBuilder=e;this.send=function(a,b,c,e){d.callbacks.onSendSuccess=c;d.callbacks.onSendFailure=e;a=d.prepareDelayedObj(a);a.data.onProgress=b;a.data.onAbort=function(){return d.callbacks.onAbortSuccess()};a.wait(d.openSignalRCommunicationChannel);a.wait(d.callFileRepo);return{abort:d.abort}};this.callFileRepo=function(a){a=d.ajaxSettingsBuilder.build(a.data.request);
d.jQuery.ajax(a)};this.prepareDelayedObj=function(a){a=DelayRequest({request:a});a.signal();return a};this.openSignalRCommunicationChannel=function(a){d.uploadStateService.openChannel({onChannelOpened:function(b){a.data.request.uploadStateChannelId=b.channelId;a.signal()},onSuccess:null,onFail:null,onProgress:a.data.onProgress,onAbort:null,onChannelOpenFailure:function(){safeConsoleLogger.log("Opening channel failed, probably because SignalR is unavailable. Upload progress will not be tracked.");
a.data.onProgress(UploadController.progressThresholdAfterWhichRemoveActionIsDisallowed);a.signal()}})};this.abort=function(a,b){d.callbacks.onAbortSuccess=a;d.uploadStateService.abortUpload(b)};contract.require(!objectState.isNullOrUndefined(a),"argument 'uploadStateService' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'jQuery' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(e),
"argument 'ajaxSettingsBuilder' is not defined")}a.prototype.getOptions=function(){return null};return a}();c.Sender=b})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){(function(c){var b=c.Ajax.Action.Error,a=c.Ajax.Action.Success,d=c.Ajax.AjaxSettingsBuilder,e=function(){return function(e,f,g){var h=this;this.errorResponseTranslator=f;this.settings=g;this.fileRepoData={};this.build=function(){var e=new c.Callbacks,f=new b(h.errorResponseTranslator,e),g=new a(h.errorResponseTranslator,e);f=new d(h.isIe9,h.fileRepoData,f,g);var k=new UploadStateService;window.asyncDependenciesResolver.subscribeToDependencyLoadEvent(window.asyncDependencies.signalRHubScript,
function(){k.signalrHubScriptLoaded({signalR:$.signalR,endpoint:h.uploadStateServiceEndpoint})});return new c.Sender(k,$,e,f)};contract.require(!objectState.isNullOrUndefined(e),"argument 'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'errorResponseTranslator' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(g.uploadStateServiceEndpoint),"argument 'settings.uploadStateServiceEndpoint' is not defined");
contract.require(!objectState.isNullOrUndefined(g.fileRepoData),"argument 'settings.fileRepoData' is not defined");this.uploadStateServiceEndpoint=g.uploadStateServiceEndpoint;this.fileRepoData=g.fileRepoData;this.isIe9=e.isInternetExplorer9()}}();c.Factory=e})(c.FileRepoSenderForExternalFiles||(c.FileRepoSenderForExternalFiles={}))})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
(function(c){(function(c){var e=function(){function b(a,b){this.localSenderFactory=a;this.cloudSenderFactory=b;contract.require(!objectState.isNullOrUndefined(a),"FileRepoSender requires localSenderFactory to be provided.");contract.require(!objectState.isNullOrUndefined(b),"FileRepoSender requires cloudSenderFactory to be provided.")}b.prototype.send=function(a,b,c,e,f){return this.buildSenderForSourceType(a.file.sourceType).send(a,b,c,e,f)};b.prototype.getOptions=function(){return null};b.prototype.buildSenderForSourceType=
function(a){if(a===SourceType.Local)return this.localSenderFactory.build();if(SourceType.isCloud(a))return this.cloudSenderFactory.build();throw"Unsupported SourceType";};return b}();c.FileRepoSender=e})(c.Sender||(c.Sender={}))})(GenericUploader||(GenericUploader={}));
var GoogleTranslations=function(){return function(c,e){this.browserNotSupported=c;this.googleApiNotAvailable=e}}(),SelfResettingFileInput=function(){function c(c){this.input=c}c.prototype.show=function(){this.input.show()};c.prototype.hide=function(){this.input.hide()};c.prototype.enable=function(){this.input.removeAttr("disabled")};c.prototype.disable=function(){this.input.attr("disabled","disabled")};c.prototype.open=function(){this.input.click()};c.prototype.enableMultipleFilesSelecting=function(){this.input.attr("multiple",
"multiple")};c.prototype.disableMultipleFilesSelecting=function(){this.input.removeAttr("multiple")};c.prototype.subscribeToFileSelectedEvent=function(c){var e=this;this.input.on("change",function(){var b=e.input;e.input=e.cloneInputAndReplaceInDom(b);e.prepareInputForCallback(b);c(b,b[0])})};c.prototype.getFileInputJQueryElement=function(){return this.input};c.prototype.getFileInputHtmlElement=function(){return this.input[0]};c.prototype.cloneInputAndReplaceInDom=function(c){var e=this.cloneElementPreservingEventHandlers(c);
this.resetElementUsingForm(e);this.addElementToDomAfterOtherElement(e,c);this.removeElementFromDomKeepingInformationAboutFile(c);this.removeEventHandlersFromElement(c);return e};c.prototype.cloneElementPreservingEventHandlers=function(c){return c.clone(!0)};c.prototype.resetElementUsingForm=function(c){$("<form></form>").append(c)[0].reset()};c.prototype.removeEventHandlersFromElement=function(c){c.off()};c.prototype.addElementToDomAfterOtherElement=function(c,f){f.after(c)};c.prototype.removeElementFromDomKeepingInformationAboutFile=
function(c){c.detach()};c.prototype.prepareInputForCallback=function(c){c.removeAttr("disabled")};return c}(),GapiCallback=function(){return function(c,e,f,b){this.onFileSelected=c;this.onFileSelectionCanceled=e;this.onFileSelectionFailed=f;this.onFileProcessing=b}}();
(function(c){(function(e){var f=function(){return function(b,a,d,e){var f=this;this.pickerComponents=b;this.pickers=a;this.onCloseClick=d;this.onPickerOpen=e;this.linkToTabName="linkToTab";this.uploadFileTabName="uploadFileTab";this.cloudServiceUnavailableTranslation=ko.observable("");this.isNarrowScreen=ko.observable(c.UploadControlUtils.isMobile());this.namesOfPickersFailedToInit="";this.handlePickersInitialization=function(){f.isWarningVisible=ko.observable(!1);for(var a=0,b=f.pickers;a<b.length;a++)b[a].subscribe(new PickerCallback(function(){},
f.handlePickerInitFailure,function(){},function(){}))};this.handlePickerInitFailure=function(a){f.concatFailedPickerNames(a.pickerName);f.cloudServiceUnavailableTranslation(UploadControlTranslation.cloudServiceUnavailable.replace("{0}",f.namesOfPickersFailedToInit));f.isWarningVisible(!0)};this.isUploadColumnVisible=function(){return 0<f.uploadPickerComponents.length};this.dialogHasMoreThenOneColumn=function(){return f.isUploadColumnVisible()&&f.isLinkColumnVisible()};this.isSeparatorVisible=function(){return f.dialogHasMoreThenOneColumn()};
this.isLinkColumnVisible=function(){return 0<f.linkToCloudPickerComponents.length};this.changeTabForMobile=function(){f.isNarrowScreen.peek()&&f.selectedTabName($(event.currentTarget).find("a").prop("hash").substr(1));event.preventDefault()};this.subscribeToBlurEventCapturePhase=function(){document.getElementById("ccl-uc-file-dialog-container").addEventListener("blur",f.hideDialogContainer,!0)};this.hideDialogContainer=function(){setTimeout(function(){if(f.isNotPartOfDialogContainer($(document.activeElement)))f.onCloseClick()},
0)};this.isNotPartOfDialogContainer=function(a){return 0===a.closest("#ccl-uc-file-dialog-container").length};this.concatFailedPickerNames=function(a){f.namesOfPickersFailedToInit=1>f.namesOfPickersFailedToInit.length?f.namesOfPickersFailedToInit+a:f.namesOfPickersFailedToInit+(", "+a)};this.handlePickersInitialization();this.subscribeToBlurEventCapturePhase();this.uploadPickerComponents=b.filter(function(a){return a.purpose===PickerPurpose.Upload});this.linkToCloudPickerComponents=b.filter(function(a){return a.purpose===
PickerPurpose.LinkToCloud});this.selectedTabName=ko.observable(this.isUploadColumnVisible()?this.uploadFileTabName:this.isLinkColumnVisible()?this.linkToTabName:"");this.isUploadColumnSelected=ko.pureComputed(function(){return!f.isNarrowScreen()||f.selectedTabName()===f.uploadFileTabName});this.isLinkColumnSelected=ko.pureComputed(function(){return!f.isNarrowScreen()||f.selectedTabName()===f.linkToTabName});$(window).on("resize",function(){var a=c.UploadControlUtils.isMobile();f.isNarrowScreen(a);
$("#ccl-uc-file-dialog-container").is(":visible")&&c.UploadControlUtils.toggleTopFrameAndMobileOverlay(!a)})}}();e.DialogViewModel=f})(c.Dialog||(c.Dialog={}))})(Components||(Components={}));
(function(c){(function(e){var f=function(){return function(b,a){var d=this;this.pickerComponents=b;this.pickers=a;this.name=c.ComponentName.dialog;this.viewModel=function(a){return new e.DialogViewModel(d.pickerComponents,d.pickers,a.onCloseClick,a.onPickerOpen)};this.template='\n<div id="ccl-uc-file-dialog-container" tabindex="1">\n    <div id="ccl-uc-triangle-row" data-bind="visible: !isNarrowScreen()">\n        <div id="ccl-uc-triangle-container">\n            <div id="ccl-uc-triangle"></div>\n        </div>\n    </div>\n        \n    <div id="ccl-uc-file-dialog">\n        <button data-bind="click: onCloseClick, visible: !isNarrowScreen()" id="ccl-uc-close-button" class="ccl-uc-close-icon"></button>\n        <div class="ccl-uc-source-title-container" data-bind="visible: isNarrowScreen">\n            <div role="tab" class="ccl-uc-source-column-title" data-bind="visible: isUploadColumnVisible(), click: changeTabForMobile">\n                <a href="#uploadFileTab" data-bind="text: UploadControlTranslation.uploadFileFromMobile, css: { \'ccl-uc-tab-link-active\': (selectedTabName() === uploadFileTabName && dialogHasMoreThenOneColumn() ) }"></a>\n            </div>\n            <div role="tab" class="ccl-uc-source-column-title" data-bind="visible: isLinkColumnVisible(), click: changeTabForMobile">\n                <a href="#linkToTab" data-bind="text: UploadControlTranslation.linkToMobile, css: { \'ccl-uc-tab-link-active\': (selectedTabName() === linkToTabName && dialogHasMoreThenOneColumn() ) }"></a>\n            </div>\n        </div>\n        <div id="ccl-uc-source">\n            <div class="ccl-uc-source-utmost-column" data-bind="visible: (isUploadColumnVisible() && isUploadColumnSelected)" role="tabpanel">\n                <div class="ccl-uc-source-column-title" data-bind="visible: !isNarrowScreen(), text: UploadControlTranslation.uploadFileFrom"></div>\n                <div data-bind="foreach: uploadPickerComponents">\n                    <div class="ccl-uc-source-column-line" data-bind="component: {name: componentName, params: {onPickerOpen: $parent.onPickerOpen}}"></div>\n                </div>\n            </div>\n        \n            <div id="ccl-uc-source-middle-column" data-bind="visible: (isSeparatorVisible() && !isNarrowScreen())">\n                <div id="ccl-uc-source-middle-column-line"></div>\n                <div id="ccl-uc-source-middle-column-title" data-bind="text: UploadControlTranslation.or"></div>\n            </div>\n        \n            <div class="ccl-uc-source-utmost-column" data-bind="visible: (isLinkColumnVisible() && isLinkColumnSelected)" role="tabpanel">\n                <div class="ccl-uc-source-column-title" data-bind="visible: !isNarrowScreen(), text: UploadControlTranslation.linkTo"></div>\n                <div data-bind="foreach: linkToCloudPickerComponents">\n                    <div class="ccl-uc-source-column-line" data-bind="component: {name: componentName, params: {onPickerOpen: $parent.onPickerOpen}}"></div>\n                </div>\n            </div>\n        </div>\n        <div class="ccl-uc-warning-container" data-bind="visible: isWarningVisible">\n            <div class="ccl-uc-warning">\n                <div class="ccl-uc-warning-icon">\n                    <span aria-hidden="true" class="ili ili-exclamation-circle"></span>\n                </div>\n                <div class="ccl-uc-warning-text">\n                    <span class="ccl-uc-warning-text-header" data-bind="text: cloudServiceUnavailableTranslation"></span>\n                    <span data-bind="text: UploadControlTranslation.tryAgainOrContactAdministrator"></span>\n                </div>\n            </div>\n        </div>\n        <div data-bind="visible: isNarrowScreen" class="ccl-uc-close-button-mobile-container">\n            <button data-bind="text: UploadControlTranslation.cancel, click: onCloseClick" class="ccl-button ccl-button-color-grey"></button>\n        </div>\n    </div>\n</div>\n'}}();e.DialogComponent=
f})(c.Dialog||(c.Dialog={}))})(Components||(Components={}));
(function(c){var e=function(){return function(e){var b=this;this.uploadAreaState=e;this.name=c.ComponentName.uploadArea;this.viewModel=function(){return new c.UploadAreaViewModel(b.uploadAreaState)};this.template='\n<div data-bind="visible: isUploadAreaVisible" style="position: relative">\n    <dropzone-picker data-bind="click: showDialog"></dropzone-picker>\n    <uc-dialog data-bind="visible: isDialogVisible" params="onCloseClick: hideDialog, onPickerOpen: hideDialog"></uc-dialog>\n</div>\n<file-list></file-list>\n'}}();c.UploadAreaComponent=
e})(Components||(Components={}));
var GapiInitializerSettings=function(){return function(c,e){this.clientId=c;this.scope=e}}(),GapiFileResult=function(){function c(c,f,b,a,d,g,h,k,l){var e=this;void 0===l&&(l=PickerPurpose.Upload);this.url=c;this.name=f;this.size=b;this.isGoogleSpreadsheet=a;this.id=d;this.jq=g;this.authorizationHandler=h;this.googleDriveProxy=k;this.purpose=l;this.updateFileResultUsingGetCallToMetadataService=function(){e.fileMetadataObtainedDfd=$.Deferred();var a={url:e.getMetadataServiceUrl(),type:"GET",data:"",
headers:e.authorizationHandler.getAuthorizationHeader(),success:e.onMetadataGetCallSuccess,error:e.onMetadataGetCallError};e.jq.ajax(a);return e.fileMetadataObtainedDfd.promise()};this.onMetadataGetCallError=function(){e.fileMetadataObtainedDfd.reject()};this.onMetadataGetCallSuccess=function(a){var b=-1<GapiDocType.googleApps.indexOf(a.mimeType);e.permissions=a.permissions;e.url=e.purpose===PickerPurpose.LinkToCloud?e.getFileViewUrl(b,a):e.getFileDownloadUrl(a);e.mimeType=a.mimeType;e.purpose===
PickerPurpose.Upload&&b?e.updateFileSizeUsingHeadCallToMetadataService():e.fileMetadataObtainedDfd.resolve()};this.updateFileSizeUsingHeadCallToMetadataService=function(){var a={url:e.getMetadataServiceUrl(),type:"HEAD",data:"",dataType:"text",success:e.onMetadataHeadCallSuccess,error:e.onMetadataHeadCallError};e.jq.ajax(a)};this.onMetadataHeadCallSuccess=function(a,b,c){e.size=parseInt(c.getResponseHeader("Content-Length"));e.fileMetadataObtainedDfd.resolve()};this.onMetadataHeadCallError=function(a,
b,c){500===a.status&&(e.size=0);e.fileMetadataObtainedDfd.resolve()};this.getMetadataServiceUrl=function(){return e.isGoogleSpreadsheet?e.googleDriveProxy+encodeURIComponent(e.url):e.url};contract.require(!objectState.isNullOrWhitespace(k),"'googleDriveProxy' is null or whitespace")}c.prototype.getFileViewUrl=function(c,f){return c?f.alternateLink:f.embedLink};c.prototype.getFileDownloadUrl=function(c){if(c.downloadUrl)return this.authorizationHandler.appendOAuthTokenToUrl(c.downloadUrl).value;if(c.exportLinks&&
c.exportLinks[Object.keys(c.exportLinks)[0]]){var e=GapiDocType.getDocumentType(c.exportLinks);c=this.authorizationHandler.appendOAuthTokenToUrl(c.exportLinks[e]);this.updateExtensionBasedOnExportFormatParam(c);return c.value}};c.prototype.updateExtensionBasedOnExportFormatParam=function(c){if(c=c.getParamValue("exportFormat"))this.name+="."+c};return c}(),GapiDownloadUrl=function(){function c(){this.url="https://www.googleapis.com/drive/v2/files/{fileId}?fields=mimeType,downloadUrl,exportLinks,alternateLink,embedLink,permissions"}
c.prototype.getDownloadUrl=function(c){contract.require(!objectState.isNullOrWhitespace(c),"'fileId' is null or whitespace");return this.url.replace("{fileId}",c)};return c}(),GapiActions=function(){function c(e,f,b,a,d,g){var h=this;void 0===g&&(g=PickerPurpose.Upload);this.pickerApi=e;this.authorizationHandler=f;this.proxy=b;this.getCurrentCallbacks=a;this.downloadUrl=d;this.purpose=g;this.onPickerAction=function(a){h.callbacks=h.getCurrentCallbacks();switch(a.action){case h.pickerApi.Action.PICKED:h.handleFilePickedAction(a);
break;case h.pickerApi.Action.CANCEL:if(h.callbacks.onFileSelectionCanceled)h.callbacks.onFileSelectionCanceled()}};this.handleFilePickedAction=function(a){if(h.callbacks.onFileProcessing)h.callbacks.onFileProcessing();a=a[h.pickerApi.Response.DOCUMENTS].map(function(a){return new GapiFileResult(h.downloadUrl.getDownloadUrl(a[h.pickerApi.Document.ID]),a[h.pickerApi.Document.NAME],a.sizeBytes,a.mimeType===GapiDocType.googleSpreadsheet,a[h.pickerApi.Document.ID],$,h.authorizationHandler,h.proxy,h.purpose)});
a.length>c.maximumNumberOfConcurrentRequestsToGoogleApi?h.processFilesSequentially(a):h.processFilesInParallel(a)};this.processFilesSequentially=function(a){a.reduce(function(a,b){return a.pipe(b.updateFileResultUsingGetCallToMetadataService)},$.Deferred().resolve().promise()).done(function(){h.raiseFileSelectedCallbackWithPickerResult(a)}).fail(h.raiseFailureCallback)};this.raiseFailureCallback=function(){if(h.callbacks.onFileSelectionFailed)h.callbacks.onFileSelectionFailed()};this.processFilesInParallel=
function(a){var b=[];a.forEach(function(a){a=a.updateFileResultUsingGetCallToMetadataService();b.push(a)});$.when.apply($,b).done(function(){h.raiseFileSelectedCallbackWithPickerResult(a)}).fail(h.raiseFailureCallback)};this.raiseFileSelectedCallbackWithPickerResult=function(a){a=a.map(h.mapGapiFileToPickerFile);a=new PickerResult(a);h.callbacks.onFileSelected(a)};this.mapGapiFileToPickerFile=function(a){var b=new FileInGoogleDriveHandle({url:a.url,id:a.id,permissions:a.permissions});return new PickerFileResult(b,
a.name,a.size,SourceType.Google,null,a.mimeType)}}c.maximumNumberOfConcurrentRequestsToGoogleApi=7;return c}(),GapiAuthorizationHandler=function(){return function(c){var e=this;this.authApi=c;this.getOAuthToken=function(){if(!e.authApi.currentUser.get().isSignedIn())throw Error("You need to Sign In before getting Google Drive's oAuth Token");return e.authApi.currentUser.get().getAuthResponse().access_token};this.getAuthorizationHeader=function(){return{Authorization:"Bearer "+e.getOAuthToken()}};
this.appendOAuthTokenToUrl=function(c){c=new Url(c);c.appendOrUpdateParam("access_token",e.getOAuthToken());return c};this.authorize=function(c,b){e.authApi.currentUser.get().isSignedIn()?c():e.authApi.signIn().then(function(){c()},function(){b()})}}}(),GapiInitializer=function(){return function(c){var e=this;this.settings=c;this.isAuthApiLoaded=this.isPickerApiLoaded=!1;this.gapi=window.gapi;this.init=function(c,b){contract.require(!objectState.isNullOrUndefined(c),"'onInitSuccess' is not defined");
contract.require(!objectState.isNullOrUndefined(b),"'onInitFailure' is not defined");e.onInitSuccess=c;e.onInitFailure=b;if(objectState.isNullOrUndefined(e.gapi)){if(safeConsoleLogger.error("Loading of Gapi failed. Most probably https://apis.google.com/js/api.js was blocked by firewall, proxy or adblock."),e.onInitFailure)e.onInitFailure()}else e.loadAuthApi(),e.loadPickerApi()};this.loadAuthApi=function(){try{e.gapi.load("auth2",{callback:e.initAuthApi})}catch(f){if(safeConsoleLogger.error("Loading of Gapi Auth failed."),
e.onInitFailure)e.onInitFailure()}};this.initAuthApi=function(){e.gapi.auth2.init({client_id:e.settings.clientId,scope:e.settings.scope}).then(function(){e.onAuthApiLoaded()},function(c){safeConsoleLogger.error(c);e.onInitFailure()})};this.loadPickerApi=function(){try{e.gapi.load("picker",{callback:e.onPickerApiLoaded})}catch(f){if(safeConsoleLogger.error("Loading of Gapi Picker failed."),e.onInitFailure)e.onInitFailure()}};this.onAuthApiLoaded=function(){e.isAuthApiLoaded=!0;e.attempToRaiseSuccess()};
this.onPickerApiLoaded=function(){e.isPickerApiLoaded=!0;e.attempToRaiseSuccess()};this.attempToRaiseSuccess=function(){if(e.isPickerApiLoaded&&e.isAuthApiLoaded)e.onInitSuccess(e.gapi.auth2.getAuthInstance(),google.picker)}}}(),GoogleSettings=function(){return function(c,e,f,b,a,d,g){this.clientId=c;this.scope=e;this.developerKey=f;this.allowMultipleFiles=b;this.originUrl=a;this.proxy=d;this.language=g}}(),GapiPickerUiFactory=function(){return function(c,e,f,b,a){var d=this;this.onPickerAction=c;
this.authHandler=e;this.developerKey=f;this.originUrl=b;this.language=a;this.build=function(){d.builder=new google.picker.PickerBuilder;d.triggerBuild().setVisible(!0)};this.triggerBuild=function(){d.builder.setOAuthToken(d.authHandler.getOAuthToken()).setDeveloperKey(d.developerKey).setCallback(d.onPickerAction).setLocale(d.language);d.prepareViews();d.setOriginUrlIfProvided();d.setApplicationIdIfProvided();d.handleMultipleFilesMode();return d.builder.build()};this.prepareViews=function(){d.displayOnlyGoogleApps?
d.builder.addViewGroup(d.createGoogleAppsViewGroup()):d.areAllowedMimeTypesProvided()?d.builder.addView(d.createFilteredView()):d.builder.addViewGroup(d.createFullViewGroup())};this.createGoogleAppsViewGroup=function(){var a=d.prepareViewWithGoogleAppsOnly(google.picker.ViewId.DOCS);return(new google.picker.ViewGroup(a)).addView(d.prepareViewWithGoogleAppsOnly(google.picker.ViewId.DOCUMENTS)).addView(d.prepareViewWithGoogleAppsOnly(google.picker.ViewId.SPREADSHEETS)).addView(d.prepareViewWithGoogleAppsOnly(google.picker.ViewId.PRESENTATIONS))};
this.createFullViewGroup=function(){return(new google.picker.ViewGroup(d.prepareView(google.picker.ViewId.DOCS))).addView(d.prepareView(google.picker.ViewId.DOCS_IMAGES)).addView(d.prepareView(google.picker.ViewId.DOCS_VIDEOS)).addView(d.prepareView(google.picker.ViewId.DOCUMENTS)).addView(d.prepareView(google.picker.ViewId.DRAWINGS)).addView(d.prepareView(google.picker.ViewId.FOLDERS)).addView(d.prepareView(google.picker.ViewId.PDFS)).addView(d.prepareView(google.picker.ViewId.PHOTOS)).addView(d.prepareView(google.picker.ViewId.PRESENTATIONS)).addView(d.prepareView(google.picker.ViewId.SPREADSHEETS))};
this.prepareView=function(a){a=new google.picker.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a};this.prepareViewWithGoogleAppsOnly=function(a){a=d.prepareView(a);a.setMimeTypes(""+GapiDocType.googleApps.join(","));return a};this.areAllowedMimeTypesProvided=function(){return Array.isArray(d.allowedMimeTypes)&&0<d.allowedMimeTypes.length};this.createFilteredView=function(){var a=d.prepareView(google.picker.ViewId.DOCS);a.setMimeTypes(""+d.allowedMimeTypes.join(","));return a};this.handleMultipleFilesMode=
function(){d.isMultipleFilesModeEnabled?d.builder.enableFeature(google.picker.Feature.MULTISELECT_ENABLED):d.builder.disableFeature(google.picker.Feature.MULTISELECT_ENABLED)};this.setOriginUrlIfProvided=function(){objectState.isNullOrUndefined(d.originUrl)||d.builder.setOrigin(d.originUrl)};this.setApplicationIdIfProvided=function(){objectState.isNullOrUndefined(d.applicationId)||d.builder.setAppId(d.applicationId)}}}(),GooglePicker=function(){function c(c,f,b,a){var d=this;this.settings=c;this.gapiInitializer=
f;this.browserSniffer=b;this.translations=a;this.pickerReadyDfd=$.Deferred();this.subscribe=function(a){d.pickerReadyDfd.done(a.onPickerInitSuccess);d.pickerReadyDfd.fail(a.onPickerInitFailure);d.callbacks=a};this.open=function(){d.authHandler.authorize(d.displayWindowWithFiles,d.terminateAuthorization)};this.enableMultipleFilesSelecting=function(){d.settings.allowMultipleFiles&&(d.uiFactory.isMultipleFilesModeEnabled=!0)};this.disableMultipleFilesSelecting=function(){d.uiFactory.isMultipleFilesModeEnabled=
!1};this.getCurrentCallbacks=function(){return new GapiCallback(d.onFileSelected,d.callbacks.onFileSelectionCanceled)};this.onFileSelected=function(a){a=a.files.map(function(a){return PickerFileResult.createExternalSourcePickerFileResult(a.getFileHandle().url,a.name,a.size,a.sourceType)});a=new PickerResult(a);d.callbacks.onFileSelected(a)};this.onGapiInitSuccess=function(a,b){d.enabled=!0;d.authHandler=new GapiAuthorizationHandler(a);a=new GapiDownloadUrl;b=new GapiActions(b,d.authHandler,d.settings.proxy,
d.getCurrentCallbacks,a);d.uiFactory=new GapiPickerUiFactory(b.onPickerAction,d.authHandler,d.settings.developerKey,d.settings.originUrl,d.settings.language);d.pickerReadyDfd.resolve()};this.onGapiInitFailure=function(){d.enabled=!1;d.pickerReadyDfd.reject(new PickerInitFailureEventArgs(PickerInitFailureReason.ExternalServiceNotAvailable,d.translations.googleApiNotAvailable,UploadControlTranslation.googleDrive))};this.displayWindowWithFiles=function(){d.uiFactory.build()};this.terminateAuthorization=
function(){throw Error("Authorization failed");};contract.require(!objectState.isNullOrUndefined(c),"'settings' are not defined");contract.require(!objectState.isNullOrUndefined(f),"'gapiInitializer' is not defined");contract.require(!objectState.isNullOrUndefined(b),"'browserSniffer' is not defined");contract.require(!objectState.isNullOrUndefined(a),"'translations' are not defined");this.visible=!0;this.enabled=!1;this.multipleFilesSelectingEnabled=c.allowMultipleFiles;b.isInternetExplorer9()?this.pickerReadyDfd.reject(new PickerInitFailureEventArgs(PickerInitFailureReason.BrowserNotSupported,
a.browserNotSupported,UploadControlTranslation.googleDrive)):this.initialize()}c.prototype.initialize=function(){this.gapiInitializer.init(this.onGapiInitSuccess,this.onGapiInitFailure)};return c}();
function AjaxUploaderCallbacks(c){var e=FunctionFinder();return{controlInitialized:e.getFunctionByName(c?c.OnControlInitialization:void 0),fileSelected:e.getFunctionByName(c?c.OnFileSelected:void 0),beforeFileUpload:e.getFunctionByName(c?c.OnBeforeFileUpload:void 0),fileUploadSuccess:e.getFunctionByName(c?c.OnFileUploadSuccess:void 0),fileUploadError:e.getFunctionByName(c?c.OnFileUploadError:void 0),beforeFileRemoved:e.getFunctionByName(c?c.OnBeforeFileRemoved:void 0),fileRemoveSuccess:e.getFunctionByName(c?
c.OnFileRemoveSuccess:void 0),fileRemoveError:e.getFunctionByName(c?c.OnFileRemoveError:void 0),fileRemoved:e.getFunctionByName(c?c.OnFileRemoved:void 0),beforeFileUploadAborted:e.getFunctionByName(c?c.OnBeforeFileUploadAborted:void 0),fileUploadAborted:e.getFunctionByName(c?c.OnFileUploadAborted:void 0),fileUploadProgress:e.getFunctionByName(c?c.OnFileUploadProgress:void 0)}}
function AjaxUploaderControl(c,e,f,b,a,d,g,h){contract.require(!objectState.isNullOrUndefined(c),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(c.fileInput),"controls.fileInput is not defined");contract.require(!objectState.isNullOrUndefined(c.fileList),"controls.fileList is not defined");contract.require(!objectState.isNullOrUndefined(c.dropZone),"controls.dropZone is not defined");contract.require(!objectState.isNullOrUndefined(c.folderInput),"controls.folderInput is not defined");
contract.require(!objectState.isNullOrUndefined(c.folderInputLink),"controls.folderInputLink is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'validationService' is not defined");contract.require(objectState.isFunction(f.validateFile),"'validationService' has invalid interface");contract.require(!objectState.isNullOrUndefined(b),"argument 'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(a),
"argument 'fileUploadService' is not defined");contract.require(objectState.isFunction(a.subscribe),"'fileUploadService' has invalid interface");contract.require(!objectState.isNullOrUndefined(d),"argument 'folderManifestFactory' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'literals' is not defined");if(void 0===h||null===h)h={};var k={currentFileId:null,disableDeletePostbackThreshold:.99,fileUploader:null,initialize:function(a){k.initializeElementsToSupportSingleOrMultipleFiles();
k.initializeDropZone();void 0!==h.controlInitialized&&h.controlInitialized(a);k.initializeFileUploader()},initializeElementsToSupportSingleOrMultipleFiles:function(){k.changeFileInputToAcceptSingleFile();k.changeDropZoneToAcceptSingleFile();e.allowMultipleFiles&&k.initializeFolderInput()},initializeDropZone:function(){e.allowDragAndDrop?k.enableDropZone():k.disableDropZone()},initializeFolderInput:function(){e.allowFoldersUpload?(k.initializeFolderUploadElements(),k.enableFolderInput()):k.disableFolderInput()},
enableFolderInput:function(){browserSniffer.isDirectoryUploadSupported()&&(c.folderInputLink.removeClass("h-hidden"),c.folderInput.show(),c.folderInputLink.show())},disableFolderInput:function(){c.folderInput.hide();c.folderInputLink.hide()},changeFileInputToAcceptSingleFile:function(){c.fileInput.removeAttr("multiple")},changeFileInputToAcceptMultipleFiles:function(){c.fileInput.attr("multiple",!0)},enableDropZone:function(){browserSniffer.isDragAndDropSupported()&&(c.dropZone.removeClass("h-hidden"),
c.dropZone.show())},disableDropZone:function(){c.dropZone.hide()},changeDropZoneToAcceptMultipleFiles:function(){$(c.fileInput.selector).unbind("fileuploaddrop",k.takeOnlyFirstFileFunction)},changeDropZoneToAcceptSingleFile:function(){$(c.fileInput.selector).bind("fileuploaddrop",k.takeOnlyFirstFileFunction)},isMultipleFileSelect:function(a){return a.originalFiles&&1<a.originalFiles.length},isSingleFileInFolder:function(a){return a.originalFiles&&1===a.originalFiles.length&&""!==auCommon.getRelativePath(a.originalFiles[0],
"")?!0:!1},getArrayFromEventFileList:function(a){var b=[],c;for(c=0;c<a.length;c+=1)b.push(a[c]);return b},handleFolderSelect:function(a){var b=k.getArrayFromEventFileList(a.target.files);k.fileUploader.upload(b);a.target.value=null},initializeFolderUploadElements:function(){c.folderInputLink.click(function(){c.folderInput.click()});c.folderInput.on("change",k.handleFolderSelect)},initializeFileUploader:function(){k.fileUploader=a.subscribe({fileInput:c.fileInput,dropZone:c.dropZone},{onDone:k.onDone,
onFail:k.onFail,onProcessAlways:k.onProcessAlways,onProgress:k.onProgress,onAdd:k.onAdd,onSend:k.onSend,onFileUploadAborted:k.onUploadAborted})},getFolderName:function(a){var b,c=null;for(b=0;b<a.length;b+=1){var d=auCommon.getRelativePath(a[b],"");var e=d.indexOf("/");if(-1===e)return null;d=d.substring(0,e);if(null===c)c=d;else if(c!==d)return null}return c},getFileNameForMultipleFiles:function(a){a=k.getFolderName(a);return null!==a?a:g.files},getTotalSize:function(a){var b=0;$.each(a,function(a,
c){b+=c.size||0});return b},getFileInfo:function(a,b){a=b?{name:k.getFileNameForMultipleFiles(a),size:k.getTotalSize(a)}:a[0];a.fileId=guidFactory.newGuid();return a},handleForbiddenFolderUpload:function(a,b){f.validateIsFile(a.files[0],k.handleIsAFileValidationResult.bind(k,a.files,0,b.fileId,{total:a.files.length,checked:0,stop:!1}))},handleIsAFileValidationResult:function(a,c,d,e,g){e.checked+=1;a[c].checkedForBeingAFolder=!0;g.isValid?e.stop||(e.checked===e.total?k.fileUploader.upload(a):(c+=
1,f.validateIsFile(a[c],k.handleIsAFileValidationResult.bind(k,a,c,d,e)))):(e.stop=!0,b.setFileStatusToError(d,g.errorMessage,k.removeFromList),b.enableAction(d))},hasToBeCheckedForBeingAFolder:function(a){return f.mightBeAFolder(a)&&!a.checkedForBeingAFolder},hasToHandlePossibleForbiddenFolderUpload:function(a){var b;if(browserSniffer.isDirectoryUploadSupported())return!1;if(a.files&&a.files.length)for(b=0;b<a.files.length;b+=1){var c=a.files[b];if(k.hasToBeCheckedForBeingAFolder(c))return!0}return!1},
getProgressFromCallback:function(a,c){h.fileUploadProgress(a,{disableFileAction:function(){b.disableAction(c)},setProgressTo:function(b){a=b}});return a},onDone:function(a,c){k.enableUploadButtonsAndDropzone();var d=c.fileId;b.updateFileProgress(d,1);b.setFileStatusToSuccess(d,k.requestFileDelete);void 0!==h.fileUploadSuccess&&h.fileUploadSuccess(a,c)},onFail:function(a,c){k.enableUploadButtonsAndDropzone();c=c.fileId;b.setFileStatusToError(c,a,k.removeFromList);b.enableAction(c);void 0!==h.fileUploadError&&
h.fileUploadError(a)},onProcessAlways:function(a,c){k.isMultipleFileSelect(c)||(a=c.files[c.index],a.preview&&b.updateFilePreview(c.fileId,a.preview))},onProgress:function(a,c){a=c.fileId;c=c.loaded/c.total;var d=objectState.isFunction(h.fileUploadProgress)?k.getProgressFromCallback(c,a):c;b.updateFileProgress(a,d);e.disableDeletePostBackAfterUpload&&c>=k.disableDeletePostbackThreshold&&b.disableAction(a)},onAdd:function(a,c,g){var l=k.isMultipleFileSelect(c)||k.isSingleFileInFolder(c),m=null!=k.currentFileId;
if(void 0!==h.fileSelected&&(m=h.fileSelected(a,c,m),null!=m&&!0===m.cancel))return m;m=k.getFileInfo(c.files,l);k.currentFileId=m.fileId;b.addFile(m,function(){k.onBeforeAbortUpload();c.abort()});if(k.hasToHandlePossibleForbiddenFolderUpload(c))return k.handleForbiddenFolderUpload(c,m),{cancel:!0};var n=f.validateFile(m);if(!n.isValid)return k.onFail(n.errorMessage,m),{cancel:!0};c.formData=l&&e.includeFolderManifest?{manifest:d.createJSON(c.files)}:{};c.fileId=m.fileId;k.disableUploadButtonsAndDropzone();
b.setFileStatusToInProgress(m.fileId);void 0!==h.beforeFileUpload&&h.beforeFileUpload(a,c,g);window.focus();return{success:!0}},onSend:function(a,c,d){d||(a=c.fileId,b.setDefaultFileProgress(a),e.disableDeletePostBackAfterUpload&&!c.allowAbortInUploadWithoutProgress&&b.disableAction(a))},onBeforeFileRemoved:function(a,b){void 0!==h.beforeFileRemoved&&h.beforeFileRemoved(a,b)},onFileRemoveError:function(a,b,c){void 0!==h.fileRemoveError&&h.fileRemoveError(a,b,c)},onFileRemoveSuccess:function(a,c,d){void 0!==
h.fileRemoveSuccess&&h.fileRemoveSuccess(a,c,d);b.removeFiles();void 0!==h.fileRemoved&&h.fileRemoved()},removeFromList:function(a){k.currentFileId=null;b.removeFile(a);h.fileRemoved&&h.fileRemoved()},requestFileDelete:function(b){a.requestFileDelete(b,{beforeRemoved:k.onBeforeFileRemoved,removeError:k.onFileRemoveError,removeSuccess:k.onFileRemoveSuccess})},onBeforeAbortUpload:function(){void 0!==h.beforeFileUploadAborted&&h.beforeFileUploadAborted()},onUploadAborted:function(a,c){void 0!==h.fileUploadAborted&&
h.fileUploadAborted(a,c);b.removeFiles();k.currentFileId=null;k.enableUploadButtonsAndDropzone()},returnFalseFunction:function(){return!1},takeOnlyFirstFileFunction:function(a,b){b.files=b.files.splice(0,1)},disableUploadButtonsAndDropzone:function(){c.folderInput.prop("disabled",!0);$(c.fileInput.selector).prop("disabled",!0);$(c.fileInput.selector).bind("fileuploaddrop",k.returnFalseFunction)},enableUploadButtonsAndDropzone:function(){c.folderInput.prop("disabled",!1);$(c.fileInput.selector).prop("disabled",
!1);$(c.fileInput.selector).unbind("fileuploaddrop",k.returnFalseFunction)}},l={subscribe:function(a){h=a},setCurrentFileStatusToError:function(a){var c=k.currentFileId;b.setFileStatusToError(c,a,k.removeFromList);b.enableAction(c)},enableMultipleFilesMode:function(){e.allowFoldersUpload&&k.enableFolderInput();e.allowMultipleFiles&&(k.changeFileInputToAcceptMultipleFiles(),k.changeDropZoneToAcceptMultipleFiles())},enableSingleFileMode:function(){k.disableFolderInput();k.changeFileInputToAcceptSingleFile();
k.changeDropZoneToAcceptSingleFile()},disableUploadsUntilFileIsRemoved:function(a){k.disableUploadButtonsAndDropzone();b.setActionCallback(k.currentFileId,function(b){k.removeFromList(b);k.enableUploadButtonsAndDropzone();a()})},setFileRemovedCallback:function(a){b.setActionCallback(k.currentFileId,function(b){k.removeFromList(b);"function"===typeof a&&a()})},displayFileInFileList:function(a,c){k.currentFileId=guidFactory.newGuid();b.addFile({name:a,size:c,fileId:k.currentFileId});b.setFileStatusToSuccess(k.currentFileId);
e.readOnlyMode&&b.hideAction(k.currentFileId)}};k.initialize(l);return l}var UploaderFileItemFactory=function(){return function(c){var e=this;this.literals=c;this.create=function(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'fileData' is not defined");return new UploaderFileItem(c,e.literals)};contract.require(!objectState.isNullOrUndefined(c),"argument 'literals' is not defined")}}();
function AjaxUploaderFolderManifestFactory(){var c={escapeRegExpSpecialCharacters:function(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},makeForwardAndBackSlashesTreatedAsEqual:function(c){return c.replace(/\\\\|\//g,"[\\/]")},markStringAsEndingInput:function(c){return c+"$"},getFileNameRemovalRegExpString:function(e){e=c.escapeRegExpSpecialCharacters(e);e=c.makeForwardAndBackSlashesTreatedAsEqual(e);return c.markStringAsEndingInput(e)},getFileNameRemovalRegExp:function(e){e=c.getFileNameRemovalRegExpString(e);
return new RegExp(e,"i")},removeFileNameFromPath:function(e,b){b=c.getFileNameRemovalRegExp(b);return e.replace(b,"")},trimFolderPath:function(c){c=c.replace(/[\\/]$/,"");return c=c.replace(/^[\\/]/,"")},getFolderForFile:function(e){var b=auCommon.getRelativePath(e,"");e=b.length<e.name.length?b:c.removeFileNameFromPath(b,e.name);return c.trimFolderPath(e)},convertSingleFileToArrayIfNeeded:function(c){Array.isArray(c)||(c=[c]);return c},getArrayOfFolders:function(e){var b=[],a=e.length,d;for(d=0;d<
a;d+=1)objectState.isFileError(e[d])||b.push(c.getFolderForFile(e[d]));return b}},e={create:function(e){contract.require(!objectState.isNullOrUndefined(e),"argument 'files' is not defined");e=c.convertSingleFileToArrayIfNeeded(e);return{folders:c.getArrayOfFolders(e)}},createJSON:function(c){c=e.create(c);return JSON.stringify(c)}};return e}
function AjaxUploaderValidationService(c,e){contract.require(!objectState.isNullOrUndefined(c),"argument 'settings' is not defined");contract.require(0<=c.maxFileSize,"MaxFileSize cannot be less than zero");contract.require(0<=c.minFileSize,"MinFileSize cannot be less than zero");contract.require(!objectState.isNullOrUndefined(e),"argument 'translations' is not defined");var f={getSuccessResult:function(){return{isValid:!0}},getErrorResult:function(a){return{isValid:!1,errorMessage:a}},tryReadFile:function(a,
b){var c=new FileReader,d=!1;c.onprogress=function(a){d||(d=!0,c.abort(),b(f.getSuccessResult()))};c.onerror=function(a){d||(d=!0,b(f.getErrorResult(e.cantHandleFolderDragAndDrop)))};c.readAsArrayBuffer(a)},validateFileSize:function(a){return a<c.minFileSize?f.getErrorResult(e.fileTooSmall):a>c.maxFileSize?f.getErrorResult(e.fileTooBig):f.getSuccessResult()},validateFileExtension:function(a){return c.forbiddenFileExtensions.test(a)?f.getSuccessResult():f.getErrorResult(e.fileExtensionNotAllowed)},
validateFileNameAgainstIllegalCharacters:function(a){var b=[];if(f.areIllegalCharactersDefined())for(var g=c.illegalCharacters.length,h=0;h<g;h++)c.illegalCharacters[h]&&-1<a.indexOf(c.illegalCharacters[h])&&b.push(c.illegalCharacters[h]);return 0<b.length?(a=b.filter(function(a,c){return b.indexOf(a)==c}),f.getErrorResult(e.invalidCharactersXInFileName.replace("{0}",a.join(" ")))):f.getSuccessResult()},areIllegalCharactersDefined:function(){return null!=c.illegalCharacters&&0<c.illegalCharacters.length},
validateFileNameAgainstIllegalFileNames:function(a){var b=[];if(f.areIllegalFileNamesDefined()){a=a.split(".")[0];for(var g=c.illegalFileNames.length,h=0;h<g;h++)c.illegalFileNames[h]&&a.toUpperCase()===c.illegalFileNames[h].toUpperCase()&&b.push(c.illegalFileNames[h])}return 0<b.length?(a=b.filter(function(a,c){return b.indexOf(a)==c}),f.getErrorResult(e.invalidFirstPartOfFileName.replace("{0}",a.join(" ")))):f.getSuccessResult()},areIllegalFileNamesDefined:function(){return null!=c.illegalFileNames&&
0<c.illegalFileNames.length},checkIsFileError:function(a){return objectState.isFileError(a)?f.getErrorResult(e.unableToOpenFile):f.getSuccessResult()}},b={maxFileSize:c.maxFileSize,minFileSize:c.minFileSize,validateFile:function(a){contract.require(!objectState.isNullOrUndefined(a),"argument 'file' is not defined");var b=f.checkIsFileError(a);if(!1===b.isValid)return b;b=f.validateFileNameAgainstIllegalCharacters(a.name);if(!1===b.isValid)return b;b=f.validateFileNameAgainstIllegalFileNames(a.name);
if(!1===b.isValid)return b;b=f.validateFileExtension(a.name);if(!1===b.isValid)return b;b=f.validateFileSize(a.size);return!1===b.isValid?b:f.getSuccessResult()},mightBeAFolder:function(a){return""===a.type},validateIsFile:function(a,c){b.mightBeAFolder(a)&&FileReader?f.tryReadFile(a,c):c(f.getSuccessResult())}};return b}
function AjaxUploaderFileUploader(c){var e={fileInputSelector:c.selector,getFileInput:function(){return $(e.fileInputSelector)},uploadFiles:function(c){e.getFileInput().fileupload("add",{files:c})}};return{upload:function(c){c=Array.isArray(c)?c:[c];e.uploadFiles(c)}}}
function AjaxUploaderFileService(c,e,f){contract.require(!objectState.isNullOrUndefined(c),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(c.uploadUrl),"parameter 'uploadUrl' of argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(c.uploadType),"parameter 'uploadType' of argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'optionsFactory' is not defined");var b={uploadUrl:c.uploadUrl,
uploadType:c.uploadType,dataType:"json",previewMaxWidth:50,previewMaxHeight:50,loadImageMaxFileSize:25E6,errorMessageTranslator:f,isFileUploadAborted:function(a){return"abort"===a.errorThrown},isIframeTransportUsed:function(a){return a.dataType&&"iframe"===a.dataType.substr(0,6)},isUploadProgressSupported:function(a){return!b.isIframeTransportUsed(a)},isDoneReallyAFail:function(a){return!b.isIframeTransportUsed(a)||"undefined"!==typeof a.result&&null==a.result.Error?!1:!0},disableFileUpload:function(a){a.isEnabled=
!1},enableFileUpload:function(a){a.isEnabled=!0},hasDataToSend:function(a){return 0<a.files.length},getErrorMesageFromXhr:function(a){if(a.responseText)try{var b=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(b.errorMessage))return b.errorMessage}catch(g){}return a.statusText},checkSubscribeFunctionPreconditions:function(a,b){contract.require(!objectState.isNullOrUndefined(a),"argument 'uploaderControls' is not defined");contract.require(!objectState.isNullOrUndefined(a.fileInput),
"parameter 'fileInput' of argument 'uploaderControls' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onFail),"parameter 'onFail' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onDone),"parameter 'onDone' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onFileUploadAborted),"parameter 'onFileUploadAborted' of argument 'uploaderCallbacks' is not defined");
contract.require(!objectState.isNullOrUndefined(b.onProcessAlways),"parameter 'onProcessAlways' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onProgress),"parameter 'onProgress' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onSend),"parameter 'onSend' of argument 'uploaderCallbacks' is not defined");contract.require(!objectState.isNullOrUndefined(b.onAdd),"parameter 'onAdd' of argument 'uploaderCallbacks' is not defined")},
getErrorMessageFromResponse:function(a){var c=null;b.errorMessageTranslator&&(c=b.errorMessageTranslator.getErrorMessageFromResponse(a));null==c&&a.xhr&&(c=b.getErrorMesageFromXhr(a.xhr()));return c},getErrorMessageFromIframeUploadResponse:function(a){var c=null;a.result&&b.errorMessageTranslator&&(c=b.errorMessageTranslator.getErrorMessageFromErrorCode(a.result.Error));null==c&&(c=void 0);return c}};return{subscribe:function(a,c){b.checkSubscribeFunctionPreconditions(a,c);var d={url:b.uploadUrl},
f={isEnabled:!0};a.fileInput.fileupload({url:d.url,type:b.uploadType,dataType:b.dataType,dropZone:a.dropZone||void 0,previewMaxWidth:b.previewMaxWidth,previewMaxHeight:b.previewMaxHeight,loadImageMaxFileSize:b.loadImageMaxFileSize,singleFileUploads:!1,done:function(a,d){if(b.isDoneReallyAFail(d))d.textStatus="error",a=b.getErrorMessageFromIframeUploadResponse(d),c.onFail(a,d);else c.onDone(a,d);b.enableFileUpload(f)},fail:function(a,d){if(b.isFileUploadAborted(d))c.onFileUploadAborted(a,d);else a=
b.getErrorMessageFromResponse(d),c.onFail(a,d);b.enableFileUpload(f)},processalways:c.onProcessAlways,progress:c.onProgress,send:function(a,d){c.onSend(a,d,b.isUploadProgressSupported(d))}});a.fileInput.bind("fileuploadadd",function(a,g){if(!f.isEnabled)return!1;var h=$(this);if(!b.hasDataToSend(g))return!1;b.disableFileUpload(f);var k=e.create(d);if(!0===c.onAdd(a,g,k).cancel)return b.enableFileUpload(f),!1;h.fileupload("option",k.getProcessedOptions())});return AjaxUploaderFileUploader(a.fileInput)},
requestFileDelete:function(a,c){a={url:URI(b.uploadUrl).addSearch("fileId",a).normalizeSearch().toString(),dataType:"json",type:"DELETE",beforeSend:c.beforeRemoved,error:c.removeError,success:c.removeSuccess};$.ajax(a)}}}
function AjaxUploaderControlInitialization(c,e,f,b,a){var d=UploaderSenderOptionsFactory(),g=AjaxUploaderFolderManifestFactory(),h=new UploaderFileItemFactory(e),k=AjaxUploaderValidationService(c,e);h=new UploaderFileList(f.fileList,h,e);a=AjaxUploaderFileService(c,d,a);return AjaxUploaderControl(f,c,k,h,a,g,e,b)}
function AjaxUploaderControls(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'controls' is not defined");var e={getJQuerySafeId:function(c){return"#"+c.replace(/(:|\.|\[|\])/g,"\\$1")},jQElementExists:function(c){return 0<c.length},getJQElement:function(c,b){c=e.getJQuerySafeId(c);c=$(c);if(e.jQElementExists(c))return c;if(void 0!==b)throw b;},initializeBrowseButtonFocusStyles:function(c){c.focusin(function(){c.toggleClass("ccl-button-color-green-highlight")}).focusout(function(){c.toggleClass("ccl-button-color-green-highlight")})},
initialize:function(c){c=c.fileInput.parent();e.initializeBrowseButtonFocusStyles(c)}};c={fileInput:e.getJQElement(c.FileInput,"FileInput not found"),fileList:e.getJQElement(c.FileList,"FileList not found"),dropZone:e.getJQElement(c.DropZone,"DropZone not found"),folderInput:e.getJQElement(c.FolderInput,"FolderInput not found"),folderInputLink:e.getJQElement(c.FolderInputLink,"FolderInputLink not found")};e.initialize(c);return c}
function AjaxUploaderLiterals(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'translations' is not defined");var e={fileExtensionNotAllowed:c.FileExtensionNotAllowed,fileTooBig:c.FileTooBig,fileTooSmall:c.FileTooSmall,kb:c.Kb,mb:c.Mb,error:c.Error,maxFileSizeForUpload:c.MaxFileSizeForUpload,dropYourFilesHere:c.DropYourFilesHere,browse:c.Browse,remove:c.Remove,unknown:c.Unknown,cantHandleFolderDragAndDrop:c.CantHandleFolderUpload,invalidCharactersXInFileName:c.InvalidCharactersXInFileName,
unableToOpenFile:c.UnableToOpenFile,files:c.Files,invalidFirstPartOfFileName:c.InvalidFirstPartOfFileName,getFormattedFileSize:function(c){return"number"!==typeof c?"":1048576<=c?(c/1048576).toFixed(2)+" "+e.mb:(c/1024).toFixed(2)+" "+e.kb}};return e}
function AjaxUploaderSettings(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'settings' is not defined");var e={getRegExp:function(c){if(c instanceof RegExp)return c;c=c.split("/");var b=c.pop();c.shift();return new RegExp(c.join("/"),b)},getBoolean:function(c){return/^true$/i.test(c)},getArray:function(c){return"undefined"===typeof c||null==c?null:JSON.parse(c)}};return{uploadUrl:c.UploadUrl,uploadType:c.UploadType,maxFileSize:parseInt(c.MaxFileSize),minFileSize:parseInt(c.MinFileSize||
0),forbiddenFileExtensions:e.getRegExp(c.ForbiddenFileExtensions),allowFoldersUpload:e.getBoolean(c.AllowFoldersUpload),allowMultipleFiles:e.getBoolean(c.AllowMultipleFiles),allowDragAndDrop:e.getBoolean(c.AllowDragAndDrop),includeFolderManifest:e.getBoolean(c.IncludeFolderManifest),disableDeletePostBackAfterUpload:e.getBoolean(c.DisableDeletePostBackAfterUpload),illegalFileNames:e.getArray(c.IllegalFileNames),illegalCharacters:e.getArray(c.IllegalCharacters),readOnlyMode:e.getBoolean(c.ReadOnlyMode)}}
var FileListLiterals=function(){function c(c){this.kb=c.KbTranslation;this.mb=c.MbTranslation;this.error=c.ErrorTranslation;this.remove=c.RemoveTranslation;this.unknown=c.UnknownTranslation}c.prototype.getFormattedFileSize=function(c){return"number"!==typeof c?"":1048576<=c?(c/1048576).toFixed(2)+" "+this.mb:(c/1024).toFixed(2)+" "+this.kb};return c}(),FilesInCloudController=function(){return function(c,e){var f=this;this.pickers=c;this.fileValidator=e;this.subscribe=function(b){f.callbacks=b};this.subscribeToPickers=
function(){f.pickers.forEach(function(b){f.initPickerCallback(b)})};this.initPickerCallback=function(b){var a=function(){};a=new PickerCallback(a,a,function(a){return f.fileSelected(a)},a);b.subscribe(a)};this.fileSelected=function(b){b=f.getFilesWithFileItems(b);var a=b.map(function(a){return a.fileItem});f.callbacks.onFilesSelected(a);for(a=0;a<b.length;a++){var c=b[a];f.processFile(c.result,c.fileItem)}};this.getFilesWithFileItems=function(b){return b.files.map(function(a){return{result:a,fileItem:f.prepareFileItem(a,
b.getOAuthContext())}})};this.prepareFileItem=function(b,a){var c=Uploaders.FileList.Model.FileItem.buildItemForFileInCloud(FileInCloudMetadata.create(b,a));c.onRemoveCallback=function(){f.callbacks.onFileRemoved(c.metadata)};return c};this.processFile=function(b,a){b=f.fileValidator.validateFile(b);b.isValid()?(a.markAsCompleted(),f.callbacks.onActionSuccess(a.metadata)):(b=b.getData(),a.setError(b),f.callbacks.onActionError(a.metadata,b))};this.subscribeToPickers()}}(),UploadAreaState=function(){return function(){var c=
this;this.isVisible=ko.observable(!1);this.show=function(){c.isVisible(!0)};this.hide=function(){c.isVisible(!1)}}}(),UploadControl=function(){return function(c,e,f,b,a,d,g){var h=this;this.controllers=c;this.callbacks=e;this.uploadArea=f;this.fileList=b;this.statusCalculator=a;this.metadataManager=d;this.allowToSelectMultipleFiles=g;this.subscribeToControllers=function(){h.controllers.forEach(h.subscribeToController)};this.subscribeToController=function(a){a.subscribe({onInitializationFailure:function(){},
onFilesSelected:h.signalFilesSelection,onActionSuccess:h.signalSuccess,onActionError:h.signalError,onActionAborted:h.signalAbort,onFileRemoved:h.signalFileRemoval})};this.handleStateChange=function(){var a=h.fileList.getFiles();h.metadataManager.replaceFileItems(a);h.handleUploadAreaVisibility();h.callbacks.onStatusChanged&&(a=h.statusCalculator.calculate(a),h.callbacks.onStatusChanged(a))};this.handleUploadAreaVisibility=function(){h.allowToSelectMultipleFiles||0===h.fileList.getFiles().length?h.uploadArea.show():
h.uploadArea.hide()};this.signalFilesSelection=function(a){for(var b=0;b<a.length;b++)h.fileList.addFile(a[b]);h.handleStateChange();h.callbacks.onFilesSelected&&(a=a.map(function(a){return a.metadata}),h.callbacks.onFilesSelected(a))};this.signalSuccess=function(a){h.handleStateChange();if(h.callbacks.onActionSuccess)h.callbacks.onActionSuccess(a)};this.signalError=function(a,b){h.handleStateChange();if(h.callbacks.onActionError)h.callbacks.onActionError(a,b)};this.signalAbort=function(a){h.handleStateChange();
if(h.callbacks.onActionAborted)h.callbacks.onActionAborted(a)};this.signalFileRemoval=function(a){h.handleStateChange();if(h.callbacks.onFileRemoved)h.callbacks.onFileRemoved(a)};this.showFileItemsFromHiddenMetadataField=function(){for(var a=function(a){a.markAsCompleted();h.fileList.addFile(a);a.onRemoveCallback=function(){h.signalFileRemoval(a.metadata);h.handleStateChange()}},b=0,c=h.metadataManager.getFileItems();b<c.length;b++)a(c[b]);h.handleStateChange()};contract.require(!objectState.isNullOrUndefined(this.controllers),
"'controllers' is not defined");contract.require(!objectState.isNullOrUndefined(this.callbacks),"'callbacks' is not defined");contract.require(!objectState.isNullOrUndefined(this.uploadArea),"'uploadArea' is not defined");contract.require(!objectState.isNullOrUndefined(this.fileList),"'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(this.statusCalculator),"'statusManager' is not defined");contract.require(!objectState.isNullOrUndefined(this.metadataManager),"'metadataManager' is not defined");
this.subscribeToControllers();this.showFileItemsFromHiddenMetadataField();this.handleUploadAreaVisibility()}}(),UploadControlCallbacksFinder=function(){function c(c,f){this.callbackNames=c;this.functionFinder=f;contract.require(!objectState.isNullOrUndefined(this.functionFinder),"'functionFinder' is not defined")}c.prototype.getCallbacks=function(){return{onFilesSelected:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFilesSelected:void 0),onActionSuccess:this.functionFinder.getFunctionByName(this.callbackNames?
this.callbackNames.onActionSuccess:void 0),onActionError:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onActionError:void 0),onActionAborted:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onActionAborted:void 0),onFileRemoved:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onFileRemoved:void 0),onStatusChanged:this.functionFinder.getFunctionByName(this.callbackNames?this.callbackNames.onStatusChanged:void 0)}};
return c}(),UploadControlPickerAdapter=function(){function c(c){this.picker=c}c.prototype.show=function(){};c.prototype.hide=function(){};c.prototype.enable=function(){};c.prototype.disable=function(){};c.prototype.open=function(){this.picker.open()};c.prototype.subscribe=function(c){this.picker.subscribe(c)};c.prototype.enableMultipleFilesSelecting=function(){this.picker.enableMultipleFilesSelecting()};c.prototype.disableMultipleFilesSelecting=function(){this.picker.disableMultipleFilesSelecting()};
return c}();
function GoogleDriveUploaderApiInitializer(c,e,f){contract.require(!objectState.isNullOrUndefined(e),"argument 'onReadyCallback' is not defined");var b={pickerApiLoaded:!1,authApiLoaded:!1,oAuthToken:null,retried:!1,onInitializationError:function(a){f&&f(a)},loadAuthApi:function(){c.load("auth",{callback:b.onAuthApiLoaded})},loadPickerApi:function(){c.load("picker",{callback:b.onPickerApiLoaded})},onAuthApiLoaded:function(){b.authApiLoaded=!0;b.ifReadyCallOnReady()},onPickerApiLoaded:function(){b.pickerApiLoaded=!0;
b.ifReadyCallOnReady()},ifReadyCallOnReady:function(){b.pickerApiLoaded&&b.authApiLoaded&&e&&e(c.auth)},initialize:function(){objectState.isNullOrUndefined(c)?(safeConsoleLogger.error("Loading of Google Picker API failed. Most probably https://apis.google.com/js/api.js was block by firewall, proxy or adds blocking software."),b.onInitializationError("gapi is not available")):(b.loadAuthApi(),b.loadPickerApi())}};b.initialize();return{}}
function GoogleDriveUploaderCallbacks(c){var e=FunctionFinder();return{controlInitialized:e.getFunctionByName(c?c.OnControlInitialization:void 0),pickerOpened:e.getFunctionByName(c?c.OnPickerOpened:void 0),fileSelected:e.getFunctionByName(c?c.OnFileSelected:void 0),fileSelectionCanceled:e.getFunctionByName(c?c.OnFileSelectionCanceled:void 0),fileUploadSuccess:e.getFunctionByName(c?c.OnFileUploadSuccess:void 0),fileUploadError:e.getFunctionByName(c?c.OnFileUploadError:void 0),controlInitializationError:e.getFunctionByName(c?
c.OnControlInitializationError:void 0),fileUploadAborted:e.getFunctionByName(c?c.OnFileUploadAborted:void 0)}}function DelayRequest(c){var e={callbacks:[],current:0,signalled:0,running:!1,runCallbacks:function(b){if(!e.running){for(e.running=!0;e.current<e.signalled&&e.current<e.callbacks.length;)e.callbacks[e.current](b),e.current+=1;e.running=!1}}},f={data:c,wait:function(b){e.callbacks.push(b);e.runCallbacks(this);return f},signal:function(){e.signalled+=1;e.runCallbacks(this)}};return f}
function GoogleDriveUploaderControl(c,e,f,b,a,d){contract.require(!objectState.isNullOrUndefined(c),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(e.googleDriveLink),"controls.googleDriveLink is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'literals' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'pickerNamespace' is not defined");
contract.require(!objectState.isNullOrUndefined(a),"argument 'authApi' is not defined");d=d||{};var g={baseDownloadUrl:"https://www.googleapis.com/drive/v2/files/{fileId}?key={developerKey}",pickerBase:null,currentFileId:null,retryAuthorization:!1,oAuthToken:null,disablePickerButton:!1,disableDeletePostbackThreshold:.99,googleDriveSourceType:2,hasCurrentFileUploadEnded:!1,getAuthHeader:function(){return{Authorization:"Bearer "+g.oAuthToken}},initializeBaseDownloadUrl:function(){g.baseDownloadUrl=
g.baseDownloadUrl.replace("{developerKey}",c.developerKey)},setOriginUrlIfNeeded:function(a){objectState.isNullOrUndefined(c.originUrl)||a.setOrigin(c.originUrl)},prepareView:function(a){a=new b.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a},preparePickerBase:function(){var a=new b.PickerBuilder;a.addViewGroup((new b.ViewGroup(g.prepareView(b.ViewId.DOCS))).addView(g.prepareView(b.ViewId.DOCS_IMAGES)).addView(g.prepareView(b.ViewId.DOCS_VIDEOS)).addView(g.prepareView(b.ViewId.DOCUMENTS)).addView(g.prepareView(b.ViewId.DRAWINGS)).addView(g.prepareView(b.ViewId.FOLDERS)).addView(g.prepareView(b.ViewId.PDFS)).addView(g.prepareView(b.ViewId.PHOTOS)).addView(g.prepareView(b.ViewId.PRESENTATIONS)).addView(g.prepareView(b.ViewId.SPREADSHEETS))).setOAuthToken(g.oAuthToken).setDeveloperKey(c.developerKey).setLocale(c.language).setCallback(g.googleDrivePickerCallback);
g.setOriginUrlIfNeeded(a);return a},createPicker:function(a){c.allowMultipleFiles&&h.isMultipleFilesModeEnabled?a.enableFeature(b.Feature.MULTISELECT_ENABLED):a.disableFeature(b.Feature.MULTISELECT_ENABLED);return a.build()},tryAuthorize:function(b,d){a.authorize({client_id:c.clientId,scope:c.scope,immediate:b},function(a){g.onAuthResult(a,d)})},onAuthResult:function(a,b){var c=!1;if(a&&!a.error)g.oAuthToken=a.access_token,c=!0;else{var d=a&&a.error||"some auth error";a=a.error_subtype||"";g.retryAuthorization||
"origin_mismatch"===a?(safeConsoleLogger.error("Authorization of Google Picker API failed. Most probably Platform's subdomain wasn't registered at https://console.developers.google.com."),g.onControlInitializationError(d)):(safeConsoleLogger.warn("Authorization of Google Picker API failed. This might apparently happen when browser uses pop-up blocker. Authorization will be retried on upload button click."),c=g.retryAuthorization=!0)}c&&b&&b()},handleButtonClick:function(){g.disablePickerButton||(g.retryAuthorization?
g.tryAuthorize(!1,g.showPicker):g.showPicker())},showPicker:function(){var a=g.preparePickerBase();g.createPicker(a).setVisible(!0);d.pickerOpened&&d.pickerOpened(h)},bindPickerToLinkClick:function(){e.googleDriveLink.click(g.handleButtonClick)},initialize:function(a){g.tryAuthorize(!0,function(){g.bindPickerToLinkClick();g.initializeBaseDownloadUrl();d.controlInitialized&&d.controlInitialized(a)})},googleDrivePickerCallback:function(a){switch(a.action){case b.Action.PICKED:g.onFileSelected(a);break;
case b.Action.CANCEL:g.onFileSelectionCanceled(a)}},getFileDownloadUrl:function(a){return g.baseDownloadUrl.replace("{fileId}",a[b.Document.ID])},getFileInfo:function(a){var b={fileId:null,size:null,name:null};b.fileId=guidFactory.newGuid();1===a.length?(b.size=a[0].size,b.name=a[0].name):(b.size=a.reduce(function(a,b){return a+b.size},0),b.name=f.files);return b},getParameterValue:function(a,b){for(var c=[],d=a.slice(a.indexOf("?")+1).split("&"),e=0;e<d.length;e++)a=d[e].split("="),c.push(a[0]),
c[a[0]]=a[1];return c[b]},signalIfDoneProcessing:function(a){a.processed+=1;a.processed>=a.total&&a.delayed.signal()},getMetadataUrl:function(a){return a.isSpreadSheet?c.googleDriveProxy+encodeURIComponent(a.url):a.url},getFileSize:function(a){var b=0;a=$.ajax({url:g.getMetadataUrl(a),type:"HEAD",data:"",async:!1});200==a.status&&(b=parseInt(a.getResponseHeader("Content-Length")));return b},checkFileSize:function(a){0==a.size&&(a.size=this.getFileSize(a))},getDownloadUrl:function(a,b){$.ajax({url:g.getMetadataUrl(a),
type:"GET",data:"",headers:g.getAuthHeader(),async:!1,success:function(c){if(c.downloadUrl)a.url=c.downloadUrl+"&access_token="+g.oAuthToken;else if(c.exportLinks&&c.exportLinks[Object.keys(c.exportLinks)[0]]){var d=c.exportLinks["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":c.exportLinks["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":
c.exportLinks["image/png"]?"image/png":c.exportLinks["application/vnd.openxmlformats-officedocument.presentationml.presentation"]?"application/vnd.openxmlformats-officedocument.presentationml.presentation":c.exportLinks["application/pdf"]?"application/pdf":Object.keys(c.exportLinks)[0];a.url=c.exportLinks[d]+"&access_token="+g.oAuthToken;if(d=g.getParameterValue(a.url,"exportFormat"))a.name+="."+d}a.thumbnailUrl=c.thumbnailLink;g.checkFileSize(a);g.signalIfDoneProcessing(b)},error:function(){g.signalIfDoneProcessing(b)}})},
onFileSelected:function(a){g.disablePickerButton||(g.disablePickerButton=!0,g.getFileMetadataFromGoogleDriveResponse(a).wait(g.getDownloadUrlForFiles).wait(g.executeFileSelectedCallback))},getFileMetadataFromGoogleDriveResponse:function(a){a=DelayRequest({request:g.prepareFileMetadata(a)});a.signal();return a},prepareFileMetadata:function(a){var c={sourceType:g.googleDriveSourceType,files:null};c.files=a[b.Response.DOCUMENTS].map(function(a){return{url:g.getFileDownloadUrl(a),name:a[b.Document.NAME],
size:a.sizeBytes,isSpreadSheet:"application/vnd.google-apps.spreadsheet"===a.mimeType,fileId:a[b.Document.ID],type:a[b.Document.MIME_TYPE],icon:a[b.Document.ICON_URL]}});g.hasCurrentFileUploadEnded=!1;return c},executeFileSelectedCallback:function(a){a=a.data.request.files;void 0!==d.fileSelected&&d.fileSelected(a)},getDownloadUrlForFiles:function(a){var b=a.data.request.files,c={total:b.length,processed:0,delayed:a};b.forEach(function(a){g.getDownloadUrl(a,c)})},onControlInitializationError:function(a){d.controlInitializationError&&
d.controlInitializationError(a)},onFileSelectionCanceled:function(a){d.fileSelectionCanceled&&d.fileSelectionCanceled()},setUploaderButtonDisplay:function(a){a?e.googleDriveLink.show():e.googleDriveLink.hide()}},h={isMultipleFilesModeEnabled:!0,hideUploaderButton:function(){g.setUploaderButtonDisplay(!1)},showUploaderButton:function(){g.setUploaderButtonDisplay(!0)},enableMultipleFilesMode:function(){h.isMultipleFilesModeEnabled=!0},disableMultipleFilesMode:function(){h.isMultipleFilesModeEnabled=
!1},enablePickerButton:function(){g.disablePickerButton=!1}};g.initialize(h);return h}
function GoogleDriveUploaderSettings(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'settings' is not defined");var e={getRegExp:function(c){if(c instanceof RegExp)return c;c=c.split("/");var b=c.pop();c.shift();return new RegExp(c.join("/"),b)},getBoolean:function(c){return/^true$/i.test(c)}};return{maxFileSize:parseInt(c.MaxFileSize),minFileSize:parseInt(c.MinFileSize||0),developerKey:c.DeveloperKey,clientId:c.ClientId,scope:c.Scope,immediate:e.getBoolean(c.Immediate),allowMultipleFiles:e.getBoolean(c.AllowMultipleFiles),
uploadUrl:c.UploadUrl,googleDriveProxy:c.GoogleDriveProxy,disableDeletePostBackAfterUpload:e.getBoolean(c.DisableDeletePostBackAfterUpload),readOnlyMode:e.getBoolean(c.ReadOnlyMode),uploadStateServiceEndpoint:c.UploadStateServiceEndpoint,originUrl:c.OriginUrl,pickerProxyMode:e.getBoolean(c.PickerProxyMode),language:c.Language}}
function GoogleDriveUploaderControlInitialization(c,e,f,b){var a={onReadyCallback:function(a){GoogleDriveUploaderControl(c,f,e,google.picker,a,b)},initialize:function(){GoogleDriveUploaderApiInitializer(window.gapi,a.onReadyCallback,b.controlInitializationError)}};a.initialize()}
function GoogleDriveUploaderControls(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'controls' is not defined");var e={getJQuerySafeId:function(c){return"#"+c.replace(/(:|\.|\[|\])/g,"\\$1")},jQElementExists:function(c){return 0<c.length},getJQElement:function(c,b){c=e.getJQuerySafeId(c);c=$(c);if(e.jQElementExists(c))return c;if(void 0!==b)throw b;}};return{googleDriveLink:e.getJQElement(c.GoogleDriveLink,"GoogleDriveLink not found"),fileList:e.getJQElement(c.FileList,"FileList not found")}}
function GoogleDriveUploaderLiterals(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'translations' is not defined");var e={chooseFromGoogleDrive:c.ChooseFromGoogleDrive,kb:c.Kb,mb:c.Mb,unknown:c.Unknown,files:c.Files,getFormattedFileSize:function(c){return objectState.isNumber(c)?1048576<=c?(c/1048576).toFixed(2)+" "+e.mb:(c/1024).toFixed(2)+" "+e.kb:""}};return e}
(function(c){var e=function(){return function(e){var b=this;this.showDialog=function(){c.UploadControlUtils.isMobile()&&(b.lastScroll=$(window).scrollTop(),c.UploadControlUtils.toggleTopFrameAndMobileOverlay(!1));b.isDialogVisible(!0);c.UploadControlUtils.isMobile()||b.focusFirstPicker()};this.hideDialog=function(){c.UploadControlUtils.toggleTopFrameAndMobileOverlay(!0);b.isDialogVisible(!1);c.UploadControlUtils.isMobile()&&($(window).scrollTop(b.lastScroll),$(".ccl-uc-dropzone-container").focus())};
this.focusFirstPicker=function(){$("#ccl-uc-file-dialog-container button")[1].focus()};contract.require(!objectState.isNullOrUndefined(e),"This ViewModel requires uploadAreaState to be passed. Please provide it.");this.isDialogVisible=ko.observable(!1);this.isUploadAreaVisible=ko.pureComputed(function(){return e.isVisible()})}}();c.UploadAreaViewModel=e})(Components||(Components={}));var uploaderSenderOptionsConstants={fileRepoData:"fileRepoData"};
function FileRepoErrorResponseTranslator(c){contract.require(!objectState.isNullOrUndefined(c),"argument 'errorTranslations' is not defined");var e={getErrorMessageFromResponse:function(c){try{var b=c.xhr()}catch(a){return null}return e.getErrorMessageFromXhr(b)},getErrorMessageFromXhr:function(c){try{var b=JSON.parse(c.responseText).error}catch(a){return null}return e.getErrorMessageFromErrorCode(b)},getErrorMessageFromErrorCode:function(e){return null==e?null:c[e]}};return e}
var UploadControlFactory=function(){function c(c,f,b,a,d,g){this.uploadAreaContainerId=c;this.settings=f;this.callbackFinder=b;this.translations=a;this.metadataField=d;this.fileRepoData=g}c.prototype.build=function(){this.setStaticTranslations();var c=(new PickerObjectsFactory(this.settings,this.translations)).build(),f=c[0],b=c[1],a=c[2];c=c[3];var d=f.concat(b,a);this.initializeDialogComponent(c,d);c=new UploadAreaState;this.initializeUploadAreaComponent(c);d=new Uploaders.FileList.Components.FileListViewModel(this.settings.FileListSettings);
this.initializeFileListComponent(d);ko.applyBindings(null,window.document.getElementById(this.uploadAreaContainerId));var g=new PickerFileResultValidatorLiterals(this.translations),h=new UploadStatusCalculator,k=new HiddenMetadataManager(this.metadataField),l=this.callbackFinder.getCallbacks(),m=new ActionQueue(this.settings.MaximumNumberOfConcurrentUploads),n=PickerFileResultValidatorFactory.create(this.settings.ValidationSettings,g),p=this.getSender();f=new UploadController(f.map(function(a){return new UploadControlPickerAdapter(a)}),
p,n,m);a=this.getFolderController(a,n,m);g=PickerFileResultValidatorFactory.createValidatorForLinkedFilesInCloud(this.settings.ValidationSettings.MaxFileNameLength,this.settings.ValidationSettings.AllowedFileExtensions,this.settings.ValidationSettings.ForbiddenFileExtensions,g);b=new FilesInCloudController(b,g);return new UploadControl([f,a,b],l,c,d,h,k,this.settings.AllowToSelectMultipleFiles)};c.prototype.setStaticTranslations=function(){UploadControlTranslation.computerOrDevice=this.translations.ComputerOrDevice;
UploadControlTranslation.folder=this.translations.Folder;UploadControlTranslation.googleDrive=this.translations.GoogleDrive;UploadControlTranslation.dropbox=this.translations.Dropbox;UploadControlTranslation.oneDrive=this.translations.OneDrive;UploadControlTranslation.someFilesInThatFolderCannotBeUploaded=this.translations.SomeFilesInThatFolderCannotBeUploaded;UploadControlTranslation.addFiles=this.translations.AddFiles;UploadControlTranslation.orSimplyDropThemHere=this.translations.OrSimplyDropThemHere;
UploadControlTranslation.uploadFileFrom=this.translations.ColumnFileFrom;UploadControlTranslation.uploadFileFromMobile=this.translations.ColumnFileFromMobile;UploadControlTranslation.or=this.translations.Or;UploadControlTranslation.cancel=this.translations.Cancel;UploadControlTranslation.linkTo=this.translations.ColumnLinkTo;UploadControlTranslation.linkToMobile=this.translations.ColumnLinkToMobile;UploadControlTranslation.cloudServiceUnavailable=this.translations.CloudServiceUnavailable;UploadControlTranslation.tryAgainOrContactAdministrator=
this.translations.TryAgainOrContactAdministrator;UploadControlTranslation.edit=this.translations.Edit;UploadControlTranslation.view=this.translations.View;UploadControlTranslation.rename=this.translations.Rename;UploadControlTranslation.download=this.translations.Download};c.prototype.initializeDialogComponent=function(c,f){c=new Components.Dialog.DialogComponent(c,f);ko.components.register(c.name,c)};c.prototype.initializeUploadAreaComponent=function(c){c=new Components.UploadAreaComponent(c);ko.components.register(c.name,
c)};c.prototype.initializeFileListComponent=function(c){var e=new Uploaders.FileList.Components.ContextMenu.ContextMenuComponent;ko.components.register(e.name,e);c=new Uploaders.FileList.Components.FileListComponent(c,"file-list");ko.components.register(c.name,c)};c.prototype.getSender=function(){var c=new GenericUploader.Sender.FileRepoSenderForLocalFiles.Factory(browserSniffer,FileRepoErrorResponseTranslator({}),this.fileRepoData),f=new GenericUploader.Sender.FileRepoSenderForExternalFiles.Factory(browserSniffer,
FileRepoErrorResponseTranslator({}),{uploadStateServiceEndpoint:this.settings.UploadStateServiceEndpoint,fileRepoData:this.fileRepoData});return new GenericUploader.Sender.FileRepoSender(c,f)};c.prototype.getFolderController=function(c,f,b){var a=this.getFolderSenderFactory(),d={maxFileNameLength:this.settings.ValidationSettings.MaxFileNameLength},e={fileNameIsTooLong:this.translations.FileNameIsTooLong};d=(new FolderValidatorFactory).createFileValidatorWithLocalizedMessages(d,e);f=new FolderBuilder(f,
d);return new FolderController(c.map(function(a){return new UploadControlPickerAdapter(a)}),a,f,b)};c.prototype.getFolderSenderFactory=function(){var c=new GenericUploader.Sender.FileRepoSenderForLocalFiles.Factory(browserSniffer,FileRepoErrorResponseTranslator({}),this.fileRepoData);return new GenericUploader.Sender.FileRepoSenderForLocalFolders.Factory(c)};return c}();
