(function(){function n(a){0<$(a.target).parents(".js-menuitem--dropdown").length||(p(),$(".js-menuitem--dropdown > div").hide(),h&&$(".js-menuitem--dropdown.active div.active-shadow").toggle(),h=!1)}function q(a){p();$(".js-menuitem--dropdown > div").hide();h&&$(".js-menuitem--dropdown.active div.active-shadow").toggle();h=!1}function u(a){0===$(a.target).parents(".c-dropdown").length&&$(this).parents(".js-menuitem--dropdown").find(".c-dropdown-menu").hide()}function p(){$("body").get(0).removeEventListener(k,
n,!0);$(document).off(r,q)}function t(a,c){var b=!1;a.each(function(a,f){-1==$(f).data().title.toString().toLowerCase().indexOf(c)?$(f).hide():($(f).show(),b=!0)});return b}function l(a,c,b){var e=coursesSortDropdownScope.kpi;CommonFunctions.measureKpi(e.url,e.section,e.measures[c],e.context);b=b||!1;a.sort(function(a,d){a=a.getAttribute("data-"+c).toLowerCase();d=d.getAttribute("data-"+c).toLowerCase();"title"!==c&&(a=parseInt(a),d=parseInt(d));if(b){if(a>d)return-1;if(a<d)return 1}else{if(a>d)return 1;
if(a<d)return-1}return 0})}var m=!1,v=CCL.CommonConstants.keyCodes.escape,w=CCL.CommonConstants.mediaScreenSizes.mobile,h,g=$(".js-menuitem--dropdown");document.hideDropDowns=hideDropDowns=function(){$(".js-menuitem--dropdown > div").hide();$(".js-menuitem--dropdown.active div.active-shadow").show();$("ul.l-main-menu-items li.l-tab-menu-text a.l-main-menu-lnk").removeClass("hover")};var k=CCL.CommonFunctions.isMobileDevice()?"touchstart":"click",r=CCL.CommonFunctions.isMobileDevice()?CommonTriggers.touchstartInInnerFrame:
CommonTriggers.clickInInnerFrame;g.find(".js-titlesFilter").on("keyup",function(a){var c=$(a.currentTarget),b=c.parents("div[data-dropdown]"),e=b.find("[data-title]");c=c.parent().find(".js-titlesFilter__clear");var f=b.find(".c-dropdownMenu__empty"),d=b.find(".c-dropdownMenu__content"),x=a.currentTarget.value;if(a.which==v)f.hide(),d.show(),e.each(function(a,b){$(b).show()}),a.currentTarget.value="",c.hide();else{var y=!1;a=a.currentTarget.value.toLowerCase();(y=t(e,a))?(f.hide(),d.show()):(f.show(),
d.hide());0===x.length?c.hide():c.show();b.find(".js-content").perfectScrollbar("update");b=coursesSortDropdownScope.kpi;CommonFunctions.measureKpi(b.url,b.section,b.measures.search,b.context)}});g.find(".js-titlesFilter__clear").on(k,function(a){a=$(a.currentTarget).parents("div[data-dropdown]");a.find("[data-title]").each(function(a,b){$(b).show()});a.find(".c-dropdownMenu__empty").hide();a.find(".c-dropdownMenu__content").show();a.find(".js-titlesFilter").val("");a.find(".js-content").perfectScrollbar("update");
$(this).hide()});g.children("a[data-action]").on(k,function(a){var c=$(a.currentTarget);if(!c.parents("li.l-more-menu-btn").length){a.preventDefault();var b=c.next();if(b.is(":visible"))b.hide(),$(".js-menuitem--dropdown.active div.active-shadow").show(),h=!1;else if($(".ccl-context-dialog").not(b).not(".static").hide(),"false"===$(".c-messages-popup").attr("aria-hidden")&&$(".c-messages__overlay").click(),b.show(),$(document).on(r,q),$("body").get(0).addEventListener(k,n,!0),(h=c.parent().hasClass("active"))?
$(".js-menuitem--dropdown.active div.active-shadow").toggle():$(".js-menuitem--dropdown.active div.active-shadow").show(),b.attr("aria-hidden",!1),$(".ccl-context-dialog").not(b).not(".static").attr("aria-hidden",!0),a=b.hasClass("js-onboarding"),!(0<b.find(".js-content").length||m||a)){m=!0;c=c.data("action");var e=b.find(".c-spinner-bounce");a=b.data("dropdown");var f=b.data("personid"),d=JSON.parse(localStorage.getItem(a+"_"+f));null!==d&&(a=b.find(".c-dropdown-toggle"),"undefined"!==typeof coursesSortDropdownScope&&
a.html(coursesSortDropdownScope.langTerms[d.sortField]));$.get("/TopMenu/TopMenu/"+c).then(function(a){e.hide();b.append(a);a=b.find("[data-title]");var c=b.find(".js-titlesFilter");c.length&&""!==c.val()&&t(a,c.val().toLowerCase());5<a.length?(b.find(".c-search").css("visibility","visible"),b.find(".c-dropdown").css("visibility","visible")):d&&(d.sortField="lastUpdated");c=b.find(".js-content");c.perfectScrollbar({suppressScrollX:!0});c.find(".ps-scrollbar-y-rail").css("opacity",.6);b.find(".js-content").perfectScrollbar("update");
m=!1;$(".js-menuitem--dropdown").find(".c-dropdownMenu, .c-dropdownMenu__content").on(k,u);null!==d&&(c="title"===d.sortField?a.find('[data-column="lastUpdated"]'):a.find('[data-column="'+d.sortField+'"]'),c.siblings("[data-column]").hide(),c.show(),"title"===d.sortField?l(a,d.sortField):l(a,d.sortField,!0),a.detach().appendTo(b.find(".c-dropdownMenu__content > ul")))})}}});g.find(".c-dropdown-toggle").on(k,function(a){$(a.currentTarget).next().toggle()});g.find(".c-dropdown").on("mouseleave",function(a){$(this).children(".c-dropdown-menu").hide()});
g.find(".c-dropdown-menu a").on("click",function(a){var c=$(a.currentTarget);a=c.parents(".c-dropdownMenu");var b=c.parents(".c-dropdown").children(".c-dropdown-toggle"),e=a.find("[data-title]"),f=a.data("dropdown"),d=a.data("personid");f=f+"_"+d;JSON.parse(localStorage.getItem(f));b.text(c.text());c=c.data("sort");localStorage.setItem(f,JSON.stringify({sortField:c}));b="title"===c?e.find('[data-column="lastUpdated"]'):e.find('[data-column="'+c+'"]');b.siblings("[data-column]").hide();b.show();"title"===
c?l(e,c):l(e,c,!0);e.detach().appendTo(a.find(".c-dropdownMenu__content > ul"));a.find(".c-dropdown-menu").slideUp()});g.find(".c-dropdown a").on("blur",function(a){var c=$(a.relatedTarget),b=$(a.currentTarget),e=$(":focus"),f=b.parents(".c-dropdown");null===a.relatedTarget?0===f.find(e).length&&b.parents(".c-dropdown").find(".c-dropdown-menu").hide():0===c.parents(".c-dropdown").length&&b.parents(".c-dropdown").find(".c-dropdown-menu").hide()});var z=new CCL.CallbackDebouncer(function(a){$(window).width()<=
w&&hideDropDowns()});$(window).on("resize",function(){z.invokeCallback(null,100)})})();
